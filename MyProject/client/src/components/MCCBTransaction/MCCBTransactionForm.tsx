// <auto-generated>
//     This code was generated by TargCC Component Generator.
//     Table: MCCBTransaction
//     Generated: 2025-12-17 08:16:17
// </auto-generated>

import React, { useEffect } from 'react';
import { useNavigate, useParams } from 'react-router-dom';
import { useForm } from 'react-hook-form';
import { TextField, Button, Box, CircularProgress, Checkbox, FormControlLabel } from '@mui/material';
import { useMCCBTransaction, useCreateMCCBTransaction, useUpdateMCCBTransaction } from '../../hooks/useMCCBTransaction';
import type { CreateMCCBTransactionRequest, UpdateMCCBTransactionRequest } from '../../types/MCCBTransaction.types';


export const MCCBTransactionForm: React.FC = () => {
  const navigate = useNavigate();
  const { id } = useParams<{ id: string }>();
  const mCCBTransactionId = id && id !== 'new' ? Number(id) : undefined;
  const isEdit = !!mCCBTransactionId;

  const { data: existingMCCBTransaction, isPending: isLoadingEntity } = useMCCBTransaction(mCCBTransactionId || null);

  const {
    register,
    handleSubmit,
    reset,
    formState: { errors },
  } = useForm<CreateMCCBTransactionRequest>({
    defaultValues: {
    },
  });

  // Update form when data loads
  useEffect(() => {
    if (existingMCCBTransaction) {
      reset(existingMCCBTransaction);
    }
  }, [existingMCCBTransaction, reset]);

  const { mutate: createEntity, isPending: isCreating } = useCreateMCCBTransaction();
  const { mutate: updateEntity, isPending: isUpdating } = useUpdateMCCBTransaction();

  const isSubmitting = isCreating || isUpdating;

  const onSubmit = (data: CreateMCCBTransactionRequest) => {
    if (isEdit && mCCBTransactionId) {
      updateEntity(
        { id: mCCBTransactionId, data: data as UpdateMCCBTransactionRequest },
        { onSuccess: () => navigate('/mCCBTransactions') }
      );
    } else {
      createEntity(data, { onSuccess: () => navigate('/mCCBTransactions') });
    }
  };

  if (isEdit && isLoadingEntity) {
    return <CircularProgress />;
  }

  return (
    <Box component="form" onSubmit={handleSubmit(onSubmit)} sx={{ maxWidth: 600 }}>
      <FormControlLabel
        control={<Checkbox {...register('tableNameMCCBTransaction')} />}
        label="TableNameMCCBTransaction"
      />

      <TextField
        label="CustomerID"
        type="number"
        fullWidth
        margin="normal"
        {...register('customerID', { required: 'CustomerID is required', maxLength: { value: 8, message: 'Maximum length is 8' } })}
        error={!!errors.customerID}
        helperText={errors.customerID?.message}
      />

      <TextField
        label="EnmPaymentMode"
        type="text"
        fullWidth
        margin="normal"
        {...register('enmPaymentMode', { maxLength: { value: 50, message: 'Maximum length is 50' } })}
        error={!!errors.enmPaymentMode}
        helperText={errors.enmPaymentMode?.message}
      />

      <TextField
        label="AmountILSDisplayed"
        type="number"
        fullWidth
        margin="normal"
        {...register('amountILSDisplayed', { maxLength: { value: 9, message: 'Maximum length is 9' } })}
        error={!!errors.amountILSDisplayed}
        helperText={errors.amountILSDisplayed?.message}
      />

      <TextField
        label="AmountILSCalculated"
        type="number"
        fullWidth
        margin="normal"
        {...register('amountILSCalculated', { maxLength: { value: 9, message: 'Maximum length is 9' } })}
        error={!!errors.amountILSCalculated}
        helperText={errors.amountILSCalculated?.message}
      />

      <TextField
        label="AmountILSAddedToFee"
        type="number"
        fullWidth
        margin="normal"
        {...register('amountILSAddedToFee', { maxLength: { value: 9, message: 'Maximum length is 9' } })}
        error={!!errors.amountILSAddedToFee}
        helperText={errors.amountILSAddedToFee?.message}
      />

      <TextField
        label="PayoutAmount"
        type="number"
        fullWidth
        margin="normal"
        {...register('payoutAmount', { maxLength: { value: 9, message: 'Maximum length is 9' } })}
        error={!!errors.payoutAmount}
        helperText={errors.payoutAmount?.message}
      />

      <TextField
        label="PayoutCurrency"
        type="text"
        fullWidth
        margin="normal"
        {...register('payoutCurrency', { maxLength: { value: 3, message: 'Maximum length is 3' } })}
        error={!!errors.payoutCurrency}
        helperText={errors.payoutCurrency?.message}
      />

      <TextField
        label="DisplayedFee"
        type="number"
        fullWidth
        margin="normal"
        {...register('displayedFee', { maxLength: { value: 9, message: 'Maximum length is 9' } })}
        error={!!errors.displayedFee}
        helperText={errors.displayedFee?.message}
      />

      <TextField
        label="DisplayedExchangeRate"
        type="number"
        fullWidth
        margin="normal"
        {...register('displayedExchangeRate', { maxLength: { value: 9, message: 'Maximum length is 9' } })}
        error={!!errors.displayedExchangeRate}
        helperText={errors.displayedExchangeRate?.message}
      />

      <TextField
        label="TransactionReference"
        type="text"
        fullWidth
        margin="normal"
        {...register('transactionReference', { maxLength: { value: 50, message: 'Maximum length is 50' } })}
        error={!!errors.transactionReference}
        helperText={errors.transactionReference?.message}
      />

      <TextField
        label="ICPTransactionFee"
        type="number"
        fullWidth
        margin="normal"
        {...register('iCPTransactionFee', { maxLength: { value: 9, message: 'Maximum length is 9' } })}
        error={!!errors.iCPTransactionFee}
        helperText={errors.iCPTransactionFee?.message}
      />

      <TextField
        label="EnmSettlementCurrencyCurrency"
        type="text"
        fullWidth
        margin="normal"
        {...register('enmSettlementCurrencyCurrency', { maxLength: { value: 3, message: 'Maximum length is 3' } })}
        error={!!errors.enmSettlementCurrencyCurrency}
        helperText={errors.enmSettlementCurrencyCurrency?.message}
      />

      <TextField
        label="ICPILSToSettlementER"
        type="number"
        fullWidth
        margin="normal"
        {...register('iCPILSToSettlementER', { maxLength: { value: 9, message: 'Maximum length is 9' } })}
        error={!!errors.iCPILSToSettlementER}
        helperText={errors.iCPILSToSettlementER?.message}
      />

      <TextField
        label="MCFeeInSettlementCurrency"
        type="number"
        fullWidth
        margin="normal"
        {...register('mCFeeInSettlementCurrency', { maxLength: { value: 9, message: 'Maximum length is 9' } })}
        error={!!errors.mCFeeInSettlementCurrency}
        helperText={errors.mCFeeInSettlementCurrency?.message}
      />

      <TextField
        label="MCPayoutToSettlementER"
        type="number"
        fullWidth
        margin="normal"
        {...register('mCPayoutToSettlementER', { maxLength: { value: 9, message: 'Maximum length is 9' } })}
        error={!!errors.mCPayoutToSettlementER}
        helperText={errors.mCPayoutToSettlementER?.message}
      />

      <TextField
        label="MCChargedAmount"
        type="number"
        fullWidth
        margin="normal"
        {...register('mCChargedAmount', { maxLength: { value: 9, message: 'Maximum length is 9' } })}
        error={!!errors.mCChargedAmount}
        helperText={errors.mCChargedAmount?.message}
      />

      <TextField
        label="MCPrincipleAmount"
        type="number"
        fullWidth
        margin="normal"
        {...register('mCPrincipleAmount', { maxLength: { value: 9, message: 'Maximum length is 9' } })}
        error={!!errors.mCPrincipleAmount}
        helperText={errors.mCPrincipleAmount?.message}
      />

      <TextField
        label="ProposalExpiry"
        type="date"
        fullWidth
        margin="normal"
        InputLabelProps={{ shrink: true }}
        {...register('proposalExpiry', { maxLength: { value: 10, message: 'Maximum length is 10' } })}
        error={!!errors.proposalExpiry}
        helperText={errors.proposalExpiry?.message}
      />

      <TextField
        label="PaymentId"
        type="text"
        fullWidth
        margin="normal"
        {...register('paymentId', { maxLength: { value: 50, message: 'Maximum length is 50' } })}
        error={!!errors.paymentId}
        helperText={errors.paymentId?.message}
      />

      <TextField
        label="PaymentPurpose"
        type="text"
        fullWidth
        margin="normal"
        {...register('paymentPurpose', { maxLength: { value: 200, message: 'Maximum length is 200' } })}
        error={!!errors.paymentPurpose}
        helperText={errors.paymentPurpose?.message}
      />

      <TextField
        label="PaymentStatus"
        type="text"
        fullWidth
        margin="normal"
        {...register('paymentStatus', { maxLength: { value: 50, message: 'Maximum length is 50' } })}
        error={!!errors.paymentStatus}
        helperText={errors.paymentStatus?.message}
      />

      <TextField
        label="PaymentStatusTimestamp"
        type="date"
        fullWidth
        margin="normal"
        InputLabelProps={{ shrink: true }}
        {...register('paymentStatusTimestamp', { maxLength: { value: 10, message: 'Maximum length is 10' } })}
        error={!!errors.paymentStatusTimestamp}
        helperText={errors.paymentStatusTimestamp?.message}
      />

      <TextField
        label="PaymentPendingStage"
        type="text"
        fullWidth
        margin="normal"
        {...register('paymentPendingStage', { maxLength: { value: 50, message: 'Maximum length is 50' } })}
        error={!!errors.paymentPendingStage}
        helperText={errors.paymentPendingStage?.message}
      />

      <TextField
        label="PaymentPendingMaxCompletionDate"
        type="date"
        fullWidth
        margin="normal"
        InputLabelProps={{ shrink: true }}
        {...register('paymentPendingMaxCompletionDate', { maxLength: { value: 10, message: 'Maximum length is 10' } })}
        error={!!errors.paymentPendingMaxCompletionDate}
        helperText={errors.paymentPendingMaxCompletionDate?.message}
      />

      <TextField
        label="RawDataPayment"
        type="text"
        fullWidth
        margin="normal"
        {...register('rawDataPayment', {  })}
        error={!!errors.rawDataPayment}
        helperText={errors.rawDataPayment?.message}
      />

      <TextField
        label="RawDataQuote"
        type="text"
        fullWidth
        margin="normal"
        {...register('rawDataQuote', {  })}
        error={!!errors.rawDataQuote}
        helperText={errors.rawDataQuote?.message}
      />

      <TextField
        label="Comments"
        type="text"
        fullWidth
        margin="normal"
        {...register('comments', { maxLength: { value: 8000, message: 'Maximum length is 8000' } })}
        error={!!errors.comments}
        helperText={errors.comments?.message}
      />

      <TextField
        label="DeletedBy"
        type="text"
        fullWidth
        margin="normal"
        {...register('deletedBy', { maxLength: { value: 100, message: 'Maximum length is 100' } })}
        error={!!errors.deletedBy}
        helperText={errors.deletedBy?.message}
      />

      <TextField
        label="DeletedOn"
        type="date"
        fullWidth
        margin="normal"
        InputLabelProps={{ shrink: true }}
        {...register('deletedOn', { maxLength: { value: 8, message: 'Maximum length is 8' } })}
        error={!!errors.deletedOn}
        helperText={errors.deletedOn?.message}
      />

      <TextField
        label="UpdatingLoginID"
        type="number"
        fullWidth
        margin="normal"
        {...register('updatingLoginID', { maxLength: { value: 8, message: 'Maximum length is 8' } })}
        error={!!errors.updatingLoginID}
        helperText={errors.updatingLoginID?.message}
      />

      <TextField
        label="MCCBReceiverID"
        type="number"
        fullWidth
        margin="normal"
        {...register('mCCBReceiverID', { maxLength: { value: 8, message: 'Maximum length is 8' } })}
        error={!!errors.mCCBReceiverID}
        helperText={errors.mCCBReceiverID?.message}
      />

      <TextField
        label="RequestedTransactionID"
        type="number"
        fullWidth
        margin="normal"
        {...register('requestedTransactionID', { maxLength: { value: 8, message: 'Maximum length is 8' } })}
        error={!!errors.requestedTransactionID}
        helperText={errors.requestedTransactionID?.message}
      />

      <TextField
        label="ProposalId"
        type="text"
        fullWidth
        margin="normal"
        {...register('proposalId', { maxLength: { value: 50, message: 'Maximum length is 50' } })}
        error={!!errors.proposalId}
        helperText={errors.proposalId?.message}
      />

      <TextField
        label="MCCBReceiverAccountID"
        type="number"
        fullWidth
        margin="normal"
        {...register('mCCBReceiverAccountID', { maxLength: { value: 8, message: 'Maximum length is 8' } })}
        error={!!errors.mCCBReceiverAccountID}
        helperText={errors.mCCBReceiverAccountID?.message}
      />

      <TextField
        label="RawDataStatus"
        type="text"
        fullWidth
        margin="normal"
        {...register('rawDataStatus', {  })}
        error={!!errors.rawDataStatus}
        helperText={errors.rawDataStatus?.message}
      />

      <FormControlLabel
        control={<Checkbox {...register('fundsTakenByICP')} />}
        label="FundsTakenByICP"
      />

      <FormControlLabel
        control={<Checkbox {...register('fundsRefundedByICP')} />}
        label="FundsRefundedByICP"
      />



      <Box sx={{ mt: 2, display: 'flex', gap: 2 }}>
        <Button type="submit" variant="contained" disabled={isSubmitting}>
          {isEdit ? 'Update' : 'Create'}
        </Button>
        <Button variant="outlined" onClick={() => navigate('/mCCBTransactions')}>
          Cancel
        </Button>
      </Box>
    </Box>
  );
};

