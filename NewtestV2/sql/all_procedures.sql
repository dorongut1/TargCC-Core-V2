-- =========================================
-- ccvwComboList Views for Dropdown Lookups
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

-- ccvwComboList view for _report2
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList__report2')
    DROP VIEW [ccvwComboList__report2]
GO

CREATE VIEW [ccvwComboList__report2]
WITH SCHEMABINDING
AS
SELECT
    [RowNumber] AS ID,
    [ApplicationName] AS Text,
    REPLACE(REPLACE(REPLACE([ApplicationName], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[_report2]

GO

-- ccvwComboList view for ActiveRestrictions
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_ActiveRestrictions')
    DROP VIEW [ccvwComboList_ActiveRestrictions]
GO

CREATE VIEW [ccvwComboList_ActiveRestrictions]
WITH SCHEMABINDING
AS
SELECT
    [ID] AS ID,
    [enmEntityType] AS Text,
    REPLACE(REPLACE(REPLACE([enmEntityType], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[ActiveRestrictions]

GO

-- ccvwComboList view for BackofficeTransaction
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_BackofficeTransaction')
    DROP VIEW [ccvwComboList_BackofficeTransaction]
GO

CREATE VIEW [ccvwComboList_BackofficeTransaction]
WITH SCHEMABINDING
AS
SELECT
    [ID] AS ID,
    [enmBackofficeTransactionType] AS Text,
    REPLACE(REPLACE(REPLACE([enmBackofficeTransactionType], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[BackofficeTransaction]

GO

-- ccvwComboList view for Card
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_Card')
    DROP VIEW [ccvwComboList_Card]
GO

CREATE VIEW [ccvwComboList_Card]
WITH SCHEMABINDING
AS
SELECT
    [ID] AS ID,
    [CardHolderName] AS Text,
    REPLACE(REPLACE(REPLACE([CardHolderName], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[Card]

GO

-- ccvwComboList view for CardActivation
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_CardActivation')
    DROP VIEW [ccvwComboList_CardActivation]
GO

CREATE VIEW [ccvwComboList_CardActivation]
WITH SCHEMABINDING
AS
SELECT
    [ID] AS ID,
    [WitnessFirstName] AS Text,
    REPLACE(REPLACE(REPLACE([WitnessFirstName], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[CardActivation]

GO

-- ccvwComboList view for CardClub
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_CardClub')
    DROP VIEW [ccvwComboList_CardClub]
GO

CREATE VIEW [ccvwComboList_CardClub]
WITH SCHEMABINDING
AS
SELECT
    [ID] AS ID,
    [ClubName] AS Text,
    REPLACE(REPLACE(REPLACE([ClubName], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[CardClub]

GO

-- ccvwComboList view for CardIssuer
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_CardIssuer')
    DROP VIEW [ccvwComboList_CardIssuer]
GO

CREATE VIEW [ccvwComboList_CardIssuer]
WITH SCHEMABINDING
AS
SELECT
    [TableName_CardIssuer] AS ID,
    [Name] AS Text,
    REPLACE(REPLACE(REPLACE([Name], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[CardIssuer]

GO

-- ccvwComboList view for CardOrderByDistributor
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_CardOrderByDistributor')
    DROP VIEW [ccvwComboList_CardOrderByDistributor]
GO

CREATE VIEW [ccvwComboList_CardOrderByDistributor]
WITH SCHEMABINDING
AS
SELECT
    [ID] AS ID,
    [enmCurrency] AS Text,
    REPLACE(REPLACE(REPLACE([enmCurrency], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[CardOrderByDistributor]

GO

-- ccvwComboList view for CardOrderFromIssuer
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_CardOrderFromIssuer')
    DROP VIEW [ccvwComboList_CardOrderFromIssuer]
GO

CREATE VIEW [ccvwComboList_CardOrderFromIssuer]
WITH SCHEMABINDING
AS
SELECT
    [ID] AS ID,
    [enmCurrency] AS Text,
    REPLACE(REPLACE(REPLACE([enmCurrency], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[CardOrderFromIssuer]

GO

-- ccvwComboList view for Country
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_Country')
    DROP VIEW [ccvwComboList_Country]
GO

CREATE VIEW [ccvwComboList_Country]
WITH SCHEMABINDING
AS
SELECT
    [ID] AS ID,
    [Name] AS Text,
    REPLACE(REPLACE(REPLACE([Name], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[Country]

GO

-- ccvwComboList view for CreditGuard
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_CreditGuard')
    DROP VIEW [ccvwComboList_CreditGuard]
GO

CREATE VIEW [ccvwComboList_CreditGuard]
WITH SCHEMABINDING
AS
SELECT
    [TableName_CreditGuard] AS ID,
    [WebAPILoginUserName] AS Text,
    REPLACE(REPLACE(REPLACE([WebAPILoginUserName], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[CreditGuard]

GO

-- ccvwComboList view for Customer
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_Customer')
    DROP VIEW [ccvwComboList_Customer]
GO

CREATE VIEW [ccvwComboList_Customer]
WITH SCHEMABINDING
AS
SELECT
    [ID] AS ID,
    [FirstName] AS Text,
    REPLACE(REPLACE(REPLACE([FirstName], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[Customer]

GO

-- ccvwComboList view for CustomerCardTransaction
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_CustomerCardTransaction')
    DROP VIEW [ccvwComboList_CustomerCardTransaction]
GO

CREATE VIEW [ccvwComboList_CustomerCardTransaction]
WITH SCHEMABINDING
AS
SELECT
    [ID] AS ID,
    [FileName] AS Text,
    REPLACE(REPLACE(REPLACE([FileName], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[CustomerCardTransaction]

GO

-- ccvwComboList view for CustomerCardTransactionDefinition
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_CustomerCardTransactionDefinition')
    DROP VIEW [ccvwComboList_CustomerCardTransactionDefinition]
GO

CREATE VIEW [ccvwComboList_CustomerCardTransactionDefinition]
WITH SCHEMABINDING
AS
SELECT
    [ID] AS ID,
    [LeumiCardTransactionType] AS Text,
    REPLACE(REPLACE(REPLACE([LeumiCardTransactionType], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[CustomerCardTransactionDefinition]

GO

-- ccvwComboList view for CustomerClub
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_CustomerClub')
    DROP VIEW [ccvwComboList_CustomerClub]
GO

CREATE VIEW [ccvwComboList_CustomerClub]
WITH SCHEMABINDING
AS
SELECT
    [ID] AS ID,
    [ClubName] AS Text,
    REPLACE(REPLACE(REPLACE([ClubName], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[CustomerClub]

GO

-- ccvwComboList view for CustomerCreditCard
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_CustomerCreditCard')
    DROP VIEW [ccvwComboList_CustomerCreditCard]
GO

CREATE VIEW [ccvwComboList_CustomerCreditCard]
WITH SCHEMABINDING
AS
SELECT
    [ID] AS ID,
    [CardToken] AS Text,
    REPLACE(REPLACE(REPLACE([CardToken], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[CustomerCreditCard]

GO

-- ccvwComboList view for CustomerKYC
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_CustomerKYC')
    DROP VIEW [ccvwComboList_CustomerKYC]
GO

CREATE VIEW [ccvwComboList_CustomerKYC]
WITH SCHEMABINDING
AS
SELECT
    [ID] AS ID,
    [lkpEmploymentStatus] AS Text,
    REPLACE(REPLACE(REPLACE([lkpEmploymentStatus], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[CustomerKYC]

GO

-- ccvwComboList view for CustomerPartnership
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_CustomerPartnership')
    DROP VIEW [ccvwComboList_CustomerPartnership]
GO

CREATE VIEW [ccvwComboList_CustomerPartnership]
WITH SCHEMABINDING
AS
SELECT
    [ID] AS ID,
    [enmCustomerPartnership] AS Text,
    REPLACE(REPLACE(REPLACE([enmCustomerPartnership], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[CustomerPartnership]

GO

-- ccvwComboList view for CustomerPerformance
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_CustomerPerformance')
    DROP VIEW [ccvwComboList_CustomerPerformance]
GO

CREATE VIEW [ccvwComboList_CustomerPerformance]
WITH SCHEMABINDING
AS
SELECT
    [ID] AS ID,
    [AddedBy] AS Text,
    REPLACE(REPLACE(REPLACE([AddedBy], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[CustomerPerformance]

GO

-- ccvwComboList view for CustomerWallet
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_CustomerWallet')
    DROP VIEW [ccvwComboList_CustomerWallet]
GO

CREATE VIEW [ccvwComboList_CustomerWallet]
WITH SCHEMABINDING
AS
SELECT
    [ID] AS ID,
    [Description] AS Text,
    REPLACE(REPLACE(REPLACE([Description], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[CustomerWallet]

GO

-- ccvwComboList view for Distributor
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_Distributor')
    DROP VIEW [ccvwComboList_Distributor]
GO

CREATE VIEW [ccvwComboList_Distributor]
WITH SCHEMABINDING
AS
SELECT
    [ID] AS ID,
    [BusinessName] AS Text,
    REPLACE(REPLACE(REPLACE([BusinessName], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[Distributor]

GO

-- ccvwComboList view for DistributorBranch
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_DistributorBranch')
    DROP VIEW [ccvwComboList_DistributorBranch]
GO

CREATE VIEW [ccvwComboList_DistributorBranch]
WITH SCHEMABINDING
AS
SELECT
    [ID] AS ID,
    [locName] AS Text,
    REPLACE(REPLACE(REPLACE([locName], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[DistributorBranch]

GO

-- ccvwComboList view for DistributorObligo
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_DistributorObligo')
    DROP VIEW [ccvwComboList_DistributorObligo]
GO

CREATE VIEW [ccvwComboList_DistributorObligo]
WITH SCHEMABINDING
AS
SELECT
    [ID] AS ID,
    [enmObligoTransactionType] AS Text,
    REPLACE(REPLACE(REPLACE([enmObligoTransactionType], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[DistributorObligo]

GO

-- ccvwComboList view for DrivebotPayment
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_DrivebotPayment')
    DROP VIEW [ccvwComboList_DrivebotPayment]
GO

CREATE VIEW [ccvwComboList_DrivebotPayment]
WITH SCHEMABINDING
AS
SELECT
    [ID] AS ID,
    [DriverName] AS Text,
    REPLACE(REPLACE(REPLACE([DriverName], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[DrivebotPayment]

GO

-- ccvwComboList view for EntityRiskColor
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_EntityRiskColor')
    DROP VIEW [ccvwComboList_EntityRiskColor]
GO

CREATE VIEW [ccvwComboList_EntityRiskColor]
WITH SCHEMABINDING
AS
SELECT
    [ID] AS ID,
    [enmEntityType] AS Text,
    REPLACE(REPLACE(REPLACE([enmEntityType], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[EntityRiskColor]

GO

-- ccvwComboList view for ExchangeRate
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_ExchangeRate')
    DROP VIEW [ccvwComboList_ExchangeRate]
GO

CREATE VIEW [ccvwComboList_ExchangeRate]
WITH SCHEMABINDING
AS
SELECT
    [ID] AS ID,
    [enmCurrency] AS Text,
    REPLACE(REPLACE(REPLACE([enmCurrency], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[ExchangeRate]

GO

-- ccvwComboList view for ExternalCustomer
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_ExternalCustomer')
    DROP VIEW [ccvwComboList_ExternalCustomer]
GO

CREATE VIEW [ccvwComboList_ExternalCustomer]
WITH SCHEMABINDING
AS
SELECT
    [ID] AS ID,
    [enmExternalService] AS Text,
    REPLACE(REPLACE(REPLACE([enmExternalService], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[ExternalCustomer]

GO

-- ccvwComboList view for ExternalTransaction
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_ExternalTransaction')
    DROP VIEW [ccvwComboList_ExternalTransaction]
GO

CREATE VIEW [ccvwComboList_ExternalTransaction]
WITH SCHEMABINDING
AS
SELECT
    [ID] AS ID,
    [Description] AS Text,
    REPLACE(REPLACE(REPLACE([Description], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[ExternalTransaction]

GO

-- ccvwComboList view for Fee
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_Fee')
    DROP VIEW [ccvwComboList_Fee]
GO

CREATE VIEW [ccvwComboList_Fee]
WITH SCHEMABINDING
AS
SELECT
    [ID] AS ID,
    [enmType_FeeType] AS Text,
    REPLACE(REPLACE(REPLACE([enmType_FeeType], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[Fee]

GO

-- ccvwComboList view for FeeOverride
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_FeeOverride')
    DROP VIEW [ccvwComboList_FeeOverride]
GO

CREATE VIEW [ccvwComboList_FeeOverride]
WITH SCHEMABINDING
AS
SELECT
    [ID] AS ID,
    [AddedBy] AS Text,
    REPLACE(REPLACE(REPLACE([AddedBy], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[FeeOverride]

GO

-- ccvwComboList view for GovtReport00
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_GovtReport00')
    DROP VIEW [ccvwComboList_GovtReport00]
GO

CREATE VIEW [ccvwComboList_GovtReport00]
WITH SCHEMABINDING
AS
SELECT
    [ID] AS ID,
    [Name] AS Text,
    REPLACE(REPLACE(REPLACE([Name], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[GovtReport00]

GO

-- ccvwComboList view for GovtReport10
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_GovtReport10')
    DROP VIEW [ccvwComboList_GovtReport10]
GO

CREATE VIEW [ccvwComboList_GovtReport10]
WITH SCHEMABINDING
AS
SELECT
    [ID] AS ID,
    [ReporterNumber] AS Text,
    REPLACE(REPLACE(REPLACE([ReporterNumber], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[GovtReport10]

GO

-- ccvwComboList view for GovtReport30
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_GovtReport30')
    DROP VIEW [ccvwComboList_GovtReport30]
GO

CREATE VIEW [ccvwComboList_GovtReport30]
WITH SCHEMABINDING
AS
SELECT
    [ID] AS ID,
    [ReportApproverName] AS Text,
    REPLACE(REPLACE(REPLACE([ReportApproverName], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[GovtReport30]

GO

-- ccvwComboList view for GovtReport40
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_GovtReport40')
    DROP VIEW [ccvwComboList_GovtReport40]
GO

CREATE VIEW [ccvwComboList_GovtReport40]
WITH SCHEMABINDING
AS
SELECT
    [ID] AS ID,
    [BankName] AS Text,
    REPLACE(REPLACE(REPLACE([BankName], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[GovtReport40]

GO

-- ccvwComboList view for GovtReport99
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_GovtReport99')
    DROP VIEW [ccvwComboList_GovtReport99]
GO

CREATE VIEW [ccvwComboList_GovtReport99]
WITH SCHEMABINDING
AS
SELECT
    [ID] AS ID,
    [ReporterNumber] AS Text,
    REPLACE(REPLACE(REPLACE([ReporterNumber], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[GovtReport99]

GO

-- ccvwComboList view for GovtReportDefinition
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_GovtReportDefinition')
    DROP VIEW [ccvwComboList_GovtReportDefinition]
GO

CREATE VIEW [ccvwComboList_GovtReportDefinition]
WITH SCHEMABINDING
AS
SELECT
    [TableName_GovtReportDefinition] AS ID,
    [ReporterName] AS Text,
    REPLACE(REPLACE(REPLACE([ReporterName], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[GovtReportDefinition]

GO

-- ccvwComboList view for GovtReportDistributor
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_GovtReportDistributor')
    DROP VIEW [ccvwComboList_GovtReportDistributor]
GO

CREATE VIEW [ccvwComboList_GovtReportDistributor]
WITH SCHEMABINDING
AS
SELECT
    [ID] AS ID,
    [ReportFullName] AS Text,
    REPLACE(REPLACE(REPLACE([ReportFullName], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[GovtReportDistributor]

GO

-- ccvwComboList view for GovtReportPayment
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_GovtReportPayment')
    DROP VIEW [ccvwComboList_GovtReportPayment]
GO

CREATE VIEW [ccvwComboList_GovtReportPayment]
WITH SCHEMABINDING
AS
SELECT
    [ID] AS ID,
    [enmEntityType_AccountOwner] AS Text,
    REPLACE(REPLACE(REPLACE([enmEntityType_AccountOwner], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[GovtReportPayment]

GO

-- ccvwComboList view for ImportTransactionLoad
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_ImportTransactionLoad')
    DROP VIEW [ccvwComboList_ImportTransactionLoad]
GO

CREATE VIEW [ccvwComboList_ImportTransactionLoad]
WITH SCHEMABINDING
AS
SELECT
    [ID] AS ID,
    [spt_Comments] AS Text,
    REPLACE(REPLACE(REPLACE([spt_Comments], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[ImportTransactionLoad]

GO

-- ccvwComboList view for ImportTransactionLoadRow
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_ImportTransactionLoadRow')
    DROP VIEW [ccvwComboList_ImportTransactionLoadRow]
GO

CREATE VIEW [ccvwComboList_ImportTransactionLoadRow]
WITH SCHEMABINDING
AS
SELECT
    [ID] AS ID,
    [CustomerFirstName] AS Text,
    REPLACE(REPLACE(REPLACE([CustomerFirstName], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[ImportTransactionLoadRow]

GO

-- ccvwComboList view for Invoice
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_Invoice')
    DROP VIEW [ccvwComboList_Invoice]
GO

CREATE VIEW [ccvwComboList_Invoice]
WITH SCHEMABINDING
AS
SELECT
    [ID] AS ID,
    [InvoiceCode] AS Text,
    REPLACE(REPLACE(REPLACE([InvoiceCode], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[Invoice]

GO

-- ccvwComboList view for Lead
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_Lead')
    DROP VIEW [ccvwComboList_Lead]
GO

CREATE VIEW [ccvwComboList_Lead]
WITH SCHEMABINDING
AS
SELECT
    [ID] AS ID,
    [FirstName] AS Text,
    REPLACE(REPLACE(REPLACE([FirstName], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[Lead]

GO

-- ccvwComboList view for Limitation
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_Limitation')
    DROP VIEW [ccvwComboList_Limitation]
GO

CREATE VIEW [ccvwComboList_Limitation]
WITH SCHEMABINDING
AS
SELECT
    [ID] AS ID,
    [enmLimitation] AS Text,
    REPLACE(REPLACE(REPLACE([enmLimitation], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[Limitation]

GO

-- ccvwComboList view for LimitationOverride
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_LimitationOverride')
    DROP VIEW [ccvwComboList_LimitationOverride]
GO

CREATE VIEW [ccvwComboList_LimitationOverride]
WITH SCHEMABINDING
AS
SELECT
    [ID] AS ID,
    [AddedBy] AS Text,
    REPLACE(REPLACE(REPLACE([AddedBy], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[LimitationOverride]

GO

-- ccvwComboList view for MCCBFPBankAccount
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_MCCBFPBankAccount')
    DROP VIEW [ccvwComboList_MCCBFPBankAccount]
GO

CREATE VIEW [ccvwComboList_MCCBFPBankAccount]
WITH SCHEMABINDING
AS
SELECT
    [ID] AS ID,
    [Region] AS Text,
    REPLACE(REPLACE(REPLACE([Region], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[MCCBFPBankAccount]

GO

-- ccvwComboList view for MCCBFPCashOut
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_MCCBFPCashOut')
    DROP VIEW [ccvwComboList_MCCBFPCashOut]
GO

CREATE VIEW [ccvwComboList_MCCBFPCashOut]
WITH SCHEMABINDING
AS
SELECT
    [ID] AS ID,
    [Region] AS Text,
    REPLACE(REPLACE(REPLACE([Region], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[MCCBFPCashOut]

GO

-- ccvwComboList view for MCCBFPMobileWallet
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_MCCBFPMobileWallet')
    DROP VIEW [ccvwComboList_MCCBFPMobileWallet]
GO

CREATE VIEW [ccvwComboList_MCCBFPMobileWallet]
WITH SCHEMABINDING
AS
SELECT
    [ID] AS ID,
    [Region] AS Text,
    REPLACE(REPLACE(REPLACE([Region], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[MCCBFPMobileWallet]

GO

-- ccvwComboList view for MCCBFPPaymentCard
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_MCCBFPPaymentCard')
    DROP VIEW [ccvwComboList_MCCBFPPaymentCard]
GO

CREATE VIEW [ccvwComboList_MCCBFPPaymentCard]
WITH SCHEMABINDING
AS
SELECT
    [ID] AS ID,
    [Region] AS Text,
    REPLACE(REPLACE(REPLACE([Region], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[MCCBFPPaymentCard]

GO

-- ccvwComboList view for MCCBParticipant
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_MCCBParticipant')
    DROP VIEW [ccvwComboList_MCCBParticipant]
GO

CREATE VIEW [ccvwComboList_MCCBParticipant]
WITH SCHEMABINDING
AS
SELECT
    [ID] AS ID,
    [enmCorridor] AS Text,
    REPLACE(REPLACE(REPLACE([enmCorridor], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[MCCBParticipant]

GO

-- ccvwComboList view for MCCBReceiver
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_MCCBReceiver')
    DROP VIEW [ccvwComboList_MCCBReceiver]
GO

CREATE VIEW [ccvwComboList_MCCBReceiver]
WITH SCHEMABINDING
AS
SELECT
    [ID] AS ID,
    [FirstName] AS Text,
    REPLACE(REPLACE(REPLACE([FirstName], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[MCCBReceiver]

GO

-- ccvwComboList view for MCCBReceiverAccount
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_MCCBReceiverAccount')
    DROP VIEW [ccvwComboList_MCCBReceiverAccount]
GO

CREATE VIEW [ccvwComboList_MCCBReceiverAccount]
WITH SCHEMABINDING
AS
SELECT
    [ID] AS ID,
    [enmPaymentMode] AS Text,
    REPLACE(REPLACE(REPLACE([enmPaymentMode], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[MCCBReceiverAccount]

GO

-- ccvwComboList view for MCCBSecurityCheck
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_MCCBSecurityCheck')
    DROP VIEW [ccvwComboList_MCCBSecurityCheck]
GO

CREATE VIEW [ccvwComboList_MCCBSecurityCheck]
WITH SCHEMABINDING
AS
SELECT
    [ID] AS ID,
    [DestinationCountryISO3166Alpha2] AS Text,
    REPLACE(REPLACE(REPLACE([DestinationCountryISO3166Alpha2], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[MCCBSecurityCheck]

GO

-- ccvwComboList view for MCCBTransaction
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_MCCBTransaction')
    DROP VIEW [ccvwComboList_MCCBTransaction]
GO

CREATE VIEW [ccvwComboList_MCCBTransaction]
WITH SCHEMABINDING
AS
SELECT
    [ID] AS ID,
    [enmPaymentMode] AS Text,
    REPLACE(REPLACE(REPLACE([enmPaymentMode], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[MCCBTransaction]

GO

-- ccvwComboList view for NewCardRequest
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_NewCardRequest')
    DROP VIEW [ccvwComboList_NewCardRequest]
GO

CREATE VIEW [ccvwComboList_NewCardRequest]
WITH SCHEMABINDING
AS
SELECT
    [ID] AS ID,
    [FirstName] AS Text,
    REPLACE(REPLACE(REPLACE([FirstName], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[NewCardRequest]

GO

-- ccvwComboList view for NewCardRequestAPI
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_NewCardRequestAPI')
    DROP VIEW [ccvwComboList_NewCardRequestAPI]
GO

CREATE VIEW [ccvwComboList_NewCardRequestAPI]
WITH SCHEMABINDING
AS
SELECT
    [ID] AS ID,
    [FirstName] AS Text,
    REPLACE(REPLACE(REPLACE([FirstName], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[NewCardRequestAPI]

GO

-- ccvwComboList view for NonCustomer
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_NonCustomer')
    DROP VIEW [ccvwComboList_NonCustomer]
GO

CREATE VIEW [ccvwComboList_NonCustomer]
WITH SCHEMABINDING
AS
SELECT
    [ID] AS ID,
    [FirstName] AS Text,
    REPLACE(REPLACE(REPLACE([FirstName], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[NonCustomer]

GO

-- ccvwComboList view for OneTimeLink
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_OneTimeLink')
    DROP VIEW [ccvwComboList_OneTimeLink]
GO

CREATE VIEW [ccvwComboList_OneTimeLink]
WITH SCHEMABINDING
AS
SELECT
    [ID] AS ID,
    [enmLanguage] AS Text,
    REPLACE(REPLACE(REPLACE([enmLanguage], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[OneTimeLink]

GO

-- ccvwComboList view for OnlineApproval
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_OnlineApproval')
    DROP VIEW [ccvwComboList_OnlineApproval]
GO

CREATE VIEW [ccvwComboList_OnlineApproval]
WITH SCHEMABINDING
AS
SELECT
    [ID] AS ID,
    [MerchantName] AS Text,
    REPLACE(REPLACE(REPLACE([MerchantName], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[OnlineApproval]

GO

-- ccvwComboList view for RequestedTransaction
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_RequestedTransaction')
    DROP VIEW [ccvwComboList_RequestedTransaction]
GO

CREATE VIEW [ccvwComboList_RequestedTransaction]
WITH SCHEMABINDING
AS
SELECT
    [ID] AS ID,
    [TargetCustomerName] AS Text,
    REPLACE(REPLACE(REPLACE([TargetCustomerName], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[RequestedTransaction]

GO

-- ccvwComboList view for RequestedTransactionFee
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_RequestedTransactionFee')
    DROP VIEW [ccvwComboList_RequestedTransactionFee]
GO

CREATE VIEW [ccvwComboList_RequestedTransactionFee]
WITH SCHEMABINDING
AS
SELECT
    [ID] AS ID,
    [enmType_FeeType] AS Text,
    REPLACE(REPLACE(REPLACE([enmType_FeeType], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[RequestedTransactionFee]

GO

-- ccvwComboList view for RiskEvent
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_RiskEvent')
    DROP VIEW [ccvwComboList_RiskEvent]
GO

CREATE VIEW [ccvwComboList_RiskEvent]
WITH SCHEMABINDING
AS
SELECT
    [ID] AS ID,
    [enmEntityType] AS Text,
    REPLACE(REPLACE(REPLACE([enmEntityType], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[RiskEvent]

GO

-- ccvwComboList view for RiskRule
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_RiskRule')
    DROP VIEW [ccvwComboList_RiskRule]
GO

CREATE VIEW [ccvwComboList_RiskRule]
WITH SCHEMABINDING
AS
SELECT
    [ID] AS ID,
    [RuleName] AS Text,
    REPLACE(REPLACE(REPLACE([RuleName], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[RiskRule]

GO

-- ccvwComboList view for RiskRuleLog
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_RiskRuleLog')
    DROP VIEW [ccvwComboList_RiskRuleLog]
GO

CREATE VIEW [ccvwComboList_RiskRuleLog]
WITH SCHEMABINDING
AS
SELECT
    [ID] AS ID,
    [FieldName] AS Text,
    REPLACE(REPLACE(REPLACE([FieldName], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[RiskRuleLog]

GO

-- ccvwComboList view for RiskRuleOverride
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_RiskRuleOverride')
    DROP VIEW [ccvwComboList_RiskRuleOverride]
GO

CREATE VIEW [ccvwComboList_RiskRuleOverride]
WITH SCHEMABINDING
AS
SELECT
    [ID] AS ID,
    [enmEntityType] AS Text,
    REPLACE(REPLACE(REPLACE([enmEntityType], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[RiskRuleOverride]

GO

-- ccvwComboList view for SAP
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_SAP')
    DROP VIEW [ccvwComboList_SAP]
GO

CREATE VIEW [ccvwComboList_SAP]
WITH SCHEMABINDING
AS
SELECT
    [TableName_SAP] AS ID,
    [CustomerAccountPrefix] AS Text,
    REPLACE(REPLACE(REPLACE([CustomerAccountPrefix], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[SAP]

GO

-- ccvwComboList view for sysdiagrams
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_sysdiagrams')
    DROP VIEW [ccvwComboList_sysdiagrams]
GO

CREATE VIEW [ccvwComboList_sysdiagrams]
WITH SCHEMABINDING
AS
SELECT
    [diagram_id] AS ID,
    [name] AS Text,
    REPLACE(REPLACE(REPLACE([name], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[sysdiagrams]

GO

-- ccvwComboList view for Task
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_Task')
    DROP VIEW [ccvwComboList_Task]
GO

CREATE VIEW [ccvwComboList_Task]
WITH SCHEMABINDING
AS
SELECT
    [ID] AS ID,
    [Description] AS Text,
    REPLACE(REPLACE(REPLACE([Description], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[Task]

GO

-- ccvwComboList view for TransactionBit
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_TransactionBit')
    DROP VIEW [ccvwComboList_TransactionBit]
GO

CREATE VIEW [ccvwComboList_TransactionBit]
WITH SCHEMABINDING
AS
SELECT
    [ID] AS ID,
    [UniqueIdentifier] AS Text,
    REPLACE(REPLACE(REPLACE([UniqueIdentifier], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[TransactionBit]

GO

-- ccvwComboList view for TransactionCreditCard
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_TransactionCreditCard')
    DROP VIEW [ccvwComboList_TransactionCreditCard]
GO

CREATE VIEW [ccvwComboList_TransactionCreditCard]
WITH SCHEMABINDING
AS
SELECT
    [ID] AS ID,
    [CardHolderName] AS Text,
    REPLACE(REPLACE(REPLACE([CardHolderName], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[TransactionCreditCard]

GO

-- ccvwComboList view for TransactionLoad
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_TransactionLoad')
    DROP VIEW [ccvwComboList_TransactionLoad]
GO

CREATE VIEW [ccvwComboList_TransactionLoad]
WITH SCHEMABINDING
AS
SELECT
    [ID] AS ID,
    [enmLoadType] AS Text,
    REPLACE(REPLACE(REPLACE([enmLoadType], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[TransactionLoad]

GO

-- ccvwComboList view for TransactionLoadAccount
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_TransactionLoadAccount')
    DROP VIEW [ccvwComboList_TransactionLoadAccount]
GO

CREATE VIEW [ccvwComboList_TransactionLoadAccount]
WITH SCHEMABINDING
AS
SELECT
    [ID] AS ID,
    [Account] AS Text,
    REPLACE(REPLACE(REPLACE([Account], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[TransactionLoadAccount]

GO

-- ccvwComboList view for UIText
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_UIText')
    DROP VIEW [ccvwComboList_UIText]
GO

CREATE VIEW [ccvwComboList_UIText]
WITH SCHEMABINDING
AS
SELECT
    [ID] AS ID,
    [Name] AS Text,
    REPLACE(REPLACE(REPLACE([Name], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[UIText]

GO

-- ccvwComboList view for UserApproval
IF EXISTS (SELECT * FROM sys.views WHERE name = 'ccvwComboList_UserApproval')
    DROP VIEW [ccvwComboList_UserApproval]
GO

CREATE VIEW [ccvwComboList_UserApproval]
WITH SCHEMABINDING
AS
SELECT
    [ID] AS ID,
    [FunctionName] AS Text,
    REPLACE(REPLACE(REPLACE([FunctionName], ' ', ''), '-', ''), '''', '') AS TextNS
FROM [dbo].[UserApproval]

GO



-- =========================================
-- Stored Procedures for Database Schema: UpayCard_RiskManagement_CCV2
-- Generated: 2025-12-27 19:28:30 UTC
-- =========================================

-- =========================================
-- Stored Procedures for Table: _report2
-- Generated: 2025-12-27 19:28:30 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllReport2s]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [RowNumber],
        [EventClass],
        [TextData],
        [ApplicationName],
        [NTUserName],
        [LoginName],
        [CPU],
        [Reads],
        [Writes],
        [Duration],
        [ClientProcessID],
        [SPID],
        [StartTime],
        [EndTime],
        [BinaryData]
    FROM [_report2]
    ORDER BY [RowNumber]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetReport2ByID]
    @RowNumber int
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [RowNumber],
        [EventClass],
        [TextData],
        [ApplicationName],
        [NTUserName],
        [LoginName],
        [CPU],
        [Reads],
        [Writes],
        [Duration],
        [ClientProcessID],
        [SPID],
        [StartTime],
        [EndTime],
        [BinaryData]
    FROM [_report2]
    WHERE [RowNumber] = @RowNumber;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddReport2]
    @EventClass int = NULL,
    @TextData ntext = NULL,
    @ApplicationName nvarchar(256) = NULL,
    @NTUserName nvarchar(256) = NULL,
    @LoginName nvarchar(256) = NULL,
    @CPU int = NULL,
    @Reads bigint = NULL,
    @Writes bigint = NULL,
    @Duration bigint = NULL,
    @ClientProcessID int = NULL,
    @SPID int = NULL,
    @StartTime datetime = NULL,
    @EndTime datetime = NULL,
    @BinaryData image = NULL
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [_report2] (
        [EventClass],
        [TextData],
        [ApplicationName],
        [NTUserName],
        [LoginName],
        [CPU],
        [Reads],
        [Writes],
        [Duration],
        [ClientProcessID],
        [SPID],
        [StartTime],
        [EndTime],
        [BinaryData]
    )
    VALUES (
        @EventClass,
        @TextData,
        @ApplicationName,
        @NTUserName,
        @LoginName,
        @CPU,
        @Reads,
        @Writes,
        @Duration,
        @ClientProcessID,
        @SPID,
        @StartTime,
        @EndTime,
        @BinaryData
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateReport2]
    @RowNumber int,
    @EventClass int = NULL,
    @TextData ntext = NULL,
    @ApplicationName nvarchar(256) = NULL,
    @NTUserName nvarchar(256) = NULL,
    @LoginName nvarchar(256) = NULL,
    @CPU int = NULL,
    @Reads bigint = NULL,
    @Writes bigint = NULL,
    @Duration bigint = NULL,
    @ClientProcessID int = NULL,
    @SPID int = NULL,
    @StartTime datetime = NULL,
    @EndTime datetime = NULL,
    @BinaryData image = NULL
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [_report2]
    SET
        [EventClass] = @EventClass,
        [TextData] = @TextData,
        [ApplicationName] = @ApplicationName,
        [NTUserName] = @NTUserName,
        [LoginName] = @LoginName,
        [CPU] = @CPU,
        [Reads] = @Reads,
        [Writes] = @Writes,
        [Duration] = @Duration,
        [ClientProcessID] = @ClientProcessID,
        [SPID] = @SPID,
        [StartTime] = @StartTime,
        [EndTime] = @EndTime,
        [BinaryData] = @BinaryData
    WHERE [RowNumber] = @RowNumber;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteReport2]
    @RowNumber int
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [_report2]
    WHERE [RowNumber] = @RowNumber;
END

GO



-- =========================================
-- Stored Procedures for Table: ActiveRestrictions
-- Generated: 2025-12-27 19:28:30 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllActiveRestrictionss]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[ID],
            t.[TableName_ActiveRestrictions],
            t.[enmEntityType],
            t.[EntityID],
            t.[enmBlockedActionType],
            t.[MaxAllowedAmount],
            t.[ValidFrom],
            t.[ValidUntil],
            t.[BlockReason],
            t.[TriggerRuleID],
            t.[TriggerEventID],
            t.[AddedOn],
            t.[AddedBy],
            t.[ChangedOn],
            t.[ChangedBy],
            t.[DeletedOn],
            t.[DeletedBy],
            t.[UpdatingLoginID],
            p1.[Text] AS [TriggerRuleID_Text],
            p2.[Text] AS [TriggerEventID_Text]
        FROM [ActiveRestrictions] t
        LEFT JOIN [ccvwComboList_RiskRule] p1 ON t.[TriggerRuleID] = p1.[ID]
        LEFT JOIN [ccvwComboList_RiskEvent] p2 ON t.[TriggerEventID] = p2.[ID]
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [ID],
            [TableName_ActiveRestrictions],
            [enmEntityType],
            [EntityID],
            [enmBlockedActionType],
            [MaxAllowedAmount],
            [ValidFrom],
            [ValidUntil],
            [BlockReason],
            [TriggerRuleID],
            [TriggerEventID],
            [AddedOn],
            [AddedBy],
            [ChangedOn],
            [ChangedBy],
            [DeletedOn],
            [DeletedBy],
            [UpdatingLoginID]
        FROM [ActiveRestrictions]
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredActiveRestrictionss]
    @MaxAllowedAmount DECIMAL(18,2) = NULL,
    @ValidUntil DATETIME = NULL,
    @BlockReason NVARCHAR(1000) = NULL,
    @enmEntityType VARCHAR(50) = NULL,
    @EntityID INT = NULL,
    @enmBlockedActionType VARCHAR(50) = NULL,
    @TriggerEventID INT = NULL,
    @TriggerRuleID INT = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[ID],
            t.[TableName_ActiveRestrictions],
            t.[enmEntityType],
            t.[EntityID],
            t.[enmBlockedActionType],
            t.[MaxAllowedAmount],
            t.[ValidFrom],
            t.[ValidUntil],
            t.[BlockReason],
            t.[TriggerRuleID],
            t.[TriggerEventID],
            t.[AddedOn],
            t.[AddedBy],
            t.[ChangedOn],
            t.[ChangedBy],
            t.[DeletedOn],
            t.[DeletedBy],
            t.[UpdatingLoginID],
            p1.[Text] AS [TriggerRuleID_Text],
            p2.[Text] AS [TriggerEventID_Text]
        FROM [ActiveRestrictions] t
        LEFT JOIN [ccvwComboList_RiskRule] p1 ON t.[TriggerRuleID] = p1.[ID]
        LEFT JOIN [ccvwComboList_RiskEvent] p2 ON t.[TriggerEventID] = p2.[ID]
        WHERE 1=1
          AND (@MaxAllowedAmount IS NULL OR t.[MaxAllowedAmount] = @MaxAllowedAmount)
          AND (@ValidUntil IS NULL OR t.[ValidUntil] = @ValidUntil)
          AND (@BlockReason IS NULL OR t.[BlockReason] LIKE '%' + @BlockReason + '%')
          AND (@enmEntityType IS NULL OR t.[enmEntityType] LIKE '%' + @enmEntityType + '%')
          AND (@EntityID IS NULL OR t.[EntityID] = @EntityID)
          AND (@enmBlockedActionType IS NULL OR t.[enmBlockedActionType] LIKE '%' + @enmBlockedActionType + '%')
          AND (@ValidUntil IS NULL OR t.[ValidUntil] = @ValidUntil)
          AND (@TriggerEventID IS NULL OR t.[TriggerEventID] = @TriggerEventID)
          AND (@TriggerRuleID IS NULL OR t.[TriggerRuleID] = @TriggerRuleID)
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [ID],
            [TableName_ActiveRestrictions],
            [enmEntityType],
            [EntityID],
            [enmBlockedActionType],
            [MaxAllowedAmount],
            [ValidFrom],
            [ValidUntil],
            [BlockReason],
            [TriggerRuleID],
            [TriggerEventID],
            [AddedOn],
            [AddedBy],
            [ChangedOn],
            [ChangedBy],
            [DeletedOn],
            [DeletedBy],
            [UpdatingLoginID]
        FROM [ActiveRestrictions]
        WHERE 1=1
          AND (@MaxAllowedAmount IS NULL OR [MaxAllowedAmount] = @MaxAllowedAmount)
          AND (@ValidUntil IS NULL OR [ValidUntil] = @ValidUntil)
          AND (@BlockReason IS NULL OR [BlockReason] LIKE '%' + @BlockReason + '%')
          AND (@enmEntityType IS NULL OR [enmEntityType] LIKE '%' + @enmEntityType + '%')
          AND (@EntityID IS NULL OR [EntityID] = @EntityID)
          AND (@enmBlockedActionType IS NULL OR [enmBlockedActionType] LIKE '%' + @enmBlockedActionType + '%')
          AND (@ValidUntil IS NULL OR [ValidUntil] = @ValidUntil)
          AND (@TriggerEventID IS NULL OR [TriggerEventID] = @TriggerEventID)
          AND (@TriggerRuleID IS NULL OR [TriggerRuleID] = @TriggerRuleID)
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetActiveRestrictionsByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [TableName_ActiveRestrictions],
        [enmEntityType],
        [EntityID],
        [enmBlockedActionType],
        [MaxAllowedAmount],
        [ValidFrom],
        [ValidUntil],
        [BlockReason],
        [TriggerRuleID],
        [TriggerEventID],
        [AddedOn],
        [AddedBy],
        [ChangedOn],
        [ChangedBy],
        [DeletedOn],
        [DeletedBy],
        [UpdatingLoginID]
    FROM [ActiveRestrictions]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddActiveRestrictions]
    @TableName_ActiveRestrictions bit = NULL,
    @enmEntityType varchar(50),
    @EntityID bigint,
    @enmBlockedActionType varchar(50),
    @MaxAllowedAmount decimal(18,0) = NULL,
    @ValidFrom datetime,
    @ValidUntil datetime = NULL,
    @BlockReason nvarchar(1000) = NULL,
    @TriggerRuleID bigint = NULL,
    @TriggerEventID bigint = NULL,
    @DeletedOn datetime = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @UpdatingLoginID bigint = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [ActiveRestrictions] (
        [TableName_ActiveRestrictions],
        [enmEntityType],
        [EntityID],
        [enmBlockedActionType],
        [MaxAllowedAmount],
        [ValidFrom],
        [ValidUntil],
        [BlockReason],
        [TriggerRuleID],
        [TriggerEventID],
        [DeletedOn],
        [DeletedBy],
        [UpdatingLoginID],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_ActiveRestrictions,
        @enmEntityType,
        @EntityID,
        @enmBlockedActionType,
        @MaxAllowedAmount,
        @ValidFrom,
        @ValidUntil,
        @BlockReason,
        @TriggerRuleID,
        @TriggerEventID,
        @DeletedOn,
        @DeletedBy,
        @UpdatingLoginID,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateActiveRestrictions]
    @ID bigint,
    @TableName_ActiveRestrictions bit = NULL,
    @enmEntityType varchar(50),
    @EntityID bigint,
    @enmBlockedActionType varchar(50),
    @MaxAllowedAmount decimal(18,0) = NULL,
    @ValidFrom datetime,
    @ValidUntil datetime = NULL,
    @BlockReason nvarchar(1000) = NULL,
    @TriggerRuleID bigint = NULL,
    @TriggerEventID bigint = NULL,
    @DeletedOn datetime = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @UpdatingLoginID bigint = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [ActiveRestrictions]
    SET
        [TableName_ActiveRestrictions] = @TableName_ActiveRestrictions,
        [enmEntityType] = @enmEntityType,
        [EntityID] = @EntityID,
        [enmBlockedActionType] = @enmBlockedActionType,
        [MaxAllowedAmount] = @MaxAllowedAmount,
        [ValidFrom] = @ValidFrom,
        [ValidUntil] = @ValidUntil,
        [BlockReason] = @BlockReason,
        [TriggerRuleID] = @TriggerRuleID,
        [TriggerEventID] = @TriggerEventID,
        [DeletedOn] = @DeletedOn,
        [DeletedBy] = @DeletedBy,
        [UpdatingLoginID] = @UpdatingLoginID,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteActiveRestrictions]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [ActiveRestrictions]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_ActiveRestrictions_EntityLookup
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillActiveRestrictionsByMAXALLOWEDAMOUNTAndVALIDUNTILAndBLOCKREASONAndENMENTITYTYPEAndENTITYIDAndENMBLOCKEDACTIONTYPE]
    @MaxAllowedAmount decimal(18,0),
    @ValidUntil datetime,
    @BlockReason nvarchar(1000),
    @enmEntityType varchar(50),
    @EntityID bigint,
    @enmBlockedActionType varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [TableName_ActiveRestrictions],
        [enmEntityType],
        [EntityID],
        [enmBlockedActionType],
        [MaxAllowedAmount],
        [ValidFrom],
        [ValidUntil],
        [BlockReason],
        [TriggerRuleID],
        [TriggerEventID],
        [AddedOn],
        [AddedBy],
        [ChangedOn],
        [ChangedBy],
        [DeletedOn],
        [DeletedBy],
        [UpdatingLoginID]
    FROM [ActiveRestrictions]
    WHERE [MaxAllowedAmount] = @MaxAllowedAmount AND [ValidUntil] = @ValidUntil AND [BlockReason] = @BlockReason AND [enmEntityType] = @enmEntityType AND [EntityID] = @EntityID AND [enmBlockedActionType] = @enmBlockedActionType
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_ActiveRestrictions_Expiry
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillActiveRestrictionsByVALIDUNTIL]
    @ValidUntil datetime
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [TableName_ActiveRestrictions],
        [enmEntityType],
        [EntityID],
        [enmBlockedActionType],
        [MaxAllowedAmount],
        [ValidFrom],
        [ValidUntil],
        [BlockReason],
        [TriggerRuleID],
        [TriggerEventID],
        [AddedOn],
        [AddedBy],
        [ChangedOn],
        [ChangedBy],
        [DeletedOn],
        [DeletedBy],
        [UpdatingLoginID]
    FROM [ActiveRestrictions]
    WHERE [ValidUntil] = @ValidUntil
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_ActiveRestrictions_TriggerEventID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillActiveRestrictionsByTRIGGEREVENTID]
    @TriggerEventID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [TableName_ActiveRestrictions],
        [enmEntityType],
        [EntityID],
        [enmBlockedActionType],
        [MaxAllowedAmount],
        [ValidFrom],
        [ValidUntil],
        [BlockReason],
        [TriggerRuleID],
        [TriggerEventID],
        [AddedOn],
        [AddedBy],
        [ChangedOn],
        [ChangedBy],
        [DeletedOn],
        [DeletedBy],
        [UpdatingLoginID]
    FROM [ActiveRestrictions]
    WHERE [TriggerEventID] = @TriggerEventID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_ActiveRestrictions_TriggerRuleID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillActiveRestrictionsByTRIGGERRULEID]
    @TriggerRuleID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [TableName_ActiveRestrictions],
        [enmEntityType],
        [EntityID],
        [enmBlockedActionType],
        [MaxAllowedAmount],
        [ValidFrom],
        [ValidUntil],
        [BlockReason],
        [TriggerRuleID],
        [TriggerEventID],
        [AddedOn],
        [AddedBy],
        [ChangedOn],
        [ChangedBy],
        [DeletedOn],
        [DeletedBy],
        [UpdatingLoginID]
    FROM [ActiveRestrictions]
    WHERE [TriggerRuleID] = @TriggerRuleID
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: BackofficeTransaction
-- Generated: 2025-12-27 19:28:30 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllBackofficeTransactions]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_BackofficeTransaction],
            t.[ID],
            t.[DistributorID],
            t.[CustomerID],
            t.[TransactionLoadID],
            t.[CardOrderFromIssuerID],
            t.[CardOrderByDistributorID],
            t.[CustomerWalletID],
            t.[enmBackofficeTransactionType],
            t.[AmountToAccountOwner],
            t.[enmAccountOwner],
            t.[WhenRequested],
            t.[WhenToExecute],
            t.[RequestingUser],
            t.[CodeForInvoice],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            t.[spt_WhenSentToSAP],
            t.[CardID],
            t.[clc_MonthRequested],
            t.[clc_DayRequested],
            t.[TransactionCreditCardID],
            t.[TransactionBitID],
            t.[RequestedTransactionID],
            p1.[Text] AS [DistributorID_Text],
            p2.[Text] AS [CustomerID_Text],
            p3.[Text] AS [TransactionLoadID_Text],
            p4.[Text] AS [CardOrderFromIssuerID_Text],
            p5.[Text] AS [CardOrderByDistributorID_Text],
            p6.[Text] AS [CustomerWalletID_Text],
            p7.[Text] AS [CardID_Text],
            p8.[Text] AS [TransactionCreditCardID_Text],
            p9.[Text] AS [TransactionBitID_Text],
            p10.[Text] AS [RequestedTransactionID_Text]
        FROM [BackofficeTransaction] t
        LEFT JOIN [ccvwComboList_Distributor] p1 ON t.[DistributorID] = p1.[ID]
        LEFT JOIN [ccvwComboList_Customer] p2 ON t.[CustomerID] = p2.[ID]
        LEFT JOIN [ccvwComboList_TransactionLoad] p3 ON t.[TransactionLoadID] = p3.[ID]
        LEFT JOIN [ccvwComboList_CardOrderFromIssuer] p4 ON t.[CardOrderFromIssuerID] = p4.[ID]
        LEFT JOIN [ccvwComboList_CardOrderByDistributor] p5 ON t.[CardOrderByDistributorID] = p5.[ID]
        LEFT JOIN [ccvwComboList_CustomerWallet] p6 ON t.[CustomerWalletID] = p6.[ID]
        LEFT JOIN [ccvwComboList_Card] p7 ON t.[CardID] = p7.[ID]
        LEFT JOIN [ccvwComboList_TransactionCreditCard] p8 ON t.[TransactionCreditCardID] = p8.[ID]
        LEFT JOIN [ccvwComboList_TransactionBit] p9 ON t.[TransactionBitID] = p9.[ID]
        LEFT JOIN [ccvwComboList_RequestedTransaction] p10 ON t.[RequestedTransactionID] = p10.[ID]
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_BackofficeTransaction],
            [ID],
            [DistributorID],
            [CustomerID],
            [TransactionLoadID],
            [CardOrderFromIssuerID],
            [CardOrderByDistributorID],
            [CustomerWalletID],
            [enmBackofficeTransactionType],
            [AmountToAccountOwner],
            [enmAccountOwner],
            [WhenRequested],
            [WhenToExecute],
            [RequestingUser],
            [CodeForInvoice],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID],
            [spt_WhenSentToSAP],
            [CardID],
            [clc_MonthRequested],
            [clc_DayRequested],
            [TransactionCreditCardID],
            [TransactionBitID],
            [RequestedTransactionID]
        FROM [BackofficeTransaction]
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredBackofficeTransactions]
    @enmBackofficeTransactionType VARCHAR(50) = NULL,
    @enmAccountOwner VARCHAR(50) = NULL,
    @WhenRequested DATETIME = NULL,
    @spt_WhenSentToSAP DATETIME = NULL,
    @CardID INT = NULL,
    @CustomerWalletID INT = NULL,
    @clc_DayRequested DATETIME = NULL,
    @DistributorID INT = NULL,
    @TransactionLoadID INT = NULL,
    @AmountToAccountOwner DECIMAL(18,2) = NULL,
    @WhenToExecute DATETIME = NULL,
    @CustomerID INT = NULL,
    @CodeForInvoice NVARCHAR(300) = NULL,
    @RequestingUser NVARCHAR(100) = NULL,
    @clc_MonthRequested DATETIME = NULL,
    @RequestedTransactionID INT = NULL,
    @TransactionBitID INT = NULL,
    @TransactionCreditCardID INT = NULL,
    @CardOrderByDistributorID INT = NULL,
    @CardOrderFromIssuerID INT = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_BackofficeTransaction],
            t.[ID],
            t.[DistributorID],
            t.[CustomerID],
            t.[TransactionLoadID],
            t.[CardOrderFromIssuerID],
            t.[CardOrderByDistributorID],
            t.[CustomerWalletID],
            t.[enmBackofficeTransactionType],
            t.[AmountToAccountOwner],
            t.[enmAccountOwner],
            t.[WhenRequested],
            t.[WhenToExecute],
            t.[RequestingUser],
            t.[CodeForInvoice],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            t.[spt_WhenSentToSAP],
            t.[CardID],
            t.[clc_MonthRequested],
            t.[clc_DayRequested],
            t.[TransactionCreditCardID],
            t.[TransactionBitID],
            t.[RequestedTransactionID],
            p1.[Text] AS [DistributorID_Text],
            p2.[Text] AS [CustomerID_Text],
            p3.[Text] AS [TransactionLoadID_Text],
            p4.[Text] AS [CardOrderFromIssuerID_Text],
            p5.[Text] AS [CardOrderByDistributorID_Text],
            p6.[Text] AS [CustomerWalletID_Text],
            p7.[Text] AS [CardID_Text],
            p8.[Text] AS [TransactionCreditCardID_Text],
            p9.[Text] AS [TransactionBitID_Text],
            p10.[Text] AS [RequestedTransactionID_Text]
        FROM [BackofficeTransaction] t
        LEFT JOIN [ccvwComboList_Distributor] p1 ON t.[DistributorID] = p1.[ID]
        LEFT JOIN [ccvwComboList_Customer] p2 ON t.[CustomerID] = p2.[ID]
        LEFT JOIN [ccvwComboList_TransactionLoad] p3 ON t.[TransactionLoadID] = p3.[ID]
        LEFT JOIN [ccvwComboList_CardOrderFromIssuer] p4 ON t.[CardOrderFromIssuerID] = p4.[ID]
        LEFT JOIN [ccvwComboList_CardOrderByDistributor] p5 ON t.[CardOrderByDistributorID] = p5.[ID]
        LEFT JOIN [ccvwComboList_CustomerWallet] p6 ON t.[CustomerWalletID] = p6.[ID]
        LEFT JOIN [ccvwComboList_Card] p7 ON t.[CardID] = p7.[ID]
        LEFT JOIN [ccvwComboList_TransactionCreditCard] p8 ON t.[TransactionCreditCardID] = p8.[ID]
        LEFT JOIN [ccvwComboList_TransactionBit] p9 ON t.[TransactionBitID] = p9.[ID]
        LEFT JOIN [ccvwComboList_RequestedTransaction] p10 ON t.[RequestedTransactionID] = p10.[ID]
        WHERE 1=1
          AND (@enmBackofficeTransactionType IS NULL OR t.[enmBackofficeTransactionType] LIKE '%' + @enmBackofficeTransactionType + '%')
          AND (@enmAccountOwner IS NULL OR t.[enmAccountOwner] LIKE '%' + @enmAccountOwner + '%')
          AND (@WhenRequested IS NULL OR t.[WhenRequested] = @WhenRequested)
          AND (@enmBackofficeTransactionType IS NULL OR t.[enmBackofficeTransactionType] LIKE '%' + @enmBackofficeTransactionType + '%')
          AND (@spt_WhenSentToSAP IS NULL OR t.[spt_WhenSentToSAP] = @spt_WhenSentToSAP)
          AND (@CardID IS NULL OR t.[CardID] = @CardID)
          AND (@CustomerWalletID IS NULL OR t.[CustomerWalletID] = @CustomerWalletID)
          AND (@clc_DayRequested IS NULL OR t.[clc_DayRequested] = @clc_DayRequested)
          AND (@DistributorID IS NULL OR t.[DistributorID] = @DistributorID)
          AND (@TransactionLoadID IS NULL OR t.[TransactionLoadID] = @TransactionLoadID)
          AND (@AmountToAccountOwner IS NULL OR t.[AmountToAccountOwner] = @AmountToAccountOwner)
          AND (@WhenToExecute IS NULL OR t.[WhenToExecute] = @WhenToExecute)
          AND (@spt_WhenSentToSAP IS NULL OR t.[spt_WhenSentToSAP] = @spt_WhenSentToSAP)
          AND (@enmAccountOwner IS NULL OR t.[enmAccountOwner] LIKE '%' + @enmAccountOwner + '%')
          AND (@enmBackofficeTransactionType IS NULL OR t.[enmBackofficeTransactionType] LIKE '%' + @enmBackofficeTransactionType + '%')
          AND (@WhenRequested IS NULL OR t.[WhenRequested] = @WhenRequested)
          AND (@enmBackofficeTransactionType IS NULL OR t.[enmBackofficeTransactionType] LIKE '%' + @enmBackofficeTransactionType + '%')
          AND (@CustomerID IS NULL OR t.[CustomerID] = @CustomerID)
          AND (@DistributorID IS NULL OR t.[DistributorID] = @DistributorID)
          AND (@CustomerWalletID IS NULL OR t.[CustomerWalletID] = @CustomerWalletID)
          AND (@AmountToAccountOwner IS NULL OR t.[AmountToAccountOwner] = @AmountToAccountOwner)
          AND (@enmAccountOwner IS NULL OR t.[enmAccountOwner] LIKE '%' + @enmAccountOwner + '%')
          AND (@WhenRequested IS NULL OR t.[WhenRequested] = @WhenRequested)
          AND (@CodeForInvoice IS NULL OR t.[CodeForInvoice] LIKE '%' + @CodeForInvoice + '%')
          AND (@RequestingUser IS NULL OR t.[RequestingUser] LIKE '%' + @RequestingUser + '%')
          AND (@clc_MonthRequested IS NULL OR t.[clc_MonthRequested] = @clc_MonthRequested)
          AND (@spt_WhenSentToSAP IS NULL OR t.[spt_WhenSentToSAP] = @spt_WhenSentToSAP)
          AND (@RequestedTransactionID IS NULL OR t.[RequestedTransactionID] = @RequestedTransactionID)
          AND (@TransactionBitID IS NULL OR t.[TransactionBitID] = @TransactionBitID)
          AND (@TransactionCreditCardID IS NULL OR t.[TransactionCreditCardID] = @TransactionCreditCardID)
          AND (@enmBackofficeTransactionType IS NULL OR t.[enmBackofficeTransactionType] LIKE '%' + @enmBackofficeTransactionType + '%')
          AND (@CustomerID IS NULL OR t.[CustomerID] = @CustomerID)
          AND (@DistributorID IS NULL OR t.[DistributorID] = @DistributorID)
          AND (@CustomerWalletID IS NULL OR t.[CustomerWalletID] = @CustomerWalletID)
          AND (@AmountToAccountOwner IS NULL OR t.[AmountToAccountOwner] = @AmountToAccountOwner)
          AND (@spt_WhenSentToSAP IS NULL OR t.[spt_WhenSentToSAP] = @spt_WhenSentToSAP)
          AND (@WhenRequested IS NULL OR t.[WhenRequested] = @WhenRequested)
          AND (@enmAccountOwner IS NULL OR t.[enmAccountOwner] LIKE '%' + @enmAccountOwner + '%')
          AND (@enmBackofficeTransactionType IS NULL OR t.[enmBackofficeTransactionType] LIKE '%' + @enmBackofficeTransactionType + '%')
          AND (@CardOrderByDistributorID IS NULL OR t.[CardOrderByDistributorID] = @CardOrderByDistributorID)
          AND (@CardOrderFromIssuerID IS NULL OR t.[CardOrderFromIssuerID] = @CardOrderFromIssuerID)
          AND (@CustomerID IS NULL OR t.[CustomerID] = @CustomerID)
          AND (@DistributorID IS NULL OR t.[DistributorID] = @DistributorID)
          AND (@TransactionLoadID IS NULL OR t.[TransactionLoadID] = @TransactionLoadID)
          AND (@WhenRequested IS NULL OR t.[WhenRequested] = @WhenRequested)
          AND (@spt_WhenSentToSAP IS NULL OR t.[spt_WhenSentToSAP] = @spt_WhenSentToSAP)
          AND (@WhenToExecute IS NULL OR t.[WhenToExecute] = @WhenToExecute)
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_BackofficeTransaction],
            [ID],
            [DistributorID],
            [CustomerID],
            [TransactionLoadID],
            [CardOrderFromIssuerID],
            [CardOrderByDistributorID],
            [CustomerWalletID],
            [enmBackofficeTransactionType],
            [AmountToAccountOwner],
            [enmAccountOwner],
            [WhenRequested],
            [WhenToExecute],
            [RequestingUser],
            [CodeForInvoice],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID],
            [spt_WhenSentToSAP],
            [CardID],
            [clc_MonthRequested],
            [clc_DayRequested],
            [TransactionCreditCardID],
            [TransactionBitID],
            [RequestedTransactionID]
        FROM [BackofficeTransaction]
        WHERE 1=1
          AND (@enmBackofficeTransactionType IS NULL OR [enmBackofficeTransactionType] LIKE '%' + @enmBackofficeTransactionType + '%')
          AND (@enmAccountOwner IS NULL OR [enmAccountOwner] LIKE '%' + @enmAccountOwner + '%')
          AND (@WhenRequested IS NULL OR [WhenRequested] = @WhenRequested)
          AND (@enmBackofficeTransactionType IS NULL OR [enmBackofficeTransactionType] LIKE '%' + @enmBackofficeTransactionType + '%')
          AND (@spt_WhenSentToSAP IS NULL OR [spt_WhenSentToSAP] = @spt_WhenSentToSAP)
          AND (@CardID IS NULL OR [CardID] = @CardID)
          AND (@CustomerWalletID IS NULL OR [CustomerWalletID] = @CustomerWalletID)
          AND (@clc_DayRequested IS NULL OR [clc_DayRequested] = @clc_DayRequested)
          AND (@DistributorID IS NULL OR [DistributorID] = @DistributorID)
          AND (@TransactionLoadID IS NULL OR [TransactionLoadID] = @TransactionLoadID)
          AND (@AmountToAccountOwner IS NULL OR [AmountToAccountOwner] = @AmountToAccountOwner)
          AND (@WhenToExecute IS NULL OR [WhenToExecute] = @WhenToExecute)
          AND (@spt_WhenSentToSAP IS NULL OR [spt_WhenSentToSAP] = @spt_WhenSentToSAP)
          AND (@enmAccountOwner IS NULL OR [enmAccountOwner] LIKE '%' + @enmAccountOwner + '%')
          AND (@enmBackofficeTransactionType IS NULL OR [enmBackofficeTransactionType] LIKE '%' + @enmBackofficeTransactionType + '%')
          AND (@WhenRequested IS NULL OR [WhenRequested] = @WhenRequested)
          AND (@enmBackofficeTransactionType IS NULL OR [enmBackofficeTransactionType] LIKE '%' + @enmBackofficeTransactionType + '%')
          AND (@CustomerID IS NULL OR [CustomerID] = @CustomerID)
          AND (@DistributorID IS NULL OR [DistributorID] = @DistributorID)
          AND (@CustomerWalletID IS NULL OR [CustomerWalletID] = @CustomerWalletID)
          AND (@AmountToAccountOwner IS NULL OR [AmountToAccountOwner] = @AmountToAccountOwner)
          AND (@enmAccountOwner IS NULL OR [enmAccountOwner] LIKE '%' + @enmAccountOwner + '%')
          AND (@WhenRequested IS NULL OR [WhenRequested] = @WhenRequested)
          AND (@CodeForInvoice IS NULL OR [CodeForInvoice] LIKE '%' + @CodeForInvoice + '%')
          AND (@RequestingUser IS NULL OR [RequestingUser] LIKE '%' + @RequestingUser + '%')
          AND (@clc_MonthRequested IS NULL OR [clc_MonthRequested] = @clc_MonthRequested)
          AND (@spt_WhenSentToSAP IS NULL OR [spt_WhenSentToSAP] = @spt_WhenSentToSAP)
          AND (@RequestedTransactionID IS NULL OR [RequestedTransactionID] = @RequestedTransactionID)
          AND (@TransactionBitID IS NULL OR [TransactionBitID] = @TransactionBitID)
          AND (@TransactionCreditCardID IS NULL OR [TransactionCreditCardID] = @TransactionCreditCardID)
          AND (@enmBackofficeTransactionType IS NULL OR [enmBackofficeTransactionType] LIKE '%' + @enmBackofficeTransactionType + '%')
          AND (@CustomerID IS NULL OR [CustomerID] = @CustomerID)
          AND (@DistributorID IS NULL OR [DistributorID] = @DistributorID)
          AND (@CustomerWalletID IS NULL OR [CustomerWalletID] = @CustomerWalletID)
          AND (@AmountToAccountOwner IS NULL OR [AmountToAccountOwner] = @AmountToAccountOwner)
          AND (@spt_WhenSentToSAP IS NULL OR [spt_WhenSentToSAP] = @spt_WhenSentToSAP)
          AND (@WhenRequested IS NULL OR [WhenRequested] = @WhenRequested)
          AND (@enmAccountOwner IS NULL OR [enmAccountOwner] LIKE '%' + @enmAccountOwner + '%')
          AND (@enmBackofficeTransactionType IS NULL OR [enmBackofficeTransactionType] LIKE '%' + @enmBackofficeTransactionType + '%')
          AND (@CardOrderByDistributorID IS NULL OR [CardOrderByDistributorID] = @CardOrderByDistributorID)
          AND (@CardOrderFromIssuerID IS NULL OR [CardOrderFromIssuerID] = @CardOrderFromIssuerID)
          AND (@CustomerID IS NULL OR [CustomerID] = @CustomerID)
          AND (@DistributorID IS NULL OR [DistributorID] = @DistributorID)
          AND (@TransactionLoadID IS NULL OR [TransactionLoadID] = @TransactionLoadID)
          AND (@WhenRequested IS NULL OR [WhenRequested] = @WhenRequested)
          AND (@spt_WhenSentToSAP IS NULL OR [spt_WhenSentToSAP] = @spt_WhenSentToSAP)
          AND (@WhenToExecute IS NULL OR [WhenToExecute] = @WhenToExecute)
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetBackofficeTransactionByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_BackofficeTransaction],
        [ID],
        [DistributorID],
        [CustomerID],
        [TransactionLoadID],
        [CardOrderFromIssuerID],
        [CardOrderByDistributorID],
        [CustomerWalletID],
        [enmBackofficeTransactionType],
        [AmountToAccountOwner],
        [enmAccountOwner],
        [WhenRequested],
        [WhenToExecute],
        [RequestingUser],
        [CodeForInvoice],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spt_WhenSentToSAP],
        [CardID],
        [clc_MonthRequested],
        [clc_DayRequested],
        [TransactionCreditCardID],
        [TransactionBitID],
        [RequestedTransactionID]
    FROM [BackofficeTransaction]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddBackofficeTransaction]
    @TableName_BackofficeTransaction bit = NULL,
    @DistributorID bigint = NULL,
    @CustomerID bigint = NULL,
    @TransactionLoadID bigint = NULL,
    @CardOrderFromIssuerID bigint = NULL,
    @CardOrderByDistributorID bigint = NULL,
    @CustomerWalletID bigint = NULL,
    @enmBackofficeTransactionType varchar(50),
    @AmountToAccountOwner decimal(18,0),
    @enmAccountOwner varchar(50),
    @WhenRequested datetimeoffset,
    @WhenToExecute datetimeoffset = NULL,
    @RequestingUser nvarchar(100),
    @CodeForInvoice nvarchar(300),
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @spt_WhenSentToSAP datetimeoffset = NULL,
    @CardID bigint = NULL,
    @TransactionCreditCardID bigint = NULL,
    @TransactionBitID bigint = NULL,
    @RequestedTransactionID bigint = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [BackofficeTransaction] (
        [TableName_BackofficeTransaction],
        [DistributorID],
        [CustomerID],
        [TransactionLoadID],
        [CardOrderFromIssuerID],
        [CardOrderByDistributorID],
        [CustomerWalletID],
        [enmBackofficeTransactionType],
        [AmountToAccountOwner],
        [enmAccountOwner],
        [WhenRequested],
        [WhenToExecute],
        [RequestingUser],
        [CodeForInvoice],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spt_WhenSentToSAP],
        [CardID],
        [TransactionCreditCardID],
        [TransactionBitID],
        [RequestedTransactionID],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_BackofficeTransaction,
        @DistributorID,
        @CustomerID,
        @TransactionLoadID,
        @CardOrderFromIssuerID,
        @CardOrderByDistributorID,
        @CustomerWalletID,
        @enmBackofficeTransactionType,
        @AmountToAccountOwner,
        @enmAccountOwner,
        @WhenRequested,
        @WhenToExecute,
        @RequestingUser,
        @CodeForInvoice,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        @spt_WhenSentToSAP,
        @CardID,
        @TransactionCreditCardID,
        @TransactionBitID,
        @RequestedTransactionID,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateBackofficeTransaction]
    @ID bigint,
    @TableName_BackofficeTransaction bit = NULL,
    @DistributorID bigint = NULL,
    @CustomerID bigint = NULL,
    @TransactionLoadID bigint = NULL,
    @CardOrderFromIssuerID bigint = NULL,
    @CardOrderByDistributorID bigint = NULL,
    @CustomerWalletID bigint = NULL,
    @enmBackofficeTransactionType varchar(50),
    @AmountToAccountOwner decimal(18,0),
    @enmAccountOwner varchar(50),
    @WhenRequested datetimeoffset,
    @WhenToExecute datetimeoffset = NULL,
    @RequestingUser nvarchar(100),
    @CodeForInvoice nvarchar(300),
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @spt_WhenSentToSAP datetimeoffset = NULL,
    @CardID bigint = NULL,
    @TransactionCreditCardID bigint = NULL,
    @TransactionBitID bigint = NULL,
    @RequestedTransactionID bigint = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [BackofficeTransaction]
    SET
        [TableName_BackofficeTransaction] = @TableName_BackofficeTransaction,
        [DistributorID] = @DistributorID,
        [CustomerID] = @CustomerID,
        [TransactionLoadID] = @TransactionLoadID,
        [CardOrderFromIssuerID] = @CardOrderFromIssuerID,
        [CardOrderByDistributorID] = @CardOrderByDistributorID,
        [CustomerWalletID] = @CustomerWalletID,
        [enmBackofficeTransactionType] = @enmBackofficeTransactionType,
        [AmountToAccountOwner] = @AmountToAccountOwner,
        [enmAccountOwner] = @enmAccountOwner,
        [WhenRequested] = @WhenRequested,
        [WhenToExecute] = @WhenToExecute,
        [RequestingUser] = @RequestingUser,
        [CodeForInvoice] = @CodeForInvoice,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [spt_WhenSentToSAP] = @spt_WhenSentToSAP,
        [CardID] = @CardID,
        [TransactionCreditCardID] = @TransactionCreditCardID,
        [TransactionBitID] = @TransactionBitID,
        [RequestedTransactionID] = @RequestedTransactionID,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteBackofficeTransaction]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [BackofficeTransaction]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_BackofficeTransaction_BackofficeTransactionType_enmAccountOwner_WhenRequested
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillBackofficeTransactionByENMBACKOFFICETRANSACTIONTYPEAndENMACCOUNTOWNERAndWHENREQUESTED]
    @enmBackofficeTransactionType varchar(50),
    @enmAccountOwner varchar(50),
    @WhenRequested datetimeoffset
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_BackofficeTransaction],
        [ID],
        [DistributorID],
        [CustomerID],
        [TransactionLoadID],
        [CardOrderFromIssuerID],
        [CardOrderByDistributorID],
        [CustomerWalletID],
        [enmBackofficeTransactionType],
        [AmountToAccountOwner],
        [enmAccountOwner],
        [WhenRequested],
        [WhenToExecute],
        [RequestingUser],
        [CodeForInvoice],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spt_WhenSentToSAP],
        [CardID],
        [clc_MonthRequested],
        [clc_DayRequested],
        [TransactionCreditCardID],
        [TransactionBitID],
        [RequestedTransactionID]
    FROM [BackofficeTransaction]
    WHERE [enmBackofficeTransactionType] = @enmBackofficeTransactionType AND [enmAccountOwner] = @enmAccountOwner AND [WhenRequested] = @WhenRequested
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_BackofficeTransaction_BackofficeTransactionType_WhenSentToSAP
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillBackofficeTransactionByENMBACKOFFICETRANSACTIONTYPEAndSPTWHENSENTTOSAP]
    @enmBackofficeTransactionType varchar(50),
    @spt_WhenSentToSAP datetimeoffset
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_BackofficeTransaction],
        [ID],
        [DistributorID],
        [CustomerID],
        [TransactionLoadID],
        [CardOrderFromIssuerID],
        [CardOrderByDistributorID],
        [CustomerWalletID],
        [enmBackofficeTransactionType],
        [AmountToAccountOwner],
        [enmAccountOwner],
        [WhenRequested],
        [WhenToExecute],
        [RequestingUser],
        [CodeForInvoice],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spt_WhenSentToSAP],
        [CardID],
        [clc_MonthRequested],
        [clc_DayRequested],
        [TransactionCreditCardID],
        [TransactionBitID],
        [RequestedTransactionID]
    FROM [BackofficeTransaction]
    WHERE [enmBackofficeTransactionType] = @enmBackofficeTransactionType AND [spt_WhenSentToSAP] = @spt_WhenSentToSAP
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_BackofficeTransaction_CardID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillBackofficeTransactionByCARDID]
    @CardID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_BackofficeTransaction],
        [ID],
        [DistributorID],
        [CustomerID],
        [TransactionLoadID],
        [CardOrderFromIssuerID],
        [CardOrderByDistributorID],
        [CustomerWalletID],
        [enmBackofficeTransactionType],
        [AmountToAccountOwner],
        [enmAccountOwner],
        [WhenRequested],
        [WhenToExecute],
        [RequestingUser],
        [CodeForInvoice],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spt_WhenSentToSAP],
        [CardID],
        [clc_MonthRequested],
        [clc_DayRequested],
        [TransactionCreditCardID],
        [TransactionBitID],
        [RequestedTransactionID]
    FROM [BackofficeTransaction]
    WHERE [CardID] = @CardID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_BackofficeTransaction_CustomerWalletID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillBackofficeTransactionByCUSTOMERWALLETID]
    @CustomerWalletID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_BackofficeTransaction],
        [ID],
        [DistributorID],
        [CustomerID],
        [TransactionLoadID],
        [CardOrderFromIssuerID],
        [CardOrderByDistributorID],
        [CustomerWalletID],
        [enmBackofficeTransactionType],
        [AmountToAccountOwner],
        [enmAccountOwner],
        [WhenRequested],
        [WhenToExecute],
        [RequestingUser],
        [CodeForInvoice],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spt_WhenSentToSAP],
        [CardID],
        [clc_MonthRequested],
        [clc_DayRequested],
        [TransactionCreditCardID],
        [TransactionBitID],
        [RequestedTransactionID]
    FROM [BackofficeTransaction]
    WHERE [CustomerWalletID] = @CustomerWalletID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_BackofficeTransaction_DayRequested
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillBackofficeTransactionByCLCDAYREQUESTED]
    @clc_DayRequested date
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_BackofficeTransaction],
        [ID],
        [DistributorID],
        [CustomerID],
        [TransactionLoadID],
        [CardOrderFromIssuerID],
        [CardOrderByDistributorID],
        [CustomerWalletID],
        [enmBackofficeTransactionType],
        [AmountToAccountOwner],
        [enmAccountOwner],
        [WhenRequested],
        [WhenToExecute],
        [RequestingUser],
        [CodeForInvoice],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spt_WhenSentToSAP],
        [CardID],
        [clc_MonthRequested],
        [clc_DayRequested],
        [TransactionCreditCardID],
        [TransactionBitID],
        [RequestedTransactionID]
    FROM [BackofficeTransaction]
    WHERE [clc_DayRequested] = @clc_DayRequested
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_BackofficeTransaction_enmAccountOwner_enmBackofficeTransactionType_[WhenRequested
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillBackofficeTransactionByDISTRIBUTORIDAndTRANSACTIONLOADIDAndAMOUNTTOACCOUNTOWNERAndWHENTOEXECUTEAndSPTWHENSENTTOSAP_130599]
    @DistributorID bigint,
    @TransactionLoadID bigint,
    @AmountToAccountOwner decimal(18,0),
    @WhenToExecute datetimeoffset,
    @spt_WhenSentToSAP datetimeoffset,
    @enmAccountOwner varchar(50),
    @enmBackofficeTransactionType varchar(50),
    @WhenRequested datetimeoffset
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_BackofficeTransaction],
        [ID],
        [DistributorID],
        [CustomerID],
        [TransactionLoadID],
        [CardOrderFromIssuerID],
        [CardOrderByDistributorID],
        [CustomerWalletID],
        [enmBackofficeTransactionType],
        [AmountToAccountOwner],
        [enmAccountOwner],
        [WhenRequested],
        [WhenToExecute],
        [RequestingUser],
        [CodeForInvoice],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spt_WhenSentToSAP],
        [CardID],
        [clc_MonthRequested],
        [clc_DayRequested],
        [TransactionCreditCardID],
        [TransactionBitID],
        [RequestedTransactionID]
    FROM [BackofficeTransaction]
    WHERE [DistributorID] = @DistributorID AND [TransactionLoadID] = @TransactionLoadID AND [AmountToAccountOwner] = @AmountToAccountOwner AND [WhenToExecute] = @WhenToExecute AND [spt_WhenSentToSAP] = @spt_WhenSentToSAP AND [enmAccountOwner] = @enmAccountOwner AND [enmBackofficeTransactionType] = @enmBackofficeTransactionType AND [WhenRequested] = @WhenRequested
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_BackofficeTransaction_MonthRequested_WhenSentToSAP
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillBackofficeTransactionByENMBACKOFFICETRANSACTIONTYPEAndCUSTOMERIDAndDISTRIBUTORIDAndCUSTOMERWALLETIDAndAMOUNTTOACCO_155462]
    @enmBackofficeTransactionType varchar(50),
    @CustomerID bigint,
    @DistributorID bigint,
    @CustomerWalletID bigint,
    @AmountToAccountOwner decimal(18,0),
    @enmAccountOwner varchar(50),
    @WhenRequested datetimeoffset,
    @CodeForInvoice nvarchar(300),
    @RequestingUser nvarchar(100),
    @clc_MonthRequested date,
    @spt_WhenSentToSAP datetimeoffset
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_BackofficeTransaction],
        [ID],
        [DistributorID],
        [CustomerID],
        [TransactionLoadID],
        [CardOrderFromIssuerID],
        [CardOrderByDistributorID],
        [CustomerWalletID],
        [enmBackofficeTransactionType],
        [AmountToAccountOwner],
        [enmAccountOwner],
        [WhenRequested],
        [WhenToExecute],
        [RequestingUser],
        [CodeForInvoice],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spt_WhenSentToSAP],
        [CardID],
        [clc_MonthRequested],
        [clc_DayRequested],
        [TransactionCreditCardID],
        [TransactionBitID],
        [RequestedTransactionID]
    FROM [BackofficeTransaction]
    WHERE [enmBackofficeTransactionType] = @enmBackofficeTransactionType AND [CustomerID] = @CustomerID AND [DistributorID] = @DistributorID AND [CustomerWalletID] = @CustomerWalletID AND [AmountToAccountOwner] = @AmountToAccountOwner AND [enmAccountOwner] = @enmAccountOwner AND [WhenRequested] = @WhenRequested AND [CodeForInvoice] = @CodeForInvoice AND [RequestingUser] = @RequestingUser AND [clc_MonthRequested] = @clc_MonthRequested AND [spt_WhenSentToSAP] = @spt_WhenSentToSAP
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_BackofficeTransaction_RequestedTransactionID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillBackofficeTransactionByREQUESTEDTRANSACTIONID]
    @RequestedTransactionID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_BackofficeTransaction],
        [ID],
        [DistributorID],
        [CustomerID],
        [TransactionLoadID],
        [CardOrderFromIssuerID],
        [CardOrderByDistributorID],
        [CustomerWalletID],
        [enmBackofficeTransactionType],
        [AmountToAccountOwner],
        [enmAccountOwner],
        [WhenRequested],
        [WhenToExecute],
        [RequestingUser],
        [CodeForInvoice],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spt_WhenSentToSAP],
        [CardID],
        [clc_MonthRequested],
        [clc_DayRequested],
        [TransactionCreditCardID],
        [TransactionBitID],
        [RequestedTransactionID]
    FROM [BackofficeTransaction]
    WHERE [RequestedTransactionID] = @RequestedTransactionID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_BackofficeTransaction_TransactionBitID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillBackofficeTransactionByTRANSACTIONBITID]
    @TransactionBitID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_BackofficeTransaction],
        [ID],
        [DistributorID],
        [CustomerID],
        [TransactionLoadID],
        [CardOrderFromIssuerID],
        [CardOrderByDistributorID],
        [CustomerWalletID],
        [enmBackofficeTransactionType],
        [AmountToAccountOwner],
        [enmAccountOwner],
        [WhenRequested],
        [WhenToExecute],
        [RequestingUser],
        [CodeForInvoice],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spt_WhenSentToSAP],
        [CardID],
        [clc_MonthRequested],
        [clc_DayRequested],
        [TransactionCreditCardID],
        [TransactionBitID],
        [RequestedTransactionID]
    FROM [BackofficeTransaction]
    WHERE [TransactionBitID] = @TransactionBitID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_BackofficeTransaction_TransactionCreditCardID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillBackofficeTransactionByTRANSACTIONCREDITCARDID]
    @TransactionCreditCardID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_BackofficeTransaction],
        [ID],
        [DistributorID],
        [CustomerID],
        [TransactionLoadID],
        [CardOrderFromIssuerID],
        [CardOrderByDistributorID],
        [CustomerWalletID],
        [enmBackofficeTransactionType],
        [AmountToAccountOwner],
        [enmAccountOwner],
        [WhenRequested],
        [WhenToExecute],
        [RequestingUser],
        [CodeForInvoice],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spt_WhenSentToSAP],
        [CardID],
        [clc_MonthRequested],
        [clc_DayRequested],
        [TransactionCreditCardID],
        [TransactionBitID],
        [RequestedTransactionID]
    FROM [BackofficeTransaction]
    WHERE [TransactionCreditCardID] = @TransactionCreditCardID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_BackofficeTransaction_WhenSentToSAP_WhenRequested
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillBackofficeTransactionByENMBACKOFFICETRANSACTIONTYPEAndCUSTOMERIDAndDISTRIBUTORIDAndCUSTOMERWALLETIDAndAMOUNTTOACCO_666124]
    @enmBackofficeTransactionType varchar(50),
    @CustomerID bigint,
    @DistributorID bigint,
    @CustomerWalletID bigint,
    @AmountToAccountOwner decimal(18,0),
    @spt_WhenSentToSAP datetimeoffset,
    @WhenRequested datetimeoffset
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_BackofficeTransaction],
        [ID],
        [DistributorID],
        [CustomerID],
        [TransactionLoadID],
        [CardOrderFromIssuerID],
        [CardOrderByDistributorID],
        [CustomerWalletID],
        [enmBackofficeTransactionType],
        [AmountToAccountOwner],
        [enmAccountOwner],
        [WhenRequested],
        [WhenToExecute],
        [RequestingUser],
        [CodeForInvoice],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spt_WhenSentToSAP],
        [CardID],
        [clc_MonthRequested],
        [clc_DayRequested],
        [TransactionCreditCardID],
        [TransactionBitID],
        [RequestedTransactionID]
    FROM [BackofficeTransaction]
    WHERE [enmBackofficeTransactionType] = @enmBackofficeTransactionType AND [CustomerID] = @CustomerID AND [DistributorID] = @DistributorID AND [CustomerWalletID] = @CustomerWalletID AND [AmountToAccountOwner] = @AmountToAccountOwner AND [spt_WhenSentToSAP] = @spt_WhenSentToSAP AND [WhenRequested] = @WhenRequested
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXBackofficeTransaction_AccountOwner
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillBackofficeTransactionByENMACCOUNTOWNER]
    @enmAccountOwner varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_BackofficeTransaction],
        [ID],
        [DistributorID],
        [CustomerID],
        [TransactionLoadID],
        [CardOrderFromIssuerID],
        [CardOrderByDistributorID],
        [CustomerWalletID],
        [enmBackofficeTransactionType],
        [AmountToAccountOwner],
        [enmAccountOwner],
        [WhenRequested],
        [WhenToExecute],
        [RequestingUser],
        [CodeForInvoice],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spt_WhenSentToSAP],
        [CardID],
        [clc_MonthRequested],
        [clc_DayRequested],
        [TransactionCreditCardID],
        [TransactionBitID],
        [RequestedTransactionID]
    FROM [BackofficeTransaction]
    WHERE [enmAccountOwner] = @enmAccountOwner
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXBackofficeTransaction_BackofficeTransactionType
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillBackofficeTransactionByENMBACKOFFICETRANSACTIONTYPE]
    @enmBackofficeTransactionType varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_BackofficeTransaction],
        [ID],
        [DistributorID],
        [CustomerID],
        [TransactionLoadID],
        [CardOrderFromIssuerID],
        [CardOrderByDistributorID],
        [CustomerWalletID],
        [enmBackofficeTransactionType],
        [AmountToAccountOwner],
        [enmAccountOwner],
        [WhenRequested],
        [WhenToExecute],
        [RequestingUser],
        [CodeForInvoice],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spt_WhenSentToSAP],
        [CardID],
        [clc_MonthRequested],
        [clc_DayRequested],
        [TransactionCreditCardID],
        [TransactionBitID],
        [RequestedTransactionID]
    FROM [BackofficeTransaction]
    WHERE [enmBackofficeTransactionType] = @enmBackofficeTransactionType
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXBackofficeTransaction_CardOrderByDistributor
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillBackofficeTransactionByCARDORDERBYDISTRIBUTORID]
    @CardOrderByDistributorID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_BackofficeTransaction],
        [ID],
        [DistributorID],
        [CustomerID],
        [TransactionLoadID],
        [CardOrderFromIssuerID],
        [CardOrderByDistributorID],
        [CustomerWalletID],
        [enmBackofficeTransactionType],
        [AmountToAccountOwner],
        [enmAccountOwner],
        [WhenRequested],
        [WhenToExecute],
        [RequestingUser],
        [CodeForInvoice],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spt_WhenSentToSAP],
        [CardID],
        [clc_MonthRequested],
        [clc_DayRequested],
        [TransactionCreditCardID],
        [TransactionBitID],
        [RequestedTransactionID]
    FROM [BackofficeTransaction]
    WHERE [CardOrderByDistributorID] = @CardOrderByDistributorID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXBackofficeTransaction_CardOrderFromIssuerID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillBackofficeTransactionByCARDORDERFROMISSUERID]
    @CardOrderFromIssuerID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_BackofficeTransaction],
        [ID],
        [DistributorID],
        [CustomerID],
        [TransactionLoadID],
        [CardOrderFromIssuerID],
        [CardOrderByDistributorID],
        [CustomerWalletID],
        [enmBackofficeTransactionType],
        [AmountToAccountOwner],
        [enmAccountOwner],
        [WhenRequested],
        [WhenToExecute],
        [RequestingUser],
        [CodeForInvoice],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spt_WhenSentToSAP],
        [CardID],
        [clc_MonthRequested],
        [clc_DayRequested],
        [TransactionCreditCardID],
        [TransactionBitID],
        [RequestedTransactionID]
    FROM [BackofficeTransaction]
    WHERE [CardOrderFromIssuerID] = @CardOrderFromIssuerID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXBackofficeTransaction_CustomerID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillBackofficeTransactionByCUSTOMERID]
    @CustomerID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_BackofficeTransaction],
        [ID],
        [DistributorID],
        [CustomerID],
        [TransactionLoadID],
        [CardOrderFromIssuerID],
        [CardOrderByDistributorID],
        [CustomerWalletID],
        [enmBackofficeTransactionType],
        [AmountToAccountOwner],
        [enmAccountOwner],
        [WhenRequested],
        [WhenToExecute],
        [RequestingUser],
        [CodeForInvoice],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spt_WhenSentToSAP],
        [CardID],
        [clc_MonthRequested],
        [clc_DayRequested],
        [TransactionCreditCardID],
        [TransactionBitID],
        [RequestedTransactionID]
    FROM [BackofficeTransaction]
    WHERE [CustomerID] = @CustomerID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXBackofficeTransaction_DistributorID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillBackofficeTransactionByDISTRIBUTORID]
    @DistributorID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_BackofficeTransaction],
        [ID],
        [DistributorID],
        [CustomerID],
        [TransactionLoadID],
        [CardOrderFromIssuerID],
        [CardOrderByDistributorID],
        [CustomerWalletID],
        [enmBackofficeTransactionType],
        [AmountToAccountOwner],
        [enmAccountOwner],
        [WhenRequested],
        [WhenToExecute],
        [RequestingUser],
        [CodeForInvoice],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spt_WhenSentToSAP],
        [CardID],
        [clc_MonthRequested],
        [clc_DayRequested],
        [TransactionCreditCardID],
        [TransactionBitID],
        [RequestedTransactionID]
    FROM [BackofficeTransaction]
    WHERE [DistributorID] = @DistributorID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXBackofficeTransaction_TransactionLoadID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillBackofficeTransactionByTRANSACTIONLOADID]
    @TransactionLoadID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_BackofficeTransaction],
        [ID],
        [DistributorID],
        [CustomerID],
        [TransactionLoadID],
        [CardOrderFromIssuerID],
        [CardOrderByDistributorID],
        [CustomerWalletID],
        [enmBackofficeTransactionType],
        [AmountToAccountOwner],
        [enmAccountOwner],
        [WhenRequested],
        [WhenToExecute],
        [RequestingUser],
        [CodeForInvoice],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spt_WhenSentToSAP],
        [CardID],
        [clc_MonthRequested],
        [clc_DayRequested],
        [TransactionCreditCardID],
        [TransactionBitID],
        [RequestedTransactionID]
    FROM [BackofficeTransaction]
    WHERE [TransactionLoadID] = @TransactionLoadID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXBackofficeTransaction_WhenRequested
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillBackofficeTransactionByWHENREQUESTED]
    @WhenRequested datetimeoffset
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_BackofficeTransaction],
        [ID],
        [DistributorID],
        [CustomerID],
        [TransactionLoadID],
        [CardOrderFromIssuerID],
        [CardOrderByDistributorID],
        [CustomerWalletID],
        [enmBackofficeTransactionType],
        [AmountToAccountOwner],
        [enmAccountOwner],
        [WhenRequested],
        [WhenToExecute],
        [RequestingUser],
        [CodeForInvoice],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spt_WhenSentToSAP],
        [CardID],
        [clc_MonthRequested],
        [clc_DayRequested],
        [TransactionCreditCardID],
        [TransactionBitID],
        [RequestedTransactionID]
    FROM [BackofficeTransaction]
    WHERE [WhenRequested] = @WhenRequested
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXBackofficeTransaction_WhenSentToSAP
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillBackofficeTransactionBySPTWHENSENTTOSAP]
    @spt_WhenSentToSAP datetimeoffset
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_BackofficeTransaction],
        [ID],
        [DistributorID],
        [CustomerID],
        [TransactionLoadID],
        [CardOrderFromIssuerID],
        [CardOrderByDistributorID],
        [CustomerWalletID],
        [enmBackofficeTransactionType],
        [AmountToAccountOwner],
        [enmAccountOwner],
        [WhenRequested],
        [WhenToExecute],
        [RequestingUser],
        [CodeForInvoice],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spt_WhenSentToSAP],
        [CardID],
        [clc_MonthRequested],
        [clc_DayRequested],
        [TransactionCreditCardID],
        [TransactionBitID],
        [RequestedTransactionID]
    FROM [BackofficeTransaction]
    WHERE [spt_WhenSentToSAP] = @spt_WhenSentToSAP
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXBackofficeTransaction_WhenToExecute
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillBackofficeTransactionByWHENTOEXECUTE]
    @WhenToExecute datetimeoffset
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_BackofficeTransaction],
        [ID],
        [DistributorID],
        [CustomerID],
        [TransactionLoadID],
        [CardOrderFromIssuerID],
        [CardOrderByDistributorID],
        [CustomerWalletID],
        [enmBackofficeTransactionType],
        [AmountToAccountOwner],
        [enmAccountOwner],
        [WhenRequested],
        [WhenToExecute],
        [RequestingUser],
        [CodeForInvoice],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spt_WhenSentToSAP],
        [CardID],
        [clc_MonthRequested],
        [clc_DayRequested],
        [TransactionCreditCardID],
        [TransactionBitID],
        [RequestedTransactionID]
    FROM [BackofficeTransaction]
    WHERE [WhenToExecute] = @WhenToExecute
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: c_AlertMessage
-- Generated: 2025-12-27 19:28:30 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllAlertMessages]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_AlertMessage],
        [ID],
        [Number],
        [Description],
        [enmType_FaultType],
        [enmSeverity_FaultSeverity],
        [locMessage],
        [locAction],
        [ChangedBy],
        [ChangedOn],
        [UpdatingLoginID],
        [AddedBy],
        [AddedOn],
        [DeletedBy],
        [DeletedOn]
    FROM [c_AlertMessage]
    ORDER BY [ID]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredAlertMessages]
    @Number INT = NULL,
    @Description NVARCHAR(200) = NULL,
    @enmType_FaultType VARCHAR(50) = NULL,
    @enmSeverity_FaultSeverity VARCHAR(50) = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_AlertMessage],
        [ID],
        [Number],
        [Description],
        [enmType_FaultType],
        [enmSeverity_FaultSeverity],
        [locMessage],
        [locAction],
        [ChangedBy],
        [ChangedOn],
        [UpdatingLoginID],
        [AddedBy],
        [AddedOn],
        [DeletedBy],
        [DeletedOn]
    FROM [c_AlertMessage]
    WHERE 1=1
      AND (@Number IS NULL OR [Number] = @Number)
      AND (@Description IS NULL OR [Description] LIKE '%' + @Description + '%')
      AND (@enmType_FaultType IS NULL OR [enmType_FaultType] LIKE '%' + @enmType_FaultType + '%')
      AND (@enmSeverity_FaultSeverity IS NULL OR [enmSeverity_FaultSeverity] LIKE '%' + @enmSeverity_FaultSeverity + '%')
    ORDER BY [ID]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAlertMessageByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_AlertMessage],
        [ID],
        [Number],
        [Description],
        [enmType_FaultType],
        [enmSeverity_FaultSeverity],
        [locMessage],
        [locAction],
        [ChangedBy],
        [ChangedOn],
        [UpdatingLoginID],
        [AddedBy],
        [AddedOn],
        [DeletedBy],
        [DeletedOn]
    FROM [c_AlertMessage]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddAlertMessage]
    @TableName_c_AlertMessage bit,
    @Number int = NULL,
    @Description nvarchar(200) = NULL,
    @enmType_FaultType varchar(50) = NULL,
    @enmSeverity_FaultSeverity varchar(50) = NULL,
    @locMessage nvarchar(200) = NULL,
    @locAction nvarchar(200) = NULL,
    @UpdatingLoginID bigint = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [c_AlertMessage] (
        [TableName_c_AlertMessage],
        [Number],
        [Description],
        [enmType_FaultType],
        [enmSeverity_FaultSeverity],
        [locMessage],
        [locAction],
        [UpdatingLoginID],
        [DeletedBy],
        [DeletedOn],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_c_AlertMessage,
        @Number,
        @Description,
        @enmType_FaultType,
        @enmSeverity_FaultSeverity,
        @locMessage,
        @locAction,
        @UpdatingLoginID,
        @DeletedBy,
        @DeletedOn,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateAlertMessage]
    @ID bigint,
    @TableName_c_AlertMessage bit,
    @Number int = NULL,
    @Description nvarchar(200) = NULL,
    @enmType_FaultType varchar(50) = NULL,
    @enmSeverity_FaultSeverity varchar(50) = NULL,
    @locMessage nvarchar(200) = NULL,
    @locAction nvarchar(200) = NULL,
    @UpdatingLoginID bigint = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [c_AlertMessage]
    SET
        [TableName_c_AlertMessage] = @TableName_c_AlertMessage,
        [Number] = @Number,
        [Description] = @Description,
        [enmType_FaultType] = @enmType_FaultType,
        [enmSeverity_FaultSeverity] = @enmSeverity_FaultSeverity,
        [locMessage] = @locMessage,
        [locAction] = @locAction,
        [UpdatingLoginID] = @UpdatingLoginID,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteAlertMessage]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [c_AlertMessage]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_c_AlertMessage_Number
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAlertMessageByNUMBER]
    @Number int
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_AlertMessage],
        [ID],
        [Number],
        [Description],
        [enmType_FaultType],
        [enmSeverity_FaultSeverity],
        [locMessage],
        [locAction],
        [ChangedBy],
        [ChangedOn],
        [UpdatingLoginID],
        [AddedBy],
        [AddedOn],
        [DeletedBy],
        [DeletedOn]
    FROM [c_AlertMessage]
    WHERE [Number] = @Number
;
END

GO

-- Procedure for Index: IX_c_AlertMessage_Description
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillAlertMessageByDESCRIPTION]
    @Description nvarchar(200)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_AlertMessage],
        [ID],
        [Number],
        [Description],
        [enmType_FaultType],
        [enmSeverity_FaultSeverity],
        [locMessage],
        [locAction],
        [ChangedBy],
        [ChangedOn],
        [UpdatingLoginID],
        [AddedBy],
        [AddedOn],
        [DeletedBy],
        [DeletedOn]
    FROM [c_AlertMessage]
    WHERE [Description] = @Description
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_c_AlertMessage_Type_Severity
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillAlertMessageByENMTYPEFAULTTYPEAndENMSEVERITYFAULTSEVERITY]
    @enmType_FaultType varchar(50),
    @enmSeverity_FaultSeverity varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_AlertMessage],
        [ID],
        [Number],
        [Description],
        [enmType_FaultType],
        [enmSeverity_FaultSeverity],
        [locMessage],
        [locAction],
        [ChangedBy],
        [ChangedOn],
        [UpdatingLoginID],
        [AddedBy],
        [AddedOn],
        [DeletedBy],
        [DeletedOn]
    FROM [c_AlertMessage]
    WHERE [enmType_FaultType] = @enmType_FaultType AND [enmSeverity_FaultSeverity] = @enmSeverity_FaultSeverity
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: c_AuditIndexed
-- Generated: 2025-12-27 19:28:30 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllAuditIndexeds]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [OriginalID],
        [TableName],
        [RowID],
        [Operation],
        [OccurredAt],
        [SqlCurrentUser],
        [FieldName],
        [OldValue],
        [NewValue],
        [ChangedByUser],
        [ActiveLoginID],
        [SqlSystemUser],
        [SqlAppName],
        [SqlHostName]
    FROM [c_AuditIndexed]
    ORDER BY [ID]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredAuditIndexeds]
    @ActiveLoginID INT = NULL,
    @ChangedByUser NVARCHAR(100) = NULL,
    @FieldName VARCHAR(100) = NULL,
    @OccurredAt DATETIME = NULL,
    @OriginalID INT = NULL,
    @RowID INT = NULL,
    @TableName VARCHAR(50) = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [OriginalID],
        [TableName],
        [RowID],
        [Operation],
        [OccurredAt],
        [SqlCurrentUser],
        [FieldName],
        [OldValue],
        [NewValue],
        [ChangedByUser],
        [ActiveLoginID],
        [SqlSystemUser],
        [SqlAppName],
        [SqlHostName]
    FROM [c_AuditIndexed]
    WHERE 1=1
      AND (@ActiveLoginID IS NULL OR [ActiveLoginID] = @ActiveLoginID)
      AND (@ChangedByUser IS NULL OR [ChangedByUser] LIKE '%' + @ChangedByUser + '%')
      AND (@FieldName IS NULL OR [FieldName] LIKE '%' + @FieldName + '%')
      AND (@OccurredAt IS NULL OR [OccurredAt] = @OccurredAt)
      AND (@OriginalID IS NULL OR [OriginalID] = @OriginalID)
      AND (@RowID IS NULL OR [RowID] = @RowID)
      AND (@TableName IS NULL OR [TableName] LIKE '%' + @TableName + '%')
      AND (@TableName IS NULL OR [TableName] LIKE '%' + @TableName + '%')
      AND (@RowID IS NULL OR [RowID] = @RowID)
    ORDER BY [ID]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAuditIndexedByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [OriginalID],
        [TableName],
        [RowID],
        [Operation],
        [OccurredAt],
        [SqlCurrentUser],
        [FieldName],
        [OldValue],
        [NewValue],
        [ChangedByUser],
        [ActiveLoginID],
        [SqlSystemUser],
        [SqlAppName],
        [SqlHostName]
    FROM [c_AuditIndexed]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddAuditIndexed]
    @OriginalID bigint = NULL,
    @TableName varchar(50) = NULL,
    @RowID bigint = NULL,
    @Operation varchar(10) = NULL,
    @OccurredAt datetime = NULL,
    @SqlCurrentUser nvarchar(100) = NULL,
    @FieldName varchar(100) = NULL,
    @OldValue nvarchar(2000) = NULL,
    @NewValue nvarchar(2000) = NULL,
    @ChangedByUser nvarchar(100) = NULL,
    @ActiveLoginID bigint = NULL,
    @SqlSystemUser nvarchar(100) = NULL,
    @SqlAppName nvarchar(500) = NULL,
    @SqlHostName varchar(50) = NULL
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [c_AuditIndexed] (
        [OriginalID],
        [TableName],
        [RowID],
        [Operation],
        [OccurredAt],
        [SqlCurrentUser],
        [FieldName],
        [OldValue],
        [NewValue],
        [ChangedByUser],
        [ActiveLoginID],
        [SqlSystemUser],
        [SqlAppName],
        [SqlHostName]
    )
    VALUES (
        @OriginalID,
        @TableName,
        @RowID,
        @Operation,
        @OccurredAt,
        @SqlCurrentUser,
        @FieldName,
        @OldValue,
        @NewValue,
        @ChangedByUser,
        @ActiveLoginID,
        @SqlSystemUser,
        @SqlAppName,
        @SqlHostName
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateAuditIndexed]
    @ID bigint,
    @OriginalID bigint = NULL,
    @TableName varchar(50) = NULL,
    @RowID bigint = NULL,
    @Operation varchar(10) = NULL,
    @OccurredAt datetime = NULL,
    @SqlCurrentUser nvarchar(100) = NULL,
    @FieldName varchar(100) = NULL,
    @OldValue nvarchar(2000) = NULL,
    @NewValue nvarchar(2000) = NULL,
    @ChangedByUser nvarchar(100) = NULL,
    @ActiveLoginID bigint = NULL,
    @SqlSystemUser nvarchar(100) = NULL,
    @SqlAppName nvarchar(500) = NULL,
    @SqlHostName varchar(50) = NULL
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [c_AuditIndexed]
    SET
        [OriginalID] = @OriginalID,
        [TableName] = @TableName,
        [RowID] = @RowID,
        [Operation] = @Operation,
        [OccurredAt] = @OccurredAt,
        [SqlCurrentUser] = @SqlCurrentUser,
        [FieldName] = @FieldName,
        [OldValue] = @OldValue,
        [NewValue] = @NewValue,
        [ChangedByUser] = @ChangedByUser,
        [ActiveLoginID] = @ActiveLoginID,
        [SqlSystemUser] = @SqlSystemUser,
        [SqlAppName] = @SqlAppName,
        [SqlHostName] = @SqlHostName
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteAuditIndexed]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [c_AuditIndexed]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_c_AuditIndexed_ActiveLoginID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillAuditIndexedByACTIVELOGINID]
    @ActiveLoginID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [OriginalID],
        [TableName],
        [RowID],
        [Operation],
        [OccurredAt],
        [SqlCurrentUser],
        [FieldName],
        [OldValue],
        [NewValue],
        [ChangedByUser],
        [ActiveLoginID],
        [SqlSystemUser],
        [SqlAppName],
        [SqlHostName]
    FROM [c_AuditIndexed]
    WHERE [ActiveLoginID] = @ActiveLoginID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_c_AuditIndexed_ChangedByUser
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillAuditIndexedByCHANGEDBYUSER]
    @ChangedByUser nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [OriginalID],
        [TableName],
        [RowID],
        [Operation],
        [OccurredAt],
        [SqlCurrentUser],
        [FieldName],
        [OldValue],
        [NewValue],
        [ChangedByUser],
        [ActiveLoginID],
        [SqlSystemUser],
        [SqlAppName],
        [SqlHostName]
    FROM [c_AuditIndexed]
    WHERE [ChangedByUser] = @ChangedByUser
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_c_AuditIndexed_FieldName
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillAuditIndexedByFIELDNAME]
    @FieldName varchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [OriginalID],
        [TableName],
        [RowID],
        [Operation],
        [OccurredAt],
        [SqlCurrentUser],
        [FieldName],
        [OldValue],
        [NewValue],
        [ChangedByUser],
        [ActiveLoginID],
        [SqlSystemUser],
        [SqlAppName],
        [SqlHostName]
    FROM [c_AuditIndexed]
    WHERE [FieldName] = @FieldName
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_c_AuditIndexed_OccurredAt
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillAuditIndexedByOCCURREDAT]
    @OccurredAt datetime
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [OriginalID],
        [TableName],
        [RowID],
        [Operation],
        [OccurredAt],
        [SqlCurrentUser],
        [FieldName],
        [OldValue],
        [NewValue],
        [ChangedByUser],
        [ActiveLoginID],
        [SqlSystemUser],
        [SqlAppName],
        [SqlHostName]
    FROM [c_AuditIndexed]
    WHERE [OccurredAt] = @OccurredAt
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_c_AuditIndexed_OriginalID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillAuditIndexedByORIGINALID]
    @OriginalID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [OriginalID],
        [TableName],
        [RowID],
        [Operation],
        [OccurredAt],
        [SqlCurrentUser],
        [FieldName],
        [OldValue],
        [NewValue],
        [ChangedByUser],
        [ActiveLoginID],
        [SqlSystemUser],
        [SqlAppName],
        [SqlHostName]
    FROM [c_AuditIndexed]
    WHERE [OriginalID] = @OriginalID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_c_AuditIndexed_RowID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillAuditIndexedByROWID]
    @RowID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [OriginalID],
        [TableName],
        [RowID],
        [Operation],
        [OccurredAt],
        [SqlCurrentUser],
        [FieldName],
        [OldValue],
        [NewValue],
        [ChangedByUser],
        [ActiveLoginID],
        [SqlSystemUser],
        [SqlAppName],
        [SqlHostName]
    FROM [c_AuditIndexed]
    WHERE [RowID] = @RowID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_c_AuditIndexed_TableName
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillAuditIndexedByTABLENAME]
    @TableName varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [OriginalID],
        [TableName],
        [RowID],
        [Operation],
        [OccurredAt],
        [SqlCurrentUser],
        [FieldName],
        [OldValue],
        [NewValue],
        [ChangedByUser],
        [ActiveLoginID],
        [SqlSystemUser],
        [SqlAppName],
        [SqlHostName]
    FROM [c_AuditIndexed]
    WHERE [TableName] = @TableName
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_c_AuditIndexed_TableName_RowID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillAuditIndexedByTABLENAMEAndROWID]
    @TableName varchar(50),
    @RowID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [OriginalID],
        [TableName],
        [RowID],
        [Operation],
        [OccurredAt],
        [SqlCurrentUser],
        [FieldName],
        [OldValue],
        [NewValue],
        [ChangedByUser],
        [ActiveLoginID],
        [SqlSystemUser],
        [SqlAppName],
        [SqlHostName]
    FROM [c_AuditIndexed]
    WHERE [TableName] = @TableName AND [RowID] = @RowID
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: c_Enumeration
-- Generated: 2025-12-27 19:28:30 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllEnumerations]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [IsSystem],
        [EnumType],
        [EnumValue],
        [locText],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [TableName_c_Enumeration],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [c_Enumeration]
    ORDER BY [ID]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredEnumerations]
    @EnumType VARCHAR(50) = NULL,
    @EnumValue VARCHAR(50) = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [IsSystem],
        [EnumType],
        [EnumValue],
        [locText],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [TableName_c_Enumeration],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [c_Enumeration]
    WHERE 1=1
      AND (@EnumType IS NULL OR [EnumType] LIKE '%' + @EnumType + '%')
      AND (@EnumValue IS NULL OR [EnumValue] LIKE '%' + @EnumValue + '%')
      AND (@EnumType IS NULL OR [EnumType] LIKE '%' + @EnumType + '%')
    ORDER BY [ID]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetEnumerationByID]
    @ID int
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [IsSystem],
        [EnumType],
        [EnumValue],
        [locText],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [TableName_c_Enumeration],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [c_Enumeration]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddEnumeration]
    @IsSystem bit = NULL,
    @EnumType varchar(50) = NULL,
    @EnumValue varchar(50) = NULL,
    @locText nvarchar(100) = NULL,
    @TableName_c_Enumeration bit = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [c_Enumeration] (
        [IsSystem],
        [EnumType],
        [EnumValue],
        [locText],
        [TableName_c_Enumeration],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @IsSystem,
        @EnumType,
        @EnumValue,
        @locText,
        @TableName_c_Enumeration,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateEnumeration]
    @ID int,
    @IsSystem bit = NULL,
    @EnumType varchar(50) = NULL,
    @EnumValue varchar(50) = NULL,
    @locText nvarchar(100) = NULL,
    @TableName_c_Enumeration bit = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [c_Enumeration]
    SET
        [IsSystem] = @IsSystem,
        [EnumType] = @EnumType,
        [EnumValue] = @EnumValue,
        [locText] = @locText,
        [TableName_c_Enumeration] = @TableName_c_Enumeration,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteEnumeration]
    @ID int
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [c_Enumeration]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_c_Enumeration_EnumTypeAndEnumValue
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetEnumerationByENUMTYPEAndENUMVALUE]
    @EnumType varchar(50),
    @EnumValue varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [IsSystem],
        [EnumType],
        [EnumValue],
        [locText],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [TableName_c_Enumeration],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [c_Enumeration]
    WHERE [EnumType] = @EnumType AND [EnumValue] = @EnumValue
;
END

GO

-- Procedure for Index: IX_c_Enumeration_EnumType
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillEnumerationByENUMTYPE]
    @EnumType varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [IsSystem],
        [EnumType],
        [EnumValue],
        [locText],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [TableName_c_Enumeration],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [c_Enumeration]
    WHERE [EnumType] = @EnumType
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: c_IndexFragmentation
-- Generated: 2025-12-27 19:28:30 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllIndexFragmentations]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [TableName],
        [IndexName],
        [IndexType],
        [FragmentationPct],
        [PageCount]
    FROM [c_IndexFragmentation]
;
END

GO



-- =========================================
-- Stored Procedures for Table: c_IndexFragmentationData
-- Generated: 2025-12-27 19:28:30 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllIndexFragmentationDatas]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [TableName],
        [IndexName],
        [IndexType],
        [FragmentationPct],
        [PageCount]
    FROM [c_IndexFragmentationData]
;
END

GO



-- =========================================
-- Stored Procedures for Table: c_Job
-- Generated: 2025-12-27 19:28:30 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllJobs]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_Job],
        [ID],
        [lkpJob],
        [lkpJobRunner],
        [Description],
        [Instructions],
        [enmJobType],
        [WhenToRun],
        [CyclicCount],
        [SendNotificationOnSuccess],
        [SendAlarmOnMissed],
        [TimeOutSec],
        [Active],
        [ActivatingUser],
        [NextRunTime],
        [LastRunTime],
        [enmJobStatus],
        [WarningMailSent],
        [IsManaged],
        [LastRunBy],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [c_Job]
    ORDER BY [ID]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredJobs]
    @lkpJob VARCHAR(50) = NULL,
    @lkpJobRunner VARCHAR(50) = NULL,
    @Active BIT = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_Job],
        [ID],
        [lkpJob],
        [lkpJobRunner],
        [Description],
        [Instructions],
        [enmJobType],
        [WhenToRun],
        [CyclicCount],
        [SendNotificationOnSuccess],
        [SendAlarmOnMissed],
        [TimeOutSec],
        [Active],
        [ActivatingUser],
        [NextRunTime],
        [LastRunTime],
        [enmJobStatus],
        [WarningMailSent],
        [IsManaged],
        [LastRunBy],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [c_Job]
    WHERE 1=1
      AND (@lkpJob IS NULL OR [lkpJob] LIKE '%' + @lkpJob + '%')
      AND (@lkpJobRunner IS NULL OR [lkpJobRunner] LIKE '%' + @lkpJobRunner + '%')
      AND (@Active IS NULL OR [Active] = @Active)
      AND (@lkpJob IS NULL OR [lkpJob] LIKE '%' + @lkpJob + '%')
      AND (@lkpJobRunner IS NULL OR [lkpJobRunner] LIKE '%' + @lkpJobRunner + '%')
      AND (@lkpJobRunner IS NULL OR [lkpJobRunner] LIKE '%' + @lkpJobRunner + '%')
      AND (@Active IS NULL OR [Active] = @Active)
    ORDER BY [ID]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetJobByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_Job],
        [ID],
        [lkpJob],
        [lkpJobRunner],
        [Description],
        [Instructions],
        [enmJobType],
        [WhenToRun],
        [CyclicCount],
        [SendNotificationOnSuccess],
        [SendAlarmOnMissed],
        [TimeOutSec],
        [Active],
        [ActivatingUser],
        [NextRunTime],
        [LastRunTime],
        [enmJobStatus],
        [WarningMailSent],
        [IsManaged],
        [LastRunBy],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [c_Job]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddJob]
    @TableName_c_Job bit = NULL,
    @lkpJob varchar(50) = NULL,
    @lkpJobRunner varchar(50) = NULL,
    @Description nvarchar(1000) = NULL,
    @Instructions nvarchar(2000) = NULL,
    @enmJobType varchar(50) = NULL,
    @WhenToRun datetime = NULL,
    @CyclicCount int = NULL,
    @SendNotificationOnSuccess bit = NULL,
    @SendAlarmOnMissed bit = NULL,
    @TimeOutSec int = NULL,
    @Active bit = NULL,
    @ActivatingUser varchar(50) = NULL,
    @NextRunTime datetime = NULL,
    @LastRunTime datetime = NULL,
    @enmJobStatus varchar(50) = NULL,
    @WarningMailSent bit = NULL,
    @IsManaged bit = NULL,
    @LastRunBy nvarchar(100) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [c_Job] (
        [TableName_c_Job],
        [lkpJob],
        [lkpJobRunner],
        [Description],
        [Instructions],
        [enmJobType],
        [WhenToRun],
        [CyclicCount],
        [SendNotificationOnSuccess],
        [SendAlarmOnMissed],
        [TimeOutSec],
        [Active],
        [ActivatingUser],
        [NextRunTime],
        [LastRunTime],
        [enmJobStatus],
        [WarningMailSent],
        [IsManaged],
        [LastRunBy],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_c_Job,
        @lkpJob,
        @lkpJobRunner,
        @Description,
        @Instructions,
        @enmJobType,
        @WhenToRun,
        @CyclicCount,
        @SendNotificationOnSuccess,
        @SendAlarmOnMissed,
        @TimeOutSec,
        @Active,
        @ActivatingUser,
        @NextRunTime,
        @LastRunTime,
        @enmJobStatus,
        @WarningMailSent,
        @IsManaged,
        @LastRunBy,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateJob]
    @ID bigint,
    @TableName_c_Job bit = NULL,
    @lkpJob varchar(50) = NULL,
    @lkpJobRunner varchar(50) = NULL,
    @Description nvarchar(1000) = NULL,
    @Instructions nvarchar(2000) = NULL,
    @enmJobType varchar(50) = NULL,
    @WhenToRun datetime = NULL,
    @CyclicCount int = NULL,
    @SendNotificationOnSuccess bit = NULL,
    @SendAlarmOnMissed bit = NULL,
    @TimeOutSec int = NULL,
    @Active bit = NULL,
    @ActivatingUser varchar(50) = NULL,
    @NextRunTime datetime = NULL,
    @LastRunTime datetime = NULL,
    @enmJobStatus varchar(50) = NULL,
    @WarningMailSent bit = NULL,
    @IsManaged bit = NULL,
    @LastRunBy nvarchar(100) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [c_Job]
    SET
        [TableName_c_Job] = @TableName_c_Job,
        [lkpJob] = @lkpJob,
        [lkpJobRunner] = @lkpJobRunner,
        [Description] = @Description,
        [Instructions] = @Instructions,
        [enmJobType] = @enmJobType,
        [WhenToRun] = @WhenToRun,
        [CyclicCount] = @CyclicCount,
        [SendNotificationOnSuccess] = @SendNotificationOnSuccess,
        [SendAlarmOnMissed] = @SendAlarmOnMissed,
        [TimeOutSec] = @TimeOutSec,
        [Active] = @Active,
        [ActivatingUser] = @ActivatingUser,
        [NextRunTime] = @NextRunTime,
        [LastRunTime] = @LastRunTime,
        [enmJobStatus] = @enmJobStatus,
        [WarningMailSent] = @WarningMailSent,
        [IsManaged] = @IsManaged,
        [LastRunBy] = @LastRunBy,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteJob]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [c_Job]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_c_Job_Job_JobRunner
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetJobByLKPJOBAndLKPJOBRUNNER]
    @lkpJob varchar(50),
    @lkpJobRunner varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_Job],
        [ID],
        [lkpJob],
        [lkpJobRunner],
        [Description],
        [Instructions],
        [enmJobType],
        [WhenToRun],
        [CyclicCount],
        [SendNotificationOnSuccess],
        [SendAlarmOnMissed],
        [TimeOutSec],
        [Active],
        [ActivatingUser],
        [NextRunTime],
        [LastRunTime],
        [enmJobStatus],
        [WarningMailSent],
        [IsManaged],
        [LastRunBy],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [c_Job]
    WHERE [lkpJob] = @lkpJob AND [lkpJobRunner] = @lkpJobRunner
;
END

GO

-- Procedure for Index: IX_c_Job_Active
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillJobByACTIVE]
    @Active bit
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_Job],
        [ID],
        [lkpJob],
        [lkpJobRunner],
        [Description],
        [Instructions],
        [enmJobType],
        [WhenToRun],
        [CyclicCount],
        [SendNotificationOnSuccess],
        [SendAlarmOnMissed],
        [TimeOutSec],
        [Active],
        [ActivatingUser],
        [NextRunTime],
        [LastRunTime],
        [enmJobStatus],
        [WarningMailSent],
        [IsManaged],
        [LastRunBy],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [c_Job]
    WHERE [Active] = @Active
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_c_Job_Job
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillJobByLKPJOB]
    @lkpJob varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_Job],
        [ID],
        [lkpJob],
        [lkpJobRunner],
        [Description],
        [Instructions],
        [enmJobType],
        [WhenToRun],
        [CyclicCount],
        [SendNotificationOnSuccess],
        [SendAlarmOnMissed],
        [TimeOutSec],
        [Active],
        [ActivatingUser],
        [NextRunTime],
        [LastRunTime],
        [enmJobStatus],
        [WarningMailSent],
        [IsManaged],
        [LastRunBy],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [c_Job]
    WHERE [lkpJob] = @lkpJob
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_c_Job_JobRunner
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillJobByLKPJOBRUNNER]
    @lkpJobRunner varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_Job],
        [ID],
        [lkpJob],
        [lkpJobRunner],
        [Description],
        [Instructions],
        [enmJobType],
        [WhenToRun],
        [CyclicCount],
        [SendNotificationOnSuccess],
        [SendAlarmOnMissed],
        [TimeOutSec],
        [Active],
        [ActivatingUser],
        [NextRunTime],
        [LastRunTime],
        [enmJobStatus],
        [WarningMailSent],
        [IsManaged],
        [LastRunBy],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [c_Job]
    WHERE [lkpJobRunner] = @lkpJobRunner
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_c_Job_JobRunner_Active
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillJobByLKPJOBRUNNERAndACTIVE]
    @lkpJobRunner varchar(50),
    @Active bit
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_Job],
        [ID],
        [lkpJob],
        [lkpJobRunner],
        [Description],
        [Instructions],
        [enmJobType],
        [WhenToRun],
        [CyclicCount],
        [SendNotificationOnSuccess],
        [SendAlarmOnMissed],
        [TimeOutSec],
        [Active],
        [ActivatingUser],
        [NextRunTime],
        [LastRunTime],
        [enmJobStatus],
        [WarningMailSent],
        [IsManaged],
        [LastRunBy],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [c_Job]
    WHERE [lkpJobRunner] = @lkpJobRunner AND [Active] = @Active
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: c_JobAlertRecipient
-- Generated: 2025-12-27 19:28:30 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllJobAlertRecipients]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_c_JobAlertRecipient],
            t.[ID],
            t.[c_JobID],
            t.[c_UserID],
            t.[enmJobAlertType],
            t.[OverrideName],
            t.[OverrideEmailOrPhone],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            p1.[Text] AS [c_JobID_Text],
            p2.[Text] AS [c_UserID_Text]
        FROM [c_JobAlertRecipient] t
        LEFT JOIN [ccvwComboList_c_Job] p1 ON t.[c_JobID] = p1.[ID]
        LEFT JOIN [ccvwComboList_c_User] p2 ON t.[c_UserID] = p2.[ID]
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_c_JobAlertRecipient],
            [ID],
            [c_JobID],
            [c_UserID],
            [enmJobAlertType],
            [OverrideName],
            [OverrideEmailOrPhone],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID]
        FROM [c_JobAlertRecipient]
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredJobAlertRecipients]
    @c_JobID INT = NULL,
    @c_UserID INT = NULL,
    @enmJobAlertType VARCHAR(50) = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_c_JobAlertRecipient],
            t.[ID],
            t.[c_JobID],
            t.[c_UserID],
            t.[enmJobAlertType],
            t.[OverrideName],
            t.[OverrideEmailOrPhone],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            p1.[Text] AS [c_JobID_Text],
            p2.[Text] AS [c_UserID_Text]
        FROM [c_JobAlertRecipient] t
        LEFT JOIN [ccvwComboList_c_Job] p1 ON t.[c_JobID] = p1.[ID]
        LEFT JOIN [ccvwComboList_c_User] p2 ON t.[c_UserID] = p2.[ID]
        WHERE 1=1
          AND (@c_JobID IS NULL OR t.[c_JobID] = @c_JobID)
          AND (@c_UserID IS NULL OR t.[c_UserID] = @c_UserID)
          AND (@enmJobAlertType IS NULL OR t.[enmJobAlertType] LIKE '%' + @enmJobAlertType + '%')
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_c_JobAlertRecipient],
            [ID],
            [c_JobID],
            [c_UserID],
            [enmJobAlertType],
            [OverrideName],
            [OverrideEmailOrPhone],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID]
        FROM [c_JobAlertRecipient]
        WHERE 1=1
          AND (@c_JobID IS NULL OR [c_JobID] = @c_JobID)
          AND (@c_UserID IS NULL OR [c_UserID] = @c_UserID)
          AND (@enmJobAlertType IS NULL OR [enmJobAlertType] LIKE '%' + @enmJobAlertType + '%')
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetJobAlertRecipientByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_JobAlertRecipient],
        [ID],
        [c_JobID],
        [c_UserID],
        [enmJobAlertType],
        [OverrideName],
        [OverrideEmailOrPhone],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [c_JobAlertRecipient]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddJobAlertRecipient]
    @TableName_c_JobAlertRecipient bit = NULL,
    @c_JobID bigint = NULL,
    @c_UserID bigint = NULL,
    @enmJobAlertType varchar(50) = NULL,
    @OverrideName nvarchar(100) = NULL,
    @OverrideEmailOrPhone nvarchar(100) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [c_JobAlertRecipient] (
        [TableName_c_JobAlertRecipient],
        [c_JobID],
        [c_UserID],
        [enmJobAlertType],
        [OverrideName],
        [OverrideEmailOrPhone],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_c_JobAlertRecipient,
        @c_JobID,
        @c_UserID,
        @enmJobAlertType,
        @OverrideName,
        @OverrideEmailOrPhone,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateJobAlertRecipient]
    @ID bigint,
    @TableName_c_JobAlertRecipient bit = NULL,
    @c_JobID bigint = NULL,
    @c_UserID bigint = NULL,
    @enmJobAlertType varchar(50) = NULL,
    @OverrideName nvarchar(100) = NULL,
    @OverrideEmailOrPhone nvarchar(100) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [c_JobAlertRecipient]
    SET
        [TableName_c_JobAlertRecipient] = @TableName_c_JobAlertRecipient,
        [c_JobID] = @c_JobID,
        [c_UserID] = @c_UserID,
        [enmJobAlertType] = @enmJobAlertType,
        [OverrideName] = @OverrideName,
        [OverrideEmailOrPhone] = @OverrideEmailOrPhone,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteJobAlertRecipient]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [c_JobAlertRecipient]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_c_JobAlertRecipient_c_JobID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillJobAlertRecipientByCJOBID]
    @c_JobID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_JobAlertRecipient],
        [ID],
        [c_JobID],
        [c_UserID],
        [enmJobAlertType],
        [OverrideName],
        [OverrideEmailOrPhone],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [c_JobAlertRecipient]
    WHERE [c_JobID] = @c_JobID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_c_JobAlertRecipient_c_UserID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillJobAlertRecipientByCUSERID]
    @c_UserID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_JobAlertRecipient],
        [ID],
        [c_JobID],
        [c_UserID],
        [enmJobAlertType],
        [OverrideName],
        [OverrideEmailOrPhone],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [c_JobAlertRecipient]
    WHERE [c_UserID] = @c_UserID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_c_JobAlertRecipient_JobAlertType
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillJobAlertRecipientByENMJOBALERTTYPE]
    @enmJobAlertType varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_JobAlertRecipient],
        [ID],
        [c_JobID],
        [c_UserID],
        [enmJobAlertType],
        [OverrideName],
        [OverrideEmailOrPhone],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [c_JobAlertRecipient]
    WHERE [enmJobAlertType] = @enmJobAlertType
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: c_Language
-- Generated: 2025-12-27 19:28:30 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllLanguages]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [Code],
        [Name],
        [NameLoc],
        [Culture]
    FROM [c_Language]
    ORDER BY [ID]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredLanguages]
    @Code VARCHAR(50) = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [Code],
        [Name],
        [NameLoc],
        [Culture]
    FROM [c_Language]
    WHERE 1=1
      AND (@Code IS NULL OR [Code] LIKE '%' + @Code + '%')
    ORDER BY [ID]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetLanguageByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [Code],
        [Name],
        [NameLoc],
        [Culture]
    FROM [c_Language]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddLanguage]
    @Code varchar(50) = NULL,
    @Name varchar(50) = NULL,
    @NameLoc nvarchar(100) = NULL,
    @Culture varchar(10) = NULL
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [c_Language] (
        [Code],
        [Name],
        [NameLoc],
        [Culture]
    )
    VALUES (
        @Code,
        @Name,
        @NameLoc,
        @Culture
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateLanguage]
    @ID bigint,
    @Code varchar(50) = NULL,
    @Name varchar(50) = NULL,
    @NameLoc nvarchar(100) = NULL,
    @Culture varchar(10) = NULL
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [c_Language]
    SET
        [Code] = @Code,
        [Name] = @Name,
        [NameLoc] = @NameLoc,
        [Culture] = @Culture
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteLanguage]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [c_Language]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_c_Language_Code
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetLanguageByCODE]
    @Code varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [Code],
        [Name],
        [NameLoc],
        [Culture]
    FROM [c_Language]
    WHERE [Code] = @Code
;
END

GO


-- =========================================
-- Stored Procedures for Table: c_LoggedAlert
-- Generated: 2025-12-27 19:28:30 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllLoggedAlerts]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[ID],
            t.[TimeOccurred],
            t.[FaultNumber],
            t.[SystemName],
            t.[CallingApplication],
            t.[AffectedUserID],
            t.[CallingApplicationVersion],
            t.[CallingFunctionWithinApplication],
            t.[FreeText],
            t.[FaultingAssembly],
            t.[AssemblyEntryPoint],
            t.[FaultingClass],
            t.[FaultingFunction],
            t.[FaultingFunctionParameters],
            t.[FaultIdent],
            t.[FaultDescription],
            t.[MessageSentToUser],
            t.[ActionSentToUser],
            t.[enmFaultType_FaultType],
            t.[enmFaultSeverity_FaultSeverity],
            t.[c_LoggedLoginID],
            t.[Thread],
            t.[lkpUserIdentityType],
            t.[lkpUserIdentityTypeName],
            t.[clc_DateOccurred],
            t.[clc_MonthOccurred],
            p1.[Text] AS [AffectedUserID_Text],
            p2.[Text] AS [c_LoggedLoginID_Text]
        FROM [c_LoggedAlert] t
        LEFT JOIN [ccvwComboList_c_User] p1 ON t.[AffectedUserID] = p1.[ID]
        LEFT JOIN [ccvwComboList_c_LoggedLogin] p2 ON t.[c_LoggedLoginID] = p2.[ID]
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [ID],
            [TimeOccurred],
            [FaultNumber],
            [SystemName],
            [CallingApplication],
            [AffectedUserID],
            [CallingApplicationVersion],
            [CallingFunctionWithinApplication],
            [FreeText],
            [FaultingAssembly],
            [AssemblyEntryPoint],
            [FaultingClass],
            [FaultingFunction],
            [FaultingFunctionParameters],
            [FaultIdent],
            [FaultDescription],
            [MessageSentToUser],
            [ActionSentToUser],
            [enmFaultType_FaultType],
            [enmFaultSeverity_FaultSeverity],
            [c_LoggedLoginID],
            [Thread],
            [lkpUserIdentityType],
            [lkpUserIdentityTypeName],
            [clc_DateOccurred],
            [clc_MonthOccurred]
        FROM [c_LoggedAlert]
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredLoggedAlerts]
    @CallingApplication VARCHAR(50) = NULL,
    @clc_DateOccurred DATETIME = NULL,
    @FaultNumber INT = NULL,
    @enmFaultSeverity_FaultSeverity VARCHAR(50) = NULL,
    @enmFaultType_FaultType VARCHAR(50) = NULL,
    @c_LoggedLoginID INT = NULL,
    @clc_MonthOccurred DATETIME = NULL,
    @SystemName VARCHAR(50) = NULL,
    @TimeOccurred DATETIME = NULL,
    @AffectedUserID INT = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[ID],
            t.[TimeOccurred],
            t.[FaultNumber],
            t.[SystemName],
            t.[CallingApplication],
            t.[AffectedUserID],
            t.[CallingApplicationVersion],
            t.[CallingFunctionWithinApplication],
            t.[FreeText],
            t.[FaultingAssembly],
            t.[AssemblyEntryPoint],
            t.[FaultingClass],
            t.[FaultingFunction],
            t.[FaultingFunctionParameters],
            t.[FaultIdent],
            t.[FaultDescription],
            t.[MessageSentToUser],
            t.[ActionSentToUser],
            t.[enmFaultType_FaultType],
            t.[enmFaultSeverity_FaultSeverity],
            t.[c_LoggedLoginID],
            t.[Thread],
            t.[lkpUserIdentityType],
            t.[lkpUserIdentityTypeName],
            t.[clc_DateOccurred],
            t.[clc_MonthOccurred],
            p1.[Text] AS [AffectedUserID_Text],
            p2.[Text] AS [c_LoggedLoginID_Text]
        FROM [c_LoggedAlert] t
        LEFT JOIN [ccvwComboList_c_User] p1 ON t.[AffectedUserID] = p1.[ID]
        LEFT JOIN [ccvwComboList_c_LoggedLogin] p2 ON t.[c_LoggedLoginID] = p2.[ID]
        WHERE 1=1
          AND (@CallingApplication IS NULL OR t.[CallingApplication] LIKE '%' + @CallingApplication + '%')
          AND (@clc_DateOccurred IS NULL OR t.[clc_DateOccurred] = @clc_DateOccurred)
          AND (@FaultNumber IS NULL OR t.[FaultNumber] = @FaultNumber)
          AND (@enmFaultSeverity_FaultSeverity IS NULL OR t.[enmFaultSeverity_FaultSeverity] LIKE '%' + @enmFaultSeverity_FaultSeverity + '%')
          AND (@enmFaultType_FaultType IS NULL OR t.[enmFaultType_FaultType] LIKE '%' + @enmFaultType_FaultType + '%')
          AND (@enmFaultType_FaultType IS NULL OR t.[enmFaultType_FaultType] LIKE '%' + @enmFaultType_FaultType + '%')
          AND (@enmFaultSeverity_FaultSeverity IS NULL OR t.[enmFaultSeverity_FaultSeverity] LIKE '%' + @enmFaultSeverity_FaultSeverity + '%')
          AND (@c_LoggedLoginID IS NULL OR t.[c_LoggedLoginID] = @c_LoggedLoginID)
          AND (@clc_MonthOccurred IS NULL OR t.[clc_MonthOccurred] = @clc_MonthOccurred)
          AND (@SystemName IS NULL OR t.[SystemName] LIKE '%' + @SystemName + '%')
          AND (@TimeOccurred IS NULL OR t.[TimeOccurred] = @TimeOccurred)
          AND (@TimeOccurred IS NULL OR t.[TimeOccurred] = @TimeOccurred)
          AND (@enmFaultType_FaultType IS NULL OR t.[enmFaultType_FaultType] LIKE '%' + @enmFaultType_FaultType + '%')
          AND (@enmFaultSeverity_FaultSeverity IS NULL OR t.[enmFaultSeverity_FaultSeverity] LIKE '%' + @enmFaultSeverity_FaultSeverity + '%')
          AND (@AffectedUserID IS NULL OR t.[AffectedUserID] = @AffectedUserID)
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [ID],
            [TimeOccurred],
            [FaultNumber],
            [SystemName],
            [CallingApplication],
            [AffectedUserID],
            [CallingApplicationVersion],
            [CallingFunctionWithinApplication],
            [FreeText],
            [FaultingAssembly],
            [AssemblyEntryPoint],
            [FaultingClass],
            [FaultingFunction],
            [FaultingFunctionParameters],
            [FaultIdent],
            [FaultDescription],
            [MessageSentToUser],
            [ActionSentToUser],
            [enmFaultType_FaultType],
            [enmFaultSeverity_FaultSeverity],
            [c_LoggedLoginID],
            [Thread],
            [lkpUserIdentityType],
            [lkpUserIdentityTypeName],
            [clc_DateOccurred],
            [clc_MonthOccurred]
        FROM [c_LoggedAlert]
        WHERE 1=1
          AND (@CallingApplication IS NULL OR [CallingApplication] LIKE '%' + @CallingApplication + '%')
          AND (@clc_DateOccurred IS NULL OR [clc_DateOccurred] = @clc_DateOccurred)
          AND (@FaultNumber IS NULL OR [FaultNumber] = @FaultNumber)
          AND (@enmFaultSeverity_FaultSeverity IS NULL OR [enmFaultSeverity_FaultSeverity] LIKE '%' + @enmFaultSeverity_FaultSeverity + '%')
          AND (@enmFaultType_FaultType IS NULL OR [enmFaultType_FaultType] LIKE '%' + @enmFaultType_FaultType + '%')
          AND (@enmFaultType_FaultType IS NULL OR [enmFaultType_FaultType] LIKE '%' + @enmFaultType_FaultType + '%')
          AND (@enmFaultSeverity_FaultSeverity IS NULL OR [enmFaultSeverity_FaultSeverity] LIKE '%' + @enmFaultSeverity_FaultSeverity + '%')
          AND (@c_LoggedLoginID IS NULL OR [c_LoggedLoginID] = @c_LoggedLoginID)
          AND (@clc_MonthOccurred IS NULL OR [clc_MonthOccurred] = @clc_MonthOccurred)
          AND (@SystemName IS NULL OR [SystemName] LIKE '%' + @SystemName + '%')
          AND (@TimeOccurred IS NULL OR [TimeOccurred] = @TimeOccurred)
          AND (@TimeOccurred IS NULL OR [TimeOccurred] = @TimeOccurred)
          AND (@enmFaultType_FaultType IS NULL OR [enmFaultType_FaultType] LIKE '%' + @enmFaultType_FaultType + '%')
          AND (@enmFaultSeverity_FaultSeverity IS NULL OR [enmFaultSeverity_FaultSeverity] LIKE '%' + @enmFaultSeverity_FaultSeverity + '%')
          AND (@AffectedUserID IS NULL OR [AffectedUserID] = @AffectedUserID)
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetLoggedAlertByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [TimeOccurred],
        [FaultNumber],
        [SystemName],
        [CallingApplication],
        [AffectedUserID],
        [CallingApplicationVersion],
        [CallingFunctionWithinApplication],
        [FreeText],
        [FaultingAssembly],
        [AssemblyEntryPoint],
        [FaultingClass],
        [FaultingFunction],
        [FaultingFunctionParameters],
        [FaultIdent],
        [FaultDescription],
        [MessageSentToUser],
        [ActionSentToUser],
        [enmFaultType_FaultType],
        [enmFaultSeverity_FaultSeverity],
        [c_LoggedLoginID],
        [Thread],
        [lkpUserIdentityType],
        [lkpUserIdentityTypeName],
        [clc_DateOccurred],
        [clc_MonthOccurred]
    FROM [c_LoggedAlert]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddLoggedAlert]
    @TimeOccurred datetime = NULL,
    @FaultNumber int = NULL,
    @SystemName varchar(50) = NULL,
    @CallingApplication varchar(50) = NULL,
    @AffectedUserID bigint = NULL,
    @CallingApplicationVersion varchar(50) = NULL,
    @CallingFunctionWithinApplication varchar(100) = NULL,
    @FreeText nvarchar(MAX) = NULL,
    @FaultingAssembly varchar(100) = NULL,
    @AssemblyEntryPoint varchar(100) = NULL,
    @FaultingClass varchar(50) = NULL,
    @FaultingFunction varchar(100) = NULL,
    @FaultingFunctionParameters nvarchar(MAX) = NULL,
    @FaultIdent varchar(100) = NULL,
    @FaultDescription nvarchar(200) = NULL,
    @MessageSentToUser nvarchar(200) = NULL,
    @ActionSentToUser nvarchar(400) = NULL,
    @enmFaultType_FaultType varchar(50) = NULL,
    @enmFaultSeverity_FaultSeverity varchar(50) = NULL,
    @c_LoggedLoginID bigint = NULL,
    @Thread varchar(50) = NULL,
    @lkpUserIdentityType varchar(50) = NULL,
    @lkpUserIdentityTypeName int = NULL
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [c_LoggedAlert] (
        [TimeOccurred],
        [FaultNumber],
        [SystemName],
        [CallingApplication],
        [AffectedUserID],
        [CallingApplicationVersion],
        [CallingFunctionWithinApplication],
        [FreeText],
        [FaultingAssembly],
        [AssemblyEntryPoint],
        [FaultingClass],
        [FaultingFunction],
        [FaultingFunctionParameters],
        [FaultIdent],
        [FaultDescription],
        [MessageSentToUser],
        [ActionSentToUser],
        [enmFaultType_FaultType],
        [enmFaultSeverity_FaultSeverity],
        [c_LoggedLoginID],
        [Thread],
        [lkpUserIdentityType],
        [lkpUserIdentityTypeName]
    )
    VALUES (
        @TimeOccurred,
        @FaultNumber,
        @SystemName,
        @CallingApplication,
        @AffectedUserID,
        @CallingApplicationVersion,
        @CallingFunctionWithinApplication,
        @FreeText,
        @FaultingAssembly,
        @AssemblyEntryPoint,
        @FaultingClass,
        @FaultingFunction,
        @FaultingFunctionParameters,
        @FaultIdent,
        @FaultDescription,
        @MessageSentToUser,
        @ActionSentToUser,
        @enmFaultType_FaultType,
        @enmFaultSeverity_FaultSeverity,
        @c_LoggedLoginID,
        @Thread,
        @lkpUserIdentityType,
        @lkpUserIdentityTypeName
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateLoggedAlert]
    @ID bigint,
    @TimeOccurred datetime = NULL,
    @FaultNumber int = NULL,
    @SystemName varchar(50) = NULL,
    @CallingApplication varchar(50) = NULL,
    @AffectedUserID bigint = NULL,
    @CallingApplicationVersion varchar(50) = NULL,
    @CallingFunctionWithinApplication varchar(100) = NULL,
    @FreeText nvarchar(MAX) = NULL,
    @FaultingAssembly varchar(100) = NULL,
    @AssemblyEntryPoint varchar(100) = NULL,
    @FaultingClass varchar(50) = NULL,
    @FaultingFunction varchar(100) = NULL,
    @FaultingFunctionParameters nvarchar(MAX) = NULL,
    @FaultIdent varchar(100) = NULL,
    @FaultDescription nvarchar(200) = NULL,
    @MessageSentToUser nvarchar(200) = NULL,
    @ActionSentToUser nvarchar(400) = NULL,
    @enmFaultType_FaultType varchar(50) = NULL,
    @enmFaultSeverity_FaultSeverity varchar(50) = NULL,
    @c_LoggedLoginID bigint = NULL,
    @Thread varchar(50) = NULL,
    @lkpUserIdentityType varchar(50) = NULL,
    @lkpUserIdentityTypeName int = NULL
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [c_LoggedAlert]
    SET
        [TimeOccurred] = @TimeOccurred,
        [FaultNumber] = @FaultNumber,
        [SystemName] = @SystemName,
        [CallingApplication] = @CallingApplication,
        [AffectedUserID] = @AffectedUserID,
        [CallingApplicationVersion] = @CallingApplicationVersion,
        [CallingFunctionWithinApplication] = @CallingFunctionWithinApplication,
        [FreeText] = @FreeText,
        [FaultingAssembly] = @FaultingAssembly,
        [AssemblyEntryPoint] = @AssemblyEntryPoint,
        [FaultingClass] = @FaultingClass,
        [FaultingFunction] = @FaultingFunction,
        [FaultingFunctionParameters] = @FaultingFunctionParameters,
        [FaultIdent] = @FaultIdent,
        [FaultDescription] = @FaultDescription,
        [MessageSentToUser] = @MessageSentToUser,
        [ActionSentToUser] = @ActionSentToUser,
        [enmFaultType_FaultType] = @enmFaultType_FaultType,
        [enmFaultSeverity_FaultSeverity] = @enmFaultSeverity_FaultSeverity,
        [c_LoggedLoginID] = @c_LoggedLoginID,
        [Thread] = @Thread,
        [lkpUserIdentityType] = @lkpUserIdentityType,
        [lkpUserIdentityTypeName] = @lkpUserIdentityTypeName
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteLoggedAlert]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [c_LoggedAlert]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_c_LoggedAlert_CallingApplication
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillLoggedAlertByCALLINGAPPLICATION]
    @CallingApplication varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [TimeOccurred],
        [FaultNumber],
        [SystemName],
        [CallingApplication],
        [AffectedUserID],
        [CallingApplicationVersion],
        [CallingFunctionWithinApplication],
        [FreeText],
        [FaultingAssembly],
        [AssemblyEntryPoint],
        [FaultingClass],
        [FaultingFunction],
        [FaultingFunctionParameters],
        [FaultIdent],
        [FaultDescription],
        [MessageSentToUser],
        [ActionSentToUser],
        [enmFaultType_FaultType],
        [enmFaultSeverity_FaultSeverity],
        [c_LoggedLoginID],
        [Thread],
        [lkpUserIdentityType],
        [lkpUserIdentityTypeName],
        [clc_DateOccurred],
        [clc_MonthOccurred]
    FROM [c_LoggedAlert]
    WHERE [CallingApplication] = @CallingApplication
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_c_LoggedAlert_DateOccurred
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillLoggedAlertByCLCDATEOCCURRED]
    @clc_DateOccurred date
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [TimeOccurred],
        [FaultNumber],
        [SystemName],
        [CallingApplication],
        [AffectedUserID],
        [CallingApplicationVersion],
        [CallingFunctionWithinApplication],
        [FreeText],
        [FaultingAssembly],
        [AssemblyEntryPoint],
        [FaultingClass],
        [FaultingFunction],
        [FaultingFunctionParameters],
        [FaultIdent],
        [FaultDescription],
        [MessageSentToUser],
        [ActionSentToUser],
        [enmFaultType_FaultType],
        [enmFaultSeverity_FaultSeverity],
        [c_LoggedLoginID],
        [Thread],
        [lkpUserIdentityType],
        [lkpUserIdentityTypeName],
        [clc_DateOccurred],
        [clc_MonthOccurred]
    FROM [c_LoggedAlert]
    WHERE [clc_DateOccurred] = @clc_DateOccurred
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_c_LoggedAlert_FaultNumber
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillLoggedAlertByFAULTNUMBER]
    @FaultNumber int
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [TimeOccurred],
        [FaultNumber],
        [SystemName],
        [CallingApplication],
        [AffectedUserID],
        [CallingApplicationVersion],
        [CallingFunctionWithinApplication],
        [FreeText],
        [FaultingAssembly],
        [AssemblyEntryPoint],
        [FaultingClass],
        [FaultingFunction],
        [FaultingFunctionParameters],
        [FaultIdent],
        [FaultDescription],
        [MessageSentToUser],
        [ActionSentToUser],
        [enmFaultType_FaultType],
        [enmFaultSeverity_FaultSeverity],
        [c_LoggedLoginID],
        [Thread],
        [lkpUserIdentityType],
        [lkpUserIdentityTypeName],
        [clc_DateOccurred],
        [clc_MonthOccurred]
    FROM [c_LoggedAlert]
    WHERE [FaultNumber] = @FaultNumber
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_c_LoggedAlert_FaultSeverity
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillLoggedAlertByENMFAULTSEVERITYFAULTSEVERITY]
    @enmFaultSeverity_FaultSeverity varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [TimeOccurred],
        [FaultNumber],
        [SystemName],
        [CallingApplication],
        [AffectedUserID],
        [CallingApplicationVersion],
        [CallingFunctionWithinApplication],
        [FreeText],
        [FaultingAssembly],
        [AssemblyEntryPoint],
        [FaultingClass],
        [FaultingFunction],
        [FaultingFunctionParameters],
        [FaultIdent],
        [FaultDescription],
        [MessageSentToUser],
        [ActionSentToUser],
        [enmFaultType_FaultType],
        [enmFaultSeverity_FaultSeverity],
        [c_LoggedLoginID],
        [Thread],
        [lkpUserIdentityType],
        [lkpUserIdentityTypeName],
        [clc_DateOccurred],
        [clc_MonthOccurred]
    FROM [c_LoggedAlert]
    WHERE [enmFaultSeverity_FaultSeverity] = @enmFaultSeverity_FaultSeverity
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_c_LoggedAlert_FaultType
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillLoggedAlertByENMFAULTTYPEFAULTTYPE]
    @enmFaultType_FaultType varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [TimeOccurred],
        [FaultNumber],
        [SystemName],
        [CallingApplication],
        [AffectedUserID],
        [CallingApplicationVersion],
        [CallingFunctionWithinApplication],
        [FreeText],
        [FaultingAssembly],
        [AssemblyEntryPoint],
        [FaultingClass],
        [FaultingFunction],
        [FaultingFunctionParameters],
        [FaultIdent],
        [FaultDescription],
        [MessageSentToUser],
        [ActionSentToUser],
        [enmFaultType_FaultType],
        [enmFaultSeverity_FaultSeverity],
        [c_LoggedLoginID],
        [Thread],
        [lkpUserIdentityType],
        [lkpUserIdentityTypeName],
        [clc_DateOccurred],
        [clc_MonthOccurred]
    FROM [c_LoggedAlert]
    WHERE [enmFaultType_FaultType] = @enmFaultType_FaultType
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_c_LoggedAlert_FaultTypeAndFaultSeverity
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillLoggedAlertByENMFAULTTYPEFAULTTYPEAndENMFAULTSEVERITYFAULTSEVERITY]
    @enmFaultType_FaultType varchar(50),
    @enmFaultSeverity_FaultSeverity varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [TimeOccurred],
        [FaultNumber],
        [SystemName],
        [CallingApplication],
        [AffectedUserID],
        [CallingApplicationVersion],
        [CallingFunctionWithinApplication],
        [FreeText],
        [FaultingAssembly],
        [AssemblyEntryPoint],
        [FaultingClass],
        [FaultingFunction],
        [FaultingFunctionParameters],
        [FaultIdent],
        [FaultDescription],
        [MessageSentToUser],
        [ActionSentToUser],
        [enmFaultType_FaultType],
        [enmFaultSeverity_FaultSeverity],
        [c_LoggedLoginID],
        [Thread],
        [lkpUserIdentityType],
        [lkpUserIdentityTypeName],
        [clc_DateOccurred],
        [clc_MonthOccurred]
    FROM [c_LoggedAlert]
    WHERE [enmFaultType_FaultType] = @enmFaultType_FaultType AND [enmFaultSeverity_FaultSeverity] = @enmFaultSeverity_FaultSeverity
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_c_LoggedAlert_LoggedLoginID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillLoggedAlertByCLOGGEDLOGINID]
    @c_LoggedLoginID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [TimeOccurred],
        [FaultNumber],
        [SystemName],
        [CallingApplication],
        [AffectedUserID],
        [CallingApplicationVersion],
        [CallingFunctionWithinApplication],
        [FreeText],
        [FaultingAssembly],
        [AssemblyEntryPoint],
        [FaultingClass],
        [FaultingFunction],
        [FaultingFunctionParameters],
        [FaultIdent],
        [FaultDescription],
        [MessageSentToUser],
        [ActionSentToUser],
        [enmFaultType_FaultType],
        [enmFaultSeverity_FaultSeverity],
        [c_LoggedLoginID],
        [Thread],
        [lkpUserIdentityType],
        [lkpUserIdentityTypeName],
        [clc_DateOccurred],
        [clc_MonthOccurred]
    FROM [c_LoggedAlert]
    WHERE [c_LoggedLoginID] = @c_LoggedLoginID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_c_LoggedAlert_MonthOccurred
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillLoggedAlertByCLCMONTHOCCURRED]
    @clc_MonthOccurred date
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [TimeOccurred],
        [FaultNumber],
        [SystemName],
        [CallingApplication],
        [AffectedUserID],
        [CallingApplicationVersion],
        [CallingFunctionWithinApplication],
        [FreeText],
        [FaultingAssembly],
        [AssemblyEntryPoint],
        [FaultingClass],
        [FaultingFunction],
        [FaultingFunctionParameters],
        [FaultIdent],
        [FaultDescription],
        [MessageSentToUser],
        [ActionSentToUser],
        [enmFaultType_FaultType],
        [enmFaultSeverity_FaultSeverity],
        [c_LoggedLoginID],
        [Thread],
        [lkpUserIdentityType],
        [lkpUserIdentityTypeName],
        [clc_DateOccurred],
        [clc_MonthOccurred]
    FROM [c_LoggedAlert]
    WHERE [clc_MonthOccurred] = @clc_MonthOccurred
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_c_LoggedAlert_SystemName
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillLoggedAlertBySYSTEMNAME]
    @SystemName varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [TimeOccurred],
        [FaultNumber],
        [SystemName],
        [CallingApplication],
        [AffectedUserID],
        [CallingApplicationVersion],
        [CallingFunctionWithinApplication],
        [FreeText],
        [FaultingAssembly],
        [AssemblyEntryPoint],
        [FaultingClass],
        [FaultingFunction],
        [FaultingFunctionParameters],
        [FaultIdent],
        [FaultDescription],
        [MessageSentToUser],
        [ActionSentToUser],
        [enmFaultType_FaultType],
        [enmFaultSeverity_FaultSeverity],
        [c_LoggedLoginID],
        [Thread],
        [lkpUserIdentityType],
        [lkpUserIdentityTypeName],
        [clc_DateOccurred],
        [clc_MonthOccurred]
    FROM [c_LoggedAlert]
    WHERE [SystemName] = @SystemName
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_c_LoggedAlert_TimeOccurred
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillLoggedAlertByTIMEOCCURRED]
    @TimeOccurred datetime
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [TimeOccurred],
        [FaultNumber],
        [SystemName],
        [CallingApplication],
        [AffectedUserID],
        [CallingApplicationVersion],
        [CallingFunctionWithinApplication],
        [FreeText],
        [FaultingAssembly],
        [AssemblyEntryPoint],
        [FaultingClass],
        [FaultingFunction],
        [FaultingFunctionParameters],
        [FaultIdent],
        [FaultDescription],
        [MessageSentToUser],
        [ActionSentToUser],
        [enmFaultType_FaultType],
        [enmFaultSeverity_FaultSeverity],
        [c_LoggedLoginID],
        [Thread],
        [lkpUserIdentityType],
        [lkpUserIdentityTypeName],
        [clc_DateOccurred],
        [clc_MonthOccurred]
    FROM [c_LoggedAlert]
    WHERE [TimeOccurred] = @TimeOccurred
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_c_LoggedAlert_TimeOccurredAndFaultTypeAndFaultSeverity
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillLoggedAlertByTIMEOCCURREDAndENMFAULTTYPEFAULTTYPEAndENMFAULTSEVERITYFAULTSEVERITY]
    @TimeOccurred datetime,
    @enmFaultType_FaultType varchar(50),
    @enmFaultSeverity_FaultSeverity varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [TimeOccurred],
        [FaultNumber],
        [SystemName],
        [CallingApplication],
        [AffectedUserID],
        [CallingApplicationVersion],
        [CallingFunctionWithinApplication],
        [FreeText],
        [FaultingAssembly],
        [AssemblyEntryPoint],
        [FaultingClass],
        [FaultingFunction],
        [FaultingFunctionParameters],
        [FaultIdent],
        [FaultDescription],
        [MessageSentToUser],
        [ActionSentToUser],
        [enmFaultType_FaultType],
        [enmFaultSeverity_FaultSeverity],
        [c_LoggedLoginID],
        [Thread],
        [lkpUserIdentityType],
        [lkpUserIdentityTypeName],
        [clc_DateOccurred],
        [clc_MonthOccurred]
    FROM [c_LoggedAlert]
    WHERE [TimeOccurred] = @TimeOccurred AND [enmFaultType_FaultType] = @enmFaultType_FaultType AND [enmFaultSeverity_FaultSeverity] = @enmFaultSeverity_FaultSeverity
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXc_LoggedAlert_AffectedUserID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillLoggedAlertByAFFECTEDUSERID]
    @AffectedUserID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [TimeOccurred],
        [FaultNumber],
        [SystemName],
        [CallingApplication],
        [AffectedUserID],
        [CallingApplicationVersion],
        [CallingFunctionWithinApplication],
        [FreeText],
        [FaultingAssembly],
        [AssemblyEntryPoint],
        [FaultingClass],
        [FaultingFunction],
        [FaultingFunctionParameters],
        [FaultIdent],
        [FaultDescription],
        [MessageSentToUser],
        [ActionSentToUser],
        [enmFaultType_FaultType],
        [enmFaultSeverity_FaultSeverity],
        [c_LoggedLoginID],
        [Thread],
        [lkpUserIdentityType],
        [lkpUserIdentityTypeName],
        [clc_DateOccurred],
        [clc_MonthOccurred]
    FROM [c_LoggedAlert]
    WHERE [AffectedUserID] = @AffectedUserID
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: c_LoggedJob
-- Generated: 2025-12-27 19:28:30 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllLoggedJobs]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[ID],
            t.[c_JobID],
            t.[WhenStarted],
            t.[ActivatingUser],
            t.[LastRunBy],
            t.[ExecutionTimeSec],
            t.[enmRunStatus_JobStatus],
            t.[Remarks],
            t.[c_LoggedAlertID],
            t.[SuccessCount],
            t.[FailureCount],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            p1.[Text] AS [c_JobID_Text],
            p2.[Text] AS [c_LoggedAlertID_Text]
        FROM [c_LoggedJob] t
        LEFT JOIN [ccvwComboList_c_Job] p1 ON t.[c_JobID] = p1.[ID]
        LEFT JOIN [ccvwComboList_c_LoggedAlert] p2 ON t.[c_LoggedAlertID] = p2.[ID]
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [ID],
            [c_JobID],
            [WhenStarted],
            [ActivatingUser],
            [LastRunBy],
            [ExecutionTimeSec],
            [enmRunStatus_JobStatus],
            [Remarks],
            [c_LoggedAlertID],
            [SuccessCount],
            [FailureCount],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID]
        FROM [c_LoggedJob]
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredLoggedJobs]
    @c_JobID INT = NULL,
    @c_LoggedAlertID INT = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[ID],
            t.[c_JobID],
            t.[WhenStarted],
            t.[ActivatingUser],
            t.[LastRunBy],
            t.[ExecutionTimeSec],
            t.[enmRunStatus_JobStatus],
            t.[Remarks],
            t.[c_LoggedAlertID],
            t.[SuccessCount],
            t.[FailureCount],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            p1.[Text] AS [c_JobID_Text],
            p2.[Text] AS [c_LoggedAlertID_Text]
        FROM [c_LoggedJob] t
        LEFT JOIN [ccvwComboList_c_Job] p1 ON t.[c_JobID] = p1.[ID]
        LEFT JOIN [ccvwComboList_c_LoggedAlert] p2 ON t.[c_LoggedAlertID] = p2.[ID]
        WHERE 1=1
          AND (@c_JobID IS NULL OR t.[c_JobID] = @c_JobID)
          AND (@c_LoggedAlertID IS NULL OR t.[c_LoggedAlertID] = @c_LoggedAlertID)
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [ID],
            [c_JobID],
            [WhenStarted],
            [ActivatingUser],
            [LastRunBy],
            [ExecutionTimeSec],
            [enmRunStatus_JobStatus],
            [Remarks],
            [c_LoggedAlertID],
            [SuccessCount],
            [FailureCount],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID]
        FROM [c_LoggedJob]
        WHERE 1=1
          AND (@c_JobID IS NULL OR [c_JobID] = @c_JobID)
          AND (@c_LoggedAlertID IS NULL OR [c_LoggedAlertID] = @c_LoggedAlertID)
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetLoggedJobByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [c_JobID],
        [WhenStarted],
        [ActivatingUser],
        [LastRunBy],
        [ExecutionTimeSec],
        [enmRunStatus_JobStatus],
        [Remarks],
        [c_LoggedAlertID],
        [SuccessCount],
        [FailureCount],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [c_LoggedJob]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddLoggedJob]
    @c_JobID bigint = NULL,
    @WhenStarted datetime = NULL,
    @ActivatingUser varchar(50) = NULL,
    @LastRunBy nvarchar(100) = NULL,
    @ExecutionTimeSec int = NULL,
    @enmRunStatus_JobStatus varchar(50) = NULL,
    @Remarks nvarchar(MAX) = NULL,
    @c_LoggedAlertID bigint = NULL,
    @SuccessCount int = NULL,
    @FailureCount int = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [c_LoggedJob] (
        [c_JobID],
        [WhenStarted],
        [ActivatingUser],
        [LastRunBy],
        [ExecutionTimeSec],
        [enmRunStatus_JobStatus],
        [Remarks],
        [c_LoggedAlertID],
        [SuccessCount],
        [FailureCount],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @c_JobID,
        @WhenStarted,
        @ActivatingUser,
        @LastRunBy,
        @ExecutionTimeSec,
        @enmRunStatus_JobStatus,
        @Remarks,
        @c_LoggedAlertID,
        @SuccessCount,
        @FailureCount,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateLoggedJob]
    @ID bigint,
    @c_JobID bigint = NULL,
    @WhenStarted datetime = NULL,
    @ActivatingUser varchar(50) = NULL,
    @LastRunBy nvarchar(100) = NULL,
    @ExecutionTimeSec int = NULL,
    @enmRunStatus_JobStatus varchar(50) = NULL,
    @Remarks nvarchar(MAX) = NULL,
    @c_LoggedAlertID bigint = NULL,
    @SuccessCount int = NULL,
    @FailureCount int = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [c_LoggedJob]
    SET
        [c_JobID] = @c_JobID,
        [WhenStarted] = @WhenStarted,
        [ActivatingUser] = @ActivatingUser,
        [LastRunBy] = @LastRunBy,
        [ExecutionTimeSec] = @ExecutionTimeSec,
        [enmRunStatus_JobStatus] = @enmRunStatus_JobStatus,
        [Remarks] = @Remarks,
        [c_LoggedAlertID] = @c_LoggedAlertID,
        [SuccessCount] = @SuccessCount,
        [FailureCount] = @FailureCount,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteLoggedJob]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [c_LoggedJob]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_c_LoggedJob_JobID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillLoggedJobByCJOBID]
    @c_JobID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [c_JobID],
        [WhenStarted],
        [ActivatingUser],
        [LastRunBy],
        [ExecutionTimeSec],
        [enmRunStatus_JobStatus],
        [Remarks],
        [c_LoggedAlertID],
        [SuccessCount],
        [FailureCount],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [c_LoggedJob]
    WHERE [c_JobID] = @c_JobID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_c_LoggedJob_LoggedAlertID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillLoggedJobByCLOGGEDALERTID]
    @c_LoggedAlertID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [c_JobID],
        [WhenStarted],
        [ActivatingUser],
        [LastRunBy],
        [ExecutionTimeSec],
        [enmRunStatus_JobStatus],
        [Remarks],
        [c_LoggedAlertID],
        [SuccessCount],
        [FailureCount],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [c_LoggedJob]
    WHERE [c_LoggedAlertID] = @c_LoggedAlertID
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: c_LoggedLogin
-- Generated: 2025-12-27 19:28:30 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllLoggedLogins]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [UserName],
        [UserFullName],
        [TimeLoggedIn],
        [ApplicationName],
        [lkpUserIdentityType],
        [lkpUserIdentityTypeName],
        [Roles],
        [TimeLoggedOut],
        [LoginFaultNumber],
        [EnvironmentUserName],
        [EnvironmentMachineName],
        [EnvironmentUserDomainName],
        [DnsGetHostName],
        [AddressList],
        [ComputerMACAddress],
        [SystemDiskVolumeSerialNo],
        [LocalTime],
        [GmtTime],
        [AccessingComputerDetails],
        [UICulture],
        [TotalPhysicalMemoryKb],
        [AvailablePhysicalMemoryKb],
        [ApplicationVersion],
        [OriginatingIP],
        [enmLanguage],
        [HostingAssembly],
        [OriginatingCountry],
        [clc_DateLoggedIn],
        [clc_MonthLoggedIn],
        [ClientReportedIP],
        [ClientReportedCountry],
        [IPAdditionalDetails]
    FROM [c_LoggedLogin]
    ORDER BY [ID]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredLoggedLogins]
    @ApplicationName VARCHAR(50) = NULL,
    @clc_DateLoggedIn DATETIME = NULL,
    @LoginFaultNumber INT = NULL,
    @clc_MonthLoggedIn DATETIME = NULL,
    @OriginatingCountry VARCHAR(10) = NULL,
    @TimeLoggedIn DATETIME = NULL,
    @UserName VARCHAR(50) = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [UserName],
        [UserFullName],
        [TimeLoggedIn],
        [ApplicationName],
        [lkpUserIdentityType],
        [lkpUserIdentityTypeName],
        [Roles],
        [TimeLoggedOut],
        [LoginFaultNumber],
        [EnvironmentUserName],
        [EnvironmentMachineName],
        [EnvironmentUserDomainName],
        [DnsGetHostName],
        [AddressList],
        [ComputerMACAddress],
        [SystemDiskVolumeSerialNo],
        [LocalTime],
        [GmtTime],
        [AccessingComputerDetails],
        [UICulture],
        [TotalPhysicalMemoryKb],
        [AvailablePhysicalMemoryKb],
        [ApplicationVersion],
        [OriginatingIP],
        [enmLanguage],
        [HostingAssembly],
        [OriginatingCountry],
        [clc_DateLoggedIn],
        [clc_MonthLoggedIn],
        [ClientReportedIP],
        [ClientReportedCountry],
        [IPAdditionalDetails]
    FROM [c_LoggedLogin]
    WHERE 1=1
      AND (@ApplicationName IS NULL OR [ApplicationName] LIKE '%' + @ApplicationName + '%')
      AND (@clc_DateLoggedIn IS NULL OR [clc_DateLoggedIn] = @clc_DateLoggedIn)
      AND (@LoginFaultNumber IS NULL OR [LoginFaultNumber] = @LoginFaultNumber)
      AND (@clc_MonthLoggedIn IS NULL OR [clc_MonthLoggedIn] = @clc_MonthLoggedIn)
      AND (@OriginatingCountry IS NULL OR [OriginatingCountry] LIKE '%' + @OriginatingCountry + '%')
      AND (@TimeLoggedIn IS NULL OR [TimeLoggedIn] = @TimeLoggedIn)
      AND (@UserName IS NULL OR [UserName] LIKE '%' + @UserName + '%')
      AND (@UserName IS NULL OR [UserName] LIKE '%' + @UserName + '%')
      AND (@ApplicationName IS NULL OR [ApplicationName] LIKE '%' + @ApplicationName + '%')
    ORDER BY [ID]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetLoggedLoginByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [UserName],
        [UserFullName],
        [TimeLoggedIn],
        [ApplicationName],
        [lkpUserIdentityType],
        [lkpUserIdentityTypeName],
        [Roles],
        [TimeLoggedOut],
        [LoginFaultNumber],
        [EnvironmentUserName],
        [EnvironmentMachineName],
        [EnvironmentUserDomainName],
        [DnsGetHostName],
        [AddressList],
        [ComputerMACAddress],
        [SystemDiskVolumeSerialNo],
        [LocalTime],
        [GmtTime],
        [AccessingComputerDetails],
        [UICulture],
        [TotalPhysicalMemoryKb],
        [AvailablePhysicalMemoryKb],
        [ApplicationVersion],
        [OriginatingIP],
        [enmLanguage],
        [HostingAssembly],
        [OriginatingCountry],
        [clc_DateLoggedIn],
        [clc_MonthLoggedIn],
        [ClientReportedIP],
        [ClientReportedCountry],
        [IPAdditionalDetails]
    FROM [c_LoggedLogin]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddLoggedLogin]
    @UserName varchar(50) = NULL,
    @UserFullName nvarchar(100) = NULL,
    @TimeLoggedIn datetime = NULL,
    @ApplicationName varchar(50) = NULL,
    @lkpUserIdentityType varchar(50) = NULL,
    @lkpUserIdentityTypeName int = NULL,
    @Roles varchar(250) = NULL,
    @TimeLoggedOut datetime = NULL,
    @LoginFaultNumber int = NULL,
    @EnvironmentUserName nvarchar(200) = NULL,
    @EnvironmentMachineName nvarchar(100) = NULL,
    @EnvironmentUserDomainName nchar(20) = NULL,
    @DnsGetHostName varchar(50) = NULL,
    @AddressList varchar(100) = NULL,
    @ComputerMACAddress varchar(100) = NULL,
    @SystemDiskVolumeSerialNo varchar(100) = NULL,
    @LocalTime datetime = NULL,
    @GmtTime datetime = NULL,
    @AccessingComputerDetails varchar(250) = NULL,
    @UICulture varchar(50) = NULL,
    @TotalPhysicalMemoryKb bigint = NULL,
    @AvailablePhysicalMemoryKb bigint = NULL,
    @ApplicationVersion varchar(250) = NULL,
    @OriginatingIP varchar(100) = NULL,
    @enmLanguage varchar(10) = NULL,
    @HostingAssembly varchar(50) = NULL,
    @OriginatingCountry varchar(10) = NULL,
    @ClientReportedIP varchar(100) = NULL,
    @ClientReportedCountry varchar(10) = NULL,
    @IPAdditionalDetails varchar(250) = NULL
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [c_LoggedLogin] (
        [UserName],
        [UserFullName],
        [TimeLoggedIn],
        [ApplicationName],
        [lkpUserIdentityType],
        [lkpUserIdentityTypeName],
        [Roles],
        [TimeLoggedOut],
        [LoginFaultNumber],
        [EnvironmentUserName],
        [EnvironmentMachineName],
        [EnvironmentUserDomainName],
        [DnsGetHostName],
        [AddressList],
        [ComputerMACAddress],
        [SystemDiskVolumeSerialNo],
        [LocalTime],
        [GmtTime],
        [AccessingComputerDetails],
        [UICulture],
        [TotalPhysicalMemoryKb],
        [AvailablePhysicalMemoryKb],
        [ApplicationVersion],
        [OriginatingIP],
        [enmLanguage],
        [HostingAssembly],
        [OriginatingCountry],
        [ClientReportedIP],
        [ClientReportedCountry],
        [IPAdditionalDetails]
    )
    VALUES (
        @UserName,
        @UserFullName,
        @TimeLoggedIn,
        @ApplicationName,
        @lkpUserIdentityType,
        @lkpUserIdentityTypeName,
        @Roles,
        @TimeLoggedOut,
        @LoginFaultNumber,
        @EnvironmentUserName,
        @EnvironmentMachineName,
        @EnvironmentUserDomainName,
        @DnsGetHostName,
        @AddressList,
        @ComputerMACAddress,
        @SystemDiskVolumeSerialNo,
        @LocalTime,
        @GmtTime,
        @AccessingComputerDetails,
        @UICulture,
        @TotalPhysicalMemoryKb,
        @AvailablePhysicalMemoryKb,
        @ApplicationVersion,
        @OriginatingIP,
        @enmLanguage,
        @HostingAssembly,
        @OriginatingCountry,
        @ClientReportedIP,
        @ClientReportedCountry,
        @IPAdditionalDetails
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateLoggedLogin]
    @ID bigint,
    @UserName varchar(50) = NULL,
    @UserFullName nvarchar(100) = NULL,
    @TimeLoggedIn datetime = NULL,
    @ApplicationName varchar(50) = NULL,
    @lkpUserIdentityType varchar(50) = NULL,
    @lkpUserIdentityTypeName int = NULL,
    @Roles varchar(250) = NULL,
    @TimeLoggedOut datetime = NULL,
    @LoginFaultNumber int = NULL,
    @EnvironmentUserName nvarchar(200) = NULL,
    @EnvironmentMachineName nvarchar(100) = NULL,
    @EnvironmentUserDomainName nchar(20) = NULL,
    @DnsGetHostName varchar(50) = NULL,
    @AddressList varchar(100) = NULL,
    @ComputerMACAddress varchar(100) = NULL,
    @SystemDiskVolumeSerialNo varchar(100) = NULL,
    @LocalTime datetime = NULL,
    @GmtTime datetime = NULL,
    @AccessingComputerDetails varchar(250) = NULL,
    @UICulture varchar(50) = NULL,
    @TotalPhysicalMemoryKb bigint = NULL,
    @AvailablePhysicalMemoryKb bigint = NULL,
    @ApplicationVersion varchar(250) = NULL,
    @OriginatingIP varchar(100) = NULL,
    @enmLanguage varchar(10) = NULL,
    @HostingAssembly varchar(50) = NULL,
    @OriginatingCountry varchar(10) = NULL,
    @ClientReportedIP varchar(100) = NULL,
    @ClientReportedCountry varchar(10) = NULL,
    @IPAdditionalDetails varchar(250) = NULL
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [c_LoggedLogin]
    SET
        [UserName] = @UserName,
        [UserFullName] = @UserFullName,
        [TimeLoggedIn] = @TimeLoggedIn,
        [ApplicationName] = @ApplicationName,
        [lkpUserIdentityType] = @lkpUserIdentityType,
        [lkpUserIdentityTypeName] = @lkpUserIdentityTypeName,
        [Roles] = @Roles,
        [TimeLoggedOut] = @TimeLoggedOut,
        [LoginFaultNumber] = @LoginFaultNumber,
        [EnvironmentUserName] = @EnvironmentUserName,
        [EnvironmentMachineName] = @EnvironmentMachineName,
        [EnvironmentUserDomainName] = @EnvironmentUserDomainName,
        [DnsGetHostName] = @DnsGetHostName,
        [AddressList] = @AddressList,
        [ComputerMACAddress] = @ComputerMACAddress,
        [SystemDiskVolumeSerialNo] = @SystemDiskVolumeSerialNo,
        [LocalTime] = @LocalTime,
        [GmtTime] = @GmtTime,
        [AccessingComputerDetails] = @AccessingComputerDetails,
        [UICulture] = @UICulture,
        [TotalPhysicalMemoryKb] = @TotalPhysicalMemoryKb,
        [AvailablePhysicalMemoryKb] = @AvailablePhysicalMemoryKb,
        [ApplicationVersion] = @ApplicationVersion,
        [OriginatingIP] = @OriginatingIP,
        [enmLanguage] = @enmLanguage,
        [HostingAssembly] = @HostingAssembly,
        [OriginatingCountry] = @OriginatingCountry,
        [ClientReportedIP] = @ClientReportedIP,
        [ClientReportedCountry] = @ClientReportedCountry,
        [IPAdditionalDetails] = @IPAdditionalDetails
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteLoggedLogin]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [c_LoggedLogin]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_c_LoggedLogin_ApplicationName
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillLoggedLoginByAPPLICATIONNAME]
    @ApplicationName varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [UserName],
        [UserFullName],
        [TimeLoggedIn],
        [ApplicationName],
        [lkpUserIdentityType],
        [lkpUserIdentityTypeName],
        [Roles],
        [TimeLoggedOut],
        [LoginFaultNumber],
        [EnvironmentUserName],
        [EnvironmentMachineName],
        [EnvironmentUserDomainName],
        [DnsGetHostName],
        [AddressList],
        [ComputerMACAddress],
        [SystemDiskVolumeSerialNo],
        [LocalTime],
        [GmtTime],
        [AccessingComputerDetails],
        [UICulture],
        [TotalPhysicalMemoryKb],
        [AvailablePhysicalMemoryKb],
        [ApplicationVersion],
        [OriginatingIP],
        [enmLanguage],
        [HostingAssembly],
        [OriginatingCountry],
        [clc_DateLoggedIn],
        [clc_MonthLoggedIn],
        [ClientReportedIP],
        [ClientReportedCountry],
        [IPAdditionalDetails]
    FROM [c_LoggedLogin]
    WHERE [ApplicationName] = @ApplicationName
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_c_LoggedLogin_DateLoggedIn
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillLoggedLoginByCLCDATELOGGEDIN]
    @clc_DateLoggedIn date
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [UserName],
        [UserFullName],
        [TimeLoggedIn],
        [ApplicationName],
        [lkpUserIdentityType],
        [lkpUserIdentityTypeName],
        [Roles],
        [TimeLoggedOut],
        [LoginFaultNumber],
        [EnvironmentUserName],
        [EnvironmentMachineName],
        [EnvironmentUserDomainName],
        [DnsGetHostName],
        [AddressList],
        [ComputerMACAddress],
        [SystemDiskVolumeSerialNo],
        [LocalTime],
        [GmtTime],
        [AccessingComputerDetails],
        [UICulture],
        [TotalPhysicalMemoryKb],
        [AvailablePhysicalMemoryKb],
        [ApplicationVersion],
        [OriginatingIP],
        [enmLanguage],
        [HostingAssembly],
        [OriginatingCountry],
        [clc_DateLoggedIn],
        [clc_MonthLoggedIn],
        [ClientReportedIP],
        [ClientReportedCountry],
        [IPAdditionalDetails]
    FROM [c_LoggedLogin]
    WHERE [clc_DateLoggedIn] = @clc_DateLoggedIn
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_c_LoggedLogin_LoginFaultNumber
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillLoggedLoginByLOGINFAULTNUMBER]
    @LoginFaultNumber int
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [UserName],
        [UserFullName],
        [TimeLoggedIn],
        [ApplicationName],
        [lkpUserIdentityType],
        [lkpUserIdentityTypeName],
        [Roles],
        [TimeLoggedOut],
        [LoginFaultNumber],
        [EnvironmentUserName],
        [EnvironmentMachineName],
        [EnvironmentUserDomainName],
        [DnsGetHostName],
        [AddressList],
        [ComputerMACAddress],
        [SystemDiskVolumeSerialNo],
        [LocalTime],
        [GmtTime],
        [AccessingComputerDetails],
        [UICulture],
        [TotalPhysicalMemoryKb],
        [AvailablePhysicalMemoryKb],
        [ApplicationVersion],
        [OriginatingIP],
        [enmLanguage],
        [HostingAssembly],
        [OriginatingCountry],
        [clc_DateLoggedIn],
        [clc_MonthLoggedIn],
        [ClientReportedIP],
        [ClientReportedCountry],
        [IPAdditionalDetails]
    FROM [c_LoggedLogin]
    WHERE [LoginFaultNumber] = @LoginFaultNumber
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_c_LoggedLogin_MonthLoggedIn
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillLoggedLoginByCLCMONTHLOGGEDIN]
    @clc_MonthLoggedIn date
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [UserName],
        [UserFullName],
        [TimeLoggedIn],
        [ApplicationName],
        [lkpUserIdentityType],
        [lkpUserIdentityTypeName],
        [Roles],
        [TimeLoggedOut],
        [LoginFaultNumber],
        [EnvironmentUserName],
        [EnvironmentMachineName],
        [EnvironmentUserDomainName],
        [DnsGetHostName],
        [AddressList],
        [ComputerMACAddress],
        [SystemDiskVolumeSerialNo],
        [LocalTime],
        [GmtTime],
        [AccessingComputerDetails],
        [UICulture],
        [TotalPhysicalMemoryKb],
        [AvailablePhysicalMemoryKb],
        [ApplicationVersion],
        [OriginatingIP],
        [enmLanguage],
        [HostingAssembly],
        [OriginatingCountry],
        [clc_DateLoggedIn],
        [clc_MonthLoggedIn],
        [ClientReportedIP],
        [ClientReportedCountry],
        [IPAdditionalDetails]
    FROM [c_LoggedLogin]
    WHERE [clc_MonthLoggedIn] = @clc_MonthLoggedIn
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_c_LoggedLogin_OriginatingCountry
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillLoggedLoginByORIGINATINGCOUNTRY]
    @OriginatingCountry varchar(10)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [UserName],
        [UserFullName],
        [TimeLoggedIn],
        [ApplicationName],
        [lkpUserIdentityType],
        [lkpUserIdentityTypeName],
        [Roles],
        [TimeLoggedOut],
        [LoginFaultNumber],
        [EnvironmentUserName],
        [EnvironmentMachineName],
        [EnvironmentUserDomainName],
        [DnsGetHostName],
        [AddressList],
        [ComputerMACAddress],
        [SystemDiskVolumeSerialNo],
        [LocalTime],
        [GmtTime],
        [AccessingComputerDetails],
        [UICulture],
        [TotalPhysicalMemoryKb],
        [AvailablePhysicalMemoryKb],
        [ApplicationVersion],
        [OriginatingIP],
        [enmLanguage],
        [HostingAssembly],
        [OriginatingCountry],
        [clc_DateLoggedIn],
        [clc_MonthLoggedIn],
        [ClientReportedIP],
        [ClientReportedCountry],
        [IPAdditionalDetails]
    FROM [c_LoggedLogin]
    WHERE [OriginatingCountry] = @OriginatingCountry
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_c_LoggedLogin_TimeLoggedIn
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillLoggedLoginByTIMELOGGEDIN]
    @TimeLoggedIn datetime
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [UserName],
        [UserFullName],
        [TimeLoggedIn],
        [ApplicationName],
        [lkpUserIdentityType],
        [lkpUserIdentityTypeName],
        [Roles],
        [TimeLoggedOut],
        [LoginFaultNumber],
        [EnvironmentUserName],
        [EnvironmentMachineName],
        [EnvironmentUserDomainName],
        [DnsGetHostName],
        [AddressList],
        [ComputerMACAddress],
        [SystemDiskVolumeSerialNo],
        [LocalTime],
        [GmtTime],
        [AccessingComputerDetails],
        [UICulture],
        [TotalPhysicalMemoryKb],
        [AvailablePhysicalMemoryKb],
        [ApplicationVersion],
        [OriginatingIP],
        [enmLanguage],
        [HostingAssembly],
        [OriginatingCountry],
        [clc_DateLoggedIn],
        [clc_MonthLoggedIn],
        [ClientReportedIP],
        [ClientReportedCountry],
        [IPAdditionalDetails]
    FROM [c_LoggedLogin]
    WHERE [TimeLoggedIn] = @TimeLoggedIn
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_c_LoggedLogin_UserName
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillLoggedLoginByUSERNAME]
    @UserName varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [UserName],
        [UserFullName],
        [TimeLoggedIn],
        [ApplicationName],
        [lkpUserIdentityType],
        [lkpUserIdentityTypeName],
        [Roles],
        [TimeLoggedOut],
        [LoginFaultNumber],
        [EnvironmentUserName],
        [EnvironmentMachineName],
        [EnvironmentUserDomainName],
        [DnsGetHostName],
        [AddressList],
        [ComputerMACAddress],
        [SystemDiskVolumeSerialNo],
        [LocalTime],
        [GmtTime],
        [AccessingComputerDetails],
        [UICulture],
        [TotalPhysicalMemoryKb],
        [AvailablePhysicalMemoryKb],
        [ApplicationVersion],
        [OriginatingIP],
        [enmLanguage],
        [HostingAssembly],
        [OriginatingCountry],
        [clc_DateLoggedIn],
        [clc_MonthLoggedIn],
        [ClientReportedIP],
        [ClientReportedCountry],
        [IPAdditionalDetails]
    FROM [c_LoggedLogin]
    WHERE [UserName] = @UserName
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_c_LoggedLogin_UserNameAndApplicationName
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillLoggedLoginByUSERNAMEAndAPPLICATIONNAME]
    @UserName varchar(50),
    @ApplicationName varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [UserName],
        [UserFullName],
        [TimeLoggedIn],
        [ApplicationName],
        [lkpUserIdentityType],
        [lkpUserIdentityTypeName],
        [Roles],
        [TimeLoggedOut],
        [LoginFaultNumber],
        [EnvironmentUserName],
        [EnvironmentMachineName],
        [EnvironmentUserDomainName],
        [DnsGetHostName],
        [AddressList],
        [ComputerMACAddress],
        [SystemDiskVolumeSerialNo],
        [LocalTime],
        [GmtTime],
        [AccessingComputerDetails],
        [UICulture],
        [TotalPhysicalMemoryKb],
        [AvailablePhysicalMemoryKb],
        [ApplicationVersion],
        [OriginatingIP],
        [enmLanguage],
        [HostingAssembly],
        [OriginatingCountry],
        [clc_DateLoggedIn],
        [clc_MonthLoggedIn],
        [ClientReportedIP],
        [ClientReportedCountry],
        [IPAdditionalDetails]
    FROM [c_LoggedLogin]
    WHERE [UserName] = @UserName AND [ApplicationName] = @ApplicationName
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: c_LoggedRequest
-- Generated: 2025-12-27 19:28:30 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllLoggedRequests]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[ID],
            t.[c_LoggedLoginID],
            t.[TimeAccessed],
            t.[c_UserID],
            t.[CallingFunctionWithinApplication],
            t.[EntryPoint],
            t.[Process],
            t.[Thread],
            p1.[Text] AS [c_LoggedLoginID_Text],
            p2.[Text] AS [c_UserID_Text]
        FROM [c_LoggedRequest] t
        LEFT JOIN [ccvwComboList_c_LoggedLogin] p1 ON t.[c_LoggedLoginID] = p1.[ID]
        LEFT JOIN [ccvwComboList_c_User] p2 ON t.[c_UserID] = p2.[ID]
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [ID],
            [c_LoggedLoginID],
            [TimeAccessed],
            [c_UserID],
            [CallingFunctionWithinApplication],
            [EntryPoint],
            [Process],
            [Thread]
        FROM [c_LoggedRequest]
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredLoggedRequests]
    @c_LoggedLoginID INT = NULL,
    @c_UserID INT = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[ID],
            t.[c_LoggedLoginID],
            t.[TimeAccessed],
            t.[c_UserID],
            t.[CallingFunctionWithinApplication],
            t.[EntryPoint],
            t.[Process],
            t.[Thread],
            p1.[Text] AS [c_LoggedLoginID_Text],
            p2.[Text] AS [c_UserID_Text]
        FROM [c_LoggedRequest] t
        LEFT JOIN [ccvwComboList_c_LoggedLogin] p1 ON t.[c_LoggedLoginID] = p1.[ID]
        LEFT JOIN [ccvwComboList_c_User] p2 ON t.[c_UserID] = p2.[ID]
        WHERE 1=1
          AND (@c_LoggedLoginID IS NULL OR t.[c_LoggedLoginID] = @c_LoggedLoginID)
          AND (@c_UserID IS NULL OR t.[c_UserID] = @c_UserID)
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [ID],
            [c_LoggedLoginID],
            [TimeAccessed],
            [c_UserID],
            [CallingFunctionWithinApplication],
            [EntryPoint],
            [Process],
            [Thread]
        FROM [c_LoggedRequest]
        WHERE 1=1
          AND (@c_LoggedLoginID IS NULL OR [c_LoggedLoginID] = @c_LoggedLoginID)
          AND (@c_UserID IS NULL OR [c_UserID] = @c_UserID)
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetLoggedRequestByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [c_LoggedLoginID],
        [TimeAccessed],
        [c_UserID],
        [CallingFunctionWithinApplication],
        [EntryPoint],
        [Process],
        [Thread]
    FROM [c_LoggedRequest]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddLoggedRequest]
    @c_LoggedLoginID bigint = NULL,
    @TimeAccessed datetime = NULL,
    @c_UserID bigint = NULL,
    @CallingFunctionWithinApplication varchar(100) = NULL,
    @EntryPoint varchar(255) = NULL,
    @Process varchar(75) = NULL,
    @Thread varchar(50) = NULL
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [c_LoggedRequest] (
        [c_LoggedLoginID],
        [TimeAccessed],
        [c_UserID],
        [CallingFunctionWithinApplication],
        [EntryPoint],
        [Process],
        [Thread]
    )
    VALUES (
        @c_LoggedLoginID,
        @TimeAccessed,
        @c_UserID,
        @CallingFunctionWithinApplication,
        @EntryPoint,
        @Process,
        @Thread
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateLoggedRequest]
    @ID bigint,
    @c_LoggedLoginID bigint = NULL,
    @TimeAccessed datetime = NULL,
    @c_UserID bigint = NULL,
    @CallingFunctionWithinApplication varchar(100) = NULL,
    @EntryPoint varchar(255) = NULL,
    @Process varchar(75) = NULL,
    @Thread varchar(50) = NULL
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [c_LoggedRequest]
    SET
        [c_LoggedLoginID] = @c_LoggedLoginID,
        [TimeAccessed] = @TimeAccessed,
        [c_UserID] = @c_UserID,
        [CallingFunctionWithinApplication] = @CallingFunctionWithinApplication,
        [EntryPoint] = @EntryPoint,
        [Process] = @Process,
        [Thread] = @Thread
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteLoggedRequest]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [c_LoggedRequest]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_c_LoggedRequest_LoggedLoginID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillLoggedRequestByCLOGGEDLOGINID]
    @c_LoggedLoginID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [c_LoggedLoginID],
        [TimeAccessed],
        [c_UserID],
        [CallingFunctionWithinApplication],
        [EntryPoint],
        [Process],
        [Thread]
    FROM [c_LoggedRequest]
    WHERE [c_LoggedLoginID] = @c_LoggedLoginID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_c_LoggedRequest_UserID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillLoggedRequestByCUSERID]
    @c_UserID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [c_LoggedLoginID],
        [TimeAccessed],
        [c_UserID],
        [CallingFunctionWithinApplication],
        [EntryPoint],
        [Process],
        [Thread]
    FROM [c_LoggedRequest]
    WHERE [c_UserID] = @c_UserID
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: c_Lookup
-- Generated: 2025-12-27 19:28:30 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllLookups]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_Lookup],
        [ID],
        [enmParentLookupType_Lookup],
        [ParentCode],
        [enmLookupType_Lookup],
        [Code],
        [locText],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [locDescription]
    FROM [c_Lookup]
    ORDER BY [ID]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredLookups]
    @enmParentLookupType_Lookup VARCHAR(50) = NULL,
    @ParentCode VARCHAR(50) = NULL,
    @enmLookupType_Lookup VARCHAR(50) = NULL,
    @Code VARCHAR(50) = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_Lookup],
        [ID],
        [enmParentLookupType_Lookup],
        [ParentCode],
        [enmLookupType_Lookup],
        [Code],
        [locText],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [locDescription]
    FROM [c_Lookup]
    WHERE 1=1
      AND (@enmParentLookupType_Lookup IS NULL OR [enmParentLookupType_Lookup] LIKE '%' + @enmParentLookupType_Lookup + '%')
      AND (@ParentCode IS NULL OR [ParentCode] LIKE '%' + @ParentCode + '%')
      AND (@enmLookupType_Lookup IS NULL OR [enmLookupType_Lookup] LIKE '%' + @enmLookupType_Lookup + '%')
      AND (@Code IS NULL OR [Code] LIKE '%' + @Code + '%')
      AND (@enmLookupType_Lookup IS NULL OR [enmLookupType_Lookup] LIKE '%' + @enmLookupType_Lookup + '%')
      AND (@enmParentLookupType_Lookup IS NULL OR [enmParentLookupType_Lookup] LIKE '%' + @enmParentLookupType_Lookup + '%')
      AND (@enmLookupType_Lookup IS NULL OR [enmLookupType_Lookup] LIKE '%' + @enmLookupType_Lookup + '%')
      AND (@enmParentLookupType_Lookup IS NULL OR [enmParentLookupType_Lookup] LIKE '%' + @enmParentLookupType_Lookup + '%')
      AND (@ParentCode IS NULL OR [ParentCode] LIKE '%' + @ParentCode + '%')
      AND (@enmLookupType_Lookup IS NULL OR [enmLookupType_Lookup] LIKE '%' + @enmLookupType_Lookup + '%')
    ORDER BY [ID]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetLookupByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_Lookup],
        [ID],
        [enmParentLookupType_Lookup],
        [ParentCode],
        [enmLookupType_Lookup],
        [Code],
        [locText],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [locDescription]
    FROM [c_Lookup]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddLookup]
    @TableName_c_Lookup bit,
    @enmParentLookupType_Lookup varchar(50) = NULL,
    @ParentCode varchar(50) = NULL,
    @enmLookupType_Lookup varchar(50) = NULL,
    @Code varchar(50) = NULL,
    @locText nvarchar(200) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @locDescription nvarchar(100) = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [c_Lookup] (
        [TableName_c_Lookup],
        [enmParentLookupType_Lookup],
        [ParentCode],
        [enmLookupType_Lookup],
        [Code],
        [locText],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [locDescription],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_c_Lookup,
        @enmParentLookupType_Lookup,
        @ParentCode,
        @enmLookupType_Lookup,
        @Code,
        @locText,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        @locDescription,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateLookup]
    @ID bigint,
    @TableName_c_Lookup bit,
    @enmParentLookupType_Lookup varchar(50) = NULL,
    @ParentCode varchar(50) = NULL,
    @enmLookupType_Lookup varchar(50) = NULL,
    @Code varchar(50) = NULL,
    @locText nvarchar(200) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @locDescription nvarchar(100) = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [c_Lookup]
    SET
        [TableName_c_Lookup] = @TableName_c_Lookup,
        [enmParentLookupType_Lookup] = @enmParentLookupType_Lookup,
        [ParentCode] = @ParentCode,
        [enmLookupType_Lookup] = @enmLookupType_Lookup,
        [Code] = @Code,
        [locText] = @locText,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [locDescription] = @locDescription,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteLookup]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [c_Lookup]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_c_Lookup_ParentLookupType_ParentCode_LookupType_Code
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetLookupByENMPARENTLOOKUPTYPELOOKUPAndPARENTCODEAndENMLOOKUPTYPELOOKUPAndCODE]
    @enmParentLookupType_Lookup varchar(50),
    @ParentCode varchar(50),
    @enmLookupType_Lookup varchar(50),
    @Code varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_Lookup],
        [ID],
        [enmParentLookupType_Lookup],
        [ParentCode],
        [enmLookupType_Lookup],
        [Code],
        [locText],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [locDescription]
    FROM [c_Lookup]
    WHERE [enmParentLookupType_Lookup] = @enmParentLookupType_Lookup AND [ParentCode] = @ParentCode AND [enmLookupType_Lookup] = @enmLookupType_Lookup AND [Code] = @Code
;
END

GO

-- Procedure for Index: IX_c_Lookup_LookupType
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillLookupByENMLOOKUPTYPELOOKUP]
    @enmLookupType_Lookup varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_Lookup],
        [ID],
        [enmParentLookupType_Lookup],
        [ParentCode],
        [enmLookupType_Lookup],
        [Code],
        [locText],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [locDescription]
    FROM [c_Lookup]
    WHERE [enmLookupType_Lookup] = @enmLookupType_Lookup
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_c_Lookup_ParentLookupType_LookupType
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillLookupByENMPARENTLOOKUPTYPELOOKUPAndENMLOOKUPTYPELOOKUP]
    @enmParentLookupType_Lookup varchar(50),
    @enmLookupType_Lookup varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_Lookup],
        [ID],
        [enmParentLookupType_Lookup],
        [ParentCode],
        [enmLookupType_Lookup],
        [Code],
        [locText],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [locDescription]
    FROM [c_Lookup]
    WHERE [enmParentLookupType_Lookup] = @enmParentLookupType_Lookup AND [enmLookupType_Lookup] = @enmLookupType_Lookup
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_c_Lookup_ParentLookupType_ParentCode_LookupType
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillLookupByENMPARENTLOOKUPTYPELOOKUPAndPARENTCODEAndENMLOOKUPTYPELOOKUP]
    @enmParentLookupType_Lookup varchar(50),
    @ParentCode varchar(50),
    @enmLookupType_Lookup varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_Lookup],
        [ID],
        [enmParentLookupType_Lookup],
        [ParentCode],
        [enmLookupType_Lookup],
        [Code],
        [locText],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [locDescription]
    FROM [c_Lookup]
    WHERE [enmParentLookupType_Lookup] = @enmParentLookupType_Lookup AND [ParentCode] = @ParentCode AND [enmLookupType_Lookup] = @enmLookupType_Lookup
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: c_Mail
-- Generated: 2025-12-27 19:28:30 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllMails]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [enmMessagingMode],
        [RecipientEmail],
        [WhenSent],
        [Subject],
        [Body],
        [WhenSeen],
        [WasSeen]
    FROM [c_Mail]
    ORDER BY [ID]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredMails]
    @enmMessagingMode VARCHAR(50) = NULL,
    @RecipientEmail NVARCHAR(100) = NULL,
    @WasSeen BIT = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [enmMessagingMode],
        [RecipientEmail],
        [WhenSent],
        [Subject],
        [Body],
        [WhenSeen],
        [WasSeen]
    FROM [c_Mail]
    WHERE 1=1
      AND (@enmMessagingMode IS NULL OR [enmMessagingMode] LIKE '%' + @enmMessagingMode + '%')
      AND (@RecipientEmail IS NULL OR [RecipientEmail] LIKE '%' + @RecipientEmail + '%')
      AND (@enmMessagingMode IS NULL OR [enmMessagingMode] LIKE '%' + @enmMessagingMode + '%')
      AND (@RecipientEmail IS NULL OR [RecipientEmail] LIKE '%' + @RecipientEmail + '%')
      AND (@WasSeen IS NULL OR [WasSeen] = @WasSeen)
      AND (@WasSeen IS NULL OR [WasSeen] = @WasSeen)
    ORDER BY [ID]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetMailByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [enmMessagingMode],
        [RecipientEmail],
        [WhenSent],
        [Subject],
        [Body],
        [WhenSeen],
        [WasSeen]
    FROM [c_Mail]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddMail]
    @enmMessagingMode varchar(50) = NULL,
    @RecipientEmail nvarchar(100) = NULL,
    @WhenSent datetimeoffset = NULL,
    @Subject nvarchar(100) = NULL,
    @Body nvarchar(MAX) = NULL,
    @WhenSeen datetimeoffset = NULL,
    @WasSeen bit
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [c_Mail] (
        [enmMessagingMode],
        [RecipientEmail],
        [WhenSent],
        [Subject],
        [Body],
        [WhenSeen],
        [WasSeen]
    )
    VALUES (
        @enmMessagingMode,
        @RecipientEmail,
        @WhenSent,
        @Subject,
        @Body,
        @WhenSeen,
        @WasSeen
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateMail]
    @ID bigint,
    @enmMessagingMode varchar(50) = NULL,
    @RecipientEmail nvarchar(100) = NULL,
    @WhenSent datetimeoffset = NULL,
    @Subject nvarchar(100) = NULL,
    @Body nvarchar(MAX) = NULL,
    @WhenSeen datetimeoffset = NULL,
    @WasSeen bit
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [c_Mail]
    SET
        [enmMessagingMode] = @enmMessagingMode,
        [RecipientEmail] = @RecipientEmail,
        [WhenSent] = @WhenSent,
        [Subject] = @Subject,
        [Body] = @Body,
        [WhenSeen] = @WhenSeen,
        [WasSeen] = @WasSeen
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteMail]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [c_Mail]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IXc_Mail_MailType_RecipientEmail
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillMailByENMMESSAGINGMODEAndRECIPIENTEMAIL]
    @enmMessagingMode varchar(50),
    @RecipientEmail nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [enmMessagingMode],
        [RecipientEmail],
        [WhenSent],
        [Subject],
        [Body],
        [WhenSeen],
        [WasSeen]
    FROM [c_Mail]
    WHERE [enmMessagingMode] = @enmMessagingMode AND [RecipientEmail] = @RecipientEmail
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXc_Mail_MailType_RecipientEmail_WasSeen
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillMailByENMMESSAGINGMODEAndRECIPIENTEMAILAndWASSEEN]
    @enmMessagingMode varchar(50),
    @RecipientEmail nvarchar(100),
    @WasSeen bit
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [enmMessagingMode],
        [RecipientEmail],
        [WhenSent],
        [Subject],
        [Body],
        [WhenSeen],
        [WasSeen]
    FROM [c_Mail]
    WHERE [enmMessagingMode] = @enmMessagingMode AND [RecipientEmail] = @RecipientEmail AND [WasSeen] = @WasSeen
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXc_Mail_WasSeen
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillMailByWASSEEN]
    @WasSeen bit
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [enmMessagingMode],
        [RecipientEmail],
        [WhenSent],
        [Subject],
        [Body],
        [WhenSeen],
        [WasSeen]
    FROM [c_Mail]
    WHERE [WasSeen] = @WasSeen
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: c_MFA
-- Generated: 2025-12-27 19:28:30 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllMfas]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_MFA],
        [ID],
        [CellOrEmail],
        [ProtectedFunction],
        [enoCode],
        [AttemptNo],
        [IsSuccessful],
        [LastAccessingIP],
        [LastAccessingCountry],
        [enmUILang_Language],
        [WhenCreated],
        [WhenAccessed],
        [WhenExpires],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [Details]
    FROM [c_MFA]
    ORDER BY [ID]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredMfas]
    @CellOrEmail VARCHAR(50) = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_MFA],
        [ID],
        [CellOrEmail],
        [ProtectedFunction],
        [enoCode],
        [AttemptNo],
        [IsSuccessful],
        [LastAccessingIP],
        [LastAccessingCountry],
        [enmUILang_Language],
        [WhenCreated],
        [WhenAccessed],
        [WhenExpires],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [Details]
    FROM [c_MFA]
    WHERE 1=1
      AND (@CellOrEmail IS NULL OR [CellOrEmail] LIKE '%' + @CellOrEmail + '%')
    ORDER BY [ID]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetMfaByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_MFA],
        [ID],
        [CellOrEmail],
        [ProtectedFunction],
        [enoCode],
        [AttemptNo],
        [IsSuccessful],
        [LastAccessingIP],
        [LastAccessingCountry],
        [enmUILang_Language],
        [WhenCreated],
        [WhenAccessed],
        [WhenExpires],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [Details]
    FROM [c_MFA]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddMfa]
    @TableName_c_MFA bit = NULL,
    @CellOrEmail varchar(50) = NULL,
    @ProtectedFunction varchar(50) = NULL,
    @enoCode varchar(64) = NULL,
    @AttemptNo int = NULL,
    @IsSuccessful bit = NULL,
    @LastAccessingIP varchar(50) = NULL,
    @LastAccessingCountry varchar(5) = NULL,
    @enmUILang_Language varchar(5) = NULL,
    @WhenCreated datetimeoffset = NULL,
    @WhenAccessed datetimeoffset = NULL,
    @WhenExpires datetimeoffset = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @Details nvarchar(1000) = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [c_MFA] (
        [TableName_c_MFA],
        [CellOrEmail],
        [ProtectedFunction],
        [enoCode],
        [AttemptNo],
        [IsSuccessful],
        [LastAccessingIP],
        [LastAccessingCountry],
        [enmUILang_Language],
        [WhenCreated],
        [WhenAccessed],
        [WhenExpires],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [Details],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_c_MFA,
        @CellOrEmail,
        @ProtectedFunction,
        @enoCode,
        @AttemptNo,
        @IsSuccessful,
        @LastAccessingIP,
        @LastAccessingCountry,
        @enmUILang_Language,
        @WhenCreated,
        @WhenAccessed,
        @WhenExpires,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        @Details,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateMfa]
    @ID bigint,
    @TableName_c_MFA bit = NULL,
    @CellOrEmail varchar(50) = NULL,
    @ProtectedFunction varchar(50) = NULL,
    @enoCode varchar(64) = NULL,
    @AttemptNo int = NULL,
    @IsSuccessful bit = NULL,
    @LastAccessingIP varchar(50) = NULL,
    @LastAccessingCountry varchar(5) = NULL,
    @enmUILang_Language varchar(5) = NULL,
    @WhenCreated datetimeoffset = NULL,
    @WhenAccessed datetimeoffset = NULL,
    @WhenExpires datetimeoffset = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @Details nvarchar(1000) = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [c_MFA]
    SET
        [TableName_c_MFA] = @TableName_c_MFA,
        [CellOrEmail] = @CellOrEmail,
        [ProtectedFunction] = @ProtectedFunction,
        [enoCode] = @enoCode,
        [AttemptNo] = @AttemptNo,
        [IsSuccessful] = @IsSuccessful,
        [LastAccessingIP] = @LastAccessingIP,
        [LastAccessingCountry] = @LastAccessingCountry,
        [enmUILang_Language] = @enmUILang_Language,
        [WhenCreated] = @WhenCreated,
        [WhenAccessed] = @WhenAccessed,
        [WhenExpires] = @WhenExpires,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [Details] = @Details,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteMfa]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [c_MFA]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_c_MFA_CellOrEmail
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetMfaByCELLOREMAIL]
    @CellOrEmail varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_MFA],
        [ID],
        [CellOrEmail],
        [ProtectedFunction],
        [enoCode],
        [AttemptNo],
        [IsSuccessful],
        [LastAccessingIP],
        [LastAccessingCountry],
        [enmUILang_Language],
        [WhenCreated],
        [WhenAccessed],
        [WhenExpires],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [Details]
    FROM [c_MFA]
    WHERE [CellOrEmail] = @CellOrEmail
;
END

GO


-- =========================================
-- Stored Procedures for Table: c_ObjectToTranslate
-- Generated: 2025-12-27 19:28:30 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllObjectToTranslates]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_ObjectToTranslate],
        [ID],
        [enmObjectType],
        [Object],
        [Item],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [c_ObjectToTranslate]
    ORDER BY [ID]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredObjectToTranslates]
    @enmObjectType VARCHAR(50) = NULL,
    @Object VARCHAR(50) = NULL,
    @Item NVARCHAR(510) = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_ObjectToTranslate],
        [ID],
        [enmObjectType],
        [Object],
        [Item],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [c_ObjectToTranslate]
    WHERE 1=1
      AND (@enmObjectType IS NULL OR [enmObjectType] LIKE '%' + @enmObjectType + '%')
      AND (@Object IS NULL OR [Object] LIKE '%' + @Object + '%')
      AND (@Item IS NULL OR [Item] LIKE '%' + @Item + '%')
      AND (@enmObjectType IS NULL OR [enmObjectType] LIKE '%' + @enmObjectType + '%')
      AND (@enmObjectType IS NULL OR [enmObjectType] LIKE '%' + @enmObjectType + '%')
      AND (@Object IS NULL OR [Object] LIKE '%' + @Object + '%')
    ORDER BY [ID]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetObjectToTranslateByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_ObjectToTranslate],
        [ID],
        [enmObjectType],
        [Object],
        [Item],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [c_ObjectToTranslate]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddObjectToTranslate]
    @TableName_c_ObjectToTranslate bit = NULL,
    @enmObjectType varchar(50),
    @Object varchar(50),
    @Item nvarchar(510) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [c_ObjectToTranslate] (
        [TableName_c_ObjectToTranslate],
        [enmObjectType],
        [Object],
        [Item],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_c_ObjectToTranslate,
        @enmObjectType,
        @Object,
        @Item,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateObjectToTranslate]
    @ID bigint,
    @TableName_c_ObjectToTranslate bit = NULL,
    @enmObjectType varchar(50),
    @Object varchar(50),
    @Item nvarchar(510) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [c_ObjectToTranslate]
    SET
        [TableName_c_ObjectToTranslate] = @TableName_c_ObjectToTranslate,
        [enmObjectType] = @enmObjectType,
        [Object] = @Object,
        [Item] = @Item,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteObjectToTranslate]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [c_ObjectToTranslate]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_c_ObjectToTranslate_enmObjectType_Object_Item
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetObjectToTranslateByENMOBJECTTYPEAndOBJECTAndITEM]
    @enmObjectType varchar(50),
    @Object varchar(50),
    @Item nvarchar(510)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_ObjectToTranslate],
        [ID],
        [enmObjectType],
        [Object],
        [Item],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [c_ObjectToTranslate]
    WHERE [enmObjectType] = @enmObjectType AND [Object] = @Object AND [Item] = @Item
;
END

GO

-- Procedure for Index: IX_c_ObjectToTranslate_enmObjectType
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillObjectToTranslateByENMOBJECTTYPE]
    @enmObjectType varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_ObjectToTranslate],
        [ID],
        [enmObjectType],
        [Object],
        [Item],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [c_ObjectToTranslate]
    WHERE [enmObjectType] = @enmObjectType
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_c_ObjectToTranslate_enmObjectType_Object
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillObjectToTranslateByENMOBJECTTYPEAndOBJECT]
    @enmObjectType varchar(50),
    @Object varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_ObjectToTranslate],
        [ID],
        [enmObjectType],
        [Object],
        [Item],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [c_ObjectToTranslate]
    WHERE [enmObjectType] = @enmObjectType AND [Object] = @Object
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: c_ObjectTranslation
-- Generated: 2025-12-27 19:28:30 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllObjectTranslations]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_c_ObjectTranslation],
            t.[ID],
            t.[c_ObjectToTranslateID],
            t.[Instance],
            t.[DefaultText],
            t.[enmLanguage],
            t.[Text],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            t.[InstanceUniqueText],
            p1.[Text] AS [c_ObjectToTranslateID_Text]
        FROM [c_ObjectTranslation] t
        LEFT JOIN [ccvwComboList_c_ObjectToTranslate] p1 ON t.[c_ObjectToTranslateID] = p1.[ID]
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_c_ObjectTranslation],
            [ID],
            [c_ObjectToTranslateID],
            [Instance],
            [DefaultText],
            [enmLanguage],
            [Text],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID],
            [InstanceUniqueText]
        FROM [c_ObjectTranslation]
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredObjectTranslations]
    @c_ObjectToTranslateID INT = NULL,
    @Instance INT = NULL,
    @enmLanguage VARCHAR(10) = NULL,
    @InstanceUniqueText NVARCHAR(1000) = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_c_ObjectTranslation],
            t.[ID],
            t.[c_ObjectToTranslateID],
            t.[Instance],
            t.[DefaultText],
            t.[enmLanguage],
            t.[Text],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            t.[InstanceUniqueText],
            p1.[Text] AS [c_ObjectToTranslateID_Text]
        FROM [c_ObjectTranslation] t
        LEFT JOIN [ccvwComboList_c_ObjectToTranslate] p1 ON t.[c_ObjectToTranslateID] = p1.[ID]
        WHERE 1=1
          AND (@c_ObjectToTranslateID IS NULL OR t.[c_ObjectToTranslateID] = @c_ObjectToTranslateID)
          AND (@Instance IS NULL OR t.[Instance] = @Instance)
          AND (@enmLanguage IS NULL OR t.[enmLanguage] LIKE '%' + @enmLanguage + '%')
          AND (@InstanceUniqueText IS NULL OR t.[InstanceUniqueText] LIKE '%' + @InstanceUniqueText + '%')
          AND (@Instance IS NULL OR t.[Instance] = @Instance)
          AND (@enmLanguage IS NULL OR t.[enmLanguage] LIKE '%' + @enmLanguage + '%')
          AND (@c_ObjectToTranslateID IS NULL OR t.[c_ObjectToTranslateID] = @c_ObjectToTranslateID)
          AND (@c_ObjectToTranslateID IS NULL OR t.[c_ObjectToTranslateID] = @c_ObjectToTranslateID)
          AND (@Instance IS NULL OR t.[Instance] = @Instance)
          AND (@enmLanguage IS NULL OR t.[enmLanguage] LIKE '%' + @enmLanguage + '%')
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_c_ObjectTranslation],
            [ID],
            [c_ObjectToTranslateID],
            [Instance],
            [DefaultText],
            [enmLanguage],
            [Text],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID],
            [InstanceUniqueText]
        FROM [c_ObjectTranslation]
        WHERE 1=1
          AND (@c_ObjectToTranslateID IS NULL OR [c_ObjectToTranslateID] = @c_ObjectToTranslateID)
          AND (@Instance IS NULL OR [Instance] = @Instance)
          AND (@enmLanguage IS NULL OR [enmLanguage] LIKE '%' + @enmLanguage + '%')
          AND (@InstanceUniqueText IS NULL OR [InstanceUniqueText] LIKE '%' + @InstanceUniqueText + '%')
          AND (@Instance IS NULL OR [Instance] = @Instance)
          AND (@enmLanguage IS NULL OR [enmLanguage] LIKE '%' + @enmLanguage + '%')
          AND (@c_ObjectToTranslateID IS NULL OR [c_ObjectToTranslateID] = @c_ObjectToTranslateID)
          AND (@c_ObjectToTranslateID IS NULL OR [c_ObjectToTranslateID] = @c_ObjectToTranslateID)
          AND (@Instance IS NULL OR [Instance] = @Instance)
          AND (@enmLanguage IS NULL OR [enmLanguage] LIKE '%' + @enmLanguage + '%')
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetObjectTranslationByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_ObjectTranslation],
        [ID],
        [c_ObjectToTranslateID],
        [Instance],
        [DefaultText],
        [enmLanguage],
        [Text],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [InstanceUniqueText]
    FROM [c_ObjectTranslation]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddObjectTranslation]
    @TableName_c_ObjectTranslation bit = NULL,
    @c_ObjectToTranslateID bigint,
    @Instance bigint = NULL,
    @DefaultText nvarchar(MAX) = NULL,
    @enmLanguage varchar(10),
    @Text nvarchar(MAX),
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @InstanceUniqueText nvarchar(1000) = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [c_ObjectTranslation] (
        [TableName_c_ObjectTranslation],
        [c_ObjectToTranslateID],
        [Instance],
        [DefaultText],
        [enmLanguage],
        [Text],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [InstanceUniqueText],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_c_ObjectTranslation,
        @c_ObjectToTranslateID,
        @Instance,
        @DefaultText,
        @enmLanguage,
        @Text,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        @InstanceUniqueText,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateObjectTranslation]
    @ID bigint,
    @TableName_c_ObjectTranslation bit = NULL,
    @c_ObjectToTranslateID bigint,
    @Instance bigint = NULL,
    @DefaultText nvarchar(MAX) = NULL,
    @enmLanguage varchar(10),
    @Text nvarchar(MAX),
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @InstanceUniqueText nvarchar(1000) = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [c_ObjectTranslation]
    SET
        [TableName_c_ObjectTranslation] = @TableName_c_ObjectTranslation,
        [c_ObjectToTranslateID] = @c_ObjectToTranslateID,
        [Instance] = @Instance,
        [DefaultText] = @DefaultText,
        [enmLanguage] = @enmLanguage,
        [Text] = @Text,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [InstanceUniqueText] = @InstanceUniqueText,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteObjectTranslation]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [c_ObjectTranslation]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_c_ObjectTranslation_c_ObjectToTranslateID_Instance_enmLanguage
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetObjectTranslationByCOBJECTTOTRANSLATEIDAndINSTANCEAndENMLANGUAGE]
    @c_ObjectToTranslateID bigint,
    @Instance bigint,
    @enmLanguage varchar(10)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_ObjectTranslation],
        [ID],
        [c_ObjectToTranslateID],
        [Instance],
        [DefaultText],
        [enmLanguage],
        [Text],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [InstanceUniqueText]
    FROM [c_ObjectTranslation]
    WHERE [c_ObjectToTranslateID] = @c_ObjectToTranslateID AND [Instance] = @Instance AND [enmLanguage] = @enmLanguage
;
END

GO

-- Procedure for Index: IX_c_ObjectTranslation_InstanceUniqueText_Instance_Language
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetObjectTranslationByINSTANCEUNIQUETEXTAndINSTANCEAndENMLANGUAGE]
    @InstanceUniqueText nvarchar(1000),
    @Instance bigint,
    @enmLanguage varchar(10)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_ObjectTranslation],
        [ID],
        [c_ObjectToTranslateID],
        [Instance],
        [DefaultText],
        [enmLanguage],
        [Text],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [InstanceUniqueText]
    FROM [c_ObjectTranslation]
    WHERE [InstanceUniqueText] = @InstanceUniqueText AND [Instance] = @Instance AND [enmLanguage] = @enmLanguage
;
END

GO

-- Procedure for Index: IX_c_ObjectTranslation_c_ObjectToTranslateID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillObjectTranslationByCOBJECTTOTRANSLATEID]
    @c_ObjectToTranslateID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_ObjectTranslation],
        [ID],
        [c_ObjectToTranslateID],
        [Instance],
        [DefaultText],
        [enmLanguage],
        [Text],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [InstanceUniqueText]
    FROM [c_ObjectTranslation]
    WHERE [c_ObjectToTranslateID] = @c_ObjectToTranslateID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_c_ObjectTranslation_c_ObjectToTranslateID_Instance
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillObjectTranslationByCOBJECTTOTRANSLATEIDAndINSTANCE]
    @c_ObjectToTranslateID bigint,
    @Instance bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_ObjectTranslation],
        [ID],
        [c_ObjectToTranslateID],
        [Instance],
        [DefaultText],
        [enmLanguage],
        [Text],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [InstanceUniqueText]
    FROM [c_ObjectTranslation]
    WHERE [c_ObjectToTranslateID] = @c_ObjectToTranslateID AND [Instance] = @Instance
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_c_ObjectTranslation_enmLanguage
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillObjectTranslationByENMLANGUAGE]
    @enmLanguage varchar(10)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_ObjectTranslation],
        [ID],
        [c_ObjectToTranslateID],
        [Instance],
        [DefaultText],
        [enmLanguage],
        [Text],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [InstanceUniqueText]
    FROM [c_ObjectTranslation]
    WHERE [enmLanguage] = @enmLanguage
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: c_Permission
-- Generated: 2025-12-27 19:28:30 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllPermissions]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_c_Permission],
            t.[ID],
            t.[c_RoleID],
            t.[c_ProcessID],
            t.[CanDo],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            p1.[Text] AS [c_RoleID_Text],
            p2.[Text] AS [c_ProcessID_Text]
        FROM [c_Permission] t
        LEFT JOIN [ccvwComboList_c_Role] p1 ON t.[c_RoleID] = p1.[ID]
        LEFT JOIN [ccvwComboList_c_Process] p2 ON t.[c_ProcessID] = p2.[ID]
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_c_Permission],
            [ID],
            [c_RoleID],
            [c_ProcessID],
            [CanDo],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID]
        FROM [c_Permission]
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredPermissions]
    @c_ProcessID INT = NULL,
    @c_RoleID INT = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_c_Permission],
            t.[ID],
            t.[c_RoleID],
            t.[c_ProcessID],
            t.[CanDo],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            p1.[Text] AS [c_RoleID_Text],
            p2.[Text] AS [c_ProcessID_Text]
        FROM [c_Permission] t
        LEFT JOIN [ccvwComboList_c_Role] p1 ON t.[c_RoleID] = p1.[ID]
        LEFT JOIN [ccvwComboList_c_Process] p2 ON t.[c_ProcessID] = p2.[ID]
        WHERE 1=1
          AND (@c_ProcessID IS NULL OR t.[c_ProcessID] = @c_ProcessID)
          AND (@c_RoleID IS NULL OR t.[c_RoleID] = @c_RoleID)
          AND (@c_ProcessID IS NULL OR t.[c_ProcessID] = @c_ProcessID)
          AND (@c_RoleID IS NULL OR t.[c_RoleID] = @c_RoleID)
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_c_Permission],
            [ID],
            [c_RoleID],
            [c_ProcessID],
            [CanDo],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID]
        FROM [c_Permission]
        WHERE 1=1
          AND (@c_ProcessID IS NULL OR [c_ProcessID] = @c_ProcessID)
          AND (@c_RoleID IS NULL OR [c_RoleID] = @c_RoleID)
          AND (@c_ProcessID IS NULL OR [c_ProcessID] = @c_ProcessID)
          AND (@c_RoleID IS NULL OR [c_RoleID] = @c_RoleID)
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetPermissionByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_Permission],
        [ID],
        [c_RoleID],
        [c_ProcessID],
        [CanDo],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [c_Permission]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddPermission]
    @TableName_c_Permission bit,
    @c_RoleID bigint = NULL,
    @c_ProcessID bigint = NULL,
    @CanDo bit = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [c_Permission] (
        [TableName_c_Permission],
        [c_RoleID],
        [c_ProcessID],
        [CanDo],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_c_Permission,
        @c_RoleID,
        @c_ProcessID,
        @CanDo,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdatePermission]
    @ID bigint,
    @TableName_c_Permission bit,
    @c_RoleID bigint = NULL,
    @c_ProcessID bigint = NULL,
    @CanDo bit = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [c_Permission]
    SET
        [TableName_c_Permission] = @TableName_c_Permission,
        [c_RoleID] = @c_RoleID,
        [c_ProcessID] = @c_ProcessID,
        [CanDo] = @CanDo,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeletePermission]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [c_Permission]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_c_Permission_ProcessIDAndRoleID
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetPermissionByCPROCESSIDAndCROLEID]
    @c_ProcessID bigint,
    @c_RoleID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_Permission],
        [ID],
        [c_RoleID],
        [c_ProcessID],
        [CanDo],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [c_Permission]
    WHERE [c_ProcessID] = @c_ProcessID AND [c_RoleID] = @c_RoleID
;
END

GO

-- Procedure for Index: IX_c_Permission_ProcessID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillPermissionByCPROCESSID]
    @c_ProcessID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_Permission],
        [ID],
        [c_RoleID],
        [c_ProcessID],
        [CanDo],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [c_Permission]
    WHERE [c_ProcessID] = @c_ProcessID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_c_Permission_RoleID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillPermissionByCROLEID]
    @c_RoleID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_Permission],
        [ID],
        [c_RoleID],
        [c_ProcessID],
        [CanDo],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [c_Permission]
    WHERE [c_RoleID] = @c_RoleID
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: c_Process
-- Generated: 2025-12-27 19:28:30 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllProcesss]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [Name],
        [DateChecked]
    FROM [c_Process]
    ORDER BY [ID]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredProcesss]
    @Name VARCHAR(100) = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [Name],
        [DateChecked]
    FROM [c_Process]
    WHERE 1=1
      AND (@Name IS NULL OR [Name] LIKE '%' + @Name + '%')
    ORDER BY [ID]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetProcessByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [Name],
        [DateChecked]
    FROM [c_Process]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddProcess]
    @Name varchar(100) = NULL,
    @DateChecked datetime = NULL
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [c_Process] (
        [Name],
        [DateChecked]
    )
    VALUES (
        @Name,
        @DateChecked
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateProcess]
    @ID bigint,
    @Name varchar(100) = NULL,
    @DateChecked datetime = NULL
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [c_Process]
    SET
        [Name] = @Name,
        [DateChecked] = @DateChecked
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteProcess]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [c_Process]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_c_Process_Name
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetProcessByNAME]
    @Name varchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [Name],
        [DateChecked]
    FROM [c_Process]
    WHERE [Name] = @Name
;
END

GO


-- =========================================
-- Stored Procedures for Table: c_Role
-- Generated: 2025-12-27 19:28:30 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllRoles]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_c_Role],
            t.[ID],
            t.[Name],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            t.[BaseRoleID],
            p1.[Text] AS [BaseRoleID_Text]
        FROM [c_Role] t
        LEFT JOIN [ccvwComboList_c_Role] p1 ON t.[BaseRoleID] = p1.[ID]
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_c_Role],
            [ID],
            [Name],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID],
            [BaseRoleID]
        FROM [c_Role]
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredRoles]
    @Name NVARCHAR(100) = NULL,
    @BaseRoleID INT = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_c_Role],
            t.[ID],
            t.[Name],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            t.[BaseRoleID],
            p1.[Text] AS [BaseRoleID_Text]
        FROM [c_Role] t
        LEFT JOIN [ccvwComboList_c_Role] p1 ON t.[BaseRoleID] = p1.[ID]
        WHERE 1=1
          AND (@Name IS NULL OR t.[Name] LIKE '%' + @Name + '%')
          AND (@BaseRoleID IS NULL OR t.[BaseRoleID] = @BaseRoleID)
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_c_Role],
            [ID],
            [Name],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID],
            [BaseRoleID]
        FROM [c_Role]
        WHERE 1=1
          AND (@Name IS NULL OR [Name] LIKE '%' + @Name + '%')
          AND (@BaseRoleID IS NULL OR [BaseRoleID] = @BaseRoleID)
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetRoleByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_Role],
        [ID],
        [Name],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [BaseRoleID]
    FROM [c_Role]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddRole]
    @TableName_c_Role bit,
    @Name nvarchar(100) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @BaseRoleID bigint = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [c_Role] (
        [TableName_c_Role],
        [Name],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [BaseRoleID],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_c_Role,
        @Name,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        @BaseRoleID,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateRole]
    @ID bigint,
    @TableName_c_Role bit,
    @Name nvarchar(100) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @BaseRoleID bigint = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [c_Role]
    SET
        [TableName_c_Role] = @TableName_c_Role,
        [Name] = @Name,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [BaseRoleID] = @BaseRoleID,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteRole]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [c_Role]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_c_Role_Name
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetRoleByNAME]
    @Name nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_Role],
        [ID],
        [Name],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [BaseRoleID]
    FROM [c_Role]
    WHERE [Name] = @Name
;
END

GO

-- Procedure for Index: IXc_Role_BaseRoleID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillRoleByBASEROLEID]
    @BaseRoleID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_Role],
        [ID],
        [Name],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [BaseRoleID]
    FROM [c_Role]
    WHERE [BaseRoleID] = @BaseRoleID
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: c_SystemAudit
-- Generated: 2025-12-27 19:28:30 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllSystemAudits]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [TableName],
        [RowId],
        [Operation],
        [OccurredAt],
        [SqlCurrentUser],
        [ChangedByUser],
        [ActiveLoginID],
        [SqlSystemUser],
        [SqlAppName],
        [SqlHostName],
        [Changes],
        [DeletedBy],
        [DeletedOn]
    FROM [c_SystemAudit]
    ORDER BY [ID]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetSystemAuditByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [TableName],
        [RowId],
        [Operation],
        [OccurredAt],
        [SqlCurrentUser],
        [ChangedByUser],
        [ActiveLoginID],
        [SqlSystemUser],
        [SqlAppName],
        [SqlHostName],
        [Changes],
        [DeletedBy],
        [DeletedOn]
    FROM [c_SystemAudit]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddSystemAudit]
    @TableName varchar(50) = NULL,
    @RowId bigint = NULL,
    @Operation varchar(10) = NULL,
    @OccurredAt datetime = NULL,
    @SqlCurrentUser nvarchar(100) = NULL,
    @ChangedByUser nvarchar(100) = NULL,
    @ActiveLoginID bigint = NULL,
    @SqlSystemUser nvarchar(100) = NULL,
    @SqlAppName nvarchar(500) = NULL,
    @SqlHostName varchar(50) = NULL,
    @Changes nvarchar(MAX) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [c_SystemAudit] (
        [TableName],
        [RowId],
        [Operation],
        [OccurredAt],
        [SqlCurrentUser],
        [ChangedByUser],
        [ActiveLoginID],
        [SqlSystemUser],
        [SqlAppName],
        [SqlHostName],
        [Changes],
        [DeletedBy],
        [DeletedOn]
    )
    VALUES (
        @TableName,
        @RowId,
        @Operation,
        @OccurredAt,
        @SqlCurrentUser,
        @ChangedByUser,
        @ActiveLoginID,
        @SqlSystemUser,
        @SqlAppName,
        @SqlHostName,
        @Changes,
        @DeletedBy,
        @DeletedOn
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateSystemAudit]
    @ID bigint,
    @TableName varchar(50) = NULL,
    @RowId bigint = NULL,
    @Operation varchar(10) = NULL,
    @OccurredAt datetime = NULL,
    @SqlCurrentUser nvarchar(100) = NULL,
    @ChangedByUser nvarchar(100) = NULL,
    @ActiveLoginID bigint = NULL,
    @SqlSystemUser nvarchar(100) = NULL,
    @SqlAppName nvarchar(500) = NULL,
    @SqlHostName varchar(50) = NULL,
    @Changes nvarchar(MAX) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [c_SystemAudit]
    SET
        [TableName] = @TableName,
        [RowId] = @RowId,
        [Operation] = @Operation,
        [OccurredAt] = @OccurredAt,
        [SqlCurrentUser] = @SqlCurrentUser,
        [ChangedByUser] = @ChangedByUser,
        [ActiveLoginID] = @ActiveLoginID,
        [SqlSystemUser] = @SqlSystemUser,
        [SqlAppName] = @SqlAppName,
        [SqlHostName] = @SqlHostName,
        [Changes] = @Changes,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteSystemAudit]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [c_SystemAudit]
    WHERE [ID] = @ID;
END

GO



-- =========================================
-- Stored Procedures for Table: c_SystemDefault
-- Generated: 2025-12-27 19:28:30 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllSystemDefaults]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_SystemDefault],
        [ID],
        [Group],
        [SettingName],
        [spt_SettingValue],
        [enmSystemDefaultType],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [UpdatingLoginID],
        [DeletedBy],
        [DeletedOn],
        [Description]
    FROM [c_SystemDefault]
    ORDER BY [ID]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredSystemDefaults]
    @Group VARCHAR(50) = NULL,
    @SettingName VARCHAR(50) = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_SystemDefault],
        [ID],
        [Group],
        [SettingName],
        [spt_SettingValue],
        [enmSystemDefaultType],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [UpdatingLoginID],
        [DeletedBy],
        [DeletedOn],
        [Description]
    FROM [c_SystemDefault]
    WHERE 1=1
      AND (@Group IS NULL OR [Group] LIKE '%' + @Group + '%')
      AND (@SettingName IS NULL OR [SettingName] LIKE '%' + @SettingName + '%')
      AND (@Group IS NULL OR [Group] LIKE '%' + @Group + '%')
    ORDER BY [ID]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetSystemDefaultByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_SystemDefault],
        [ID],
        [Group],
        [SettingName],
        [spt_SettingValue],
        [enmSystemDefaultType],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [UpdatingLoginID],
        [DeletedBy],
        [DeletedOn],
        [Description]
    FROM [c_SystemDefault]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddSystemDefault]
    @TableName_c_SystemDefault bit,
    @Group varchar(50) = NULL,
    @SettingName varchar(50) = NULL,
    @spt_SettingValue nvarchar(MAX) = NULL,
    @enmSystemDefaultType varchar(50) = NULL,
    @UpdatingLoginID bigint = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @Description nvarchar(1000) = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [c_SystemDefault] (
        [TableName_c_SystemDefault],
        [Group],
        [SettingName],
        [spt_SettingValue],
        [enmSystemDefaultType],
        [UpdatingLoginID],
        [DeletedBy],
        [DeletedOn],
        [Description],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_c_SystemDefault,
        @Group,
        @SettingName,
        @spt_SettingValue,
        @enmSystemDefaultType,
        @UpdatingLoginID,
        @DeletedBy,
        @DeletedOn,
        @Description,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateSystemDefault]
    @ID bigint,
    @TableName_c_SystemDefault bit,
    @Group varchar(50) = NULL,
    @SettingName varchar(50) = NULL,
    @spt_SettingValue nvarchar(MAX) = NULL,
    @enmSystemDefaultType varchar(50) = NULL,
    @UpdatingLoginID bigint = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @Description nvarchar(1000) = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [c_SystemDefault]
    SET
        [TableName_c_SystemDefault] = @TableName_c_SystemDefault,
        [Group] = @Group,
        [SettingName] = @SettingName,
        [spt_SettingValue] = @spt_SettingValue,
        [enmSystemDefaultType] = @enmSystemDefaultType,
        [UpdatingLoginID] = @UpdatingLoginID,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [Description] = @Description,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteSystemDefault]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [c_SystemDefault]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_c_SystemDefault_Group_SettingName
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetSystemDefaultByGROUPAndSETTINGNAME]
    @Group varchar(50),
    @SettingName varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_SystemDefault],
        [ID],
        [Group],
        [SettingName],
        [spt_SettingValue],
        [enmSystemDefaultType],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [UpdatingLoginID],
        [DeletedBy],
        [DeletedOn],
        [Description]
    FROM [c_SystemDefault]
    WHERE [Group] = @Group AND [SettingName] = @SettingName
;
END

GO

-- Procedure for Index: IXc_SystemDefault_Group
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillSystemDefaultByGROUP]
    @Group varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_SystemDefault],
        [ID],
        [Group],
        [SettingName],
        [spt_SettingValue],
        [enmSystemDefaultType],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [UpdatingLoginID],
        [DeletedBy],
        [DeletedOn],
        [Description]
    FROM [c_SystemDefault]
    WHERE [Group] = @Group
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: c_Table
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllTables]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [Name],
        [DefaultTextFields],
        [UsedForIdentity],
        [IsSingleRow],
        [CanAdd],
        [CanEdit],
        [CanDelete],
        [AuditAdd],
        [AuditEdit],
        [AuditDelete],
        [TrackRowChangers],
        [CreateUIMenu],
        [CreateUICollection],
        [CreateUIEntity],
        [SortOrder]
    FROM [c_Table]
    ORDER BY [ID]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredTables]
    @Name VARCHAR(50) = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [Name],
        [DefaultTextFields],
        [UsedForIdentity],
        [IsSingleRow],
        [CanAdd],
        [CanEdit],
        [CanDelete],
        [AuditAdd],
        [AuditEdit],
        [AuditDelete],
        [TrackRowChangers],
        [CreateUIMenu],
        [CreateUICollection],
        [CreateUIEntity],
        [SortOrder]
    FROM [c_Table]
    WHERE 1=1
      AND (@Name IS NULL OR [Name] LIKE '%' + @Name + '%')
    ORDER BY [ID]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetTableByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [Name],
        [DefaultTextFields],
        [UsedForIdentity],
        [IsSingleRow],
        [CanAdd],
        [CanEdit],
        [CanDelete],
        [AuditAdd],
        [AuditEdit],
        [AuditDelete],
        [TrackRowChangers],
        [CreateUIMenu],
        [CreateUICollection],
        [CreateUIEntity],
        [SortOrder]
    FROM [c_Table]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddTable]
    @Name varchar(50) = NULL,
    @DefaultTextFields varchar(100) = NULL,
    @UsedForIdentity bit = NULL,
    @IsSingleRow bit = NULL,
    @CanAdd varchar(1) = NULL,
    @CanEdit varchar(1) = NULL,
    @CanDelete varchar(1) = NULL,
    @AuditAdd bit = NULL,
    @AuditEdit bit = NULL,
    @AuditDelete bit = NULL,
    @TrackRowChangers bit = NULL,
    @CreateUIMenu bit = NULL,
    @CreateUICollection bit = NULL,
    @CreateUIEntity bit = NULL,
    @SortOrder int = NULL
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [c_Table] (
        [Name],
        [DefaultTextFields],
        [UsedForIdentity],
        [IsSingleRow],
        [CanAdd],
        [CanEdit],
        [CanDelete],
        [AuditAdd],
        [AuditEdit],
        [AuditDelete],
        [TrackRowChangers],
        [CreateUIMenu],
        [CreateUICollection],
        [CreateUIEntity],
        [SortOrder]
    )
    VALUES (
        @Name,
        @DefaultTextFields,
        @UsedForIdentity,
        @IsSingleRow,
        @CanAdd,
        @CanEdit,
        @CanDelete,
        @AuditAdd,
        @AuditEdit,
        @AuditDelete,
        @TrackRowChangers,
        @CreateUIMenu,
        @CreateUICollection,
        @CreateUIEntity,
        @SortOrder
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateTable]
    @ID bigint,
    @Name varchar(50) = NULL,
    @DefaultTextFields varchar(100) = NULL,
    @UsedForIdentity bit = NULL,
    @IsSingleRow bit = NULL,
    @CanAdd varchar(1) = NULL,
    @CanEdit varchar(1) = NULL,
    @CanDelete varchar(1) = NULL,
    @AuditAdd bit = NULL,
    @AuditEdit bit = NULL,
    @AuditDelete bit = NULL,
    @TrackRowChangers bit = NULL,
    @CreateUIMenu bit = NULL,
    @CreateUICollection bit = NULL,
    @CreateUIEntity bit = NULL,
    @SortOrder int = NULL
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [c_Table]
    SET
        [Name] = @Name,
        [DefaultTextFields] = @DefaultTextFields,
        [UsedForIdentity] = @UsedForIdentity,
        [IsSingleRow] = @IsSingleRow,
        [CanAdd] = @CanAdd,
        [CanEdit] = @CanEdit,
        [CanDelete] = @CanDelete,
        [AuditAdd] = @AuditAdd,
        [AuditEdit] = @AuditEdit,
        [AuditDelete] = @AuditDelete,
        [TrackRowChangers] = @TrackRowChangers,
        [CreateUIMenu] = @CreateUIMenu,
        [CreateUICollection] = @CreateUICollection,
        [CreateUIEntity] = @CreateUIEntity,
        [SortOrder] = @SortOrder
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteTable]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [c_Table]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_c_Table_Name
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetTableByNAME]
    @Name varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [Name],
        [DefaultTextFields],
        [UsedForIdentity],
        [IsSingleRow],
        [CanAdd],
        [CanEdit],
        [CanDelete],
        [AuditAdd],
        [AuditEdit],
        [AuditDelete],
        [TrackRowChangers],
        [CreateUIMenu],
        [CreateUICollection],
        [CreateUIEntity],
        [SortOrder]
    FROM [c_Table]
    WHERE [Name] = @Name
;
END

GO


-- =========================================
-- Stored Procedures for Table: c_TableFields
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllTableFieldss]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [GroupName],
        [ShowInWinF],
        [OrdinalOnScreen],
        [TABLE_NAME],
        [TABLE_TYPE],
        [COLUMN_NAME],
        [DATA_TYPE],
        [CHARACTER_MAXIMUM_LENGTH],
        [NUMERIC_PRECISION],
        [COLUMN_DEFAULT],
        [IS_NULLABLE],
        [ORDINALINDATABASE],
        [UseForCustomWinFormProject],
        [DtoForWebAPI]
    FROM [c_TableFields]
    ORDER BY [ID]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredTableFieldss]
    @TABLE_NAME NVARCHAR(MAX) = NULL,
    @COLUMN_NAME NVARCHAR(MAX) = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [GroupName],
        [ShowInWinF],
        [OrdinalOnScreen],
        [TABLE_NAME],
        [TABLE_TYPE],
        [COLUMN_NAME],
        [DATA_TYPE],
        [CHARACTER_MAXIMUM_LENGTH],
        [NUMERIC_PRECISION],
        [COLUMN_DEFAULT],
        [IS_NULLABLE],
        [ORDINALINDATABASE],
        [UseForCustomWinFormProject],
        [DtoForWebAPI]
    FROM [c_TableFields]
    WHERE 1=1
      AND (@TABLE_NAME IS NULL OR [TABLE_NAME] = @TABLE_NAME)
      AND (@COLUMN_NAME IS NULL OR [COLUMN_NAME] = @COLUMN_NAME)
    ORDER BY [ID]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetTableFieldsByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [GroupName],
        [ShowInWinF],
        [OrdinalOnScreen],
        [TABLE_NAME],
        [TABLE_TYPE],
        [COLUMN_NAME],
        [DATA_TYPE],
        [CHARACTER_MAXIMUM_LENGTH],
        [NUMERIC_PRECISION],
        [COLUMN_DEFAULT],
        [IS_NULLABLE],
        [ORDINALINDATABASE],
        [UseForCustomWinFormProject],
        [DtoForWebAPI]
    FROM [c_TableFields]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddTableFields]
    @GroupName nvarchar(100) = NULL,
    @ShowInWinF bit = NULL,
    @OrdinalOnScreen int = NULL,
    @TABLE_NAME SYSNAME,
    @TABLE_TYPE varchar(10) = NULL,
    @COLUMN_NAME SYSNAME = NULL,
    @DATA_TYPE nvarchar(256) = NULL,
    @CHARACTER_MAXIMUM_LENGTH int = NULL,
    @NUMERIC_PRECISION tinyint = NULL,
    @COLUMN_DEFAULT nvarchar(2000) = NULL,
    @IS_NULLABLE varchar(3) = NULL,
    @ORDINALINDATABASE int = NULL,
    @UseForCustomWinFormProject bit = NULL,
    @DtoForWebAPI varchar(50) = NULL
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [c_TableFields] (
        [GroupName],
        [ShowInWinF],
        [OrdinalOnScreen],
        [TABLE_NAME],
        [TABLE_TYPE],
        [COLUMN_NAME],
        [DATA_TYPE],
        [CHARACTER_MAXIMUM_LENGTH],
        [NUMERIC_PRECISION],
        [COLUMN_DEFAULT],
        [IS_NULLABLE],
        [ORDINALINDATABASE],
        [UseForCustomWinFormProject],
        [DtoForWebAPI]
    )
    VALUES (
        @GroupName,
        @ShowInWinF,
        @OrdinalOnScreen,
        @TABLE_NAME,
        @TABLE_TYPE,
        @COLUMN_NAME,
        @DATA_TYPE,
        @CHARACTER_MAXIMUM_LENGTH,
        @NUMERIC_PRECISION,
        @COLUMN_DEFAULT,
        @IS_NULLABLE,
        @ORDINALINDATABASE,
        @UseForCustomWinFormProject,
        @DtoForWebAPI
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateTableFields]
    @ID bigint,
    @GroupName nvarchar(100) = NULL,
    @ShowInWinF bit = NULL,
    @OrdinalOnScreen int = NULL,
    @TABLE_NAME SYSNAME,
    @TABLE_TYPE varchar(10) = NULL,
    @COLUMN_NAME SYSNAME = NULL,
    @DATA_TYPE nvarchar(256) = NULL,
    @CHARACTER_MAXIMUM_LENGTH int = NULL,
    @NUMERIC_PRECISION tinyint = NULL,
    @COLUMN_DEFAULT nvarchar(2000) = NULL,
    @IS_NULLABLE varchar(3) = NULL,
    @ORDINALINDATABASE int = NULL,
    @UseForCustomWinFormProject bit = NULL,
    @DtoForWebAPI varchar(50) = NULL
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [c_TableFields]
    SET
        [GroupName] = @GroupName,
        [ShowInWinF] = @ShowInWinF,
        [OrdinalOnScreen] = @OrdinalOnScreen,
        [TABLE_NAME] = @TABLE_NAME,
        [TABLE_TYPE] = @TABLE_TYPE,
        [COLUMN_NAME] = @COLUMN_NAME,
        [DATA_TYPE] = @DATA_TYPE,
        [CHARACTER_MAXIMUM_LENGTH] = @CHARACTER_MAXIMUM_LENGTH,
        [NUMERIC_PRECISION] = @NUMERIC_PRECISION,
        [COLUMN_DEFAULT] = @COLUMN_DEFAULT,
        [IS_NULLABLE] = @IS_NULLABLE,
        [ORDINALINDATABASE] = @ORDINALINDATABASE,
        [UseForCustomWinFormProject] = @UseForCustomWinFormProject,
        [DtoForWebAPI] = @DtoForWebAPI
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteTableFields]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [c_TableFields]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_cTableFields_TABLENAME_COLUMNNAME
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetTableFieldsByTABLENAMEAndCOLUMNNAME]
    @TABLE_NAME SYSNAME,
    @COLUMN_NAME SYSNAME
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [GroupName],
        [ShowInWinF],
        [OrdinalOnScreen],
        [TABLE_NAME],
        [TABLE_TYPE],
        [COLUMN_NAME],
        [DATA_TYPE],
        [CHARACTER_MAXIMUM_LENGTH],
        [NUMERIC_PRECISION],
        [COLUMN_DEFAULT],
        [IS_NULLABLE],
        [ORDINALINDATABASE],
        [UseForCustomWinFormProject],
        [DtoForWebAPI]
    FROM [c_TableFields]
    WHERE [TABLE_NAME] = @TABLE_NAME AND [COLUMN_NAME] = @COLUMN_NAME
;
END

GO


-- =========================================
-- Stored Procedures for Table: c_TableSize
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllTableSizes]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [TableName],
        [NumberOfRows],
        [ReservedSizeKb],
        [DataSizeKb],
        [IndexSizeKb],
        [UnusedSizeKb]
    FROM [c_TableSize]
;
END

GO



-- =========================================
-- Stored Procedures for Table: c_User
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllUsers]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_c_User],
            t.[ID],
            t.[UserName],
            t.[LastName],
            t.[FirstName],
            t.[clc_FullName],
            t.[NationalIDNo],
            t.[Address],
            t.[City],
            t.[ProvinceState],
            t.[PostalCode],
            t.[Country],
            t.[PhoneNumber],
            t.[Email],
            t.[enoPassword],
            t.[DatePasswordChanged],
            t.[enmType_UserIdentityType],
            t.[IDinType],
            t.[RequiresComputerIdentification],
            t.[EnableSimultaneousLogins],
            t.[clc_DateActivated],
            t.[IsDisabled],
            t.[ExpiryDate],
            t.[Comments],
            t.[LastPasswords],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            t.[spl_Applications],
            t.[enmLanguage],
            t.[IsLockedOut],
            t.[RoleID],
            t.[enmAuthenticationMethod],
            t.[enmMessagingMode],
            t.[spt_LoggedInIP],
            t.[RequiresFixedIP],
            t.[enoApprovalCode],
            t.[ApprovalFunctionName],
            t.[ApprovalTime],
            t.[spt_LastSuccessfulLogin],
            t.[PasswordNeverExpires],
            t.[lkpSecurityQuestion1_SecurityQuestion],
            t.[entSecurityQuestion1Response],
            t.[lkpSecurityQuestion2_SecurityQuestion],
            t.[entSecurityQuestion2Response],
            t.[lkpSecurityQuestion3_SecurityQuestion],
            t.[entSecurityQuestion3Response],
            t.[entPIN],
            p1.[Text] AS [RoleID_Text]
        FROM [c_User] t
        LEFT JOIN [ccvwComboList_c_Role] p1 ON t.[RoleID] = p1.[ID]
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_c_User],
            [ID],
            [UserName],
            [LastName],
            [FirstName],
            [clc_FullName],
            [NationalIDNo],
            [Address],
            [City],
            [ProvinceState],
            [PostalCode],
            [Country],
            [PhoneNumber],
            [Email],
            [enoPassword],
            [DatePasswordChanged],
            [enmType_UserIdentityType],
            [IDinType],
            [RequiresComputerIdentification],
            [EnableSimultaneousLogins],
            [clc_DateActivated],
            [IsDisabled],
            [ExpiryDate],
            [Comments],
            [LastPasswords],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID],
            [spl_Applications],
            [enmLanguage],
            [IsLockedOut],
            [RoleID],
            [enmAuthenticationMethod],
            [enmMessagingMode],
            [spt_LoggedInIP],
            [RequiresFixedIP],
            [enoApprovalCode],
            [ApprovalFunctionName],
            [ApprovalTime],
            [spt_LastSuccessfulLogin],
            [PasswordNeverExpires],
            [lkpSecurityQuestion1_SecurityQuestion],
            [entSecurityQuestion1Response],
            [lkpSecurityQuestion2_SecurityQuestion],
            [entSecurityQuestion2Response],
            [lkpSecurityQuestion3_SecurityQuestion],
            [entSecurityQuestion3Response],
            [entPIN]
        FROM [c_User]
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredUsers]
    @UserName VARCHAR(50) = NULL,
    @City NVARCHAR(100) = NULL,
    @LastName NVARCHAR(100) = NULL,
    @FirstName NVARCHAR(100) = NULL,
    @spt_LastSuccessfulLogin DATETIME = NULL,
    @RoleID INT = NULL,
    @enmType_UserIdentityType VARCHAR(50) = NULL,
    @IDinType INT = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_c_User],
            t.[ID],
            t.[UserName],
            t.[LastName],
            t.[FirstName],
            t.[clc_FullName],
            t.[NationalIDNo],
            t.[Address],
            t.[City],
            t.[ProvinceState],
            t.[PostalCode],
            t.[Country],
            t.[PhoneNumber],
            t.[Email],
            t.[enoPassword],
            t.[DatePasswordChanged],
            t.[enmType_UserIdentityType],
            t.[IDinType],
            t.[RequiresComputerIdentification],
            t.[EnableSimultaneousLogins],
            t.[clc_DateActivated],
            t.[IsDisabled],
            t.[ExpiryDate],
            t.[Comments],
            t.[LastPasswords],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            t.[spl_Applications],
            t.[enmLanguage],
            t.[IsLockedOut],
            t.[RoleID],
            t.[enmAuthenticationMethod],
            t.[enmMessagingMode],
            t.[spt_LoggedInIP],
            t.[RequiresFixedIP],
            t.[enoApprovalCode],
            t.[ApprovalFunctionName],
            t.[ApprovalTime],
            t.[spt_LastSuccessfulLogin],
            t.[PasswordNeverExpires],
            t.[lkpSecurityQuestion1_SecurityQuestion],
            t.[entSecurityQuestion1Response],
            t.[lkpSecurityQuestion2_SecurityQuestion],
            t.[entSecurityQuestion2Response],
            t.[lkpSecurityQuestion3_SecurityQuestion],
            t.[entSecurityQuestion3Response],
            t.[entPIN],
            p1.[Text] AS [RoleID_Text]
        FROM [c_User] t
        LEFT JOIN [ccvwComboList_c_Role] p1 ON t.[RoleID] = p1.[ID]
        WHERE 1=1
          AND (@UserName IS NULL OR t.[UserName] LIKE '%' + @UserName + '%')
          AND (@City IS NULL OR t.[City] LIKE '%' + @City + '%')
          AND (@LastName IS NULL OR t.[LastName] LIKE '%' + @LastName + '%')
          AND (@FirstName IS NULL OR t.[FirstName] LIKE '%' + @FirstName + '%')
          AND (@spt_LastSuccessfulLogin IS NULL OR t.[spt_LastSuccessfulLogin] = @spt_LastSuccessfulLogin)
          AND (@RoleID IS NULL OR t.[RoleID] = @RoleID)
          AND (@enmType_UserIdentityType IS NULL OR t.[enmType_UserIdentityType] LIKE '%' + @enmType_UserIdentityType + '%')
          AND (@IDinType IS NULL OR t.[IDinType] = @IDinType)
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_c_User],
            [ID],
            [UserName],
            [LastName],
            [FirstName],
            [clc_FullName],
            [NationalIDNo],
            [Address],
            [City],
            [ProvinceState],
            [PostalCode],
            [Country],
            [PhoneNumber],
            [Email],
            [enoPassword],
            [DatePasswordChanged],
            [enmType_UserIdentityType],
            [IDinType],
            [RequiresComputerIdentification],
            [EnableSimultaneousLogins],
            [clc_DateActivated],
            [IsDisabled],
            [ExpiryDate],
            [Comments],
            [LastPasswords],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID],
            [spl_Applications],
            [enmLanguage],
            [IsLockedOut],
            [RoleID],
            [enmAuthenticationMethod],
            [enmMessagingMode],
            [spt_LoggedInIP],
            [RequiresFixedIP],
            [enoApprovalCode],
            [ApprovalFunctionName],
            [ApprovalTime],
            [spt_LastSuccessfulLogin],
            [PasswordNeverExpires],
            [lkpSecurityQuestion1_SecurityQuestion],
            [entSecurityQuestion1Response],
            [lkpSecurityQuestion2_SecurityQuestion],
            [entSecurityQuestion2Response],
            [lkpSecurityQuestion3_SecurityQuestion],
            [entSecurityQuestion3Response],
            [entPIN]
        FROM [c_User]
        WHERE 1=1
          AND (@UserName IS NULL OR [UserName] LIKE '%' + @UserName + '%')
          AND (@City IS NULL OR [City] LIKE '%' + @City + '%')
          AND (@LastName IS NULL OR [LastName] LIKE '%' + @LastName + '%')
          AND (@FirstName IS NULL OR [FirstName] LIKE '%' + @FirstName + '%')
          AND (@spt_LastSuccessfulLogin IS NULL OR [spt_LastSuccessfulLogin] = @spt_LastSuccessfulLogin)
          AND (@RoleID IS NULL OR [RoleID] = @RoleID)
          AND (@enmType_UserIdentityType IS NULL OR [enmType_UserIdentityType] LIKE '%' + @enmType_UserIdentityType + '%')
          AND (@IDinType IS NULL OR [IDinType] = @IDinType)
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetUserByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_User],
        [ID],
        [UserName],
        [LastName],
        [FirstName],
        [clc_FullName],
        [NationalIDNo],
        [Address],
        [City],
        [ProvinceState],
        [PostalCode],
        [Country],
        [PhoneNumber],
        [Email],
        [enoPassword],
        [DatePasswordChanged],
        [enmType_UserIdentityType],
        [IDinType],
        [RequiresComputerIdentification],
        [EnableSimultaneousLogins],
        [clc_DateActivated],
        [IsDisabled],
        [ExpiryDate],
        [Comments],
        [LastPasswords],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spl_Applications],
        [enmLanguage],
        [IsLockedOut],
        [RoleID],
        [enmAuthenticationMethod],
        [enmMessagingMode],
        [spt_LoggedInIP],
        [RequiresFixedIP],
        [enoApprovalCode],
        [ApprovalFunctionName],
        [ApprovalTime],
        [spt_LastSuccessfulLogin],
        [PasswordNeverExpires],
        [lkpSecurityQuestion1_SecurityQuestion],
        [entSecurityQuestion1Response],
        [lkpSecurityQuestion2_SecurityQuestion],
        [entSecurityQuestion2Response],
        [lkpSecurityQuestion3_SecurityQuestion],
        [entSecurityQuestion3Response],
        [entPIN]
    FROM [c_User]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddUser]
    @TableName_c_User bit,
    @UserName varchar(50) = NULL,
    @LastName nvarchar(100) = NULL,
    @FirstName nvarchar(100) = NULL,
    @NationalIDNo nvarchar(100) = NULL,
    @Address nvarchar(500) = NULL,
    @City nvarchar(100) = NULL,
    @ProvinceState nvarchar(100) = NULL,
    @PostalCode nvarchar(100) = NULL,
    @Country nvarchar(100) = NULL,
    @PhoneNumber nvarchar(100) = NULL,
    @Email nvarchar(100) = NULL,
    @enoPassword varchar(64) = NULL,
    @DatePasswordChanged datetime = NULL,
    @enmType_UserIdentityType varchar(50) = NULL,
    @IDinType bigint = NULL,
    @RequiresComputerIdentification bit = NULL,
    @EnableSimultaneousLogins bit = NULL,
    @IsDisabled bit = NULL,
    @ExpiryDate datetime = NULL,
    @Comments nvarchar(500) = NULL,
    @LastPasswords varchar(350) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @spl_Applications varchar(1000) = NULL,
    @enmLanguage varchar(2),
    @IsLockedOut bit = NULL,
    @RoleID bigint = NULL,
    @enmAuthenticationMethod varchar(50),
    @enmMessagingMode varchar(50) = NULL,
    @spt_LoggedInIP varchar(100) = NULL,
    @RequiresFixedIP bit = NULL,
    @enoApprovalCode varchar(64) = NULL,
    @ApprovalFunctionName nvarchar(200) = NULL,
    @ApprovalTime datetimeoffset = NULL,
    @spt_LastSuccessfulLogin datetimeoffset = NULL,
    @PasswordNeverExpires bit = NULL,
    @lkpSecurityQuestion1_SecurityQuestion varchar(50) = NULL,
    @entSecurityQuestion1Response varchar(MAX) = NULL,
    @lkpSecurityQuestion2_SecurityQuestion varchar(50) = NULL,
    @entSecurityQuestion2Response varchar(MAX) = NULL,
    @lkpSecurityQuestion3_SecurityQuestion varchar(50) = NULL,
    @entSecurityQuestion3Response varchar(MAX) = NULL,
    @entPIN varchar(MAX) = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [c_User] (
        [TableName_c_User],
        [UserName],
        [LastName],
        [FirstName],
        [NationalIDNo],
        [Address],
        [City],
        [ProvinceState],
        [PostalCode],
        [Country],
        [PhoneNumber],
        [Email],
        [enoPassword],
        [DatePasswordChanged],
        [enmType_UserIdentityType],
        [IDinType],
        [RequiresComputerIdentification],
        [EnableSimultaneousLogins],
        [IsDisabled],
        [ExpiryDate],
        [Comments],
        [LastPasswords],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spl_Applications],
        [enmLanguage],
        [IsLockedOut],
        [RoleID],
        [enmAuthenticationMethod],
        [enmMessagingMode],
        [spt_LoggedInIP],
        [RequiresFixedIP],
        [enoApprovalCode],
        [ApprovalFunctionName],
        [ApprovalTime],
        [spt_LastSuccessfulLogin],
        [PasswordNeverExpires],
        [lkpSecurityQuestion1_SecurityQuestion],
        [entSecurityQuestion1Response],
        [lkpSecurityQuestion2_SecurityQuestion],
        [entSecurityQuestion2Response],
        [lkpSecurityQuestion3_SecurityQuestion],
        [entSecurityQuestion3Response],
        [entPIN],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_c_User,
        @UserName,
        @LastName,
        @FirstName,
        @NationalIDNo,
        @Address,
        @City,
        @ProvinceState,
        @PostalCode,
        @Country,
        @PhoneNumber,
        @Email,
        @enoPassword,
        @DatePasswordChanged,
        @enmType_UserIdentityType,
        @IDinType,
        @RequiresComputerIdentification,
        @EnableSimultaneousLogins,
        @IsDisabled,
        @ExpiryDate,
        @Comments,
        @LastPasswords,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        @spl_Applications,
        @enmLanguage,
        @IsLockedOut,
        @RoleID,
        @enmAuthenticationMethod,
        @enmMessagingMode,
        @spt_LoggedInIP,
        @RequiresFixedIP,
        @enoApprovalCode,
        @ApprovalFunctionName,
        @ApprovalTime,
        @spt_LastSuccessfulLogin,
        @PasswordNeverExpires,
        @lkpSecurityQuestion1_SecurityQuestion,
        @entSecurityQuestion1Response,
        @lkpSecurityQuestion2_SecurityQuestion,
        @entSecurityQuestion2Response,
        @lkpSecurityQuestion3_SecurityQuestion,
        @entSecurityQuestion3Response,
        @entPIN,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateUser]
    @ID bigint,
    @TableName_c_User bit,
    @UserName varchar(50) = NULL,
    @LastName nvarchar(100) = NULL,
    @FirstName nvarchar(100) = NULL,
    @NationalIDNo nvarchar(100) = NULL,
    @Address nvarchar(500) = NULL,
    @City nvarchar(100) = NULL,
    @ProvinceState nvarchar(100) = NULL,
    @PostalCode nvarchar(100) = NULL,
    @Country nvarchar(100) = NULL,
    @PhoneNumber nvarchar(100) = NULL,
    @Email nvarchar(100) = NULL,
    @enoPassword varchar(64) = NULL,
    @DatePasswordChanged datetime = NULL,
    @enmType_UserIdentityType varchar(50) = NULL,
    @IDinType bigint = NULL,
    @RequiresComputerIdentification bit = NULL,
    @EnableSimultaneousLogins bit = NULL,
    @IsDisabled bit = NULL,
    @ExpiryDate datetime = NULL,
    @Comments nvarchar(500) = NULL,
    @LastPasswords varchar(350) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @spl_Applications varchar(1000) = NULL,
    @enmLanguage varchar(2),
    @IsLockedOut bit = NULL,
    @RoleID bigint = NULL,
    @enmAuthenticationMethod varchar(50),
    @enmMessagingMode varchar(50) = NULL,
    @spt_LoggedInIP varchar(100) = NULL,
    @RequiresFixedIP bit = NULL,
    @enoApprovalCode varchar(64) = NULL,
    @ApprovalFunctionName nvarchar(200) = NULL,
    @ApprovalTime datetimeoffset = NULL,
    @spt_LastSuccessfulLogin datetimeoffset = NULL,
    @PasswordNeverExpires bit = NULL,
    @lkpSecurityQuestion1_SecurityQuestion varchar(50) = NULL,
    @entSecurityQuestion1Response varchar(MAX) = NULL,
    @lkpSecurityQuestion2_SecurityQuestion varchar(50) = NULL,
    @entSecurityQuestion2Response varchar(MAX) = NULL,
    @lkpSecurityQuestion3_SecurityQuestion varchar(50) = NULL,
    @entSecurityQuestion3Response varchar(MAX) = NULL,
    @entPIN varchar(MAX) = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [c_User]
    SET
        [TableName_c_User] = @TableName_c_User,
        [UserName] = @UserName,
        [LastName] = @LastName,
        [FirstName] = @FirstName,
        [NationalIDNo] = @NationalIDNo,
        [Address] = @Address,
        [City] = @City,
        [ProvinceState] = @ProvinceState,
        [PostalCode] = @PostalCode,
        [Country] = @Country,
        [PhoneNumber] = @PhoneNumber,
        [Email] = @Email,
        [enoPassword] = @enoPassword,
        [DatePasswordChanged] = @DatePasswordChanged,
        [enmType_UserIdentityType] = @enmType_UserIdentityType,
        [IDinType] = @IDinType,
        [RequiresComputerIdentification] = @RequiresComputerIdentification,
        [EnableSimultaneousLogins] = @EnableSimultaneousLogins,
        [IsDisabled] = @IsDisabled,
        [ExpiryDate] = @ExpiryDate,
        [Comments] = @Comments,
        [LastPasswords] = @LastPasswords,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [spl_Applications] = @spl_Applications,
        [enmLanguage] = @enmLanguage,
        [IsLockedOut] = @IsLockedOut,
        [RoleID] = @RoleID,
        [enmAuthenticationMethod] = @enmAuthenticationMethod,
        [enmMessagingMode] = @enmMessagingMode,
        [spt_LoggedInIP] = @spt_LoggedInIP,
        [RequiresFixedIP] = @RequiresFixedIP,
        [enoApprovalCode] = @enoApprovalCode,
        [ApprovalFunctionName] = @ApprovalFunctionName,
        [ApprovalTime] = @ApprovalTime,
        [spt_LastSuccessfulLogin] = @spt_LastSuccessfulLogin,
        [PasswordNeverExpires] = @PasswordNeverExpires,
        [lkpSecurityQuestion1_SecurityQuestion] = @lkpSecurityQuestion1_SecurityQuestion,
        [entSecurityQuestion1Response] = @entSecurityQuestion1Response,
        [lkpSecurityQuestion2_SecurityQuestion] = @lkpSecurityQuestion2_SecurityQuestion,
        [entSecurityQuestion2Response] = @entSecurityQuestion2Response,
        [lkpSecurityQuestion3_SecurityQuestion] = @lkpSecurityQuestion3_SecurityQuestion,
        [entSecurityQuestion3Response] = @entSecurityQuestion3Response,
        [entPIN] = @entPIN,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteUser]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [c_User]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_c_User_UserName
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetUserByUSERNAME]
    @UserName varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_User],
        [ID],
        [UserName],
        [LastName],
        [FirstName],
        [clc_FullName],
        [NationalIDNo],
        [Address],
        [City],
        [ProvinceState],
        [PostalCode],
        [Country],
        [PhoneNumber],
        [Email],
        [enoPassword],
        [DatePasswordChanged],
        [enmType_UserIdentityType],
        [IDinType],
        [RequiresComputerIdentification],
        [EnableSimultaneousLogins],
        [clc_DateActivated],
        [IsDisabled],
        [ExpiryDate],
        [Comments],
        [LastPasswords],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spl_Applications],
        [enmLanguage],
        [IsLockedOut],
        [RoleID],
        [enmAuthenticationMethod],
        [enmMessagingMode],
        [spt_LoggedInIP],
        [RequiresFixedIP],
        [enoApprovalCode],
        [ApprovalFunctionName],
        [ApprovalTime],
        [spt_LastSuccessfulLogin],
        [PasswordNeverExpires],
        [lkpSecurityQuestion1_SecurityQuestion],
        [entSecurityQuestion1Response],
        [lkpSecurityQuestion2_SecurityQuestion],
        [entSecurityQuestion2Response],
        [lkpSecurityQuestion3_SecurityQuestion],
        [entSecurityQuestion3Response],
        [entPIN]
    FROM [c_User]
    WHERE [UserName] = @UserName
;
END

GO

-- Procedure for Index: IX_c_User_AddressCity
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillUserByCITY]
    @City nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_User],
        [ID],
        [UserName],
        [LastName],
        [FirstName],
        [clc_FullName],
        [NationalIDNo],
        [Address],
        [City],
        [ProvinceState],
        [PostalCode],
        [Country],
        [PhoneNumber],
        [Email],
        [enoPassword],
        [DatePasswordChanged],
        [enmType_UserIdentityType],
        [IDinType],
        [RequiresComputerIdentification],
        [EnableSimultaneousLogins],
        [clc_DateActivated],
        [IsDisabled],
        [ExpiryDate],
        [Comments],
        [LastPasswords],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spl_Applications],
        [enmLanguage],
        [IsLockedOut],
        [RoleID],
        [enmAuthenticationMethod],
        [enmMessagingMode],
        [spt_LoggedInIP],
        [RequiresFixedIP],
        [enoApprovalCode],
        [ApprovalFunctionName],
        [ApprovalTime],
        [spt_LastSuccessfulLogin],
        [PasswordNeverExpires],
        [lkpSecurityQuestion1_SecurityQuestion],
        [entSecurityQuestion1Response],
        [lkpSecurityQuestion2_SecurityQuestion],
        [entSecurityQuestion2Response],
        [lkpSecurityQuestion3_SecurityQuestion],
        [entSecurityQuestion3Response],
        [entPIN]
    FROM [c_User]
    WHERE [City] = @City
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_c_User_LastNameAndFirstName
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillUserByLASTNAMEAndFIRSTNAME]
    @LastName nvarchar(100),
    @FirstName nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_User],
        [ID],
        [UserName],
        [LastName],
        [FirstName],
        [clc_FullName],
        [NationalIDNo],
        [Address],
        [City],
        [ProvinceState],
        [PostalCode],
        [Country],
        [PhoneNumber],
        [Email],
        [enoPassword],
        [DatePasswordChanged],
        [enmType_UserIdentityType],
        [IDinType],
        [RequiresComputerIdentification],
        [EnableSimultaneousLogins],
        [clc_DateActivated],
        [IsDisabled],
        [ExpiryDate],
        [Comments],
        [LastPasswords],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spl_Applications],
        [enmLanguage],
        [IsLockedOut],
        [RoleID],
        [enmAuthenticationMethod],
        [enmMessagingMode],
        [spt_LoggedInIP],
        [RequiresFixedIP],
        [enoApprovalCode],
        [ApprovalFunctionName],
        [ApprovalTime],
        [spt_LastSuccessfulLogin],
        [PasswordNeverExpires],
        [lkpSecurityQuestion1_SecurityQuestion],
        [entSecurityQuestion1Response],
        [lkpSecurityQuestion2_SecurityQuestion],
        [entSecurityQuestion2Response],
        [lkpSecurityQuestion3_SecurityQuestion],
        [entSecurityQuestion3Response],
        [entPIN]
    FROM [c_User]
    WHERE [LastName] = @LastName AND [FirstName] = @FirstName
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_c_User_LastSuccessfulLogin
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillUserBySPTLASTSUCCESSFULLOGIN]
    @spt_LastSuccessfulLogin datetimeoffset
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_User],
        [ID],
        [UserName],
        [LastName],
        [FirstName],
        [clc_FullName],
        [NationalIDNo],
        [Address],
        [City],
        [ProvinceState],
        [PostalCode],
        [Country],
        [PhoneNumber],
        [Email],
        [enoPassword],
        [DatePasswordChanged],
        [enmType_UserIdentityType],
        [IDinType],
        [RequiresComputerIdentification],
        [EnableSimultaneousLogins],
        [clc_DateActivated],
        [IsDisabled],
        [ExpiryDate],
        [Comments],
        [LastPasswords],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spl_Applications],
        [enmLanguage],
        [IsLockedOut],
        [RoleID],
        [enmAuthenticationMethod],
        [enmMessagingMode],
        [spt_LoggedInIP],
        [RequiresFixedIP],
        [enoApprovalCode],
        [ApprovalFunctionName],
        [ApprovalTime],
        [spt_LastSuccessfulLogin],
        [PasswordNeverExpires],
        [lkpSecurityQuestion1_SecurityQuestion],
        [entSecurityQuestion1Response],
        [lkpSecurityQuestion2_SecurityQuestion],
        [entSecurityQuestion2Response],
        [lkpSecurityQuestion3_SecurityQuestion],
        [entSecurityQuestion3Response],
        [entPIN]
    FROM [c_User]
    WHERE [spt_LastSuccessfulLogin] = @spt_LastSuccessfulLogin
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXc_User_RoleID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillUserByROLEID]
    @RoleID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_User],
        [ID],
        [UserName],
        [LastName],
        [FirstName],
        [clc_FullName],
        [NationalIDNo],
        [Address],
        [City],
        [ProvinceState],
        [PostalCode],
        [Country],
        [PhoneNumber],
        [Email],
        [enoPassword],
        [DatePasswordChanged],
        [enmType_UserIdentityType],
        [IDinType],
        [RequiresComputerIdentification],
        [EnableSimultaneousLogins],
        [clc_DateActivated],
        [IsDisabled],
        [ExpiryDate],
        [Comments],
        [LastPasswords],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spl_Applications],
        [enmLanguage],
        [IsLockedOut],
        [RoleID],
        [enmAuthenticationMethod],
        [enmMessagingMode],
        [spt_LoggedInIP],
        [RequiresFixedIP],
        [enoApprovalCode],
        [ApprovalFunctionName],
        [ApprovalTime],
        [spt_LastSuccessfulLogin],
        [PasswordNeverExpires],
        [lkpSecurityQuestion1_SecurityQuestion],
        [entSecurityQuestion1Response],
        [lkpSecurityQuestion2_SecurityQuestion],
        [entSecurityQuestion2Response],
        [lkpSecurityQuestion3_SecurityQuestion],
        [entSecurityQuestion3Response],
        [entPIN]
    FROM [c_User]
    WHERE [RoleID] = @RoleID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXc_User_Type_IDinType
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillUserByENMTYPEUSERIDENTITYTYPEAndIDINTYPE]
    @enmType_UserIdentityType varchar(50),
    @IDinType bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_User],
        [ID],
        [UserName],
        [LastName],
        [FirstName],
        [clc_FullName],
        [NationalIDNo],
        [Address],
        [City],
        [ProvinceState],
        [PostalCode],
        [Country],
        [PhoneNumber],
        [Email],
        [enoPassword],
        [DatePasswordChanged],
        [enmType_UserIdentityType],
        [IDinType],
        [RequiresComputerIdentification],
        [EnableSimultaneousLogins],
        [clc_DateActivated],
        [IsDisabled],
        [ExpiryDate],
        [Comments],
        [LastPasswords],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spl_Applications],
        [enmLanguage],
        [IsLockedOut],
        [RoleID],
        [enmAuthenticationMethod],
        [enmMessagingMode],
        [spt_LoggedInIP],
        [RequiresFixedIP],
        [enoApprovalCode],
        [ApprovalFunctionName],
        [ApprovalTime],
        [spt_LastSuccessfulLogin],
        [PasswordNeverExpires],
        [lkpSecurityQuestion1_SecurityQuestion],
        [entSecurityQuestion1Response],
        [lkpSecurityQuestion2_SecurityQuestion],
        [entSecurityQuestion2Response],
        [lkpSecurityQuestion3_SecurityQuestion],
        [entSecurityQuestion3Response],
        [entPIN]
    FROM [c_User]
    WHERE [enmType_UserIdentityType] = @enmType_UserIdentityType AND [IDinType] = @IDinType
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: c_UserLoginKey
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllUserLoginKeys]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_c_UserLoginKey],
            t.[ID],
            t.[c_UserID],
            t.[ApplicationName],
            t.[ApplicationIdentifier],
            t.[enoKey],
            t.[ExternalIPAtCreation],
            t.[CountryAtCreation],
            t.[LastAccessTime],
            t.[LoggedLoginID],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            p1.[Text] AS [c_UserID_Text]
        FROM [c_UserLoginKey] t
        LEFT JOIN [ccvwComboList_c_User] p1 ON t.[c_UserID] = p1.[ID]
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_c_UserLoginKey],
            [ID],
            [c_UserID],
            [ApplicationName],
            [ApplicationIdentifier],
            [enoKey],
            [ExternalIPAtCreation],
            [CountryAtCreation],
            [LastAccessTime],
            [LoggedLoginID],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID]
        FROM [c_UserLoginKey]
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredUserLoginKeys]
    @ApplicationName VARCHAR(50) = NULL,
    @ApplicationIdentifier VARCHAR(100) = NULL,
    @c_UserID INT = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_c_UserLoginKey],
            t.[ID],
            t.[c_UserID],
            t.[ApplicationName],
            t.[ApplicationIdentifier],
            t.[enoKey],
            t.[ExternalIPAtCreation],
            t.[CountryAtCreation],
            t.[LastAccessTime],
            t.[LoggedLoginID],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            p1.[Text] AS [c_UserID_Text]
        FROM [c_UserLoginKey] t
        LEFT JOIN [ccvwComboList_c_User] p1 ON t.[c_UserID] = p1.[ID]
        WHERE 1=1
          AND (@ApplicationName IS NULL OR t.[ApplicationName] LIKE '%' + @ApplicationName + '%')
          AND (@ApplicationIdentifier IS NULL OR t.[ApplicationIdentifier] LIKE '%' + @ApplicationIdentifier + '%')
          AND (@c_UserID IS NULL OR t.[c_UserID] = @c_UserID)
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_c_UserLoginKey],
            [ID],
            [c_UserID],
            [ApplicationName],
            [ApplicationIdentifier],
            [enoKey],
            [ExternalIPAtCreation],
            [CountryAtCreation],
            [LastAccessTime],
            [LoggedLoginID],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID]
        FROM [c_UserLoginKey]
        WHERE 1=1
          AND (@ApplicationName IS NULL OR [ApplicationName] LIKE '%' + @ApplicationName + '%')
          AND (@ApplicationIdentifier IS NULL OR [ApplicationIdentifier] LIKE '%' + @ApplicationIdentifier + '%')
          AND (@c_UserID IS NULL OR [c_UserID] = @c_UserID)
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetUserLoginKeyByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_UserLoginKey],
        [ID],
        [c_UserID],
        [ApplicationName],
        [ApplicationIdentifier],
        [enoKey],
        [ExternalIPAtCreation],
        [CountryAtCreation],
        [LastAccessTime],
        [LoggedLoginID],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [c_UserLoginKey]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddUserLoginKey]
    @TableName_c_UserLoginKey bit,
    @c_UserID bigint = NULL,
    @ApplicationName varchar(50) = NULL,
    @ApplicationIdentifier varchar(100) = NULL,
    @enoKey varchar(64) = NULL,
    @ExternalIPAtCreation varchar(100) = NULL,
    @CountryAtCreation varchar(2) = NULL,
    @LastAccessTime datetime = NULL,
    @LoggedLoginID bigint = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [c_UserLoginKey] (
        [TableName_c_UserLoginKey],
        [c_UserID],
        [ApplicationName],
        [ApplicationIdentifier],
        [enoKey],
        [ExternalIPAtCreation],
        [CountryAtCreation],
        [LastAccessTime],
        [LoggedLoginID],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_c_UserLoginKey,
        @c_UserID,
        @ApplicationName,
        @ApplicationIdentifier,
        @enoKey,
        @ExternalIPAtCreation,
        @CountryAtCreation,
        @LastAccessTime,
        @LoggedLoginID,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateUserLoginKey]
    @ID bigint,
    @TableName_c_UserLoginKey bit,
    @c_UserID bigint = NULL,
    @ApplicationName varchar(50) = NULL,
    @ApplicationIdentifier varchar(100) = NULL,
    @enoKey varchar(64) = NULL,
    @ExternalIPAtCreation varchar(100) = NULL,
    @CountryAtCreation varchar(2) = NULL,
    @LastAccessTime datetime = NULL,
    @LoggedLoginID bigint = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [c_UserLoginKey]
    SET
        [TableName_c_UserLoginKey] = @TableName_c_UserLoginKey,
        [c_UserID] = @c_UserID,
        [ApplicationName] = @ApplicationName,
        [ApplicationIdentifier] = @ApplicationIdentifier,
        [enoKey] = @enoKey,
        [ExternalIPAtCreation] = @ExternalIPAtCreation,
        [CountryAtCreation] = @CountryAtCreation,
        [LastAccessTime] = @LastAccessTime,
        [LoggedLoginID] = @LoggedLoginID,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteUserLoginKey]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [c_UserLoginKey]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_c_UserLoginKey_ApplicationName_ApplicationIdentifier
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetUserLoginKeyByAPPLICATIONNAMEAndAPPLICATIONIDENTIFIER]
    @ApplicationName varchar(50),
    @ApplicationIdentifier varchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_UserLoginKey],
        [ID],
        [c_UserID],
        [ApplicationName],
        [ApplicationIdentifier],
        [enoKey],
        [ExternalIPAtCreation],
        [CountryAtCreation],
        [LastAccessTime],
        [LoggedLoginID],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [c_UserLoginKey]
    WHERE [ApplicationName] = @ApplicationName AND [ApplicationIdentifier] = @ApplicationIdentifier
;
END

GO

-- Procedure for Index: IX_c_UserLoginKey_UserID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillUserLoginKeyByCUSERID]
    @c_UserID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_UserLoginKey],
        [ID],
        [c_UserID],
        [ApplicationName],
        [ApplicationIdentifier],
        [enoKey],
        [ExternalIPAtCreation],
        [CountryAtCreation],
        [LastAccessTime],
        [LoggedLoginID],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [c_UserLoginKey]
    WHERE [c_UserID] = @c_UserID
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: c_UserPermission
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllUserPermissions]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_c_UserPermission],
            t.[ID],
            t.[c_UserID],
            t.[ComputerIdentifier],
            t.[ApplicationName],
            t.[ComputerName],
            t.[ExternalIP],
            t.[HasPermission],
            t.[Comments],
            t.[LastAccessTime],
            t.[LoggedLoginID],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            p1.[Text] AS [c_UserID_Text]
        FROM [c_UserPermission] t
        LEFT JOIN [ccvwComboList_c_User] p1 ON t.[c_UserID] = p1.[ID]
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_c_UserPermission],
            [ID],
            [c_UserID],
            [ComputerIdentifier],
            [ApplicationName],
            [ComputerName],
            [ExternalIP],
            [HasPermission],
            [Comments],
            [LastAccessTime],
            [LoggedLoginID],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID]
        FROM [c_UserPermission]
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredUserPermissions]
    @c_UserID INT = NULL,
    @ApplicationName VARCHAR(50) = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_c_UserPermission],
            t.[ID],
            t.[c_UserID],
            t.[ComputerIdentifier],
            t.[ApplicationName],
            t.[ComputerName],
            t.[ExternalIP],
            t.[HasPermission],
            t.[Comments],
            t.[LastAccessTime],
            t.[LoggedLoginID],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            p1.[Text] AS [c_UserID_Text]
        FROM [c_UserPermission] t
        LEFT JOIN [ccvwComboList_c_User] p1 ON t.[c_UserID] = p1.[ID]
        WHERE 1=1
          AND (@c_UserID IS NULL OR t.[c_UserID] = @c_UserID)
          AND (@c_UserID IS NULL OR t.[c_UserID] = @c_UserID)
          AND (@ApplicationName IS NULL OR t.[ApplicationName] LIKE '%' + @ApplicationName + '%')
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_c_UserPermission],
            [ID],
            [c_UserID],
            [ComputerIdentifier],
            [ApplicationName],
            [ComputerName],
            [ExternalIP],
            [HasPermission],
            [Comments],
            [LastAccessTime],
            [LoggedLoginID],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID]
        FROM [c_UserPermission]
        WHERE 1=1
          AND (@c_UserID IS NULL OR [c_UserID] = @c_UserID)
          AND (@c_UserID IS NULL OR [c_UserID] = @c_UserID)
          AND (@ApplicationName IS NULL OR [ApplicationName] LIKE '%' + @ApplicationName + '%')
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetUserPermissionByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_UserPermission],
        [ID],
        [c_UserID],
        [ComputerIdentifier],
        [ApplicationName],
        [ComputerName],
        [ExternalIP],
        [HasPermission],
        [Comments],
        [LastAccessTime],
        [LoggedLoginID],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [c_UserPermission]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddUserPermission]
    @TableName_c_UserPermission bit,
    @c_UserID bigint = NULL,
    @ComputerIdentifier varchar(100) = NULL,
    @ApplicationName varchar(50) = NULL,
    @ComputerName nvarchar(100) = NULL,
    @ExternalIP varchar(100) = NULL,
    @HasPermission bit = NULL,
    @Comments nvarchar(400) = NULL,
    @LastAccessTime datetime = NULL,
    @LoggedLoginID bigint = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [c_UserPermission] (
        [TableName_c_UserPermission],
        [c_UserID],
        [ComputerIdentifier],
        [ApplicationName],
        [ComputerName],
        [ExternalIP],
        [HasPermission],
        [Comments],
        [LastAccessTime],
        [LoggedLoginID],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_c_UserPermission,
        @c_UserID,
        @ComputerIdentifier,
        @ApplicationName,
        @ComputerName,
        @ExternalIP,
        @HasPermission,
        @Comments,
        @LastAccessTime,
        @LoggedLoginID,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateUserPermission]
    @ID bigint,
    @TableName_c_UserPermission bit,
    @c_UserID bigint = NULL,
    @ComputerIdentifier varchar(100) = NULL,
    @ApplicationName varchar(50) = NULL,
    @ComputerName nvarchar(100) = NULL,
    @ExternalIP varchar(100) = NULL,
    @HasPermission bit = NULL,
    @Comments nvarchar(400) = NULL,
    @LastAccessTime datetime = NULL,
    @LoggedLoginID bigint = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [c_UserPermission]
    SET
        [TableName_c_UserPermission] = @TableName_c_UserPermission,
        [c_UserID] = @c_UserID,
        [ComputerIdentifier] = @ComputerIdentifier,
        [ApplicationName] = @ApplicationName,
        [ComputerName] = @ComputerName,
        [ExternalIP] = @ExternalIP,
        [HasPermission] = @HasPermission,
        [Comments] = @Comments,
        [LastAccessTime] = @LastAccessTime,
        [LoggedLoginID] = @LoggedLoginID,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteUserPermission]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [c_UserPermission]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_c_UserPermission_UserID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillUserPermissionByCUSERID]
    @c_UserID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_UserPermission],
        [ID],
        [c_UserID],
        [ComputerIdentifier],
        [ApplicationName],
        [ComputerName],
        [ExternalIP],
        [HasPermission],
        [Comments],
        [LastAccessTime],
        [LoggedLoginID],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [c_UserPermission]
    WHERE [c_UserID] = @c_UserID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_c_UserPermission_UserID_ApplicationName
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillUserPermissionByCUSERIDAndAPPLICATIONNAME]
    @c_UserID bigint,
    @ApplicationName varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_UserPermission],
        [ID],
        [c_UserID],
        [ComputerIdentifier],
        [ApplicationName],
        [ComputerName],
        [ExternalIP],
        [HasPermission],
        [Comments],
        [LastAccessTime],
        [LoggedLoginID],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [c_UserPermission]
    WHERE [c_UserID] = @c_UserID AND [ApplicationName] = @ApplicationName
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: c_UserStatus
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllUserStatuss]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_c_UserStatus],
            t.[ID],
            t.[c_UserID],
            t.[ApplicationName],
            t.[LastLoggedLoginID],
            t.[LoginTime],
            t.[LogoutTime],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            p1.[Text] AS [c_UserID_Text]
        FROM [c_UserStatus] t
        LEFT JOIN [ccvwComboList_c_User] p1 ON t.[c_UserID] = p1.[ID]
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_c_UserStatus],
            [ID],
            [c_UserID],
            [ApplicationName],
            [LastLoggedLoginID],
            [LoginTime],
            [LogoutTime],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID]
        FROM [c_UserStatus]
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredUserStatuss]
    @LastLoggedLoginID INT = NULL,
    @c_UserID INT = NULL,
    @ApplicationName VARCHAR(50) = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_c_UserStatus],
            t.[ID],
            t.[c_UserID],
            t.[ApplicationName],
            t.[LastLoggedLoginID],
            t.[LoginTime],
            t.[LogoutTime],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            p1.[Text] AS [c_UserID_Text]
        FROM [c_UserStatus] t
        LEFT JOIN [ccvwComboList_c_User] p1 ON t.[c_UserID] = p1.[ID]
        WHERE 1=1
          AND (@LastLoggedLoginID IS NULL OR t.[LastLoggedLoginID] = @LastLoggedLoginID)
          AND (@c_UserID IS NULL OR t.[c_UserID] = @c_UserID)
          AND (@ApplicationName IS NULL OR t.[ApplicationName] LIKE '%' + @ApplicationName + '%')
          AND (@c_UserID IS NULL OR t.[c_UserID] = @c_UserID)
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_c_UserStatus],
            [ID],
            [c_UserID],
            [ApplicationName],
            [LastLoggedLoginID],
            [LoginTime],
            [LogoutTime],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID]
        FROM [c_UserStatus]
        WHERE 1=1
          AND (@LastLoggedLoginID IS NULL OR [LastLoggedLoginID] = @LastLoggedLoginID)
          AND (@c_UserID IS NULL OR [c_UserID] = @c_UserID)
          AND (@ApplicationName IS NULL OR [ApplicationName] LIKE '%' + @ApplicationName + '%')
          AND (@c_UserID IS NULL OR [c_UserID] = @c_UserID)
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetUserStatusByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_UserStatus],
        [ID],
        [c_UserID],
        [ApplicationName],
        [LastLoggedLoginID],
        [LoginTime],
        [LogoutTime],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [c_UserStatus]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddUserStatus]
    @TableName_c_UserStatus bit,
    @c_UserID bigint = NULL,
    @ApplicationName varchar(50) = NULL,
    @LastLoggedLoginID bigint = NULL,
    @LoginTime datetime = NULL,
    @LogoutTime datetime = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [c_UserStatus] (
        [TableName_c_UserStatus],
        [c_UserID],
        [ApplicationName],
        [LastLoggedLoginID],
        [LoginTime],
        [LogoutTime],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_c_UserStatus,
        @c_UserID,
        @ApplicationName,
        @LastLoggedLoginID,
        @LoginTime,
        @LogoutTime,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateUserStatus]
    @ID bigint,
    @TableName_c_UserStatus bit,
    @c_UserID bigint = NULL,
    @ApplicationName varchar(50) = NULL,
    @LastLoggedLoginID bigint = NULL,
    @LoginTime datetime = NULL,
    @LogoutTime datetime = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [c_UserStatus]
    SET
        [TableName_c_UserStatus] = @TableName_c_UserStatus,
        [c_UserID] = @c_UserID,
        [ApplicationName] = @ApplicationName,
        [LastLoggedLoginID] = @LastLoggedLoginID,
        [LoginTime] = @LoginTime,
        [LogoutTime] = @LogoutTime,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteUserStatus]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [c_UserStatus]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_c_UserStatus_LastLoggedLoginID
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetUserStatusByLASTLOGGEDLOGINID]
    @LastLoggedLoginID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_UserStatus],
        [ID],
        [c_UserID],
        [ApplicationName],
        [LastLoggedLoginID],
        [LoginTime],
        [LogoutTime],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [c_UserStatus]
    WHERE [LastLoggedLoginID] = @LastLoggedLoginID
;
END

GO

-- Procedure for Index: IX_c_UserStatus_UserIDAndApplicationName
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetUserStatusByCUSERIDAndAPPLICATIONNAME]
    @c_UserID bigint,
    @ApplicationName varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_UserStatus],
        [ID],
        [c_UserID],
        [ApplicationName],
        [LastLoggedLoginID],
        [LoginTime],
        [LogoutTime],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [c_UserStatus]
    WHERE [c_UserID] = @c_UserID AND [ApplicationName] = @ApplicationName
;
END

GO

-- Procedure for Index: IX_c_UserStatus_UserID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillUserStatusByCUSERID]
    @c_UserID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_UserStatus],
        [ID],
        [c_UserID],
        [ApplicationName],
        [LastLoggedLoginID],
        [LoginTime],
        [LogoutTime],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [c_UserStatus]
    WHERE [c_UserID] = @c_UserID
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: Card
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllCards]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_Card],
            t.[ID],
            t.[CardClubID],
            t.[Cid],
            t.[CardLast4Numbers],
            t.[Expiry],
            t.[CustomerID],
            t.[enmCurrency],
            t.[OwningDistributorID],
            t.[CardOrderFromIssuerID],
            t.[CardOrderByDistributorID],
            t.[ActivationDate],
            t.[IsLost],
            t.[ReportedLostWhen],
            t.[LastBalance],
            t.[LastBalanceTime],
            t.[enmStatusAtCardIssuer],
            t.[agg_LoadsToday],
            t.[agg_LoadsThisMonth],
            t.[agg_AmountLoadedToday],
            t.[agg_AmountLoadedThisMonth],
            t.[enmStatusAtICP],
            t.[WhenStatusAtICPChanged],
            t.[StatusAtICPChangedBy],
            t.[spt_Comment],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            t.[PreviousDistributorID],
            t.[EmbossedText],
            t.[logCellPhone],
            t.[agg_AmountLoadedTotal],
            t.[agg_LoadsTotal],
            t.[spt_IsCashWithdrawalAllowed],
            t.[spt_LastMonthlyFeeDatePaid],
            t.[CardHolderName],
            t.[CardHolderPhoneNumberOrEmail],
            t.[CardHolderIdentifier],
            t.[spt_enmIsOnTerrorList],
            t.[scb_enmIsOnTerrorList],
            t.[spt_TerrorListUpdatedOn],
            p1.[Text] AS [CardClubID_Text],
            p2.[Text] AS [CustomerID_Text],
            p3.[Text] AS [OwningDistributorID_Text],
            p4.[Text] AS [CardOrderFromIssuerID_Text],
            p5.[Text] AS [CardOrderByDistributorID_Text],
            p6.[Text] AS [PreviousDistributorID_Text]
        FROM [Card] t
        LEFT JOIN [ccvwComboList_CardClub] p1 ON t.[CardClubID] = p1.[ID]
        LEFT JOIN [ccvwComboList_Customer] p2 ON t.[CustomerID] = p2.[ID]
        LEFT JOIN [ccvwComboList_Distributor] p3 ON t.[OwningDistributorID] = p3.[ID]
        LEFT JOIN [ccvwComboList_CardOrderFromIssuer] p4 ON t.[CardOrderFromIssuerID] = p4.[ID]
        LEFT JOIN [ccvwComboList_CardOrderByDistributor] p5 ON t.[CardOrderByDistributorID] = p5.[ID]
        LEFT JOIN [ccvwComboList_Distributor] p6 ON t.[PreviousDistributorID] = p6.[ID]
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_Card],
            [ID],
            [CardClubID],
            [Cid],
            [CardLast4Numbers],
            [Expiry],
            [CustomerID],
            [enmCurrency],
            [OwningDistributorID],
            [CardOrderFromIssuerID],
            [CardOrderByDistributorID],
            [ActivationDate],
            [IsLost],
            [ReportedLostWhen],
            [LastBalance],
            [LastBalanceTime],
            [enmStatusAtCardIssuer],
            [agg_LoadsToday],
            [agg_LoadsThisMonth],
            [agg_AmountLoadedToday],
            [agg_AmountLoadedThisMonth],
            [enmStatusAtICP],
            [WhenStatusAtICPChanged],
            [StatusAtICPChangedBy],
            [spt_Comment],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID],
            [PreviousDistributorID],
            [EmbossedText],
            [logCellPhone],
            [agg_AmountLoadedTotal],
            [agg_LoadsTotal],
            [spt_IsCashWithdrawalAllowed],
            [spt_LastMonthlyFeeDatePaid],
            [CardHolderName],
            [CardHolderPhoneNumberOrEmail],
            [CardHolderIdentifier],
            [spt_enmIsOnTerrorList],
            [scb_enmIsOnTerrorList],
            [spt_TerrorListUpdatedOn]
        FROM [Card]
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredCards]
    @Cid VARCHAR(50) = NULL,
    @CardLast4Numbers VARCHAR(4) = NULL,
    @CustomerID INT = NULL,
    @spt_enmIsOnTerrorList VARCHAR(50) = NULL,
    @CardOrderByDistributorID INT = NULL,
    @enmCurrency VARCHAR(4) = NULL,
    @CardClubID INT = NULL,
    @CardOrderFromIssuerID INT = NULL,
    @OwningDistributorID INT = NULL,
    @PreviousDistributorID INT = NULL,
    @enmStatusAtCardIssuer VARCHAR(50) = NULL,
    @enmStatusAtICP VARCHAR(50) = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_Card],
            t.[ID],
            t.[CardClubID],
            t.[Cid],
            t.[CardLast4Numbers],
            t.[Expiry],
            t.[CustomerID],
            t.[enmCurrency],
            t.[OwningDistributorID],
            t.[CardOrderFromIssuerID],
            t.[CardOrderByDistributorID],
            t.[ActivationDate],
            t.[IsLost],
            t.[ReportedLostWhen],
            t.[LastBalance],
            t.[LastBalanceTime],
            t.[enmStatusAtCardIssuer],
            t.[agg_LoadsToday],
            t.[agg_LoadsThisMonth],
            t.[agg_AmountLoadedToday],
            t.[agg_AmountLoadedThisMonth],
            t.[enmStatusAtICP],
            t.[WhenStatusAtICPChanged],
            t.[StatusAtICPChangedBy],
            t.[spt_Comment],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            t.[PreviousDistributorID],
            t.[EmbossedText],
            t.[logCellPhone],
            t.[agg_AmountLoadedTotal],
            t.[agg_LoadsTotal],
            t.[spt_IsCashWithdrawalAllowed],
            t.[spt_LastMonthlyFeeDatePaid],
            t.[CardHolderName],
            t.[CardHolderPhoneNumberOrEmail],
            t.[CardHolderIdentifier],
            t.[spt_enmIsOnTerrorList],
            t.[scb_enmIsOnTerrorList],
            t.[spt_TerrorListUpdatedOn],
            p1.[Text] AS [CardClubID_Text],
            p2.[Text] AS [CustomerID_Text],
            p3.[Text] AS [OwningDistributorID_Text],
            p4.[Text] AS [CardOrderFromIssuerID_Text],
            p5.[Text] AS [CardOrderByDistributorID_Text],
            p6.[Text] AS [PreviousDistributorID_Text]
        FROM [Card] t
        LEFT JOIN [ccvwComboList_CardClub] p1 ON t.[CardClubID] = p1.[ID]
        LEFT JOIN [ccvwComboList_Customer] p2 ON t.[CustomerID] = p2.[ID]
        LEFT JOIN [ccvwComboList_Distributor] p3 ON t.[OwningDistributorID] = p3.[ID]
        LEFT JOIN [ccvwComboList_CardOrderFromIssuer] p4 ON t.[CardOrderFromIssuerID] = p4.[ID]
        LEFT JOIN [ccvwComboList_CardOrderByDistributor] p5 ON t.[CardOrderByDistributorID] = p5.[ID]
        LEFT JOIN [ccvwComboList_Distributor] p6 ON t.[PreviousDistributorID] = p6.[ID]
        WHERE 1=1
          AND (@Cid IS NULL OR t.[Cid] LIKE '%' + @Cid + '%')
          AND (@CardLast4Numbers IS NULL OR t.[CardLast4Numbers] LIKE '%' + @CardLast4Numbers + '%')
          AND (@Cid IS NULL OR t.[Cid] LIKE '%' + @Cid + '%')
          AND (@CustomerID IS NULL OR t.[CustomerID] = @CustomerID)
          AND (@spt_enmIsOnTerrorList IS NULL OR t.[spt_enmIsOnTerrorList] LIKE '%' + @spt_enmIsOnTerrorList + '%')
          AND (@CardOrderByDistributorID IS NULL OR t.[CardOrderByDistributorID] = @CardOrderByDistributorID)
          AND (@CardOrderByDistributorID IS NULL OR t.[CardOrderByDistributorID] = @CardOrderByDistributorID)
          AND (@enmCurrency IS NULL OR t.[enmCurrency] LIKE '%' + @enmCurrency + '%')
          AND (@CardClubID IS NULL OR t.[CardClubID] = @CardClubID)
          AND (@CardOrderFromIssuerID IS NULL OR t.[CardOrderFromIssuerID] = @CardOrderFromIssuerID)
          AND (@Cid IS NULL OR t.[Cid] LIKE '%' + @Cid + '%')
          AND (@CardClubID IS NULL OR t.[CardClubID] = @CardClubID)
          AND (@CustomerID IS NULL OR t.[CustomerID] = @CustomerID)
          AND (@OwningDistributorID IS NULL OR t.[OwningDistributorID] = @OwningDistributorID)
          AND (@OwningDistributorID IS NULL OR t.[OwningDistributorID] = @OwningDistributorID)
          AND (@enmCurrency IS NULL OR t.[enmCurrency] LIKE '%' + @enmCurrency + '%')
          AND (@CustomerID IS NULL OR t.[CustomerID] = @CustomerID)
          AND (@PreviousDistributorID IS NULL OR t.[PreviousDistributorID] = @PreviousDistributorID)
          AND (@enmStatusAtCardIssuer IS NULL OR t.[enmStatusAtCardIssuer] LIKE '%' + @enmStatusAtCardIssuer + '%')
          AND (@enmStatusAtICP IS NULL OR t.[enmStatusAtICP] LIKE '%' + @enmStatusAtICP + '%')
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_Card],
            [ID],
            [CardClubID],
            [Cid],
            [CardLast4Numbers],
            [Expiry],
            [CustomerID],
            [enmCurrency],
            [OwningDistributorID],
            [CardOrderFromIssuerID],
            [CardOrderByDistributorID],
            [ActivationDate],
            [IsLost],
            [ReportedLostWhen],
            [LastBalance],
            [LastBalanceTime],
            [enmStatusAtCardIssuer],
            [agg_LoadsToday],
            [agg_LoadsThisMonth],
            [agg_AmountLoadedToday],
            [agg_AmountLoadedThisMonth],
            [enmStatusAtICP],
            [WhenStatusAtICPChanged],
            [StatusAtICPChangedBy],
            [spt_Comment],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID],
            [PreviousDistributorID],
            [EmbossedText],
            [logCellPhone],
            [agg_AmountLoadedTotal],
            [agg_LoadsTotal],
            [spt_IsCashWithdrawalAllowed],
            [spt_LastMonthlyFeeDatePaid],
            [CardHolderName],
            [CardHolderPhoneNumberOrEmail],
            [CardHolderIdentifier],
            [spt_enmIsOnTerrorList],
            [scb_enmIsOnTerrorList],
            [spt_TerrorListUpdatedOn]
        FROM [Card]
        WHERE 1=1
          AND (@Cid IS NULL OR [Cid] LIKE '%' + @Cid + '%')
          AND (@CardLast4Numbers IS NULL OR [CardLast4Numbers] LIKE '%' + @CardLast4Numbers + '%')
          AND (@Cid IS NULL OR [Cid] LIKE '%' + @Cid + '%')
          AND (@CustomerID IS NULL OR [CustomerID] = @CustomerID)
          AND (@spt_enmIsOnTerrorList IS NULL OR [spt_enmIsOnTerrorList] LIKE '%' + @spt_enmIsOnTerrorList + '%')
          AND (@CardOrderByDistributorID IS NULL OR [CardOrderByDistributorID] = @CardOrderByDistributorID)
          AND (@CardOrderByDistributorID IS NULL OR [CardOrderByDistributorID] = @CardOrderByDistributorID)
          AND (@enmCurrency IS NULL OR [enmCurrency] LIKE '%' + @enmCurrency + '%')
          AND (@CardClubID IS NULL OR [CardClubID] = @CardClubID)
          AND (@CardOrderFromIssuerID IS NULL OR [CardOrderFromIssuerID] = @CardOrderFromIssuerID)
          AND (@Cid IS NULL OR [Cid] LIKE '%' + @Cid + '%')
          AND (@CardClubID IS NULL OR [CardClubID] = @CardClubID)
          AND (@CustomerID IS NULL OR [CustomerID] = @CustomerID)
          AND (@OwningDistributorID IS NULL OR [OwningDistributorID] = @OwningDistributorID)
          AND (@OwningDistributorID IS NULL OR [OwningDistributorID] = @OwningDistributorID)
          AND (@enmCurrency IS NULL OR [enmCurrency] LIKE '%' + @enmCurrency + '%')
          AND (@CustomerID IS NULL OR [CustomerID] = @CustomerID)
          AND (@PreviousDistributorID IS NULL OR [PreviousDistributorID] = @PreviousDistributorID)
          AND (@enmStatusAtCardIssuer IS NULL OR [enmStatusAtCardIssuer] LIKE '%' + @enmStatusAtCardIssuer + '%')
          AND (@enmStatusAtICP IS NULL OR [enmStatusAtICP] LIKE '%' + @enmStatusAtICP + '%')
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetCardByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Card],
        [ID],
        [CardClubID],
        [Cid],
        [CardLast4Numbers],
        [Expiry],
        [CustomerID],
        [enmCurrency],
        [OwningDistributorID],
        [CardOrderFromIssuerID],
        [CardOrderByDistributorID],
        [ActivationDate],
        [IsLost],
        [ReportedLostWhen],
        [LastBalance],
        [LastBalanceTime],
        [enmStatusAtCardIssuer],
        [agg_LoadsToday],
        [agg_LoadsThisMonth],
        [agg_AmountLoadedToday],
        [agg_AmountLoadedThisMonth],
        [enmStatusAtICP],
        [WhenStatusAtICPChanged],
        [StatusAtICPChangedBy],
        [spt_Comment],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [PreviousDistributorID],
        [EmbossedText],
        [logCellPhone],
        [agg_AmountLoadedTotal],
        [agg_LoadsTotal],
        [spt_IsCashWithdrawalAllowed],
        [spt_LastMonthlyFeeDatePaid],
        [CardHolderName],
        [CardHolderPhoneNumberOrEmail],
        [CardHolderIdentifier],
        [spt_enmIsOnTerrorList],
        [scb_enmIsOnTerrorList],
        [spt_TerrorListUpdatedOn]
    FROM [Card]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddCard]
    @TableName_Card bit = NULL,
    @CardClubID bigint = NULL,
    @Cid varchar(50),
    @CardLast4Numbers varchar(4),
    @Expiry date,
    @CustomerID bigint = NULL,
    @enmCurrency varchar(4),
    @OwningDistributorID bigint = NULL,
    @CardOrderFromIssuerID bigint,
    @CardOrderByDistributorID bigint = NULL,
    @ActivationDate date = NULL,
    @IsLost bit = NULL,
    @ReportedLostWhen datetimeoffset = NULL,
    @LastBalance decimal(18,0) = NULL,
    @LastBalanceTime datetimeoffset = NULL,
    @enmStatusAtCardIssuer varchar(50) = NULL,
    @enmStatusAtICP varchar(50) = NULL,
    @WhenStatusAtICPChanged datetimeoffset = NULL,
    @StatusAtICPChangedBy nvarchar(100) = NULL,
    @spt_Comment nvarchar(MAX) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @PreviousDistributorID bigint = NULL,
    @EmbossedText nvarchar(100) = NULL,
    @logCellPhone varchar(50) = NULL,
    @spt_IsCashWithdrawalAllowed bit = NULL,
    @spt_LastMonthlyFeeDatePaid date = NULL,
    @CardHolderName nvarchar(100) = NULL,
    @CardHolderPhoneNumberOrEmail varchar(50) = NULL,
    @CardHolderIdentifier varchar(50) = NULL,
    @spt_enmIsOnTerrorList varchar(50) = NULL,
    @spt_TerrorListUpdatedOn date = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [Card] (
        [TableName_Card],
        [CardClubID],
        [Cid],
        [CardLast4Numbers],
        [Expiry],
        [CustomerID],
        [enmCurrency],
        [OwningDistributorID],
        [CardOrderFromIssuerID],
        [CardOrderByDistributorID],
        [ActivationDate],
        [IsLost],
        [ReportedLostWhen],
        [LastBalance],
        [LastBalanceTime],
        [enmStatusAtCardIssuer],
        [enmStatusAtICP],
        [WhenStatusAtICPChanged],
        [StatusAtICPChangedBy],
        [spt_Comment],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [PreviousDistributorID],
        [EmbossedText],
        [logCellPhone],
        [spt_IsCashWithdrawalAllowed],
        [spt_LastMonthlyFeeDatePaid],
        [CardHolderName],
        [CardHolderPhoneNumberOrEmail],
        [CardHolderIdentifier],
        [spt_enmIsOnTerrorList],
        [spt_TerrorListUpdatedOn],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_Card,
        @CardClubID,
        @Cid,
        @CardLast4Numbers,
        @Expiry,
        @CustomerID,
        @enmCurrency,
        @OwningDistributorID,
        @CardOrderFromIssuerID,
        @CardOrderByDistributorID,
        @ActivationDate,
        @IsLost,
        @ReportedLostWhen,
        @LastBalance,
        @LastBalanceTime,
        @enmStatusAtCardIssuer,
        @enmStatusAtICP,
        @WhenStatusAtICPChanged,
        @StatusAtICPChangedBy,
        @spt_Comment,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        @PreviousDistributorID,
        @EmbossedText,
        @logCellPhone,
        @spt_IsCashWithdrawalAllowed,
        @spt_LastMonthlyFeeDatePaid,
        @CardHolderName,
        @CardHolderPhoneNumberOrEmail,
        @CardHolderIdentifier,
        @spt_enmIsOnTerrorList,
        @spt_TerrorListUpdatedOn,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateCard]
    @ID bigint,
    @TableName_Card bit = NULL,
    @CardClubID bigint = NULL,
    @Cid varchar(50),
    @CardLast4Numbers varchar(4),
    @Expiry date,
    @CustomerID bigint = NULL,
    @enmCurrency varchar(4),
    @OwningDistributorID bigint = NULL,
    @CardOrderFromIssuerID bigint,
    @CardOrderByDistributorID bigint = NULL,
    @ActivationDate date = NULL,
    @IsLost bit = NULL,
    @ReportedLostWhen datetimeoffset = NULL,
    @LastBalance decimal(18,0) = NULL,
    @LastBalanceTime datetimeoffset = NULL,
    @enmStatusAtCardIssuer varchar(50) = NULL,
    @enmStatusAtICP varchar(50) = NULL,
    @WhenStatusAtICPChanged datetimeoffset = NULL,
    @StatusAtICPChangedBy nvarchar(100) = NULL,
    @spt_Comment nvarchar(MAX) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @PreviousDistributorID bigint = NULL,
    @EmbossedText nvarchar(100) = NULL,
    @logCellPhone varchar(50) = NULL,
    @spt_IsCashWithdrawalAllowed bit = NULL,
    @spt_LastMonthlyFeeDatePaid date = NULL,
    @CardHolderName nvarchar(100) = NULL,
    @CardHolderPhoneNumberOrEmail varchar(50) = NULL,
    @CardHolderIdentifier varchar(50) = NULL,
    @spt_enmIsOnTerrorList varchar(50) = NULL,
    @scb_enmIsOnTerrorList nvarchar(200) = NULL,
    @spt_TerrorListUpdatedOn date = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [Card]
    SET
        [TableName_Card] = @TableName_Card,
        [CardClubID] = @CardClubID,
        [Cid] = @Cid,
        [CardLast4Numbers] = @CardLast4Numbers,
        [Expiry] = @Expiry,
        [CustomerID] = @CustomerID,
        [enmCurrency] = @enmCurrency,
        [OwningDistributorID] = @OwningDistributorID,
        [CardOrderFromIssuerID] = @CardOrderFromIssuerID,
        [CardOrderByDistributorID] = @CardOrderByDistributorID,
        [ActivationDate] = @ActivationDate,
        [IsLost] = @IsLost,
        [ReportedLostWhen] = @ReportedLostWhen,
        [LastBalance] = @LastBalance,
        [LastBalanceTime] = @LastBalanceTime,
        [enmStatusAtCardIssuer] = @enmStatusAtCardIssuer,
        [enmStatusAtICP] = @enmStatusAtICP,
        [WhenStatusAtICPChanged] = @WhenStatusAtICPChanged,
        [StatusAtICPChangedBy] = @StatusAtICPChangedBy,
        [spt_Comment] = @spt_Comment,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [PreviousDistributorID] = @PreviousDistributorID,
        [EmbossedText] = @EmbossedText,
        [logCellPhone] = @logCellPhone,
        [spt_IsCashWithdrawalAllowed] = @spt_IsCashWithdrawalAllowed,
        [spt_LastMonthlyFeeDatePaid] = @spt_LastMonthlyFeeDatePaid,
        [CardHolderName] = @CardHolderName,
        [CardHolderPhoneNumberOrEmail] = @CardHolderPhoneNumberOrEmail,
        [CardHolderIdentifier] = @CardHolderIdentifier,
        [spt_enmIsOnTerrorList] = @spt_enmIsOnTerrorList,
        [scb_enmIsOnTerrorList] = @scb_enmIsOnTerrorList,
        [spt_TerrorListUpdatedOn] = @spt_TerrorListUpdatedOn,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteCard]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [Card]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IXCard_Cid_CardLast4Numbers
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetCardByCIDAndCARDLAST4NUMBERS]
    @Cid varchar(50),
    @CardLast4Numbers varchar(4)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Card],
        [ID],
        [CardClubID],
        [Cid],
        [CardLast4Numbers],
        [Expiry],
        [CustomerID],
        [enmCurrency],
        [OwningDistributorID],
        [CardOrderFromIssuerID],
        [CardOrderByDistributorID],
        [ActivationDate],
        [IsLost],
        [ReportedLostWhen],
        [LastBalance],
        [LastBalanceTime],
        [enmStatusAtCardIssuer],
        [agg_LoadsToday],
        [agg_LoadsThisMonth],
        [agg_AmountLoadedToday],
        [agg_AmountLoadedThisMonth],
        [enmStatusAtICP],
        [WhenStatusAtICPChanged],
        [StatusAtICPChangedBy],
        [spt_Comment],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [PreviousDistributorID],
        [EmbossedText],
        [logCellPhone],
        [agg_AmountLoadedTotal],
        [agg_LoadsTotal],
        [spt_IsCashWithdrawalAllowed],
        [spt_LastMonthlyFeeDatePaid],
        [CardHolderName],
        [CardHolderPhoneNumberOrEmail],
        [CardHolderIdentifier],
        [spt_enmIsOnTerrorList],
        [scb_enmIsOnTerrorList],
        [spt_TerrorListUpdatedOn]
    FROM [Card]
    WHERE [Cid] = @Cid AND [CardLast4Numbers] = @CardLast4Numbers
;
END

GO

-- Procedure for Index: IXCard_Cid_CustomerID
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetCardByCIDAndCUSTOMERID]
    @Cid varchar(50),
    @CustomerID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Card],
        [ID],
        [CardClubID],
        [Cid],
        [CardLast4Numbers],
        [Expiry],
        [CustomerID],
        [enmCurrency],
        [OwningDistributorID],
        [CardOrderFromIssuerID],
        [CardOrderByDistributorID],
        [ActivationDate],
        [IsLost],
        [ReportedLostWhen],
        [LastBalance],
        [LastBalanceTime],
        [enmStatusAtCardIssuer],
        [agg_LoadsToday],
        [agg_LoadsThisMonth],
        [agg_AmountLoadedToday],
        [agg_AmountLoadedThisMonth],
        [enmStatusAtICP],
        [WhenStatusAtICPChanged],
        [StatusAtICPChangedBy],
        [spt_Comment],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [PreviousDistributorID],
        [EmbossedText],
        [logCellPhone],
        [agg_AmountLoadedTotal],
        [agg_LoadsTotal],
        [spt_IsCashWithdrawalAllowed],
        [spt_LastMonthlyFeeDatePaid],
        [CardHolderName],
        [CardHolderPhoneNumberOrEmail],
        [CardHolderIdentifier],
        [spt_enmIsOnTerrorList],
        [scb_enmIsOnTerrorList],
        [spt_TerrorListUpdatedOn]
    FROM [Card]
    WHERE [Cid] = @Cid AND [CustomerID] = @CustomerID
;
END

GO

-- Procedure for Index: IX_Card_IsOnTerrorList
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillCardBySPTENMISONTERRORLIST]
    @spt_enmIsOnTerrorList varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Card],
        [ID],
        [CardClubID],
        [Cid],
        [CardLast4Numbers],
        [Expiry],
        [CustomerID],
        [enmCurrency],
        [OwningDistributorID],
        [CardOrderFromIssuerID],
        [CardOrderByDistributorID],
        [ActivationDate],
        [IsLost],
        [ReportedLostWhen],
        [LastBalance],
        [LastBalanceTime],
        [enmStatusAtCardIssuer],
        [agg_LoadsToday],
        [agg_LoadsThisMonth],
        [agg_AmountLoadedToday],
        [agg_AmountLoadedThisMonth],
        [enmStatusAtICP],
        [WhenStatusAtICPChanged],
        [StatusAtICPChangedBy],
        [spt_Comment],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [PreviousDistributorID],
        [EmbossedText],
        [logCellPhone],
        [agg_AmountLoadedTotal],
        [agg_LoadsTotal],
        [spt_IsCashWithdrawalAllowed],
        [spt_LastMonthlyFeeDatePaid],
        [CardHolderName],
        [CardHolderPhoneNumberOrEmail],
        [CardHolderIdentifier],
        [spt_enmIsOnTerrorList],
        [scb_enmIsOnTerrorList],
        [spt_TerrorListUpdatedOn]
    FROM [Card]
    WHERE [spt_enmIsOnTerrorList] = @spt_enmIsOnTerrorList
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXCard_CardOrderByDistributorID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillCardByCARDORDERBYDISTRIBUTORID]
    @CardOrderByDistributorID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Card],
        [ID],
        [CardClubID],
        [Cid],
        [CardLast4Numbers],
        [Expiry],
        [CustomerID],
        [enmCurrency],
        [OwningDistributorID],
        [CardOrderFromIssuerID],
        [CardOrderByDistributorID],
        [ActivationDate],
        [IsLost],
        [ReportedLostWhen],
        [LastBalance],
        [LastBalanceTime],
        [enmStatusAtCardIssuer],
        [agg_LoadsToday],
        [agg_LoadsThisMonth],
        [agg_AmountLoadedToday],
        [agg_AmountLoadedThisMonth],
        [enmStatusAtICP],
        [WhenStatusAtICPChanged],
        [StatusAtICPChangedBy],
        [spt_Comment],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [PreviousDistributorID],
        [EmbossedText],
        [logCellPhone],
        [agg_AmountLoadedTotal],
        [agg_LoadsTotal],
        [spt_IsCashWithdrawalAllowed],
        [spt_LastMonthlyFeeDatePaid],
        [CardHolderName],
        [CardHolderPhoneNumberOrEmail],
        [CardHolderIdentifier],
        [spt_enmIsOnTerrorList],
        [scb_enmIsOnTerrorList],
        [spt_TerrorListUpdatedOn]
    FROM [Card]
    WHERE [CardOrderByDistributorID] = @CardOrderByDistributorID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXCard_CardOrderByDistributorID_Currency_ClubID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillCardByCARDORDERBYDISTRIBUTORIDAndENMCURRENCYAndCARDCLUBID]
    @CardOrderByDistributorID bigint,
    @enmCurrency varchar(4),
    @CardClubID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Card],
        [ID],
        [CardClubID],
        [Cid],
        [CardLast4Numbers],
        [Expiry],
        [CustomerID],
        [enmCurrency],
        [OwningDistributorID],
        [CardOrderFromIssuerID],
        [CardOrderByDistributorID],
        [ActivationDate],
        [IsLost],
        [ReportedLostWhen],
        [LastBalance],
        [LastBalanceTime],
        [enmStatusAtCardIssuer],
        [agg_LoadsToday],
        [agg_LoadsThisMonth],
        [agg_AmountLoadedToday],
        [agg_AmountLoadedThisMonth],
        [enmStatusAtICP],
        [WhenStatusAtICPChanged],
        [StatusAtICPChangedBy],
        [spt_Comment],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [PreviousDistributorID],
        [EmbossedText],
        [logCellPhone],
        [agg_AmountLoadedTotal],
        [agg_LoadsTotal],
        [spt_IsCashWithdrawalAllowed],
        [spt_LastMonthlyFeeDatePaid],
        [CardHolderName],
        [CardHolderPhoneNumberOrEmail],
        [CardHolderIdentifier],
        [spt_enmIsOnTerrorList],
        [scb_enmIsOnTerrorList],
        [spt_TerrorListUpdatedOn]
    FROM [Card]
    WHERE [CardOrderByDistributorID] = @CardOrderByDistributorID AND [enmCurrency] = @enmCurrency AND [CardClubID] = @CardClubID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXCard_CardOrderFromIssuerID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillCardByCARDORDERFROMISSUERID]
    @CardOrderFromIssuerID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Card],
        [ID],
        [CardClubID],
        [Cid],
        [CardLast4Numbers],
        [Expiry],
        [CustomerID],
        [enmCurrency],
        [OwningDistributorID],
        [CardOrderFromIssuerID],
        [CardOrderByDistributorID],
        [ActivationDate],
        [IsLost],
        [ReportedLostWhen],
        [LastBalance],
        [LastBalanceTime],
        [enmStatusAtCardIssuer],
        [agg_LoadsToday],
        [agg_LoadsThisMonth],
        [agg_AmountLoadedToday],
        [agg_AmountLoadedThisMonth],
        [enmStatusAtICP],
        [WhenStatusAtICPChanged],
        [StatusAtICPChangedBy],
        [spt_Comment],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [PreviousDistributorID],
        [EmbossedText],
        [logCellPhone],
        [agg_AmountLoadedTotal],
        [agg_LoadsTotal],
        [spt_IsCashWithdrawalAllowed],
        [spt_LastMonthlyFeeDatePaid],
        [CardHolderName],
        [CardHolderPhoneNumberOrEmail],
        [CardHolderIdentifier],
        [spt_enmIsOnTerrorList],
        [scb_enmIsOnTerrorList],
        [spt_TerrorListUpdatedOn]
    FROM [Card]
    WHERE [CardOrderFromIssuerID] = @CardOrderFromIssuerID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXCard_Cid
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillCardByCID]
    @Cid varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Card],
        [ID],
        [CardClubID],
        [Cid],
        [CardLast4Numbers],
        [Expiry],
        [CustomerID],
        [enmCurrency],
        [OwningDistributorID],
        [CardOrderFromIssuerID],
        [CardOrderByDistributorID],
        [ActivationDate],
        [IsLost],
        [ReportedLostWhen],
        [LastBalance],
        [LastBalanceTime],
        [enmStatusAtCardIssuer],
        [agg_LoadsToday],
        [agg_LoadsThisMonth],
        [agg_AmountLoadedToday],
        [agg_AmountLoadedThisMonth],
        [enmStatusAtICP],
        [WhenStatusAtICPChanged],
        [StatusAtICPChangedBy],
        [spt_Comment],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [PreviousDistributorID],
        [EmbossedText],
        [logCellPhone],
        [agg_AmountLoadedTotal],
        [agg_LoadsTotal],
        [spt_IsCashWithdrawalAllowed],
        [spt_LastMonthlyFeeDatePaid],
        [CardHolderName],
        [CardHolderPhoneNumberOrEmail],
        [CardHolderIdentifier],
        [spt_enmIsOnTerrorList],
        [scb_enmIsOnTerrorList],
        [spt_TerrorListUpdatedOn]
    FROM [Card]
    WHERE [Cid] = @Cid
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXCard_ClubID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillCardByCARDCLUBID]
    @CardClubID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Card],
        [ID],
        [CardClubID],
        [Cid],
        [CardLast4Numbers],
        [Expiry],
        [CustomerID],
        [enmCurrency],
        [OwningDistributorID],
        [CardOrderFromIssuerID],
        [CardOrderByDistributorID],
        [ActivationDate],
        [IsLost],
        [ReportedLostWhen],
        [LastBalance],
        [LastBalanceTime],
        [enmStatusAtCardIssuer],
        [agg_LoadsToday],
        [agg_LoadsThisMonth],
        [agg_AmountLoadedToday],
        [agg_AmountLoadedThisMonth],
        [enmStatusAtICP],
        [WhenStatusAtICPChanged],
        [StatusAtICPChangedBy],
        [spt_Comment],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [PreviousDistributorID],
        [EmbossedText],
        [logCellPhone],
        [agg_AmountLoadedTotal],
        [agg_LoadsTotal],
        [spt_IsCashWithdrawalAllowed],
        [spt_LastMonthlyFeeDatePaid],
        [CardHolderName],
        [CardHolderPhoneNumberOrEmail],
        [CardHolderIdentifier],
        [spt_enmIsOnTerrorList],
        [scb_enmIsOnTerrorList],
        [spt_TerrorListUpdatedOn]
    FROM [Card]
    WHERE [CardClubID] = @CardClubID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXCard_CustomerID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillCardByCUSTOMERID]
    @CustomerID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Card],
        [ID],
        [CardClubID],
        [Cid],
        [CardLast4Numbers],
        [Expiry],
        [CustomerID],
        [enmCurrency],
        [OwningDistributorID],
        [CardOrderFromIssuerID],
        [CardOrderByDistributorID],
        [ActivationDate],
        [IsLost],
        [ReportedLostWhen],
        [LastBalance],
        [LastBalanceTime],
        [enmStatusAtCardIssuer],
        [agg_LoadsToday],
        [agg_LoadsThisMonth],
        [agg_AmountLoadedToday],
        [agg_AmountLoadedThisMonth],
        [enmStatusAtICP],
        [WhenStatusAtICPChanged],
        [StatusAtICPChangedBy],
        [spt_Comment],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [PreviousDistributorID],
        [EmbossedText],
        [logCellPhone],
        [agg_AmountLoadedTotal],
        [agg_LoadsTotal],
        [spt_IsCashWithdrawalAllowed],
        [spt_LastMonthlyFeeDatePaid],
        [CardHolderName],
        [CardHolderPhoneNumberOrEmail],
        [CardHolderIdentifier],
        [spt_enmIsOnTerrorList],
        [scb_enmIsOnTerrorList],
        [spt_TerrorListUpdatedOn]
    FROM [Card]
    WHERE [CustomerID] = @CustomerID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXCard_OwningDistributorID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillCardByOWNINGDISTRIBUTORID]
    @OwningDistributorID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Card],
        [ID],
        [CardClubID],
        [Cid],
        [CardLast4Numbers],
        [Expiry],
        [CustomerID],
        [enmCurrency],
        [OwningDistributorID],
        [CardOrderFromIssuerID],
        [CardOrderByDistributorID],
        [ActivationDate],
        [IsLost],
        [ReportedLostWhen],
        [LastBalance],
        [LastBalanceTime],
        [enmStatusAtCardIssuer],
        [agg_LoadsToday],
        [agg_LoadsThisMonth],
        [agg_AmountLoadedToday],
        [agg_AmountLoadedThisMonth],
        [enmStatusAtICP],
        [WhenStatusAtICPChanged],
        [StatusAtICPChangedBy],
        [spt_Comment],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [PreviousDistributorID],
        [EmbossedText],
        [logCellPhone],
        [agg_AmountLoadedTotal],
        [agg_LoadsTotal],
        [spt_IsCashWithdrawalAllowed],
        [spt_LastMonthlyFeeDatePaid],
        [CardHolderName],
        [CardHolderPhoneNumberOrEmail],
        [CardHolderIdentifier],
        [spt_enmIsOnTerrorList],
        [scb_enmIsOnTerrorList],
        [spt_TerrorListUpdatedOn]
    FROM [Card]
    WHERE [OwningDistributorID] = @OwningDistributorID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXCard_OwningDistributorID_enmCurrency_CustomerID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillCardByOWNINGDISTRIBUTORIDAndENMCURRENCYAndCUSTOMERID]
    @OwningDistributorID bigint,
    @enmCurrency varchar(4),
    @CustomerID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Card],
        [ID],
        [CardClubID],
        [Cid],
        [CardLast4Numbers],
        [Expiry],
        [CustomerID],
        [enmCurrency],
        [OwningDistributorID],
        [CardOrderFromIssuerID],
        [CardOrderByDistributorID],
        [ActivationDate],
        [IsLost],
        [ReportedLostWhen],
        [LastBalance],
        [LastBalanceTime],
        [enmStatusAtCardIssuer],
        [agg_LoadsToday],
        [agg_LoadsThisMonth],
        [agg_AmountLoadedToday],
        [agg_AmountLoadedThisMonth],
        [enmStatusAtICP],
        [WhenStatusAtICPChanged],
        [StatusAtICPChangedBy],
        [spt_Comment],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [PreviousDistributorID],
        [EmbossedText],
        [logCellPhone],
        [agg_AmountLoadedTotal],
        [agg_LoadsTotal],
        [spt_IsCashWithdrawalAllowed],
        [spt_LastMonthlyFeeDatePaid],
        [CardHolderName],
        [CardHolderPhoneNumberOrEmail],
        [CardHolderIdentifier],
        [spt_enmIsOnTerrorList],
        [scb_enmIsOnTerrorList],
        [spt_TerrorListUpdatedOn]
    FROM [Card]
    WHERE [OwningDistributorID] = @OwningDistributorID AND [enmCurrency] = @enmCurrency AND [CustomerID] = @CustomerID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXCard_PreviousDistributorID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillCardByPREVIOUSDISTRIBUTORID]
    @PreviousDistributorID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Card],
        [ID],
        [CardClubID],
        [Cid],
        [CardLast4Numbers],
        [Expiry],
        [CustomerID],
        [enmCurrency],
        [OwningDistributorID],
        [CardOrderFromIssuerID],
        [CardOrderByDistributorID],
        [ActivationDate],
        [IsLost],
        [ReportedLostWhen],
        [LastBalance],
        [LastBalanceTime],
        [enmStatusAtCardIssuer],
        [agg_LoadsToday],
        [agg_LoadsThisMonth],
        [agg_AmountLoadedToday],
        [agg_AmountLoadedThisMonth],
        [enmStatusAtICP],
        [WhenStatusAtICPChanged],
        [StatusAtICPChangedBy],
        [spt_Comment],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [PreviousDistributorID],
        [EmbossedText],
        [logCellPhone],
        [agg_AmountLoadedTotal],
        [agg_LoadsTotal],
        [spt_IsCashWithdrawalAllowed],
        [spt_LastMonthlyFeeDatePaid],
        [CardHolderName],
        [CardHolderPhoneNumberOrEmail],
        [CardHolderIdentifier],
        [spt_enmIsOnTerrorList],
        [scb_enmIsOnTerrorList],
        [spt_TerrorListUpdatedOn]
    FROM [Card]
    WHERE [PreviousDistributorID] = @PreviousDistributorID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXCard_StatusAtCardIssuer
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillCardByENMSTATUSATCARDISSUER]
    @enmStatusAtCardIssuer varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Card],
        [ID],
        [CardClubID],
        [Cid],
        [CardLast4Numbers],
        [Expiry],
        [CustomerID],
        [enmCurrency],
        [OwningDistributorID],
        [CardOrderFromIssuerID],
        [CardOrderByDistributorID],
        [ActivationDate],
        [IsLost],
        [ReportedLostWhen],
        [LastBalance],
        [LastBalanceTime],
        [enmStatusAtCardIssuer],
        [agg_LoadsToday],
        [agg_LoadsThisMonth],
        [agg_AmountLoadedToday],
        [agg_AmountLoadedThisMonth],
        [enmStatusAtICP],
        [WhenStatusAtICPChanged],
        [StatusAtICPChangedBy],
        [spt_Comment],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [PreviousDistributorID],
        [EmbossedText],
        [logCellPhone],
        [agg_AmountLoadedTotal],
        [agg_LoadsTotal],
        [spt_IsCashWithdrawalAllowed],
        [spt_LastMonthlyFeeDatePaid],
        [CardHolderName],
        [CardHolderPhoneNumberOrEmail],
        [CardHolderIdentifier],
        [spt_enmIsOnTerrorList],
        [scb_enmIsOnTerrorList],
        [spt_TerrorListUpdatedOn]
    FROM [Card]
    WHERE [enmStatusAtCardIssuer] = @enmStatusAtCardIssuer
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXCard_StatusAtICP
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillCardByENMSTATUSATICP]
    @enmStatusAtICP varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Card],
        [ID],
        [CardClubID],
        [Cid],
        [CardLast4Numbers],
        [Expiry],
        [CustomerID],
        [enmCurrency],
        [OwningDistributorID],
        [CardOrderFromIssuerID],
        [CardOrderByDistributorID],
        [ActivationDate],
        [IsLost],
        [ReportedLostWhen],
        [LastBalance],
        [LastBalanceTime],
        [enmStatusAtCardIssuer],
        [agg_LoadsToday],
        [agg_LoadsThisMonth],
        [agg_AmountLoadedToday],
        [agg_AmountLoadedThisMonth],
        [enmStatusAtICP],
        [WhenStatusAtICPChanged],
        [StatusAtICPChangedBy],
        [spt_Comment],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [PreviousDistributorID],
        [EmbossedText],
        [logCellPhone],
        [agg_AmountLoadedTotal],
        [agg_LoadsTotal],
        [spt_IsCashWithdrawalAllowed],
        [spt_LastMonthlyFeeDatePaid],
        [CardHolderName],
        [CardHolderPhoneNumberOrEmail],
        [CardHolderIdentifier],
        [spt_enmIsOnTerrorList],
        [scb_enmIsOnTerrorList],
        [spt_TerrorListUpdatedOn]
    FROM [Card]
    WHERE [enmStatusAtICP] = @enmStatusAtICP
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: CardActivation
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllCardActivations]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_CardActivation],
            t.[ID],
            t.[DistributorID],
            t.[CustomerID],
            t.[CardID],
            t.[clc_WhenInitiated],
            t.[Profession],
            t.[lkpEmploymentStatus],
            t.[Employer],
            t.[lkpCardUse],
            t.[PublicPosition],
            t.[ConnectionWithPublicPerson],
            t.[lkpAdditionalCitizenship_Country],
            t.[lkpConnectionWithIsrael],
            t.[ConnectionWithIsraelDetails],
            t.[lkpMainUseOfCard_CardUsage],
            t.[IsExpectedToReceiveDeposits],
            t.[IsExpectedToReceiveDepositsDetails],
            t.[WasPreviouslyDeniedBankService],
            t.[WitnessFirstName],
            t.[WitnessLastName],
            t.[WitnessIsraelID],
            t.[enmIDTypeForWitness_IdentificationMethod],
            t.[enmApproved_ApprovalType],
            t.[ResponseCode],
            t.[ResponseText],
            t.[LoggedAlertID],
            t.[WhenRequested],
            t.[WhenResponded],
            t.[InitialLoadID],
            t.[DocumentionLoadDate],
            t.[spt_IsDocumentationOK],
            t.[lgInterviewedByUser],
            t.[enmRequestedCurrency_Currency],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            t.[lgAddedBy],
            t.[enmCardActivationNextTask],
            t.[spt_Comment],
            t.[logCellPhone],
            t.[spt_OnHold],
            t.[WantsNameOnCard],
            t.[CardClubID],
            t.[CreatingApp],
            t.[spt_DeliveryFee],
            t.[spt_NewCardFee],
            t.[RequestedInitialLoad],
            t.[spt_EmbossFee],
            p1.[Text] AS [DistributorID_Text],
            p2.[Text] AS [CustomerID_Text],
            p3.[Text] AS [CardID_Text],
            p4.[Text] AS [InitialLoadID_Text],
            p5.[Text] AS [CardClubID_Text]
        FROM [CardActivation] t
        LEFT JOIN [ccvwComboList_Distributor] p1 ON t.[DistributorID] = p1.[ID]
        LEFT JOIN [ccvwComboList_Customer] p2 ON t.[CustomerID] = p2.[ID]
        LEFT JOIN [ccvwComboList_Card] p3 ON t.[CardID] = p3.[ID]
        LEFT JOIN [ccvwComboList_TransactionLoad] p4 ON t.[InitialLoadID] = p4.[ID]
        LEFT JOIN [ccvwComboList_CardClub] p5 ON t.[CardClubID] = p5.[ID]
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_CardActivation],
            [ID],
            [DistributorID],
            [CustomerID],
            [CardID],
            [clc_WhenInitiated],
            [Profession],
            [lkpEmploymentStatus],
            [Employer],
            [lkpCardUse],
            [PublicPosition],
            [ConnectionWithPublicPerson],
            [lkpAdditionalCitizenship_Country],
            [lkpConnectionWithIsrael],
            [ConnectionWithIsraelDetails],
            [lkpMainUseOfCard_CardUsage],
            [IsExpectedToReceiveDeposits],
            [IsExpectedToReceiveDepositsDetails],
            [WasPreviouslyDeniedBankService],
            [WitnessFirstName],
            [WitnessLastName],
            [WitnessIsraelID],
            [enmIDTypeForWitness_IdentificationMethod],
            [enmApproved_ApprovalType],
            [ResponseCode],
            [ResponseText],
            [LoggedAlertID],
            [WhenRequested],
            [WhenResponded],
            [InitialLoadID],
            [DocumentionLoadDate],
            [spt_IsDocumentationOK],
            [lgInterviewedByUser],
            [enmRequestedCurrency_Currency],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID],
            [lgAddedBy],
            [enmCardActivationNextTask],
            [spt_Comment],
            [logCellPhone],
            [spt_OnHold],
            [WantsNameOnCard],
            [CardClubID],
            [CreatingApp],
            [spt_DeliveryFee],
            [spt_NewCardFee],
            [RequestedInitialLoad],
            [spt_EmbossFee]
        FROM [CardActivation]
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredCardActivations]
    @CardID INT = NULL,
    @CardClubID INT = NULL,
    @CreatingApp VARCHAR(60) = NULL,
    @DistributorID INT = NULL,
    @clc_WhenInitiated DATETIME = NULL,
    @spt_OnHold BIT = NULL,
    @enmApproved_ApprovalType NVARCHAR(100) = NULL,
    @enmCardActivationNextTask VARCHAR(50) = NULL,
    @CustomerID INT = NULL,
    @InitialLoadID INT = NULL,
    @spt_IsDocumentationOK BIT = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_CardActivation],
            t.[ID],
            t.[DistributorID],
            t.[CustomerID],
            t.[CardID],
            t.[clc_WhenInitiated],
            t.[Profession],
            t.[lkpEmploymentStatus],
            t.[Employer],
            t.[lkpCardUse],
            t.[PublicPosition],
            t.[ConnectionWithPublicPerson],
            t.[lkpAdditionalCitizenship_Country],
            t.[lkpConnectionWithIsrael],
            t.[ConnectionWithIsraelDetails],
            t.[lkpMainUseOfCard_CardUsage],
            t.[IsExpectedToReceiveDeposits],
            t.[IsExpectedToReceiveDepositsDetails],
            t.[WasPreviouslyDeniedBankService],
            t.[WitnessFirstName],
            t.[WitnessLastName],
            t.[WitnessIsraelID],
            t.[enmIDTypeForWitness_IdentificationMethod],
            t.[enmApproved_ApprovalType],
            t.[ResponseCode],
            t.[ResponseText],
            t.[LoggedAlertID],
            t.[WhenRequested],
            t.[WhenResponded],
            t.[InitialLoadID],
            t.[DocumentionLoadDate],
            t.[spt_IsDocumentationOK],
            t.[lgInterviewedByUser],
            t.[enmRequestedCurrency_Currency],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            t.[lgAddedBy],
            t.[enmCardActivationNextTask],
            t.[spt_Comment],
            t.[logCellPhone],
            t.[spt_OnHold],
            t.[WantsNameOnCard],
            t.[CardClubID],
            t.[CreatingApp],
            t.[spt_DeliveryFee],
            t.[spt_NewCardFee],
            t.[RequestedInitialLoad],
            t.[spt_EmbossFee],
            p1.[Text] AS [DistributorID_Text],
            p2.[Text] AS [CustomerID_Text],
            p3.[Text] AS [CardID_Text],
            p4.[Text] AS [InitialLoadID_Text],
            p5.[Text] AS [CardClubID_Text]
        FROM [CardActivation] t
        LEFT JOIN [ccvwComboList_Distributor] p1 ON t.[DistributorID] = p1.[ID]
        LEFT JOIN [ccvwComboList_Customer] p2 ON t.[CustomerID] = p2.[ID]
        LEFT JOIN [ccvwComboList_Card] p3 ON t.[CardID] = p3.[ID]
        LEFT JOIN [ccvwComboList_TransactionLoad] p4 ON t.[InitialLoadID] = p4.[ID]
        LEFT JOIN [ccvwComboList_CardClub] p5 ON t.[CardClubID] = p5.[ID]
        WHERE 1=1
          AND (@CardID IS NULL OR t.[CardID] = @CardID)
          AND (@CardClubID IS NULL OR t.[CardClubID] = @CardClubID)
          AND (@CreatingApp IS NULL OR t.[CreatingApp] LIKE '%' + @CreatingApp + '%')
          AND (@DistributorID IS NULL OR t.[DistributorID] = @DistributorID)
          AND (@clc_WhenInitiated IS NULL OR t.[clc_WhenInitiated] = @clc_WhenInitiated)
          AND (@spt_OnHold IS NULL OR t.[spt_OnHold] = @spt_OnHold)
          AND (@enmApproved_ApprovalType IS NULL OR t.[enmApproved_ApprovalType] LIKE '%' + @enmApproved_ApprovalType + '%')
          AND (@enmCardActivationNextTask IS NULL OR t.[enmCardActivationNextTask] LIKE '%' + @enmCardActivationNextTask + '%')
          AND (@CustomerID IS NULL OR t.[CustomerID] = @CustomerID)
          AND (@DistributorID IS NULL OR t.[DistributorID] = @DistributorID)
          AND (@InitialLoadID IS NULL OR t.[InitialLoadID] = @InitialLoadID)
          AND (@spt_IsDocumentationOK IS NULL OR t.[spt_IsDocumentationOK] = @spt_IsDocumentationOK)
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_CardActivation],
            [ID],
            [DistributorID],
            [CustomerID],
            [CardID],
            [clc_WhenInitiated],
            [Profession],
            [lkpEmploymentStatus],
            [Employer],
            [lkpCardUse],
            [PublicPosition],
            [ConnectionWithPublicPerson],
            [lkpAdditionalCitizenship_Country],
            [lkpConnectionWithIsrael],
            [ConnectionWithIsraelDetails],
            [lkpMainUseOfCard_CardUsage],
            [IsExpectedToReceiveDeposits],
            [IsExpectedToReceiveDepositsDetails],
            [WasPreviouslyDeniedBankService],
            [WitnessFirstName],
            [WitnessLastName],
            [WitnessIsraelID],
            [enmIDTypeForWitness_IdentificationMethod],
            [enmApproved_ApprovalType],
            [ResponseCode],
            [ResponseText],
            [LoggedAlertID],
            [WhenRequested],
            [WhenResponded],
            [InitialLoadID],
            [DocumentionLoadDate],
            [spt_IsDocumentationOK],
            [lgInterviewedByUser],
            [enmRequestedCurrency_Currency],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID],
            [lgAddedBy],
            [enmCardActivationNextTask],
            [spt_Comment],
            [logCellPhone],
            [spt_OnHold],
            [WantsNameOnCard],
            [CardClubID],
            [CreatingApp],
            [spt_DeliveryFee],
            [spt_NewCardFee],
            [RequestedInitialLoad],
            [spt_EmbossFee]
        FROM [CardActivation]
        WHERE 1=1
          AND (@CardID IS NULL OR [CardID] = @CardID)
          AND (@CardClubID IS NULL OR [CardClubID] = @CardClubID)
          AND (@CreatingApp IS NULL OR [CreatingApp] LIKE '%' + @CreatingApp + '%')
          AND (@DistributorID IS NULL OR [DistributorID] = @DistributorID)
          AND (@clc_WhenInitiated IS NULL OR [clc_WhenInitiated] = @clc_WhenInitiated)
          AND (@spt_OnHold IS NULL OR [spt_OnHold] = @spt_OnHold)
          AND (@enmApproved_ApprovalType IS NULL OR [enmApproved_ApprovalType] LIKE '%' + @enmApproved_ApprovalType + '%')
          AND (@enmCardActivationNextTask IS NULL OR [enmCardActivationNextTask] LIKE '%' + @enmCardActivationNextTask + '%')
          AND (@CustomerID IS NULL OR [CustomerID] = @CustomerID)
          AND (@DistributorID IS NULL OR [DistributorID] = @DistributorID)
          AND (@InitialLoadID IS NULL OR [InitialLoadID] = @InitialLoadID)
          AND (@spt_IsDocumentationOK IS NULL OR [spt_IsDocumentationOK] = @spt_IsDocumentationOK)
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetCardActivationByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CardActivation],
        [ID],
        [DistributorID],
        [CustomerID],
        [CardID],
        [clc_WhenInitiated],
        [Profession],
        [lkpEmploymentStatus],
        [Employer],
        [lkpCardUse],
        [PublicPosition],
        [ConnectionWithPublicPerson],
        [lkpAdditionalCitizenship_Country],
        [lkpConnectionWithIsrael],
        [ConnectionWithIsraelDetails],
        [lkpMainUseOfCard_CardUsage],
        [IsExpectedToReceiveDeposits],
        [IsExpectedToReceiveDepositsDetails],
        [WasPreviouslyDeniedBankService],
        [WitnessFirstName],
        [WitnessLastName],
        [WitnessIsraelID],
        [enmIDTypeForWitness_IdentificationMethod],
        [enmApproved_ApprovalType],
        [ResponseCode],
        [ResponseText],
        [LoggedAlertID],
        [WhenRequested],
        [WhenResponded],
        [InitialLoadID],
        [DocumentionLoadDate],
        [spt_IsDocumentationOK],
        [lgInterviewedByUser],
        [enmRequestedCurrency_Currency],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [lgAddedBy],
        [enmCardActivationNextTask],
        [spt_Comment],
        [logCellPhone],
        [spt_OnHold],
        [WantsNameOnCard],
        [CardClubID],
        [CreatingApp],
        [spt_DeliveryFee],
        [spt_NewCardFee],
        [RequestedInitialLoad],
        [spt_EmbossFee]
    FROM [CardActivation]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddCardActivation]
    @TableName_CardActivation bit = NULL,
    @DistributorID bigint = NULL,
    @CustomerID bigint,
    @CardID bigint = NULL,
    @Profession nvarchar(100) = NULL,
    @lkpEmploymentStatus varchar(50) = NULL,
    @Employer nvarchar(100) = NULL,
    @lkpCardUse varchar(50) = NULL,
    @PublicPosition nvarchar(100) = NULL,
    @ConnectionWithPublicPerson nvarchar(100) = NULL,
    @lkpAdditionalCitizenship_Country nvarchar(100) = NULL,
    @lkpConnectionWithIsrael varchar(50) = NULL,
    @ConnectionWithIsraelDetails nvarchar(100) = NULL,
    @lkpMainUseOfCard_CardUsage varchar(50) = NULL,
    @IsExpectedToReceiveDeposits bit = NULL,
    @IsExpectedToReceiveDepositsDetails nvarchar(100) = NULL,
    @WasPreviouslyDeniedBankService bit = NULL,
    @WitnessFirstName nvarchar(100) = NULL,
    @WitnessLastName nvarchar(100) = NULL,
    @WitnessIsraelID nvarchar(100) = NULL,
    @enmIDTypeForWitness_IdentificationMethod varchar(50) = NULL,
    @enmApproved_ApprovalType nvarchar(100) = NULL,
    @ResponseCode nvarchar(100) = NULL,
    @ResponseText nvarchar(MAX) = NULL,
    @LoggedAlertID bigint = NULL,
    @WhenRequested datetimeoffset = NULL,
    @WhenResponded datetimeoffset = NULL,
    @InitialLoadID bigint = NULL,
    @DocumentionLoadDate datetimeoffset = NULL,
    @spt_IsDocumentationOK bit = NULL,
    @lgInterviewedByUser nvarchar(100) = NULL,
    @enmRequestedCurrency_Currency varchar(50) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @lgAddedBy nvarchar(100) = NULL,
    @enmCardActivationNextTask varchar(50) = NULL,
    @spt_Comment nvarchar(MAX) = NULL,
    @logCellPhone varchar(50) = NULL,
    @spt_OnHold bit,
    @WantsNameOnCard bit = NULL,
    @CardClubID bigint = NULL,
    @CreatingApp varchar(60) = NULL,
    @spt_DeliveryFee decimal(18,0) = NULL,
    @spt_NewCardFee decimal(18,0) = NULL,
    @RequestedInitialLoad decimal(18,0) = NULL,
    @spt_EmbossFee decimal(18,0) = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [CardActivation] (
        [TableName_CardActivation],
        [DistributorID],
        [CustomerID],
        [CardID],
        [Profession],
        [lkpEmploymentStatus],
        [Employer],
        [lkpCardUse],
        [PublicPosition],
        [ConnectionWithPublicPerson],
        [lkpAdditionalCitizenship_Country],
        [lkpConnectionWithIsrael],
        [ConnectionWithIsraelDetails],
        [lkpMainUseOfCard_CardUsage],
        [IsExpectedToReceiveDeposits],
        [IsExpectedToReceiveDepositsDetails],
        [WasPreviouslyDeniedBankService],
        [WitnessFirstName],
        [WitnessLastName],
        [WitnessIsraelID],
        [enmIDTypeForWitness_IdentificationMethod],
        [enmApproved_ApprovalType],
        [ResponseCode],
        [ResponseText],
        [LoggedAlertID],
        [WhenRequested],
        [WhenResponded],
        [InitialLoadID],
        [DocumentionLoadDate],
        [spt_IsDocumentationOK],
        [lgInterviewedByUser],
        [enmRequestedCurrency_Currency],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [lgAddedBy],
        [enmCardActivationNextTask],
        [spt_Comment],
        [logCellPhone],
        [spt_OnHold],
        [WantsNameOnCard],
        [CardClubID],
        [CreatingApp],
        [spt_DeliveryFee],
        [spt_NewCardFee],
        [RequestedInitialLoad],
        [spt_EmbossFee],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_CardActivation,
        @DistributorID,
        @CustomerID,
        @CardID,
        @Profession,
        @lkpEmploymentStatus,
        @Employer,
        @lkpCardUse,
        @PublicPosition,
        @ConnectionWithPublicPerson,
        @lkpAdditionalCitizenship_Country,
        @lkpConnectionWithIsrael,
        @ConnectionWithIsraelDetails,
        @lkpMainUseOfCard_CardUsage,
        @IsExpectedToReceiveDeposits,
        @IsExpectedToReceiveDepositsDetails,
        @WasPreviouslyDeniedBankService,
        @WitnessFirstName,
        @WitnessLastName,
        @WitnessIsraelID,
        @enmIDTypeForWitness_IdentificationMethod,
        @enmApproved_ApprovalType,
        @ResponseCode,
        @ResponseText,
        @LoggedAlertID,
        @WhenRequested,
        @WhenResponded,
        @InitialLoadID,
        @DocumentionLoadDate,
        @spt_IsDocumentationOK,
        @lgInterviewedByUser,
        @enmRequestedCurrency_Currency,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        @lgAddedBy,
        @enmCardActivationNextTask,
        @spt_Comment,
        @logCellPhone,
        @spt_OnHold,
        @WantsNameOnCard,
        @CardClubID,
        @CreatingApp,
        @spt_DeliveryFee,
        @spt_NewCardFee,
        @RequestedInitialLoad,
        @spt_EmbossFee,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateCardActivation]
    @ID bigint,
    @TableName_CardActivation bit = NULL,
    @DistributorID bigint = NULL,
    @CustomerID bigint,
    @CardID bigint = NULL,
    @Profession nvarchar(100) = NULL,
    @lkpEmploymentStatus varchar(50) = NULL,
    @Employer nvarchar(100) = NULL,
    @lkpCardUse varchar(50) = NULL,
    @PublicPosition nvarchar(100) = NULL,
    @ConnectionWithPublicPerson nvarchar(100) = NULL,
    @lkpAdditionalCitizenship_Country nvarchar(100) = NULL,
    @lkpConnectionWithIsrael varchar(50) = NULL,
    @ConnectionWithIsraelDetails nvarchar(100) = NULL,
    @lkpMainUseOfCard_CardUsage varchar(50) = NULL,
    @IsExpectedToReceiveDeposits bit = NULL,
    @IsExpectedToReceiveDepositsDetails nvarchar(100) = NULL,
    @WasPreviouslyDeniedBankService bit = NULL,
    @WitnessFirstName nvarchar(100) = NULL,
    @WitnessLastName nvarchar(100) = NULL,
    @WitnessIsraelID nvarchar(100) = NULL,
    @enmIDTypeForWitness_IdentificationMethod varchar(50) = NULL,
    @enmApproved_ApprovalType nvarchar(100) = NULL,
    @ResponseCode nvarchar(100) = NULL,
    @ResponseText nvarchar(MAX) = NULL,
    @LoggedAlertID bigint = NULL,
    @WhenRequested datetimeoffset = NULL,
    @WhenResponded datetimeoffset = NULL,
    @InitialLoadID bigint = NULL,
    @DocumentionLoadDate datetimeoffset = NULL,
    @spt_IsDocumentationOK bit = NULL,
    @lgInterviewedByUser nvarchar(100) = NULL,
    @enmRequestedCurrency_Currency varchar(50) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @lgAddedBy nvarchar(100) = NULL,
    @enmCardActivationNextTask varchar(50) = NULL,
    @spt_Comment nvarchar(MAX) = NULL,
    @logCellPhone varchar(50) = NULL,
    @spt_OnHold bit,
    @WantsNameOnCard bit = NULL,
    @CardClubID bigint = NULL,
    @CreatingApp varchar(60) = NULL,
    @spt_DeliveryFee decimal(18,0) = NULL,
    @spt_NewCardFee decimal(18,0) = NULL,
    @RequestedInitialLoad decimal(18,0) = NULL,
    @spt_EmbossFee decimal(18,0) = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [CardActivation]
    SET
        [TableName_CardActivation] = @TableName_CardActivation,
        [DistributorID] = @DistributorID,
        [CustomerID] = @CustomerID,
        [CardID] = @CardID,
        [Profession] = @Profession,
        [lkpEmploymentStatus] = @lkpEmploymentStatus,
        [Employer] = @Employer,
        [lkpCardUse] = @lkpCardUse,
        [PublicPosition] = @PublicPosition,
        [ConnectionWithPublicPerson] = @ConnectionWithPublicPerson,
        [lkpAdditionalCitizenship_Country] = @lkpAdditionalCitizenship_Country,
        [lkpConnectionWithIsrael] = @lkpConnectionWithIsrael,
        [ConnectionWithIsraelDetails] = @ConnectionWithIsraelDetails,
        [lkpMainUseOfCard_CardUsage] = @lkpMainUseOfCard_CardUsage,
        [IsExpectedToReceiveDeposits] = @IsExpectedToReceiveDeposits,
        [IsExpectedToReceiveDepositsDetails] = @IsExpectedToReceiveDepositsDetails,
        [WasPreviouslyDeniedBankService] = @WasPreviouslyDeniedBankService,
        [WitnessFirstName] = @WitnessFirstName,
        [WitnessLastName] = @WitnessLastName,
        [WitnessIsraelID] = @WitnessIsraelID,
        [enmIDTypeForWitness_IdentificationMethod] = @enmIDTypeForWitness_IdentificationMethod,
        [enmApproved_ApprovalType] = @enmApproved_ApprovalType,
        [ResponseCode] = @ResponseCode,
        [ResponseText] = @ResponseText,
        [LoggedAlertID] = @LoggedAlertID,
        [WhenRequested] = @WhenRequested,
        [WhenResponded] = @WhenResponded,
        [InitialLoadID] = @InitialLoadID,
        [DocumentionLoadDate] = @DocumentionLoadDate,
        [spt_IsDocumentationOK] = @spt_IsDocumentationOK,
        [lgInterviewedByUser] = @lgInterviewedByUser,
        [enmRequestedCurrency_Currency] = @enmRequestedCurrency_Currency,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [lgAddedBy] = @lgAddedBy,
        [enmCardActivationNextTask] = @enmCardActivationNextTask,
        [spt_Comment] = @spt_Comment,
        [logCellPhone] = @logCellPhone,
        [spt_OnHold] = @spt_OnHold,
        [WantsNameOnCard] = @WantsNameOnCard,
        [CardClubID] = @CardClubID,
        [CreatingApp] = @CreatingApp,
        [spt_DeliveryFee] = @spt_DeliveryFee,
        [spt_NewCardFee] = @spt_NewCardFee,
        [RequestedInitialLoad] = @RequestedInitialLoad,
        [spt_EmbossFee] = @spt_EmbossFee,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteCardActivation]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [CardActivation]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IXCardActivation_CardID
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetCardActivationByCARDID]
    @CardID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CardActivation],
        [ID],
        [DistributorID],
        [CustomerID],
        [CardID],
        [clc_WhenInitiated],
        [Profession],
        [lkpEmploymentStatus],
        [Employer],
        [lkpCardUse],
        [PublicPosition],
        [ConnectionWithPublicPerson],
        [lkpAdditionalCitizenship_Country],
        [lkpConnectionWithIsrael],
        [ConnectionWithIsraelDetails],
        [lkpMainUseOfCard_CardUsage],
        [IsExpectedToReceiveDeposits],
        [IsExpectedToReceiveDepositsDetails],
        [WasPreviouslyDeniedBankService],
        [WitnessFirstName],
        [WitnessLastName],
        [WitnessIsraelID],
        [enmIDTypeForWitness_IdentificationMethod],
        [enmApproved_ApprovalType],
        [ResponseCode],
        [ResponseText],
        [LoggedAlertID],
        [WhenRequested],
        [WhenResponded],
        [InitialLoadID],
        [DocumentionLoadDate],
        [spt_IsDocumentationOK],
        [lgInterviewedByUser],
        [enmRequestedCurrency_Currency],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [lgAddedBy],
        [enmCardActivationNextTask],
        [spt_Comment],
        [logCellPhone],
        [spt_OnHold],
        [WantsNameOnCard],
        [CardClubID],
        [CreatingApp],
        [spt_DeliveryFee],
        [spt_NewCardFee],
        [RequestedInitialLoad],
        [spt_EmbossFee]
    FROM [CardActivation]
    WHERE [CardID] = @CardID
;
END

GO

-- Procedure for Index: IX_CardActivation_CardClubID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillCardActivationByCARDCLUBID]
    @CardClubID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CardActivation],
        [ID],
        [DistributorID],
        [CustomerID],
        [CardID],
        [clc_WhenInitiated],
        [Profession],
        [lkpEmploymentStatus],
        [Employer],
        [lkpCardUse],
        [PublicPosition],
        [ConnectionWithPublicPerson],
        [lkpAdditionalCitizenship_Country],
        [lkpConnectionWithIsrael],
        [ConnectionWithIsraelDetails],
        [lkpMainUseOfCard_CardUsage],
        [IsExpectedToReceiveDeposits],
        [IsExpectedToReceiveDepositsDetails],
        [WasPreviouslyDeniedBankService],
        [WitnessFirstName],
        [WitnessLastName],
        [WitnessIsraelID],
        [enmIDTypeForWitness_IdentificationMethod],
        [enmApproved_ApprovalType],
        [ResponseCode],
        [ResponseText],
        [LoggedAlertID],
        [WhenRequested],
        [WhenResponded],
        [InitialLoadID],
        [DocumentionLoadDate],
        [spt_IsDocumentationOK],
        [lgInterviewedByUser],
        [enmRequestedCurrency_Currency],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [lgAddedBy],
        [enmCardActivationNextTask],
        [spt_Comment],
        [logCellPhone],
        [spt_OnHold],
        [WantsNameOnCard],
        [CardClubID],
        [CreatingApp],
        [spt_DeliveryFee],
        [spt_NewCardFee],
        [RequestedInitialLoad],
        [spt_EmbossFee]
    FROM [CardActivation]
    WHERE [CardClubID] = @CardClubID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_CardActivation_CreatingApp
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillCardActivationByCREATINGAPP]
    @CreatingApp varchar(60)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CardActivation],
        [ID],
        [DistributorID],
        [CustomerID],
        [CardID],
        [clc_WhenInitiated],
        [Profession],
        [lkpEmploymentStatus],
        [Employer],
        [lkpCardUse],
        [PublicPosition],
        [ConnectionWithPublicPerson],
        [lkpAdditionalCitizenship_Country],
        [lkpConnectionWithIsrael],
        [ConnectionWithIsraelDetails],
        [lkpMainUseOfCard_CardUsage],
        [IsExpectedToReceiveDeposits],
        [IsExpectedToReceiveDepositsDetails],
        [WasPreviouslyDeniedBankService],
        [WitnessFirstName],
        [WitnessLastName],
        [WitnessIsraelID],
        [enmIDTypeForWitness_IdentificationMethod],
        [enmApproved_ApprovalType],
        [ResponseCode],
        [ResponseText],
        [LoggedAlertID],
        [WhenRequested],
        [WhenResponded],
        [InitialLoadID],
        [DocumentionLoadDate],
        [spt_IsDocumentationOK],
        [lgInterviewedByUser],
        [enmRequestedCurrency_Currency],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [lgAddedBy],
        [enmCardActivationNextTask],
        [spt_Comment],
        [logCellPhone],
        [spt_OnHold],
        [WantsNameOnCard],
        [CardClubID],
        [CreatingApp],
        [spt_DeliveryFee],
        [spt_NewCardFee],
        [RequestedInitialLoad],
        [spt_EmbossFee]
    FROM [CardActivation]
    WHERE [CreatingApp] = @CreatingApp
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_CardActivation_DistributorID_WhenInitiated
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillCardActivationByDISTRIBUTORIDAndCLCWHENINITIATED]
    @DistributorID bigint,
    @clc_WhenInitiated datetime
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CardActivation],
        [ID],
        [DistributorID],
        [CustomerID],
        [CardID],
        [clc_WhenInitiated],
        [Profession],
        [lkpEmploymentStatus],
        [Employer],
        [lkpCardUse],
        [PublicPosition],
        [ConnectionWithPublicPerson],
        [lkpAdditionalCitizenship_Country],
        [lkpConnectionWithIsrael],
        [ConnectionWithIsraelDetails],
        [lkpMainUseOfCard_CardUsage],
        [IsExpectedToReceiveDeposits],
        [IsExpectedToReceiveDepositsDetails],
        [WasPreviouslyDeniedBankService],
        [WitnessFirstName],
        [WitnessLastName],
        [WitnessIsraelID],
        [enmIDTypeForWitness_IdentificationMethod],
        [enmApproved_ApprovalType],
        [ResponseCode],
        [ResponseText],
        [LoggedAlertID],
        [WhenRequested],
        [WhenResponded],
        [InitialLoadID],
        [DocumentionLoadDate],
        [spt_IsDocumentationOK],
        [lgInterviewedByUser],
        [enmRequestedCurrency_Currency],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [lgAddedBy],
        [enmCardActivationNextTask],
        [spt_Comment],
        [logCellPhone],
        [spt_OnHold],
        [WantsNameOnCard],
        [CardClubID],
        [CreatingApp],
        [spt_DeliveryFee],
        [spt_NewCardFee],
        [RequestedInitialLoad],
        [spt_EmbossFee]
    FROM [CardActivation]
    WHERE [DistributorID] = @DistributorID AND [clc_WhenInitiated] = @clc_WhenInitiated
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_CardActivation_spt_OnHold
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillCardActivationBySPTONHOLD]
    @spt_OnHold bit
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CardActivation],
        [ID],
        [DistributorID],
        [CustomerID],
        [CardID],
        [clc_WhenInitiated],
        [Profession],
        [lkpEmploymentStatus],
        [Employer],
        [lkpCardUse],
        [PublicPosition],
        [ConnectionWithPublicPerson],
        [lkpAdditionalCitizenship_Country],
        [lkpConnectionWithIsrael],
        [ConnectionWithIsraelDetails],
        [lkpMainUseOfCard_CardUsage],
        [IsExpectedToReceiveDeposits],
        [IsExpectedToReceiveDepositsDetails],
        [WasPreviouslyDeniedBankService],
        [WitnessFirstName],
        [WitnessLastName],
        [WitnessIsraelID],
        [enmIDTypeForWitness_IdentificationMethod],
        [enmApproved_ApprovalType],
        [ResponseCode],
        [ResponseText],
        [LoggedAlertID],
        [WhenRequested],
        [WhenResponded],
        [InitialLoadID],
        [DocumentionLoadDate],
        [spt_IsDocumentationOK],
        [lgInterviewedByUser],
        [enmRequestedCurrency_Currency],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [lgAddedBy],
        [enmCardActivationNextTask],
        [spt_Comment],
        [logCellPhone],
        [spt_OnHold],
        [WantsNameOnCard],
        [CardClubID],
        [CreatingApp],
        [spt_DeliveryFee],
        [spt_NewCardFee],
        [RequestedInitialLoad],
        [spt_EmbossFee]
    FROM [CardActivation]
    WHERE [spt_OnHold] = @spt_OnHold
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXCardActivation_Approved
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillCardActivationByENMAPPROVEDAPPROVALTYPE]
    @enmApproved_ApprovalType nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CardActivation],
        [ID],
        [DistributorID],
        [CustomerID],
        [CardID],
        [clc_WhenInitiated],
        [Profession],
        [lkpEmploymentStatus],
        [Employer],
        [lkpCardUse],
        [PublicPosition],
        [ConnectionWithPublicPerson],
        [lkpAdditionalCitizenship_Country],
        [lkpConnectionWithIsrael],
        [ConnectionWithIsraelDetails],
        [lkpMainUseOfCard_CardUsage],
        [IsExpectedToReceiveDeposits],
        [IsExpectedToReceiveDepositsDetails],
        [WasPreviouslyDeniedBankService],
        [WitnessFirstName],
        [WitnessLastName],
        [WitnessIsraelID],
        [enmIDTypeForWitness_IdentificationMethod],
        [enmApproved_ApprovalType],
        [ResponseCode],
        [ResponseText],
        [LoggedAlertID],
        [WhenRequested],
        [WhenResponded],
        [InitialLoadID],
        [DocumentionLoadDate],
        [spt_IsDocumentationOK],
        [lgInterviewedByUser],
        [enmRequestedCurrency_Currency],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [lgAddedBy],
        [enmCardActivationNextTask],
        [spt_Comment],
        [logCellPhone],
        [spt_OnHold],
        [WantsNameOnCard],
        [CardClubID],
        [CreatingApp],
        [spt_DeliveryFee],
        [spt_NewCardFee],
        [RequestedInitialLoad],
        [spt_EmbossFee]
    FROM [CardActivation]
    WHERE [enmApproved_ApprovalType] = @enmApproved_ApprovalType
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXCardActivation_CardActivationNextTask
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillCardActivationByENMCARDACTIVATIONNEXTTASK]
    @enmCardActivationNextTask varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CardActivation],
        [ID],
        [DistributorID],
        [CustomerID],
        [CardID],
        [clc_WhenInitiated],
        [Profession],
        [lkpEmploymentStatus],
        [Employer],
        [lkpCardUse],
        [PublicPosition],
        [ConnectionWithPublicPerson],
        [lkpAdditionalCitizenship_Country],
        [lkpConnectionWithIsrael],
        [ConnectionWithIsraelDetails],
        [lkpMainUseOfCard_CardUsage],
        [IsExpectedToReceiveDeposits],
        [IsExpectedToReceiveDepositsDetails],
        [WasPreviouslyDeniedBankService],
        [WitnessFirstName],
        [WitnessLastName],
        [WitnessIsraelID],
        [enmIDTypeForWitness_IdentificationMethod],
        [enmApproved_ApprovalType],
        [ResponseCode],
        [ResponseText],
        [LoggedAlertID],
        [WhenRequested],
        [WhenResponded],
        [InitialLoadID],
        [DocumentionLoadDate],
        [spt_IsDocumentationOK],
        [lgInterviewedByUser],
        [enmRequestedCurrency_Currency],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [lgAddedBy],
        [enmCardActivationNextTask],
        [spt_Comment],
        [logCellPhone],
        [spt_OnHold],
        [WantsNameOnCard],
        [CardClubID],
        [CreatingApp],
        [spt_DeliveryFee],
        [spt_NewCardFee],
        [RequestedInitialLoad],
        [spt_EmbossFee]
    FROM [CardActivation]
    WHERE [enmCardActivationNextTask] = @enmCardActivationNextTask
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXCardActivation_CustomerID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillCardActivationByCUSTOMERID]
    @CustomerID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CardActivation],
        [ID],
        [DistributorID],
        [CustomerID],
        [CardID],
        [clc_WhenInitiated],
        [Profession],
        [lkpEmploymentStatus],
        [Employer],
        [lkpCardUse],
        [PublicPosition],
        [ConnectionWithPublicPerson],
        [lkpAdditionalCitizenship_Country],
        [lkpConnectionWithIsrael],
        [ConnectionWithIsraelDetails],
        [lkpMainUseOfCard_CardUsage],
        [IsExpectedToReceiveDeposits],
        [IsExpectedToReceiveDepositsDetails],
        [WasPreviouslyDeniedBankService],
        [WitnessFirstName],
        [WitnessLastName],
        [WitnessIsraelID],
        [enmIDTypeForWitness_IdentificationMethod],
        [enmApproved_ApprovalType],
        [ResponseCode],
        [ResponseText],
        [LoggedAlertID],
        [WhenRequested],
        [WhenResponded],
        [InitialLoadID],
        [DocumentionLoadDate],
        [spt_IsDocumentationOK],
        [lgInterviewedByUser],
        [enmRequestedCurrency_Currency],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [lgAddedBy],
        [enmCardActivationNextTask],
        [spt_Comment],
        [logCellPhone],
        [spt_OnHold],
        [WantsNameOnCard],
        [CardClubID],
        [CreatingApp],
        [spt_DeliveryFee],
        [spt_NewCardFee],
        [RequestedInitialLoad],
        [spt_EmbossFee]
    FROM [CardActivation]
    WHERE [CustomerID] = @CustomerID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXCardActivation_DistributorID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillCardActivationByDISTRIBUTORID]
    @DistributorID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CardActivation],
        [ID],
        [DistributorID],
        [CustomerID],
        [CardID],
        [clc_WhenInitiated],
        [Profession],
        [lkpEmploymentStatus],
        [Employer],
        [lkpCardUse],
        [PublicPosition],
        [ConnectionWithPublicPerson],
        [lkpAdditionalCitizenship_Country],
        [lkpConnectionWithIsrael],
        [ConnectionWithIsraelDetails],
        [lkpMainUseOfCard_CardUsage],
        [IsExpectedToReceiveDeposits],
        [IsExpectedToReceiveDepositsDetails],
        [WasPreviouslyDeniedBankService],
        [WitnessFirstName],
        [WitnessLastName],
        [WitnessIsraelID],
        [enmIDTypeForWitness_IdentificationMethod],
        [enmApproved_ApprovalType],
        [ResponseCode],
        [ResponseText],
        [LoggedAlertID],
        [WhenRequested],
        [WhenResponded],
        [InitialLoadID],
        [DocumentionLoadDate],
        [spt_IsDocumentationOK],
        [lgInterviewedByUser],
        [enmRequestedCurrency_Currency],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [lgAddedBy],
        [enmCardActivationNextTask],
        [spt_Comment],
        [logCellPhone],
        [spt_OnHold],
        [WantsNameOnCard],
        [CardClubID],
        [CreatingApp],
        [spt_DeliveryFee],
        [spt_NewCardFee],
        [RequestedInitialLoad],
        [spt_EmbossFee]
    FROM [CardActivation]
    WHERE [DistributorID] = @DistributorID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXCardActivation_InitialLoad
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillCardActivationByINITIALLOADID]
    @InitialLoadID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CardActivation],
        [ID],
        [DistributorID],
        [CustomerID],
        [CardID],
        [clc_WhenInitiated],
        [Profession],
        [lkpEmploymentStatus],
        [Employer],
        [lkpCardUse],
        [PublicPosition],
        [ConnectionWithPublicPerson],
        [lkpAdditionalCitizenship_Country],
        [lkpConnectionWithIsrael],
        [ConnectionWithIsraelDetails],
        [lkpMainUseOfCard_CardUsage],
        [IsExpectedToReceiveDeposits],
        [IsExpectedToReceiveDepositsDetails],
        [WasPreviouslyDeniedBankService],
        [WitnessFirstName],
        [WitnessLastName],
        [WitnessIsraelID],
        [enmIDTypeForWitness_IdentificationMethod],
        [enmApproved_ApprovalType],
        [ResponseCode],
        [ResponseText],
        [LoggedAlertID],
        [WhenRequested],
        [WhenResponded],
        [InitialLoadID],
        [DocumentionLoadDate],
        [spt_IsDocumentationOK],
        [lgInterviewedByUser],
        [enmRequestedCurrency_Currency],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [lgAddedBy],
        [enmCardActivationNextTask],
        [spt_Comment],
        [logCellPhone],
        [spt_OnHold],
        [WantsNameOnCard],
        [CardClubID],
        [CreatingApp],
        [spt_DeliveryFee],
        [spt_NewCardFee],
        [RequestedInitialLoad],
        [spt_EmbossFee]
    FROM [CardActivation]
    WHERE [InitialLoadID] = @InitialLoadID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXCardActivation_IsDocumentationOK
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillCardActivationBySPTISDOCUMENTATIONOK]
    @spt_IsDocumentationOK bit
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CardActivation],
        [ID],
        [DistributorID],
        [CustomerID],
        [CardID],
        [clc_WhenInitiated],
        [Profession],
        [lkpEmploymentStatus],
        [Employer],
        [lkpCardUse],
        [PublicPosition],
        [ConnectionWithPublicPerson],
        [lkpAdditionalCitizenship_Country],
        [lkpConnectionWithIsrael],
        [ConnectionWithIsraelDetails],
        [lkpMainUseOfCard_CardUsage],
        [IsExpectedToReceiveDeposits],
        [IsExpectedToReceiveDepositsDetails],
        [WasPreviouslyDeniedBankService],
        [WitnessFirstName],
        [WitnessLastName],
        [WitnessIsraelID],
        [enmIDTypeForWitness_IdentificationMethod],
        [enmApproved_ApprovalType],
        [ResponseCode],
        [ResponseText],
        [LoggedAlertID],
        [WhenRequested],
        [WhenResponded],
        [InitialLoadID],
        [DocumentionLoadDate],
        [spt_IsDocumentationOK],
        [lgInterviewedByUser],
        [enmRequestedCurrency_Currency],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [lgAddedBy],
        [enmCardActivationNextTask],
        [spt_Comment],
        [logCellPhone],
        [spt_OnHold],
        [WantsNameOnCard],
        [CardClubID],
        [CreatingApp],
        [spt_DeliveryFee],
        [spt_NewCardFee],
        [RequestedInitialLoad],
        [spt_EmbossFee]
    FROM [CardActivation]
    WHERE [spt_IsDocumentationOK] = @spt_IsDocumentationOK
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: CardClub
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllCardClubs]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_CardClub],
            t.[ID],
            t.[ClubName],
            t.[ClubColour],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            t.[Club1Type],
            t.[Club1Number],
            t.[Club2Type],
            t.[Club2Number],
            t.[Club3Type],
            t.[Club3Number],
            t.[IsRoot],
            t.[CardIssuerOrgCode],
            t.[UseForCompanyCustomer],
            t.[AssignedCompanyCustomerID],
            t.[UseForUnassignedCustomer],
            t.[enmCardBrand],
            p1.[Text] AS [AssignedCompanyCustomerID_Text]
        FROM [CardClub] t
        LEFT JOIN [ccvwComboList_Customer] p1 ON t.[AssignedCompanyCustomerID] = p1.[ID]
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_CardClub],
            [ID],
            [ClubName],
            [ClubColour],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID],
            [Club1Type],
            [Club1Number],
            [Club2Type],
            [Club2Number],
            [Club3Type],
            [Club3Number],
            [IsRoot],
            [CardIssuerOrgCode],
            [UseForCompanyCustomer],
            [AssignedCompanyCustomerID],
            [UseForUnassignedCustomer],
            [enmCardBrand]
        FROM [CardClub]
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredCardClubs]
    @UseForUnassignedCustomer BIT = NULL,
    @ClubName NVARCHAR(100) = NULL,
    @IsRoot BIT = NULL,
    @AssignedCompanyCustomerID INT = NULL,
    @CardIssuerOrgCode VARCHAR(50) = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_CardClub],
            t.[ID],
            t.[ClubName],
            t.[ClubColour],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            t.[Club1Type],
            t.[Club1Number],
            t.[Club2Type],
            t.[Club2Number],
            t.[Club3Type],
            t.[Club3Number],
            t.[IsRoot],
            t.[CardIssuerOrgCode],
            t.[UseForCompanyCustomer],
            t.[AssignedCompanyCustomerID],
            t.[UseForUnassignedCustomer],
            t.[enmCardBrand],
            p1.[Text] AS [AssignedCompanyCustomerID_Text]
        FROM [CardClub] t
        LEFT JOIN [ccvwComboList_Customer] p1 ON t.[AssignedCompanyCustomerID] = p1.[ID]
        WHERE 1=1
          AND (@UseForUnassignedCustomer IS NULL OR t.[UseForUnassignedCustomer] = @UseForUnassignedCustomer)
          AND (@ClubName IS NULL OR t.[ClubName] LIKE '%' + @ClubName + '%')
          AND (@IsRoot IS NULL OR t.[IsRoot] = @IsRoot)
          AND (@AssignedCompanyCustomerID IS NULL OR t.[AssignedCompanyCustomerID] = @AssignedCompanyCustomerID)
          AND (@CardIssuerOrgCode IS NULL OR t.[CardIssuerOrgCode] LIKE '%' + @CardIssuerOrgCode + '%')
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_CardClub],
            [ID],
            [ClubName],
            [ClubColour],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID],
            [Club1Type],
            [Club1Number],
            [Club2Type],
            [Club2Number],
            [Club3Type],
            [Club3Number],
            [IsRoot],
            [CardIssuerOrgCode],
            [UseForCompanyCustomer],
            [AssignedCompanyCustomerID],
            [UseForUnassignedCustomer],
            [enmCardBrand]
        FROM [CardClub]
        WHERE 1=1
          AND (@UseForUnassignedCustomer IS NULL OR [UseForUnassignedCustomer] = @UseForUnassignedCustomer)
          AND (@ClubName IS NULL OR [ClubName] LIKE '%' + @ClubName + '%')
          AND (@IsRoot IS NULL OR [IsRoot] = @IsRoot)
          AND (@AssignedCompanyCustomerID IS NULL OR [AssignedCompanyCustomerID] = @AssignedCompanyCustomerID)
          AND (@CardIssuerOrgCode IS NULL OR [CardIssuerOrgCode] LIKE '%' + @CardIssuerOrgCode + '%')
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetCardClubByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CardClub],
        [ID],
        [ClubName],
        [ClubColour],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [Club1Type],
        [Club1Number],
        [Club2Type],
        [Club2Number],
        [Club3Type],
        [Club3Number],
        [IsRoot],
        [CardIssuerOrgCode],
        [UseForCompanyCustomer],
        [AssignedCompanyCustomerID],
        [UseForUnassignedCustomer],
        [enmCardBrand]
    FROM [CardClub]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddCardClub]
    @TableName_CardClub bit = NULL,
    @ClubName nvarchar(100),
    @ClubColour nvarchar(100) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @Club1Type int = NULL,
    @Club1Number nvarchar(100) = NULL,
    @Club2Type int = NULL,
    @Club2Number nvarchar(100) = NULL,
    @Club3Type int = NULL,
    @Club3Number nvarchar(100) = NULL,
    @IsRoot bit = NULL,
    @CardIssuerOrgCode varchar(50) = NULL,
    @UseForCompanyCustomer bit = NULL,
    @AssignedCompanyCustomerID bigint = NULL,
    @UseForUnassignedCustomer bit = NULL,
    @enmCardBrand varchar(50) = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [CardClub] (
        [TableName_CardClub],
        [ClubName],
        [ClubColour],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [Club1Type],
        [Club1Number],
        [Club2Type],
        [Club2Number],
        [Club3Type],
        [Club3Number],
        [IsRoot],
        [CardIssuerOrgCode],
        [UseForCompanyCustomer],
        [AssignedCompanyCustomerID],
        [UseForUnassignedCustomer],
        [enmCardBrand],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_CardClub,
        @ClubName,
        @ClubColour,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        @Club1Type,
        @Club1Number,
        @Club2Type,
        @Club2Number,
        @Club3Type,
        @Club3Number,
        @IsRoot,
        @CardIssuerOrgCode,
        @UseForCompanyCustomer,
        @AssignedCompanyCustomerID,
        @UseForUnassignedCustomer,
        @enmCardBrand,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateCardClub]
    @ID bigint,
    @TableName_CardClub bit = NULL,
    @ClubName nvarchar(100),
    @ClubColour nvarchar(100) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @Club1Type int = NULL,
    @Club1Number nvarchar(100) = NULL,
    @Club2Type int = NULL,
    @Club2Number nvarchar(100) = NULL,
    @Club3Type int = NULL,
    @Club3Number nvarchar(100) = NULL,
    @IsRoot bit = NULL,
    @CardIssuerOrgCode varchar(50) = NULL,
    @UseForCompanyCustomer bit = NULL,
    @AssignedCompanyCustomerID bigint = NULL,
    @UseForUnassignedCustomer bit = NULL,
    @enmCardBrand varchar(50) = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [CardClub]
    SET
        [TableName_CardClub] = @TableName_CardClub,
        [ClubName] = @ClubName,
        [ClubColour] = @ClubColour,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [Club1Type] = @Club1Type,
        [Club1Number] = @Club1Number,
        [Club2Type] = @Club2Type,
        [Club2Number] = @Club2Number,
        [Club3Type] = @Club3Type,
        [Club3Number] = @Club3Number,
        [IsRoot] = @IsRoot,
        [CardIssuerOrgCode] = @CardIssuerOrgCode,
        [UseForCompanyCustomer] = @UseForCompanyCustomer,
        [AssignedCompanyCustomerID] = @AssignedCompanyCustomerID,
        [UseForUnassignedCustomer] = @UseForUnassignedCustomer,
        [enmCardBrand] = @enmCardBrand,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteCardClub]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [CardClub]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_CardClub_UseForUnassignedCustomer
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetCardClubByUSEFORUNASSIGNEDCUSTOMER]
    @UseForUnassignedCustomer bit
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CardClub],
        [ID],
        [ClubName],
        [ClubColour],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [Club1Type],
        [Club1Number],
        [Club2Type],
        [Club2Number],
        [Club3Type],
        [Club3Number],
        [IsRoot],
        [CardIssuerOrgCode],
        [UseForCompanyCustomer],
        [AssignedCompanyCustomerID],
        [UseForUnassignedCustomer],
        [enmCardBrand]
    FROM [CardClub]
    WHERE [UseForUnassignedCustomer] = @UseForUnassignedCustomer
;
END

GO

-- Procedure for Index: IXCardClub_ClubName
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetCardClubByCLUBNAME]
    @ClubName nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CardClub],
        [ID],
        [ClubName],
        [ClubColour],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [Club1Type],
        [Club1Number],
        [Club2Type],
        [Club2Number],
        [Club3Type],
        [Club3Number],
        [IsRoot],
        [CardIssuerOrgCode],
        [UseForCompanyCustomer],
        [AssignedCompanyCustomerID],
        [UseForUnassignedCustomer],
        [enmCardBrand]
    FROM [CardClub]
    WHERE [ClubName] = @ClubName
;
END

GO

-- Procedure for Index: IXCardClub_IsRoot
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetCardClubByISROOT]
    @IsRoot bit
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CardClub],
        [ID],
        [ClubName],
        [ClubColour],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [Club1Type],
        [Club1Number],
        [Club2Type],
        [Club2Number],
        [Club3Type],
        [Club3Number],
        [IsRoot],
        [CardIssuerOrgCode],
        [UseForCompanyCustomer],
        [AssignedCompanyCustomerID],
        [UseForUnassignedCustomer],
        [enmCardBrand]
    FROM [CardClub]
    WHERE [IsRoot] = @IsRoot
;
END

GO

-- Procedure for Index: IX_CardClub_AssignedCompanyCustomer
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillCardClubByASSIGNEDCOMPANYCUSTOMERID]
    @AssignedCompanyCustomerID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CardClub],
        [ID],
        [ClubName],
        [ClubColour],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [Club1Type],
        [Club1Number],
        [Club2Type],
        [Club2Number],
        [Club3Type],
        [Club3Number],
        [IsRoot],
        [CardIssuerOrgCode],
        [UseForCompanyCustomer],
        [AssignedCompanyCustomerID],
        [UseForUnassignedCustomer],
        [enmCardBrand]
    FROM [CardClub]
    WHERE [AssignedCompanyCustomerID] = @AssignedCompanyCustomerID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_CardClub_CardIssuerOrgCode
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillCardClubByCARDISSUERORGCODE]
    @CardIssuerOrgCode varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CardClub],
        [ID],
        [ClubName],
        [ClubColour],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [Club1Type],
        [Club1Number],
        [Club2Type],
        [Club2Number],
        [Club3Type],
        [Club3Number],
        [IsRoot],
        [CardIssuerOrgCode],
        [UseForCompanyCustomer],
        [AssignedCompanyCustomerID],
        [UseForUnassignedCustomer],
        [enmCardBrand]
    FROM [CardClub]
    WHERE [CardIssuerOrgCode] = @CardIssuerOrgCode
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: CardIssuer
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllCardIssuers]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CardIssuer],
        [Name],
        [entVisaAccountNumberILSAtIssuer],
        [entVisaAccountNumberUSDAtIssuer],
        [entVisaAccountNumberEURAtIssuer],
        [VisaOrganizationCodeAtIssuer],
        [spt_enmVisaAccountStatusAtCardIssuerILS_AccountStatusAtCardIssuer],
        [spt_enmVisaAccountStatusAtCardIssuerUSD_AccountStatusAtCardIssuer],
        [spt_enmVisaAccountStatusAtCardIssuerEUR_AccountStatusAtCardIssuer],
        [ICPVisaBalanceAtIssuerILS],
        [ICPVisaBalanceAtIssuerILSUpdateTime],
        [ICPVisaBalanceAtIssuerUSD],
        [ICPVisaBalanceAtIssuerUSDUpdateTime],
        [ICPVisaBalanceAtIssuerEUR],
        [ICPVisaBalanceAtIssuerEURUpdateTime],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [UpdatingLoginID],
        [SAPLeumiCardVisaAccountLoadUnloadViaBankILS],
        [SAPLeumiCardVisaAccountLoadUnloadViaBankUSD],
        [SAPLeumiCardVisaAccountLoadUnloadViaBankEUR],
        [SAPICPAccountForDistributorLoadCommission],
        [SAPICPAccountForDistributorCardMonthlyCommission],
        [SAPICPAccountForLeumiCardOrderCardsFee],
        [SAPICPAccountForLeumiCardCardMonthlyFee],
        [SAPICPAccountForLeumiCardLocalATMFee],
        [SAPICPAccountForLeumiCardForeignATMFee],
        [SAPICPAccountForLeumiCardConversionFee],
        [MaximumCustomerLoadAmountIn6MonthsRunningILS],
        [entMastercardAccountNumberILSAtIssuer],
        [entMastercardAccountNumberUSDAtIssuer],
        [entMastercardAccountNumberEURAtIssuer],
        [MastercardOrganizationCodeAtIssuer],
        [spt_enmMastercardAccountStatusAtCardIssuerILS_AccountStatusAtCardIssuer],
        [spt_enmMastercardAccountStatusAtCardIssuerUSD_AccountStatusAtCardIssuer],
        [spt_enmMastercardAccountStatusAtCardIssuerEUR_AccountStatusAtCardIssuer],
        [ICPMastercardBalanceAtIssuerILS],
        [ICPMastercardBalanceAtIssuerILSUpdateTime],
        [ICPMastercardBalanceAtIssuerUSD],
        [ICPMastercardBalanceAtIssuerUSDUpdateTime],
        [ICPMastercardBalanceAtIssuerEUR],
        [ICPMastercardBalanceAtIssuerEURUpdateTime],
        [SAPLeumiCardMCAccountLoadUnloadViaBankILS],
        [SAPLeumiCardMCAccountLoadUnloadViaBankUSD],
        [SAPLeumiCardMCAccountLoadUnloadViaBankEUR]
    FROM [CardIssuer]
    ORDER BY [TableName_CardIssuer]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredCardIssuers]
    @Name NVARCHAR(100) = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CardIssuer],
        [Name],
        [entVisaAccountNumberILSAtIssuer],
        [entVisaAccountNumberUSDAtIssuer],
        [entVisaAccountNumberEURAtIssuer],
        [VisaOrganizationCodeAtIssuer],
        [spt_enmVisaAccountStatusAtCardIssuerILS_AccountStatusAtCardIssuer],
        [spt_enmVisaAccountStatusAtCardIssuerUSD_AccountStatusAtCardIssuer],
        [spt_enmVisaAccountStatusAtCardIssuerEUR_AccountStatusAtCardIssuer],
        [ICPVisaBalanceAtIssuerILS],
        [ICPVisaBalanceAtIssuerILSUpdateTime],
        [ICPVisaBalanceAtIssuerUSD],
        [ICPVisaBalanceAtIssuerUSDUpdateTime],
        [ICPVisaBalanceAtIssuerEUR],
        [ICPVisaBalanceAtIssuerEURUpdateTime],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [UpdatingLoginID],
        [SAPLeumiCardVisaAccountLoadUnloadViaBankILS],
        [SAPLeumiCardVisaAccountLoadUnloadViaBankUSD],
        [SAPLeumiCardVisaAccountLoadUnloadViaBankEUR],
        [SAPICPAccountForDistributorLoadCommission],
        [SAPICPAccountForDistributorCardMonthlyCommission],
        [SAPICPAccountForLeumiCardOrderCardsFee],
        [SAPICPAccountForLeumiCardCardMonthlyFee],
        [SAPICPAccountForLeumiCardLocalATMFee],
        [SAPICPAccountForLeumiCardForeignATMFee],
        [SAPICPAccountForLeumiCardConversionFee],
        [MaximumCustomerLoadAmountIn6MonthsRunningILS],
        [entMastercardAccountNumberILSAtIssuer],
        [entMastercardAccountNumberUSDAtIssuer],
        [entMastercardAccountNumberEURAtIssuer],
        [MastercardOrganizationCodeAtIssuer],
        [spt_enmMastercardAccountStatusAtCardIssuerILS_AccountStatusAtCardIssuer],
        [spt_enmMastercardAccountStatusAtCardIssuerUSD_AccountStatusAtCardIssuer],
        [spt_enmMastercardAccountStatusAtCardIssuerEUR_AccountStatusAtCardIssuer],
        [ICPMastercardBalanceAtIssuerILS],
        [ICPMastercardBalanceAtIssuerILSUpdateTime],
        [ICPMastercardBalanceAtIssuerUSD],
        [ICPMastercardBalanceAtIssuerUSDUpdateTime],
        [ICPMastercardBalanceAtIssuerEUR],
        [ICPMastercardBalanceAtIssuerEURUpdateTime],
        [SAPLeumiCardMCAccountLoadUnloadViaBankILS],
        [SAPLeumiCardMCAccountLoadUnloadViaBankUSD],
        [SAPLeumiCardMCAccountLoadUnloadViaBankEUR]
    FROM [CardIssuer]
    WHERE 1=1
      AND (@Name IS NULL OR [Name] LIKE '%' + @Name + '%')
    ORDER BY [TableName_CardIssuer]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetCardIssuerByID]
    @TableName_CardIssuer bit
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CardIssuer],
        [Name],
        [entVisaAccountNumberILSAtIssuer],
        [entVisaAccountNumberUSDAtIssuer],
        [entVisaAccountNumberEURAtIssuer],
        [VisaOrganizationCodeAtIssuer],
        [spt_enmVisaAccountStatusAtCardIssuerILS_AccountStatusAtCardIssuer],
        [spt_enmVisaAccountStatusAtCardIssuerUSD_AccountStatusAtCardIssuer],
        [spt_enmVisaAccountStatusAtCardIssuerEUR_AccountStatusAtCardIssuer],
        [ICPVisaBalanceAtIssuerILS],
        [ICPVisaBalanceAtIssuerILSUpdateTime],
        [ICPVisaBalanceAtIssuerUSD],
        [ICPVisaBalanceAtIssuerUSDUpdateTime],
        [ICPVisaBalanceAtIssuerEUR],
        [ICPVisaBalanceAtIssuerEURUpdateTime],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [UpdatingLoginID],
        [SAPLeumiCardVisaAccountLoadUnloadViaBankILS],
        [SAPLeumiCardVisaAccountLoadUnloadViaBankUSD],
        [SAPLeumiCardVisaAccountLoadUnloadViaBankEUR],
        [SAPICPAccountForDistributorLoadCommission],
        [SAPICPAccountForDistributorCardMonthlyCommission],
        [SAPICPAccountForLeumiCardOrderCardsFee],
        [SAPICPAccountForLeumiCardCardMonthlyFee],
        [SAPICPAccountForLeumiCardLocalATMFee],
        [SAPICPAccountForLeumiCardForeignATMFee],
        [SAPICPAccountForLeumiCardConversionFee],
        [MaximumCustomerLoadAmountIn6MonthsRunningILS],
        [entMastercardAccountNumberILSAtIssuer],
        [entMastercardAccountNumberUSDAtIssuer],
        [entMastercardAccountNumberEURAtIssuer],
        [MastercardOrganizationCodeAtIssuer],
        [spt_enmMastercardAccountStatusAtCardIssuerILS_AccountStatusAtCardIssuer],
        [spt_enmMastercardAccountStatusAtCardIssuerUSD_AccountStatusAtCardIssuer],
        [spt_enmMastercardAccountStatusAtCardIssuerEUR_AccountStatusAtCardIssuer],
        [ICPMastercardBalanceAtIssuerILS],
        [ICPMastercardBalanceAtIssuerILSUpdateTime],
        [ICPMastercardBalanceAtIssuerUSD],
        [ICPMastercardBalanceAtIssuerUSDUpdateTime],
        [ICPMastercardBalanceAtIssuerEUR],
        [ICPMastercardBalanceAtIssuerEURUpdateTime],
        [SAPLeumiCardMCAccountLoadUnloadViaBankILS],
        [SAPLeumiCardMCAccountLoadUnloadViaBankUSD],
        [SAPLeumiCardMCAccountLoadUnloadViaBankEUR]
    FROM [CardIssuer]
    WHERE [TableName_CardIssuer] = @TableName_CardIssuer;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddCardIssuer]
    @Name nvarchar(100),
    @entVisaAccountNumberILSAtIssuer varchar(MAX) = NULL,
    @entVisaAccountNumberUSDAtIssuer varchar(MAX) = NULL,
    @entVisaAccountNumberEURAtIssuer varchar(MAX) = NULL,
    @VisaOrganizationCodeAtIssuer varchar(50) = NULL,
    @spt_enmVisaAccountStatusAtCardIssuerILS_AccountStatusAtCardIssuer varchar(50) = NULL,
    @spt_enmVisaAccountStatusAtCardIssuerUSD_AccountStatusAtCardIssuer varchar(50) = NULL,
    @spt_enmVisaAccountStatusAtCardIssuerEUR_AccountStatusAtCardIssuer varchar(50) = NULL,
    @ICPVisaBalanceAtIssuerILS decimal(18,0) = NULL,
    @ICPVisaBalanceAtIssuerILSUpdateTime datetimeoffset = NULL,
    @ICPVisaBalanceAtIssuerUSD decimal(18,0) = NULL,
    @ICPVisaBalanceAtIssuerUSDUpdateTime datetimeoffset = NULL,
    @ICPVisaBalanceAtIssuerEUR decimal(18,0) = NULL,
    @ICPVisaBalanceAtIssuerEURUpdateTime datetimeoffset = NULL,
    @UpdatingLoginID bigint = NULL,
    @SAPLeumiCardVisaAccountLoadUnloadViaBankILS varchar(50) = NULL,
    @SAPLeumiCardVisaAccountLoadUnloadViaBankUSD varchar(50) = NULL,
    @SAPLeumiCardVisaAccountLoadUnloadViaBankEUR varchar(50) = NULL,
    @SAPICPAccountForDistributorLoadCommission varchar(50) = NULL,
    @SAPICPAccountForDistributorCardMonthlyCommission varchar(50) = NULL,
    @SAPICPAccountForLeumiCardOrderCardsFee varchar(50) = NULL,
    @SAPICPAccountForLeumiCardCardMonthlyFee varchar(50) = NULL,
    @SAPICPAccountForLeumiCardLocalATMFee varchar(50) = NULL,
    @SAPICPAccountForLeumiCardForeignATMFee varchar(50) = NULL,
    @SAPICPAccountForLeumiCardConversionFee varchar(50) = NULL,
    @MaximumCustomerLoadAmountIn6MonthsRunningILS decimal(18,0) = NULL,
    @entMastercardAccountNumberILSAtIssuer varchar(MAX) = NULL,
    @entMastercardAccountNumberUSDAtIssuer varchar(MAX) = NULL,
    @entMastercardAccountNumberEURAtIssuer varchar(MAX) = NULL,
    @MastercardOrganizationCodeAtIssuer varchar(50) = NULL,
    @spt_enmMastercardAccountStatusAtCardIssuerILS_AccountStatusAtCardIssuer varchar(50) = NULL,
    @spt_enmMastercardAccountStatusAtCardIssuerUSD_AccountStatusAtCardIssuer varchar(50) = NULL,
    @spt_enmMastercardAccountStatusAtCardIssuerEUR_AccountStatusAtCardIssuer varchar(50) = NULL,
    @ICPMastercardBalanceAtIssuerILS decimal(18,0) = NULL,
    @ICPMastercardBalanceAtIssuerILSUpdateTime datetimeoffset = NULL,
    @ICPMastercardBalanceAtIssuerUSD decimal(18,0) = NULL,
    @ICPMastercardBalanceAtIssuerUSDUpdateTime datetimeoffset = NULL,
    @ICPMastercardBalanceAtIssuerEUR decimal(18,0) = NULL,
    @ICPMastercardBalanceAtIssuerEURUpdateTime datetimeoffset = NULL,
    @SAPLeumiCardMCAccountLoadUnloadViaBankILS varchar(50) = NULL,
    @SAPLeumiCardMCAccountLoadUnloadViaBankUSD varchar(50) = NULL,
    @SAPLeumiCardMCAccountLoadUnloadViaBankEUR varchar(50) = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [CardIssuer] (
        [Name],
        [entVisaAccountNumberILSAtIssuer],
        [entVisaAccountNumberUSDAtIssuer],
        [entVisaAccountNumberEURAtIssuer],
        [VisaOrganizationCodeAtIssuer],
        [spt_enmVisaAccountStatusAtCardIssuerILS_AccountStatusAtCardIssuer],
        [spt_enmVisaAccountStatusAtCardIssuerUSD_AccountStatusAtCardIssuer],
        [spt_enmVisaAccountStatusAtCardIssuerEUR_AccountStatusAtCardIssuer],
        [ICPVisaBalanceAtIssuerILS],
        [ICPVisaBalanceAtIssuerILSUpdateTime],
        [ICPVisaBalanceAtIssuerUSD],
        [ICPVisaBalanceAtIssuerUSDUpdateTime],
        [ICPVisaBalanceAtIssuerEUR],
        [ICPVisaBalanceAtIssuerEURUpdateTime],
        [UpdatingLoginID],
        [SAPLeumiCardVisaAccountLoadUnloadViaBankILS],
        [SAPLeumiCardVisaAccountLoadUnloadViaBankUSD],
        [SAPLeumiCardVisaAccountLoadUnloadViaBankEUR],
        [SAPICPAccountForDistributorLoadCommission],
        [SAPICPAccountForDistributorCardMonthlyCommission],
        [SAPICPAccountForLeumiCardOrderCardsFee],
        [SAPICPAccountForLeumiCardCardMonthlyFee],
        [SAPICPAccountForLeumiCardLocalATMFee],
        [SAPICPAccountForLeumiCardForeignATMFee],
        [SAPICPAccountForLeumiCardConversionFee],
        [MaximumCustomerLoadAmountIn6MonthsRunningILS],
        [entMastercardAccountNumberILSAtIssuer],
        [entMastercardAccountNumberUSDAtIssuer],
        [entMastercardAccountNumberEURAtIssuer],
        [MastercardOrganizationCodeAtIssuer],
        [spt_enmMastercardAccountStatusAtCardIssuerILS_AccountStatusAtCardIssuer],
        [spt_enmMastercardAccountStatusAtCardIssuerUSD_AccountStatusAtCardIssuer],
        [spt_enmMastercardAccountStatusAtCardIssuerEUR_AccountStatusAtCardIssuer],
        [ICPMastercardBalanceAtIssuerILS],
        [ICPMastercardBalanceAtIssuerILSUpdateTime],
        [ICPMastercardBalanceAtIssuerUSD],
        [ICPMastercardBalanceAtIssuerUSDUpdateTime],
        [ICPMastercardBalanceAtIssuerEUR],
        [ICPMastercardBalanceAtIssuerEURUpdateTime],
        [SAPLeumiCardMCAccountLoadUnloadViaBankILS],
        [SAPLeumiCardMCAccountLoadUnloadViaBankUSD],
        [SAPLeumiCardMCAccountLoadUnloadViaBankEUR],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @Name,
        @entVisaAccountNumberILSAtIssuer,
        @entVisaAccountNumberUSDAtIssuer,
        @entVisaAccountNumberEURAtIssuer,
        @VisaOrganizationCodeAtIssuer,
        @spt_enmVisaAccountStatusAtCardIssuerILS_AccountStatusAtCardIssuer,
        @spt_enmVisaAccountStatusAtCardIssuerUSD_AccountStatusAtCardIssuer,
        @spt_enmVisaAccountStatusAtCardIssuerEUR_AccountStatusAtCardIssuer,
        @ICPVisaBalanceAtIssuerILS,
        @ICPVisaBalanceAtIssuerILSUpdateTime,
        @ICPVisaBalanceAtIssuerUSD,
        @ICPVisaBalanceAtIssuerUSDUpdateTime,
        @ICPVisaBalanceAtIssuerEUR,
        @ICPVisaBalanceAtIssuerEURUpdateTime,
        @UpdatingLoginID,
        @SAPLeumiCardVisaAccountLoadUnloadViaBankILS,
        @SAPLeumiCardVisaAccountLoadUnloadViaBankUSD,
        @SAPLeumiCardVisaAccountLoadUnloadViaBankEUR,
        @SAPICPAccountForDistributorLoadCommission,
        @SAPICPAccountForDistributorCardMonthlyCommission,
        @SAPICPAccountForLeumiCardOrderCardsFee,
        @SAPICPAccountForLeumiCardCardMonthlyFee,
        @SAPICPAccountForLeumiCardLocalATMFee,
        @SAPICPAccountForLeumiCardForeignATMFee,
        @SAPICPAccountForLeumiCardConversionFee,
        @MaximumCustomerLoadAmountIn6MonthsRunningILS,
        @entMastercardAccountNumberILSAtIssuer,
        @entMastercardAccountNumberUSDAtIssuer,
        @entMastercardAccountNumberEURAtIssuer,
        @MastercardOrganizationCodeAtIssuer,
        @spt_enmMastercardAccountStatusAtCardIssuerILS_AccountStatusAtCardIssuer,
        @spt_enmMastercardAccountStatusAtCardIssuerUSD_AccountStatusAtCardIssuer,
        @spt_enmMastercardAccountStatusAtCardIssuerEUR_AccountStatusAtCardIssuer,
        @ICPMastercardBalanceAtIssuerILS,
        @ICPMastercardBalanceAtIssuerILSUpdateTime,
        @ICPMastercardBalanceAtIssuerUSD,
        @ICPMastercardBalanceAtIssuerUSDUpdateTime,
        @ICPMastercardBalanceAtIssuerEUR,
        @ICPMastercardBalanceAtIssuerEURUpdateTime,
        @SAPLeumiCardMCAccountLoadUnloadViaBankILS,
        @SAPLeumiCardMCAccountLoadUnloadViaBankUSD,
        @SAPLeumiCardMCAccountLoadUnloadViaBankEUR,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateCardIssuer]
    @TableName_CardIssuer bit,
    @Name nvarchar(100),
    @entVisaAccountNumberILSAtIssuer varchar(MAX) = NULL,
    @entVisaAccountNumberUSDAtIssuer varchar(MAX) = NULL,
    @entVisaAccountNumberEURAtIssuer varchar(MAX) = NULL,
    @VisaOrganizationCodeAtIssuer varchar(50) = NULL,
    @spt_enmVisaAccountStatusAtCardIssuerILS_AccountStatusAtCardIssuer varchar(50) = NULL,
    @spt_enmVisaAccountStatusAtCardIssuerUSD_AccountStatusAtCardIssuer varchar(50) = NULL,
    @spt_enmVisaAccountStatusAtCardIssuerEUR_AccountStatusAtCardIssuer varchar(50) = NULL,
    @ICPVisaBalanceAtIssuerILS decimal(18,0) = NULL,
    @ICPVisaBalanceAtIssuerILSUpdateTime datetimeoffset = NULL,
    @ICPVisaBalanceAtIssuerUSD decimal(18,0) = NULL,
    @ICPVisaBalanceAtIssuerUSDUpdateTime datetimeoffset = NULL,
    @ICPVisaBalanceAtIssuerEUR decimal(18,0) = NULL,
    @ICPVisaBalanceAtIssuerEURUpdateTime datetimeoffset = NULL,
    @UpdatingLoginID bigint = NULL,
    @SAPLeumiCardVisaAccountLoadUnloadViaBankILS varchar(50) = NULL,
    @SAPLeumiCardVisaAccountLoadUnloadViaBankUSD varchar(50) = NULL,
    @SAPLeumiCardVisaAccountLoadUnloadViaBankEUR varchar(50) = NULL,
    @SAPICPAccountForDistributorLoadCommission varchar(50) = NULL,
    @SAPICPAccountForDistributorCardMonthlyCommission varchar(50) = NULL,
    @SAPICPAccountForLeumiCardOrderCardsFee varchar(50) = NULL,
    @SAPICPAccountForLeumiCardCardMonthlyFee varchar(50) = NULL,
    @SAPICPAccountForLeumiCardLocalATMFee varchar(50) = NULL,
    @SAPICPAccountForLeumiCardForeignATMFee varchar(50) = NULL,
    @SAPICPAccountForLeumiCardConversionFee varchar(50) = NULL,
    @MaximumCustomerLoadAmountIn6MonthsRunningILS decimal(18,0) = NULL,
    @entMastercardAccountNumberILSAtIssuer varchar(MAX) = NULL,
    @entMastercardAccountNumberUSDAtIssuer varchar(MAX) = NULL,
    @entMastercardAccountNumberEURAtIssuer varchar(MAX) = NULL,
    @MastercardOrganizationCodeAtIssuer varchar(50) = NULL,
    @spt_enmMastercardAccountStatusAtCardIssuerILS_AccountStatusAtCardIssuer varchar(50) = NULL,
    @spt_enmMastercardAccountStatusAtCardIssuerUSD_AccountStatusAtCardIssuer varchar(50) = NULL,
    @spt_enmMastercardAccountStatusAtCardIssuerEUR_AccountStatusAtCardIssuer varchar(50) = NULL,
    @ICPMastercardBalanceAtIssuerILS decimal(18,0) = NULL,
    @ICPMastercardBalanceAtIssuerILSUpdateTime datetimeoffset = NULL,
    @ICPMastercardBalanceAtIssuerUSD decimal(18,0) = NULL,
    @ICPMastercardBalanceAtIssuerUSDUpdateTime datetimeoffset = NULL,
    @ICPMastercardBalanceAtIssuerEUR decimal(18,0) = NULL,
    @ICPMastercardBalanceAtIssuerEURUpdateTime datetimeoffset = NULL,
    @SAPLeumiCardMCAccountLoadUnloadViaBankILS varchar(50) = NULL,
    @SAPLeumiCardMCAccountLoadUnloadViaBankUSD varchar(50) = NULL,
    @SAPLeumiCardMCAccountLoadUnloadViaBankEUR varchar(50) = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [CardIssuer]
    SET
        [Name] = @Name,
        [entVisaAccountNumberILSAtIssuer] = @entVisaAccountNumberILSAtIssuer,
        [entVisaAccountNumberUSDAtIssuer] = @entVisaAccountNumberUSDAtIssuer,
        [entVisaAccountNumberEURAtIssuer] = @entVisaAccountNumberEURAtIssuer,
        [VisaOrganizationCodeAtIssuer] = @VisaOrganizationCodeAtIssuer,
        [spt_enmVisaAccountStatusAtCardIssuerILS_AccountStatusAtCardIssuer] = @spt_enmVisaAccountStatusAtCardIssuerILS_AccountStatusAtCardIssuer,
        [spt_enmVisaAccountStatusAtCardIssuerUSD_AccountStatusAtCardIssuer] = @spt_enmVisaAccountStatusAtCardIssuerUSD_AccountStatusAtCardIssuer,
        [spt_enmVisaAccountStatusAtCardIssuerEUR_AccountStatusAtCardIssuer] = @spt_enmVisaAccountStatusAtCardIssuerEUR_AccountStatusAtCardIssuer,
        [ICPVisaBalanceAtIssuerILS] = @ICPVisaBalanceAtIssuerILS,
        [ICPVisaBalanceAtIssuerILSUpdateTime] = @ICPVisaBalanceAtIssuerILSUpdateTime,
        [ICPVisaBalanceAtIssuerUSD] = @ICPVisaBalanceAtIssuerUSD,
        [ICPVisaBalanceAtIssuerUSDUpdateTime] = @ICPVisaBalanceAtIssuerUSDUpdateTime,
        [ICPVisaBalanceAtIssuerEUR] = @ICPVisaBalanceAtIssuerEUR,
        [ICPVisaBalanceAtIssuerEURUpdateTime] = @ICPVisaBalanceAtIssuerEURUpdateTime,
        [UpdatingLoginID] = @UpdatingLoginID,
        [SAPLeumiCardVisaAccountLoadUnloadViaBankILS] = @SAPLeumiCardVisaAccountLoadUnloadViaBankILS,
        [SAPLeumiCardVisaAccountLoadUnloadViaBankUSD] = @SAPLeumiCardVisaAccountLoadUnloadViaBankUSD,
        [SAPLeumiCardVisaAccountLoadUnloadViaBankEUR] = @SAPLeumiCardVisaAccountLoadUnloadViaBankEUR,
        [SAPICPAccountForDistributorLoadCommission] = @SAPICPAccountForDistributorLoadCommission,
        [SAPICPAccountForDistributorCardMonthlyCommission] = @SAPICPAccountForDistributorCardMonthlyCommission,
        [SAPICPAccountForLeumiCardOrderCardsFee] = @SAPICPAccountForLeumiCardOrderCardsFee,
        [SAPICPAccountForLeumiCardCardMonthlyFee] = @SAPICPAccountForLeumiCardCardMonthlyFee,
        [SAPICPAccountForLeumiCardLocalATMFee] = @SAPICPAccountForLeumiCardLocalATMFee,
        [SAPICPAccountForLeumiCardForeignATMFee] = @SAPICPAccountForLeumiCardForeignATMFee,
        [SAPICPAccountForLeumiCardConversionFee] = @SAPICPAccountForLeumiCardConversionFee,
        [MaximumCustomerLoadAmountIn6MonthsRunningILS] = @MaximumCustomerLoadAmountIn6MonthsRunningILS,
        [entMastercardAccountNumberILSAtIssuer] = @entMastercardAccountNumberILSAtIssuer,
        [entMastercardAccountNumberUSDAtIssuer] = @entMastercardAccountNumberUSDAtIssuer,
        [entMastercardAccountNumberEURAtIssuer] = @entMastercardAccountNumberEURAtIssuer,
        [MastercardOrganizationCodeAtIssuer] = @MastercardOrganizationCodeAtIssuer,
        [spt_enmMastercardAccountStatusAtCardIssuerILS_AccountStatusAtCardIssuer] = @spt_enmMastercardAccountStatusAtCardIssuerILS_AccountStatusAtCardIssuer,
        [spt_enmMastercardAccountStatusAtCardIssuerUSD_AccountStatusAtCardIssuer] = @spt_enmMastercardAccountStatusAtCardIssuerUSD_AccountStatusAtCardIssuer,
        [spt_enmMastercardAccountStatusAtCardIssuerEUR_AccountStatusAtCardIssuer] = @spt_enmMastercardAccountStatusAtCardIssuerEUR_AccountStatusAtCardIssuer,
        [ICPMastercardBalanceAtIssuerILS] = @ICPMastercardBalanceAtIssuerILS,
        [ICPMastercardBalanceAtIssuerILSUpdateTime] = @ICPMastercardBalanceAtIssuerILSUpdateTime,
        [ICPMastercardBalanceAtIssuerUSD] = @ICPMastercardBalanceAtIssuerUSD,
        [ICPMastercardBalanceAtIssuerUSDUpdateTime] = @ICPMastercardBalanceAtIssuerUSDUpdateTime,
        [ICPMastercardBalanceAtIssuerEUR] = @ICPMastercardBalanceAtIssuerEUR,
        [ICPMastercardBalanceAtIssuerEURUpdateTime] = @ICPMastercardBalanceAtIssuerEURUpdateTime,
        [SAPLeumiCardMCAccountLoadUnloadViaBankILS] = @SAPLeumiCardMCAccountLoadUnloadViaBankILS,
        [SAPLeumiCardMCAccountLoadUnloadViaBankUSD] = @SAPLeumiCardMCAccountLoadUnloadViaBankUSD,
        [SAPLeumiCardMCAccountLoadUnloadViaBankEUR] = @SAPLeumiCardMCAccountLoadUnloadViaBankEUR,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [TableName_CardIssuer] = @TableName_CardIssuer;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteCardIssuer]
    @TableName_CardIssuer bit
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [CardIssuer]
    WHERE [TableName_CardIssuer] = @TableName_CardIssuer;
END

GO

-- Procedure for Index: IXCardIssuer_Name
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetCardIssuerByNAME]
    @Name nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CardIssuer],
        [Name],
        [entVisaAccountNumberILSAtIssuer],
        [entVisaAccountNumberUSDAtIssuer],
        [entVisaAccountNumberEURAtIssuer],
        [VisaOrganizationCodeAtIssuer],
        [spt_enmVisaAccountStatusAtCardIssuerILS_AccountStatusAtCardIssuer],
        [spt_enmVisaAccountStatusAtCardIssuerUSD_AccountStatusAtCardIssuer],
        [spt_enmVisaAccountStatusAtCardIssuerEUR_AccountStatusAtCardIssuer],
        [ICPVisaBalanceAtIssuerILS],
        [ICPVisaBalanceAtIssuerILSUpdateTime],
        [ICPVisaBalanceAtIssuerUSD],
        [ICPVisaBalanceAtIssuerUSDUpdateTime],
        [ICPVisaBalanceAtIssuerEUR],
        [ICPVisaBalanceAtIssuerEURUpdateTime],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [UpdatingLoginID],
        [SAPLeumiCardVisaAccountLoadUnloadViaBankILS],
        [SAPLeumiCardVisaAccountLoadUnloadViaBankUSD],
        [SAPLeumiCardVisaAccountLoadUnloadViaBankEUR],
        [SAPICPAccountForDistributorLoadCommission],
        [SAPICPAccountForDistributorCardMonthlyCommission],
        [SAPICPAccountForLeumiCardOrderCardsFee],
        [SAPICPAccountForLeumiCardCardMonthlyFee],
        [SAPICPAccountForLeumiCardLocalATMFee],
        [SAPICPAccountForLeumiCardForeignATMFee],
        [SAPICPAccountForLeumiCardConversionFee],
        [MaximumCustomerLoadAmountIn6MonthsRunningILS],
        [entMastercardAccountNumberILSAtIssuer],
        [entMastercardAccountNumberUSDAtIssuer],
        [entMastercardAccountNumberEURAtIssuer],
        [MastercardOrganizationCodeAtIssuer],
        [spt_enmMastercardAccountStatusAtCardIssuerILS_AccountStatusAtCardIssuer],
        [spt_enmMastercardAccountStatusAtCardIssuerUSD_AccountStatusAtCardIssuer],
        [spt_enmMastercardAccountStatusAtCardIssuerEUR_AccountStatusAtCardIssuer],
        [ICPMastercardBalanceAtIssuerILS],
        [ICPMastercardBalanceAtIssuerILSUpdateTime],
        [ICPMastercardBalanceAtIssuerUSD],
        [ICPMastercardBalanceAtIssuerUSDUpdateTime],
        [ICPMastercardBalanceAtIssuerEUR],
        [ICPMastercardBalanceAtIssuerEURUpdateTime],
        [SAPLeumiCardMCAccountLoadUnloadViaBankILS],
        [SAPLeumiCardMCAccountLoadUnloadViaBankUSD],
        [SAPLeumiCardMCAccountLoadUnloadViaBankEUR]
    FROM [CardIssuer]
    WHERE [Name] = @Name
;
END

GO


-- =========================================
-- Stored Procedures for Table: CardOrderByDistributor
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllCardOrderByDistributors]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_CardOrderByDistributor],
            t.[ID],
            t.[NumberOfCards],
            t.[enmCurrency],
            t.[CardClubID],
            t.[OrderedByUserID],
            t.[DistributorID],
            t.[DistributorOrderCardsFee],
            t.[WhenOrdered],
            t.[spt_enmStatus_CardOrderStatus],
            t.[spt_WhenReceived],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            t.[spt_enmCustomerCardActivationStatus_Status],
            t.[scb_enmCustomerCardActivationStatus_Status],
            p1.[Text] AS [CardClubID_Text],
            p2.[Text] AS [OrderedByUserID_Text],
            p3.[Text] AS [DistributorID_Text]
        FROM [CardOrderByDistributor] t
        LEFT JOIN [ccvwComboList_CardClub] p1 ON t.[CardClubID] = p1.[ID]
        LEFT JOIN [ccvwComboList_c_User] p2 ON t.[OrderedByUserID] = p2.[ID]
        LEFT JOIN [ccvwComboList_Distributor] p3 ON t.[DistributorID] = p3.[ID]
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_CardOrderByDistributor],
            [ID],
            [NumberOfCards],
            [enmCurrency],
            [CardClubID],
            [OrderedByUserID],
            [DistributorID],
            [DistributorOrderCardsFee],
            [WhenOrdered],
            [spt_enmStatus_CardOrderStatus],
            [spt_WhenReceived],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID],
            [spt_enmCustomerCardActivationStatus_Status],
            [scb_enmCustomerCardActivationStatus_Status]
        FROM [CardOrderByDistributor]
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredCardOrderByDistributors]
    @spt_enmCustomerCardActivationStatus_Status VARCHAR(50) = NULL,
    @DistributorID INT = NULL,
    @enmCurrency VARCHAR(3) = NULL,
    @spt_enmStatus_CardOrderStatus VARCHAR(50) = NULL,
    @CardClubID INT = NULL,
    @OrderedByUserID INT = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_CardOrderByDistributor],
            t.[ID],
            t.[NumberOfCards],
            t.[enmCurrency],
            t.[CardClubID],
            t.[OrderedByUserID],
            t.[DistributorID],
            t.[DistributorOrderCardsFee],
            t.[WhenOrdered],
            t.[spt_enmStatus_CardOrderStatus],
            t.[spt_WhenReceived],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            t.[spt_enmCustomerCardActivationStatus_Status],
            t.[scb_enmCustomerCardActivationStatus_Status],
            p1.[Text] AS [CardClubID_Text],
            p2.[Text] AS [OrderedByUserID_Text],
            p3.[Text] AS [DistributorID_Text]
        FROM [CardOrderByDistributor] t
        LEFT JOIN [ccvwComboList_CardClub] p1 ON t.[CardClubID] = p1.[ID]
        LEFT JOIN [ccvwComboList_c_User] p2 ON t.[OrderedByUserID] = p2.[ID]
        LEFT JOIN [ccvwComboList_Distributor] p3 ON t.[DistributorID] = p3.[ID]
        WHERE 1=1
          AND (@spt_enmCustomerCardActivationStatus_Status IS NULL OR t.[spt_enmCustomerCardActivationStatus_Status] LIKE '%' + @spt_enmCustomerCardActivationStatus_Status + '%')
          AND (@DistributorID IS NULL OR t.[DistributorID] = @DistributorID)
          AND (@DistributorID IS NULL OR t.[DistributorID] = @DistributorID)
          AND (@enmCurrency IS NULL OR t.[enmCurrency] LIKE '%' + @enmCurrency + '%')
          AND (@spt_enmStatus_CardOrderStatus IS NULL OR t.[spt_enmStatus_CardOrderStatus] LIKE '%' + @spt_enmStatus_CardOrderStatus + '%')
          AND (@CardClubID IS NULL OR t.[CardClubID] = @CardClubID)
          AND (@OrderedByUserID IS NULL OR t.[OrderedByUserID] = @OrderedByUserID)
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_CardOrderByDistributor],
            [ID],
            [NumberOfCards],
            [enmCurrency],
            [CardClubID],
            [OrderedByUserID],
            [DistributorID],
            [DistributorOrderCardsFee],
            [WhenOrdered],
            [spt_enmStatus_CardOrderStatus],
            [spt_WhenReceived],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID],
            [spt_enmCustomerCardActivationStatus_Status],
            [scb_enmCustomerCardActivationStatus_Status]
        FROM [CardOrderByDistributor]
        WHERE 1=1
          AND (@spt_enmCustomerCardActivationStatus_Status IS NULL OR [spt_enmCustomerCardActivationStatus_Status] LIKE '%' + @spt_enmCustomerCardActivationStatus_Status + '%')
          AND (@DistributorID IS NULL OR [DistributorID] = @DistributorID)
          AND (@DistributorID IS NULL OR [DistributorID] = @DistributorID)
          AND (@enmCurrency IS NULL OR [enmCurrency] LIKE '%' + @enmCurrency + '%')
          AND (@spt_enmStatus_CardOrderStatus IS NULL OR [spt_enmStatus_CardOrderStatus] LIKE '%' + @spt_enmStatus_CardOrderStatus + '%')
          AND (@CardClubID IS NULL OR [CardClubID] = @CardClubID)
          AND (@OrderedByUserID IS NULL OR [OrderedByUserID] = @OrderedByUserID)
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetCardOrderByDistributorByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CardOrderByDistributor],
        [ID],
        [NumberOfCards],
        [enmCurrency],
        [CardClubID],
        [OrderedByUserID],
        [DistributorID],
        [DistributorOrderCardsFee],
        [WhenOrdered],
        [spt_enmStatus_CardOrderStatus],
        [spt_WhenReceived],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spt_enmCustomerCardActivationStatus_Status],
        [scb_enmCustomerCardActivationStatus_Status]
    FROM [CardOrderByDistributor]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddCardOrderByDistributor]
    @TableName_CardOrderByDistributor bit = NULL,
    @NumberOfCards int,
    @enmCurrency varchar(3),
    @CardClubID bigint = NULL,
    @OrderedByUserID bigint,
    @DistributorID bigint,
    @DistributorOrderCardsFee decimal(18,0) = NULL,
    @WhenOrdered datetimeoffset = NULL,
    @spt_enmStatus_CardOrderStatus varchar(50) = NULL,
    @spt_WhenReceived datetimeoffset = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @spt_enmCustomerCardActivationStatus_Status varchar(50) = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [CardOrderByDistributor] (
        [TableName_CardOrderByDistributor],
        [NumberOfCards],
        [enmCurrency],
        [CardClubID],
        [OrderedByUserID],
        [DistributorID],
        [DistributorOrderCardsFee],
        [WhenOrdered],
        [spt_enmStatus_CardOrderStatus],
        [spt_WhenReceived],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spt_enmCustomerCardActivationStatus_Status],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_CardOrderByDistributor,
        @NumberOfCards,
        @enmCurrency,
        @CardClubID,
        @OrderedByUserID,
        @DistributorID,
        @DistributorOrderCardsFee,
        @WhenOrdered,
        @spt_enmStatus_CardOrderStatus,
        @spt_WhenReceived,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        @spt_enmCustomerCardActivationStatus_Status,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateCardOrderByDistributor]
    @ID bigint,
    @TableName_CardOrderByDistributor bit = NULL,
    @NumberOfCards int,
    @enmCurrency varchar(3),
    @CardClubID bigint = NULL,
    @OrderedByUserID bigint,
    @DistributorID bigint,
    @DistributorOrderCardsFee decimal(18,0) = NULL,
    @WhenOrdered datetimeoffset = NULL,
    @spt_enmStatus_CardOrderStatus varchar(50) = NULL,
    @spt_WhenReceived datetimeoffset = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @spt_enmCustomerCardActivationStatus_Status varchar(50) = NULL,
    @scb_enmCustomerCardActivationStatus_Status nvarchar(100) = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [CardOrderByDistributor]
    SET
        [TableName_CardOrderByDistributor] = @TableName_CardOrderByDistributor,
        [NumberOfCards] = @NumberOfCards,
        [enmCurrency] = @enmCurrency,
        [CardClubID] = @CardClubID,
        [OrderedByUserID] = @OrderedByUserID,
        [DistributorID] = @DistributorID,
        [DistributorOrderCardsFee] = @DistributorOrderCardsFee,
        [WhenOrdered] = @WhenOrdered,
        [spt_enmStatus_CardOrderStatus] = @spt_enmStatus_CardOrderStatus,
        [spt_WhenReceived] = @spt_WhenReceived,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [spt_enmCustomerCardActivationStatus_Status] = @spt_enmCustomerCardActivationStatus_Status,
        [scb_enmCustomerCardActivationStatus_Status] = @scb_enmCustomerCardActivationStatus_Status,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteCardOrderByDistributor]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [CardOrderByDistributor]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_CardOrderByDistributor_CustomerCardActivationStatus
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillCardOrderByDistributorBySPTENMCUSTOMERCARDACTIVATIONSTATUSSTATUS]
    @spt_enmCustomerCardActivationStatus_Status varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CardOrderByDistributor],
        [ID],
        [NumberOfCards],
        [enmCurrency],
        [CardClubID],
        [OrderedByUserID],
        [DistributorID],
        [DistributorOrderCardsFee],
        [WhenOrdered],
        [spt_enmStatus_CardOrderStatus],
        [spt_WhenReceived],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spt_enmCustomerCardActivationStatus_Status],
        [scb_enmCustomerCardActivationStatus_Status]
    FROM [CardOrderByDistributor]
    WHERE [spt_enmCustomerCardActivationStatus_Status] = @spt_enmCustomerCardActivationStatus_Status
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXCardOrderByDistributor_AssignedDistributorID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillCardOrderByDistributorByDISTRIBUTORID]
    @DistributorID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CardOrderByDistributor],
        [ID],
        [NumberOfCards],
        [enmCurrency],
        [CardClubID],
        [OrderedByUserID],
        [DistributorID],
        [DistributorOrderCardsFee],
        [WhenOrdered],
        [spt_enmStatus_CardOrderStatus],
        [spt_WhenReceived],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spt_enmCustomerCardActivationStatus_Status],
        [scb_enmCustomerCardActivationStatus_Status]
    FROM [CardOrderByDistributor]
    WHERE [DistributorID] = @DistributorID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXCardOrderByDistributor_AssignedDistributorID_Currency_Status
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillCardOrderByDistributorByDISTRIBUTORIDAndENMCURRENCYAndSPTENMSTATUSCARDORDERSTATUS]
    @DistributorID bigint,
    @enmCurrency varchar(3),
    @spt_enmStatus_CardOrderStatus varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CardOrderByDistributor],
        [ID],
        [NumberOfCards],
        [enmCurrency],
        [CardClubID],
        [OrderedByUserID],
        [DistributorID],
        [DistributorOrderCardsFee],
        [WhenOrdered],
        [spt_enmStatus_CardOrderStatus],
        [spt_WhenReceived],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spt_enmCustomerCardActivationStatus_Status],
        [scb_enmCustomerCardActivationStatus_Status]
    FROM [CardOrderByDistributor]
    WHERE [DistributorID] = @DistributorID AND [enmCurrency] = @enmCurrency AND [spt_enmStatus_CardOrderStatus] = @spt_enmStatus_CardOrderStatus
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXCardOrderByDistributor_ClubID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillCardOrderByDistributorByCARDCLUBID]
    @CardClubID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CardOrderByDistributor],
        [ID],
        [NumberOfCards],
        [enmCurrency],
        [CardClubID],
        [OrderedByUserID],
        [DistributorID],
        [DistributorOrderCardsFee],
        [WhenOrdered],
        [spt_enmStatus_CardOrderStatus],
        [spt_WhenReceived],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spt_enmCustomerCardActivationStatus_Status],
        [scb_enmCustomerCardActivationStatus_Status]
    FROM [CardOrderByDistributor]
    WHERE [CardClubID] = @CardClubID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXCardOrderByDistributor_OrderedByUserID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillCardOrderByDistributorByORDEREDBYUSERID]
    @OrderedByUserID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CardOrderByDistributor],
        [ID],
        [NumberOfCards],
        [enmCurrency],
        [CardClubID],
        [OrderedByUserID],
        [DistributorID],
        [DistributorOrderCardsFee],
        [WhenOrdered],
        [spt_enmStatus_CardOrderStatus],
        [spt_WhenReceived],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spt_enmCustomerCardActivationStatus_Status],
        [scb_enmCustomerCardActivationStatus_Status]
    FROM [CardOrderByDistributor]
    WHERE [OrderedByUserID] = @OrderedByUserID
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: CardOrderFromIssuer
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllCardOrderFromIssuers]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_CardOrderFromIssuer],
            t.[ID],
            t.[NumberOfCards],
            t.[enmCurrency],
            t.[CardClubID],
            t.[EmbossedText],
            t.[PackageType],
            t.[ICPOrderCardsFee],
            t.[CardIssuerOrderNumber],
            t.[ResponseCodeFromCardIssuer],
            t.[ResponseDescriptionFromCardIssuer],
            t.[LoggedAlertID],
            t.[spt_Comment],
            t.[OrderedByUserID],
            t.[WhenOrdered],
            t.[spt_enmStatus_CardOrderStatus],
            t.[spt_WhenReceived],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            t.[ResponseCodeOnImport],
            t.[ResponseDescriptionOnImport],
            p1.[Text] AS [CardClubID_Text],
            p2.[Text] AS [LoggedAlertID_Text],
            p3.[Text] AS [OrderedByUserID_Text]
        FROM [CardOrderFromIssuer] t
        LEFT JOIN [ccvwComboList_CardClub] p1 ON t.[CardClubID] = p1.[ID]
        LEFT JOIN [ccvwComboList_c_LoggedAlert] p2 ON t.[LoggedAlertID] = p2.[ID]
        LEFT JOIN [ccvwComboList_c_User] p3 ON t.[OrderedByUserID] = p3.[ID]
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_CardOrderFromIssuer],
            [ID],
            [NumberOfCards],
            [enmCurrency],
            [CardClubID],
            [EmbossedText],
            [PackageType],
            [ICPOrderCardsFee],
            [CardIssuerOrderNumber],
            [ResponseCodeFromCardIssuer],
            [ResponseDescriptionFromCardIssuer],
            [LoggedAlertID],
            [spt_Comment],
            [OrderedByUserID],
            [WhenOrdered],
            [spt_enmStatus_CardOrderStatus],
            [spt_WhenReceived],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID],
            [ResponseCodeOnImport],
            [ResponseDescriptionOnImport]
        FROM [CardOrderFromIssuer]
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredCardOrderFromIssuers]
    @CardIssuerOrderNumber NVARCHAR(100) = NULL,
    @CardClubID INT = NULL,
    @EmbossedText NVARCHAR(100) = NULL,
    @LoggedAlertID INT = NULL,
    @OrderedByUserID INT = NULL,
    @spt_enmStatus_CardOrderStatus VARCHAR(50) = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_CardOrderFromIssuer],
            t.[ID],
            t.[NumberOfCards],
            t.[enmCurrency],
            t.[CardClubID],
            t.[EmbossedText],
            t.[PackageType],
            t.[ICPOrderCardsFee],
            t.[CardIssuerOrderNumber],
            t.[ResponseCodeFromCardIssuer],
            t.[ResponseDescriptionFromCardIssuer],
            t.[LoggedAlertID],
            t.[spt_Comment],
            t.[OrderedByUserID],
            t.[WhenOrdered],
            t.[spt_enmStatus_CardOrderStatus],
            t.[spt_WhenReceived],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            t.[ResponseCodeOnImport],
            t.[ResponseDescriptionOnImport],
            p1.[Text] AS [CardClubID_Text],
            p2.[Text] AS [LoggedAlertID_Text],
            p3.[Text] AS [OrderedByUserID_Text]
        FROM [CardOrderFromIssuer] t
        LEFT JOIN [ccvwComboList_CardClub] p1 ON t.[CardClubID] = p1.[ID]
        LEFT JOIN [ccvwComboList_c_LoggedAlert] p2 ON t.[LoggedAlertID] = p2.[ID]
        LEFT JOIN [ccvwComboList_c_User] p3 ON t.[OrderedByUserID] = p3.[ID]
        WHERE 1=1
          AND (@CardIssuerOrderNumber IS NULL OR t.[CardIssuerOrderNumber] LIKE '%' + @CardIssuerOrderNumber + '%')
          AND (@CardClubID IS NULL OR t.[CardClubID] = @CardClubID)
          AND (@EmbossedText IS NULL OR t.[EmbossedText] LIKE '%' + @EmbossedText + '%')
          AND (@LoggedAlertID IS NULL OR t.[LoggedAlertID] = @LoggedAlertID)
          AND (@OrderedByUserID IS NULL OR t.[OrderedByUserID] = @OrderedByUserID)
          AND (@spt_enmStatus_CardOrderStatus IS NULL OR t.[spt_enmStatus_CardOrderStatus] LIKE '%' + @spt_enmStatus_CardOrderStatus + '%')
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_CardOrderFromIssuer],
            [ID],
            [NumberOfCards],
            [enmCurrency],
            [CardClubID],
            [EmbossedText],
            [PackageType],
            [ICPOrderCardsFee],
            [CardIssuerOrderNumber],
            [ResponseCodeFromCardIssuer],
            [ResponseDescriptionFromCardIssuer],
            [LoggedAlertID],
            [spt_Comment],
            [OrderedByUserID],
            [WhenOrdered],
            [spt_enmStatus_CardOrderStatus],
            [spt_WhenReceived],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID],
            [ResponseCodeOnImport],
            [ResponseDescriptionOnImport]
        FROM [CardOrderFromIssuer]
        WHERE 1=1
          AND (@CardIssuerOrderNumber IS NULL OR [CardIssuerOrderNumber] LIKE '%' + @CardIssuerOrderNumber + '%')
          AND (@CardClubID IS NULL OR [CardClubID] = @CardClubID)
          AND (@EmbossedText IS NULL OR [EmbossedText] LIKE '%' + @EmbossedText + '%')
          AND (@LoggedAlertID IS NULL OR [LoggedAlertID] = @LoggedAlertID)
          AND (@OrderedByUserID IS NULL OR [OrderedByUserID] = @OrderedByUserID)
          AND (@spt_enmStatus_CardOrderStatus IS NULL OR [spt_enmStatus_CardOrderStatus] LIKE '%' + @spt_enmStatus_CardOrderStatus + '%')
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetCardOrderFromIssuerByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CardOrderFromIssuer],
        [ID],
        [NumberOfCards],
        [enmCurrency],
        [CardClubID],
        [EmbossedText],
        [PackageType],
        [ICPOrderCardsFee],
        [CardIssuerOrderNumber],
        [ResponseCodeFromCardIssuer],
        [ResponseDescriptionFromCardIssuer],
        [LoggedAlertID],
        [spt_Comment],
        [OrderedByUserID],
        [WhenOrdered],
        [spt_enmStatus_CardOrderStatus],
        [spt_WhenReceived],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [ResponseCodeOnImport],
        [ResponseDescriptionOnImport]
    FROM [CardOrderFromIssuer]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddCardOrderFromIssuer]
    @TableName_CardOrderFromIssuer bit = NULL,
    @NumberOfCards int,
    @enmCurrency varchar(3),
    @CardClubID bigint = NULL,
    @EmbossedText nvarchar(100) = NULL,
    @PackageType nvarchar(100) = NULL,
    @ICPOrderCardsFee decimal(18,0) = NULL,
    @CardIssuerOrderNumber nvarchar(100) = NULL,
    @ResponseCodeFromCardIssuer nvarchar(100) = NULL,
    @ResponseDescriptionFromCardIssuer nvarchar(MAX) = NULL,
    @LoggedAlertID bigint = NULL,
    @spt_Comment nvarchar(MAX) = NULL,
    @OrderedByUserID bigint,
    @WhenOrdered datetimeoffset = NULL,
    @spt_enmStatus_CardOrderStatus varchar(50) = NULL,
    @spt_WhenReceived datetimeoffset = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @ResponseCodeOnImport nvarchar(100) = NULL,
    @ResponseDescriptionOnImport nvarchar(MAX) = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [CardOrderFromIssuer] (
        [TableName_CardOrderFromIssuer],
        [NumberOfCards],
        [enmCurrency],
        [CardClubID],
        [EmbossedText],
        [PackageType],
        [ICPOrderCardsFee],
        [CardIssuerOrderNumber],
        [ResponseCodeFromCardIssuer],
        [ResponseDescriptionFromCardIssuer],
        [LoggedAlertID],
        [spt_Comment],
        [OrderedByUserID],
        [WhenOrdered],
        [spt_enmStatus_CardOrderStatus],
        [spt_WhenReceived],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [ResponseCodeOnImport],
        [ResponseDescriptionOnImport],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_CardOrderFromIssuer,
        @NumberOfCards,
        @enmCurrency,
        @CardClubID,
        @EmbossedText,
        @PackageType,
        @ICPOrderCardsFee,
        @CardIssuerOrderNumber,
        @ResponseCodeFromCardIssuer,
        @ResponseDescriptionFromCardIssuer,
        @LoggedAlertID,
        @spt_Comment,
        @OrderedByUserID,
        @WhenOrdered,
        @spt_enmStatus_CardOrderStatus,
        @spt_WhenReceived,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        @ResponseCodeOnImport,
        @ResponseDescriptionOnImport,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateCardOrderFromIssuer]
    @ID bigint,
    @TableName_CardOrderFromIssuer bit = NULL,
    @NumberOfCards int,
    @enmCurrency varchar(3),
    @CardClubID bigint = NULL,
    @EmbossedText nvarchar(100) = NULL,
    @PackageType nvarchar(100) = NULL,
    @ICPOrderCardsFee decimal(18,0) = NULL,
    @CardIssuerOrderNumber nvarchar(100) = NULL,
    @ResponseCodeFromCardIssuer nvarchar(100) = NULL,
    @ResponseDescriptionFromCardIssuer nvarchar(MAX) = NULL,
    @LoggedAlertID bigint = NULL,
    @spt_Comment nvarchar(MAX) = NULL,
    @OrderedByUserID bigint,
    @WhenOrdered datetimeoffset = NULL,
    @spt_enmStatus_CardOrderStatus varchar(50) = NULL,
    @spt_WhenReceived datetimeoffset = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @ResponseCodeOnImport nvarchar(100) = NULL,
    @ResponseDescriptionOnImport nvarchar(MAX) = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [CardOrderFromIssuer]
    SET
        [TableName_CardOrderFromIssuer] = @TableName_CardOrderFromIssuer,
        [NumberOfCards] = @NumberOfCards,
        [enmCurrency] = @enmCurrency,
        [CardClubID] = @CardClubID,
        [EmbossedText] = @EmbossedText,
        [PackageType] = @PackageType,
        [ICPOrderCardsFee] = @ICPOrderCardsFee,
        [CardIssuerOrderNumber] = @CardIssuerOrderNumber,
        [ResponseCodeFromCardIssuer] = @ResponseCodeFromCardIssuer,
        [ResponseDescriptionFromCardIssuer] = @ResponseDescriptionFromCardIssuer,
        [LoggedAlertID] = @LoggedAlertID,
        [spt_Comment] = @spt_Comment,
        [OrderedByUserID] = @OrderedByUserID,
        [WhenOrdered] = @WhenOrdered,
        [spt_enmStatus_CardOrderStatus] = @spt_enmStatus_CardOrderStatus,
        [spt_WhenReceived] = @spt_WhenReceived,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [ResponseCodeOnImport] = @ResponseCodeOnImport,
        [ResponseDescriptionOnImport] = @ResponseDescriptionOnImport,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteCardOrderFromIssuer]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [CardOrderFromIssuer]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IXCardOrderFromIssuer_CardIssuerOrderNumber
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetCardOrderFromIssuerByCARDISSUERORDERNUMBER]
    @CardIssuerOrderNumber nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CardOrderFromIssuer],
        [ID],
        [NumberOfCards],
        [enmCurrency],
        [CardClubID],
        [EmbossedText],
        [PackageType],
        [ICPOrderCardsFee],
        [CardIssuerOrderNumber],
        [ResponseCodeFromCardIssuer],
        [ResponseDescriptionFromCardIssuer],
        [LoggedAlertID],
        [spt_Comment],
        [OrderedByUserID],
        [WhenOrdered],
        [spt_enmStatus_CardOrderStatus],
        [spt_WhenReceived],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [ResponseCodeOnImport],
        [ResponseDescriptionOnImport]
    FROM [CardOrderFromIssuer]
    WHERE [CardIssuerOrderNumber] = @CardIssuerOrderNumber
;
END

GO

-- Procedure for Index: IXCardOrderFromIssuer_ClubID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillCardOrderFromIssuerByCARDCLUBID]
    @CardClubID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CardOrderFromIssuer],
        [ID],
        [NumberOfCards],
        [enmCurrency],
        [CardClubID],
        [EmbossedText],
        [PackageType],
        [ICPOrderCardsFee],
        [CardIssuerOrderNumber],
        [ResponseCodeFromCardIssuer],
        [ResponseDescriptionFromCardIssuer],
        [LoggedAlertID],
        [spt_Comment],
        [OrderedByUserID],
        [WhenOrdered],
        [spt_enmStatus_CardOrderStatus],
        [spt_WhenReceived],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [ResponseCodeOnImport],
        [ResponseDescriptionOnImport]
    FROM [CardOrderFromIssuer]
    WHERE [CardClubID] = @CardClubID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXCardOrderFromIssuer_EmbossedText
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillCardOrderFromIssuerByEMBOSSEDTEXT]
    @EmbossedText nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CardOrderFromIssuer],
        [ID],
        [NumberOfCards],
        [enmCurrency],
        [CardClubID],
        [EmbossedText],
        [PackageType],
        [ICPOrderCardsFee],
        [CardIssuerOrderNumber],
        [ResponseCodeFromCardIssuer],
        [ResponseDescriptionFromCardIssuer],
        [LoggedAlertID],
        [spt_Comment],
        [OrderedByUserID],
        [WhenOrdered],
        [spt_enmStatus_CardOrderStatus],
        [spt_WhenReceived],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [ResponseCodeOnImport],
        [ResponseDescriptionOnImport]
    FROM [CardOrderFromIssuer]
    WHERE [EmbossedText] = @EmbossedText
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXCardOrderFromIssuer_LoggedAlertID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillCardOrderFromIssuerByLOGGEDALERTID]
    @LoggedAlertID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CardOrderFromIssuer],
        [ID],
        [NumberOfCards],
        [enmCurrency],
        [CardClubID],
        [EmbossedText],
        [PackageType],
        [ICPOrderCardsFee],
        [CardIssuerOrderNumber],
        [ResponseCodeFromCardIssuer],
        [ResponseDescriptionFromCardIssuer],
        [LoggedAlertID],
        [spt_Comment],
        [OrderedByUserID],
        [WhenOrdered],
        [spt_enmStatus_CardOrderStatus],
        [spt_WhenReceived],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [ResponseCodeOnImport],
        [ResponseDescriptionOnImport]
    FROM [CardOrderFromIssuer]
    WHERE [LoggedAlertID] = @LoggedAlertID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXCardOrderFromIssuer_OrderedByUserID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillCardOrderFromIssuerByORDEREDBYUSERID]
    @OrderedByUserID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CardOrderFromIssuer],
        [ID],
        [NumberOfCards],
        [enmCurrency],
        [CardClubID],
        [EmbossedText],
        [PackageType],
        [ICPOrderCardsFee],
        [CardIssuerOrderNumber],
        [ResponseCodeFromCardIssuer],
        [ResponseDescriptionFromCardIssuer],
        [LoggedAlertID],
        [spt_Comment],
        [OrderedByUserID],
        [WhenOrdered],
        [spt_enmStatus_CardOrderStatus],
        [spt_WhenReceived],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [ResponseCodeOnImport],
        [ResponseDescriptionOnImport]
    FROM [CardOrderFromIssuer]
    WHERE [OrderedByUserID] = @OrderedByUserID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXCardOrderFromIssuer_Status
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillCardOrderFromIssuerBySPTENMSTATUSCARDORDERSTATUS]
    @spt_enmStatus_CardOrderStatus varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CardOrderFromIssuer],
        [ID],
        [NumberOfCards],
        [enmCurrency],
        [CardClubID],
        [EmbossedText],
        [PackageType],
        [ICPOrderCardsFee],
        [CardIssuerOrderNumber],
        [ResponseCodeFromCardIssuer],
        [ResponseDescriptionFromCardIssuer],
        [LoggedAlertID],
        [spt_Comment],
        [OrderedByUserID],
        [WhenOrdered],
        [spt_enmStatus_CardOrderStatus],
        [spt_WhenReceived],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [ResponseCodeOnImport],
        [ResponseDescriptionOnImport]
    FROM [CardOrderFromIssuer]
    WHERE [spt_enmStatus_CardOrderStatus] = @spt_enmStatus_CardOrderStatus
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: Country
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllCountrys]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Country],
        [ID],
        [ISO3166Numeric],
        [ISO3166Alpha2],
        [Name],
        [HebrewName],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [Currency],
        [Region],
        [IsGrayCountry]
    FROM [Country]
    ORDER BY [ID]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredCountrys]
    @HebrewName NVARCHAR(100) = NULL,
    @ISO3166Alpha2 VARCHAR(2) = NULL,
    @ISO3166Numeric VARCHAR(50) = NULL,
    @Name VARCHAR(50) = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Country],
        [ID],
        [ISO3166Numeric],
        [ISO3166Alpha2],
        [Name],
        [HebrewName],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [Currency],
        [Region],
        [IsGrayCountry]
    FROM [Country]
    WHERE 1=1
      AND (@HebrewName IS NULL OR [HebrewName] LIKE '%' + @HebrewName + '%')
      AND (@ISO3166Alpha2 IS NULL OR [ISO3166Alpha2] LIKE '%' + @ISO3166Alpha2 + '%')
      AND (@ISO3166Numeric IS NULL OR [ISO3166Numeric] LIKE '%' + @ISO3166Numeric + '%')
      AND (@Name IS NULL OR [Name] LIKE '%' + @Name + '%')
    ORDER BY [ID]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetCountryByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Country],
        [ID],
        [ISO3166Numeric],
        [ISO3166Alpha2],
        [Name],
        [HebrewName],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [Currency],
        [Region],
        [IsGrayCountry]
    FROM [Country]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddCountry]
    @TableName_Country bit = NULL,
    @ISO3166Numeric varchar(50) = NULL,
    @ISO3166Alpha2 varchar(2) = NULL,
    @Name varchar(50) = NULL,
    @HebrewName nvarchar(100) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @Currency varchar(3) = NULL,
    @Region varchar(50) = NULL,
    @IsGrayCountry bit,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [Country] (
        [TableName_Country],
        [ISO3166Numeric],
        [ISO3166Alpha2],
        [Name],
        [HebrewName],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [Currency],
        [Region],
        [IsGrayCountry],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_Country,
        @ISO3166Numeric,
        @ISO3166Alpha2,
        @Name,
        @HebrewName,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        @Currency,
        @Region,
        @IsGrayCountry,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateCountry]
    @ID bigint,
    @TableName_Country bit = NULL,
    @ISO3166Numeric varchar(50) = NULL,
    @ISO3166Alpha2 varchar(2) = NULL,
    @Name varchar(50) = NULL,
    @HebrewName nvarchar(100) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @Currency varchar(3) = NULL,
    @Region varchar(50) = NULL,
    @IsGrayCountry bit,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [Country]
    SET
        [TableName_Country] = @TableName_Country,
        [ISO3166Numeric] = @ISO3166Numeric,
        [ISO3166Alpha2] = @ISO3166Alpha2,
        [Name] = @Name,
        [HebrewName] = @HebrewName,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [Currency] = @Currency,
        [Region] = @Region,
        [IsGrayCountry] = @IsGrayCountry,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteCountry]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [Country]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IXCountry_HebrewName
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetCountryByHEBREWNAME]
    @HebrewName nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Country],
        [ID],
        [ISO3166Numeric],
        [ISO3166Alpha2],
        [Name],
        [HebrewName],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [Currency],
        [Region],
        [IsGrayCountry]
    FROM [Country]
    WHERE [HebrewName] = @HebrewName
;
END

GO

-- Procedure for Index: IXCountry_ISO3166Alpha2
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetCountryByISO3166ALPHA2]
    @ISO3166Alpha2 varchar(2)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Country],
        [ID],
        [ISO3166Numeric],
        [ISO3166Alpha2],
        [Name],
        [HebrewName],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [Currency],
        [Region],
        [IsGrayCountry]
    FROM [Country]
    WHERE [ISO3166Alpha2] = @ISO3166Alpha2
;
END

GO

-- Procedure for Index: IXCountry_ISO3166Numeric
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetCountryByISO3166NUMERIC]
    @ISO3166Numeric varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Country],
        [ID],
        [ISO3166Numeric],
        [ISO3166Alpha2],
        [Name],
        [HebrewName],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [Currency],
        [Region],
        [IsGrayCountry]
    FROM [Country]
    WHERE [ISO3166Numeric] = @ISO3166Numeric
;
END

GO

-- Procedure for Index: IXCountry_Name
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetCountryByNAME]
    @Name varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Country],
        [ID],
        [ISO3166Numeric],
        [ISO3166Alpha2],
        [Name],
        [HebrewName],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [Currency],
        [Region],
        [IsGrayCountry]
    FROM [Country]
    WHERE [Name] = @Name
;
END

GO


-- =========================================
-- Stored Procedures for Table: CreditGuard
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllCreditGuards]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CreditGuard],
        [ChangedBy],
        [ChangedOn],
        [UpdatingLoginID],
        [PurchasesMadeByDate01],
        [PaymentDate01],
        [IsPaidNextMonth01],
        [PaymentDate02],
        [WebAPIURL],
        [WebAPILoginUserName],
        [entWebAPILoginPassword],
        [WebAPIMainTerminalNumber],
        [WebAPITerminalNumber],
        [RedirectDealerNumber],
        [RedirectMainTerminalNumber],
        [RedirectTerminalNumber],
        [RedirectURL],
        [RedirectLoginUserName],
        [entRedirectLoginPassword],
        [RedirectPageDesignMid],
        [MaximumInterestRate3MonthsAndBelow],
        [MaximumInterestRateAbove3Months]
    FROM [CreditGuard]
    ORDER BY [TableName_CreditGuard]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetCreditGuardByID]
    @TableName_CreditGuard bit
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CreditGuard],
        [ChangedBy],
        [ChangedOn],
        [UpdatingLoginID],
        [PurchasesMadeByDate01],
        [PaymentDate01],
        [IsPaidNextMonth01],
        [PaymentDate02],
        [WebAPIURL],
        [WebAPILoginUserName],
        [entWebAPILoginPassword],
        [WebAPIMainTerminalNumber],
        [WebAPITerminalNumber],
        [RedirectDealerNumber],
        [RedirectMainTerminalNumber],
        [RedirectTerminalNumber],
        [RedirectURL],
        [RedirectLoginUserName],
        [entRedirectLoginPassword],
        [RedirectPageDesignMid],
        [MaximumInterestRate3MonthsAndBelow],
        [MaximumInterestRateAbove3Months]
    FROM [CreditGuard]
    WHERE [TableName_CreditGuard] = @TableName_CreditGuard;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddCreditGuard]
    @UpdatingLoginID bigint = NULL,
    @PurchasesMadeByDate01 int = NULL,
    @PaymentDate01 int = NULL,
    @IsPaidNextMonth01 bit = NULL,
    @PaymentDate02 int = NULL,
    @WebAPIURL varchar(50) = NULL,
    @WebAPILoginUserName varchar(50) = NULL,
    @entWebAPILoginPassword varchar(MAX) = NULL,
    @WebAPIMainTerminalNumber varchar(50) = NULL,
    @WebAPITerminalNumber varchar(50) = NULL,
    @RedirectDealerNumber varchar(50) = NULL,
    @RedirectMainTerminalNumber varchar(50) = NULL,
    @RedirectTerminalNumber varchar(50) = NULL,
    @RedirectURL varchar(50) = NULL,
    @RedirectLoginUserName varchar(50) = NULL,
    @entRedirectLoginPassword varchar(MAX) = NULL,
    @RedirectPageDesignMid varchar(50) = NULL,
    @MaximumInterestRate3MonthsAndBelow decimal(18,0) = NULL,
    @MaximumInterestRateAbove3Months decimal(18,0) = NULL
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [CreditGuard] (
        [UpdatingLoginID],
        [PurchasesMadeByDate01],
        [PaymentDate01],
        [IsPaidNextMonth01],
        [PaymentDate02],
        [WebAPIURL],
        [WebAPILoginUserName],
        [entWebAPILoginPassword],
        [WebAPIMainTerminalNumber],
        [WebAPITerminalNumber],
        [RedirectDealerNumber],
        [RedirectMainTerminalNumber],
        [RedirectTerminalNumber],
        [RedirectURL],
        [RedirectLoginUserName],
        [entRedirectLoginPassword],
        [RedirectPageDesignMid],
        [MaximumInterestRate3MonthsAndBelow],
        [MaximumInterestRateAbove3Months]
    )
    VALUES (
        @UpdatingLoginID,
        @PurchasesMadeByDate01,
        @PaymentDate01,
        @IsPaidNextMonth01,
        @PaymentDate02,
        @WebAPIURL,
        @WebAPILoginUserName,
        @entWebAPILoginPassword,
        @WebAPIMainTerminalNumber,
        @WebAPITerminalNumber,
        @RedirectDealerNumber,
        @RedirectMainTerminalNumber,
        @RedirectTerminalNumber,
        @RedirectURL,
        @RedirectLoginUserName,
        @entRedirectLoginPassword,
        @RedirectPageDesignMid,
        @MaximumInterestRate3MonthsAndBelow,
        @MaximumInterestRateAbove3Months
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateCreditGuard]
    @TableName_CreditGuard bit,
    @UpdatingLoginID bigint = NULL,
    @PurchasesMadeByDate01 int = NULL,
    @PaymentDate01 int = NULL,
    @IsPaidNextMonth01 bit = NULL,
    @PaymentDate02 int = NULL,
    @WebAPIURL varchar(50) = NULL,
    @WebAPILoginUserName varchar(50) = NULL,
    @entWebAPILoginPassword varchar(MAX) = NULL,
    @WebAPIMainTerminalNumber varchar(50) = NULL,
    @WebAPITerminalNumber varchar(50) = NULL,
    @RedirectDealerNumber varchar(50) = NULL,
    @RedirectMainTerminalNumber varchar(50) = NULL,
    @RedirectTerminalNumber varchar(50) = NULL,
    @RedirectURL varchar(50) = NULL,
    @RedirectLoginUserName varchar(50) = NULL,
    @entRedirectLoginPassword varchar(MAX) = NULL,
    @RedirectPageDesignMid varchar(50) = NULL,
    @MaximumInterestRate3MonthsAndBelow decimal(18,0) = NULL,
    @MaximumInterestRateAbove3Months decimal(18,0) = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [CreditGuard]
    SET
        [UpdatingLoginID] = @UpdatingLoginID,
        [PurchasesMadeByDate01] = @PurchasesMadeByDate01,
        [PaymentDate01] = @PaymentDate01,
        [IsPaidNextMonth01] = @IsPaidNextMonth01,
        [PaymentDate02] = @PaymentDate02,
        [WebAPIURL] = @WebAPIURL,
        [WebAPILoginUserName] = @WebAPILoginUserName,
        [entWebAPILoginPassword] = @entWebAPILoginPassword,
        [WebAPIMainTerminalNumber] = @WebAPIMainTerminalNumber,
        [WebAPITerminalNumber] = @WebAPITerminalNumber,
        [RedirectDealerNumber] = @RedirectDealerNumber,
        [RedirectMainTerminalNumber] = @RedirectMainTerminalNumber,
        [RedirectTerminalNumber] = @RedirectTerminalNumber,
        [RedirectURL] = @RedirectURL,
        [RedirectLoginUserName] = @RedirectLoginUserName,
        [entRedirectLoginPassword] = @entRedirectLoginPassword,
        [RedirectPageDesignMid] = @RedirectPageDesignMid,
        [MaximumInterestRate3MonthsAndBelow] = @MaximumInterestRate3MonthsAndBelow,
        [MaximumInterestRateAbove3Months] = @MaximumInterestRateAbove3Months,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [TableName_CreditGuard] = @TableName_CreditGuard;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteCreditGuard]
    @TableName_CreditGuard bit
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [CreditGuard]
    WHERE [TableName_CreditGuard] = @TableName_CreditGuard;
END

GO



-- =========================================
-- Stored Procedures for Table: Customer
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllCustomers]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_Customer],
            t.[ID],
            t.[FirstName],
            t.[LastName],
            t.[FirstNameLatin],
            t.[LastNameLatin],
            t.[email],
            t.[BirthDate],
            t.[IsraelIDNumber],
            t.[lkpPassportCountry_Country],
            t.[PassportNumber],
            t.[DateIssued],
            t.[ExpiryDateObs],
            t.[clc_CustomerIdentifier],
            t.[CellphoneNumber],
            t.[HomePhoneNumber],
            t.[ActualAddressNumber],
            t.[ActualAddressStreet],
            t.[ActualAddressCity],
            t.[ActualZipCode],
            t.[MailAddressNumber],
            t.[MailAddressStreet],
            t.[MailAddressCity],
            t.[MailZipCode],
            t.[enmGender],
            t.[clc_WhenRegistered],
            t.[enmLanguage],
            t.[spt_Comment],
            t.[spt_IsEnabled],
            t.[IsEnabledChangedBy],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            t.[spt_HasSignedServiceRequest],
            t.[lkpBank],
            t.[lkpBranch],
            t.[BankAccount],
            t.[lkpSecretQuestion],
            t.[entResponseToSecretQuestion],
            t.[SAPAccountNumber],
            t.[enmMessagingMode],
            t.[enmCustomerType],
            t.[spt_enmIsOnTerrorList],
            t.[scb_enmIsOnTerrorList],
            t.[spt_TerrorListUpdatedOn],
            t.[UserPhoto],
            t.[CustomerClubID],
            t.[AssignedDistributorID],
            t.[upl_TZFront],
            t.[upl_TZBack],
            t.[upl_Passport],
            t.[upl_Mugshot],
            t.[upl_ManiDocumentation],
            t.[ActualAddressApt],
            t.[MailAddressApt],
            t.[entSecurityCode],
            t.[upl_BankDocumentation],
            t.[spt_enmBankDocumentationStatus_DocumentationStatus],
            t.[scb_enmBankDocumentationStatus_DocumentationStatus],
            t.[Scratch],
            t.[IsBusiness],
            t.[BusinessName],
            t.[spt_enmBusinessDocumentationStatus_DocumentationStatus],
            t.[scb_enmBusinessDocumentationStatus_DocumentationStatus],
            t.[upl_LivenessVideo],
            t.[upl_LivenessPicture],
            t.[VerificationResults],
            t.[OCRSuccess],
            t.[LivenessSuccess],
            t.[BiometricMatchSuccess],
            t.[BiometricMatchScore],
            t.[IsRejected],
            t.[RejectedReason],
            t.[upl_PaymentsDocumentation],
            t.[IPRegisteredFrom],
            t.[upl_DLFront],
            t.[upl_DLBack],
            t.[upl_FailedDocFront],
            t.[enmLastIDTypeRecd_IdentificationMethod],
            t.[upl_BusinessLogo],
            t.[spt_enmSecurityTier],
            t.[spt_BusinessLogoNeedsApproval],
            t.[spt_enmSecurityTierChangeStatus_DocumentationStatus],
            t.[scb_enmSecurityTierChangeStatus_DocumentationStatus],
            t.[upl_FailedDocBack],
            t.[CaseNumber],
            t.[FailedDocDetails],
            t.[upl_FailedDocLivenessPicture],
            t.[upl_FailedDocLivenessVideo],
            t.[upl_FailedDocMugshot],
            t.[ExpiryTZ],
            t.[ExpiryPassport],
            t.[ExpiryDL],
            t.[upl_BusinessDocumentation],
            t.[ActualAddressStreetLatin],
            t.[ActualAddressCityLatin],
            p1.[Text] AS [CustomerClubID_Text],
            p2.[Text] AS [AssignedDistributorID_Text]
        FROM [Customer] t
        LEFT JOIN [ccvwComboList_CustomerClub] p1 ON t.[CustomerClubID] = p1.[ID]
        LEFT JOIN [ccvwComboList_Distributor] p2 ON t.[AssignedDistributorID] = p2.[ID]
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_Customer],
            [ID],
            [FirstName],
            [LastName],
            [FirstNameLatin],
            [LastNameLatin],
            [email],
            [BirthDate],
            [IsraelIDNumber],
            [lkpPassportCountry_Country],
            [PassportNumber],
            [DateIssued],
            [ExpiryDateObs],
            [clc_CustomerIdentifier],
            [CellphoneNumber],
            [HomePhoneNumber],
            [ActualAddressNumber],
            [ActualAddressStreet],
            [ActualAddressCity],
            [ActualZipCode],
            [MailAddressNumber],
            [MailAddressStreet],
            [MailAddressCity],
            [MailZipCode],
            [enmGender],
            [clc_WhenRegistered],
            [enmLanguage],
            [spt_Comment],
            [spt_IsEnabled],
            [IsEnabledChangedBy],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID],
            [spt_HasSignedServiceRequest],
            [lkpBank],
            [lkpBranch],
            [BankAccount],
            [lkpSecretQuestion],
            [entResponseToSecretQuestion],
            [SAPAccountNumber],
            [enmMessagingMode],
            [enmCustomerType],
            [spt_enmIsOnTerrorList],
            [scb_enmIsOnTerrorList],
            [spt_TerrorListUpdatedOn],
            [UserPhoto],
            [CustomerClubID],
            [AssignedDistributorID],
            [upl_TZFront],
            [upl_TZBack],
            [upl_Passport],
            [upl_Mugshot],
            [upl_ManiDocumentation],
            [ActualAddressApt],
            [MailAddressApt],
            [entSecurityCode],
            [upl_BankDocumentation],
            [spt_enmBankDocumentationStatus_DocumentationStatus],
            [scb_enmBankDocumentationStatus_DocumentationStatus],
            [Scratch],
            [IsBusiness],
            [BusinessName],
            [spt_enmBusinessDocumentationStatus_DocumentationStatus],
            [scb_enmBusinessDocumentationStatus_DocumentationStatus],
            [upl_LivenessVideo],
            [upl_LivenessPicture],
            [VerificationResults],
            [OCRSuccess],
            [LivenessSuccess],
            [BiometricMatchSuccess],
            [BiometricMatchScore],
            [IsRejected],
            [RejectedReason],
            [upl_PaymentsDocumentation],
            [IPRegisteredFrom],
            [upl_DLFront],
            [upl_DLBack],
            [upl_FailedDocFront],
            [enmLastIDTypeRecd_IdentificationMethod],
            [upl_BusinessLogo],
            [spt_enmSecurityTier],
            [spt_BusinessLogoNeedsApproval],
            [spt_enmSecurityTierChangeStatus_DocumentationStatus],
            [scb_enmSecurityTierChangeStatus_DocumentationStatus],
            [upl_FailedDocBack],
            [CaseNumber],
            [FailedDocDetails],
            [upl_FailedDocLivenessPicture],
            [upl_FailedDocLivenessVideo],
            [upl_FailedDocMugshot],
            [ExpiryTZ],
            [ExpiryPassport],
            [ExpiryDL],
            [upl_BusinessDocumentation],
            [ActualAddressStreetLatin],
            [ActualAddressCityLatin]
        FROM [Customer]
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredCustomers]
    @AssignedDistributorID INT = NULL,
    @CellphoneNumber VARCHAR(50) = NULL,
    @clc_CustomerIdentifier VARCHAR(104) = NULL,
    @clc_WhenRegistered DATETIME = NULL,
    @spt_enmBankDocumentationStatus_DocumentationStatus VARCHAR(50) = NULL,
    @CustomerClubID INT = NULL,
    @enmCustomerType VARCHAR(50) = NULL,
    @spt_enmIsOnTerrorList VARCHAR(50) = NULL,
    @spt_IsEnabled BIT = NULL,
    @spt_BusinessLogoNeedsApproval BIT = NULL,
    @LastName NVARCHAR(100) = NULL,
    @LastNameLatin VARCHAR(50) = NULL,
    @spt_enmSecurityTier VARCHAR(50) = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_Customer],
            t.[ID],
            t.[FirstName],
            t.[LastName],
            t.[FirstNameLatin],
            t.[LastNameLatin],
            t.[email],
            t.[BirthDate],
            t.[IsraelIDNumber],
            t.[lkpPassportCountry_Country],
            t.[PassportNumber],
            t.[DateIssued],
            t.[ExpiryDateObs],
            t.[clc_CustomerIdentifier],
            t.[CellphoneNumber],
            t.[HomePhoneNumber],
            t.[ActualAddressNumber],
            t.[ActualAddressStreet],
            t.[ActualAddressCity],
            t.[ActualZipCode],
            t.[MailAddressNumber],
            t.[MailAddressStreet],
            t.[MailAddressCity],
            t.[MailZipCode],
            t.[enmGender],
            t.[clc_WhenRegistered],
            t.[enmLanguage],
            t.[spt_Comment],
            t.[spt_IsEnabled],
            t.[IsEnabledChangedBy],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            t.[spt_HasSignedServiceRequest],
            t.[lkpBank],
            t.[lkpBranch],
            t.[BankAccount],
            t.[lkpSecretQuestion],
            t.[entResponseToSecretQuestion],
            t.[SAPAccountNumber],
            t.[enmMessagingMode],
            t.[enmCustomerType],
            t.[spt_enmIsOnTerrorList],
            t.[scb_enmIsOnTerrorList],
            t.[spt_TerrorListUpdatedOn],
            t.[UserPhoto],
            t.[CustomerClubID],
            t.[AssignedDistributorID],
            t.[upl_TZFront],
            t.[upl_TZBack],
            t.[upl_Passport],
            t.[upl_Mugshot],
            t.[upl_ManiDocumentation],
            t.[ActualAddressApt],
            t.[MailAddressApt],
            t.[entSecurityCode],
            t.[upl_BankDocumentation],
            t.[spt_enmBankDocumentationStatus_DocumentationStatus],
            t.[scb_enmBankDocumentationStatus_DocumentationStatus],
            t.[Scratch],
            t.[IsBusiness],
            t.[BusinessName],
            t.[spt_enmBusinessDocumentationStatus_DocumentationStatus],
            t.[scb_enmBusinessDocumentationStatus_DocumentationStatus],
            t.[upl_LivenessVideo],
            t.[upl_LivenessPicture],
            t.[VerificationResults],
            t.[OCRSuccess],
            t.[LivenessSuccess],
            t.[BiometricMatchSuccess],
            t.[BiometricMatchScore],
            t.[IsRejected],
            t.[RejectedReason],
            t.[upl_PaymentsDocumentation],
            t.[IPRegisteredFrom],
            t.[upl_DLFront],
            t.[upl_DLBack],
            t.[upl_FailedDocFront],
            t.[enmLastIDTypeRecd_IdentificationMethod],
            t.[upl_BusinessLogo],
            t.[spt_enmSecurityTier],
            t.[spt_BusinessLogoNeedsApproval],
            t.[spt_enmSecurityTierChangeStatus_DocumentationStatus],
            t.[scb_enmSecurityTierChangeStatus_DocumentationStatus],
            t.[upl_FailedDocBack],
            t.[CaseNumber],
            t.[FailedDocDetails],
            t.[upl_FailedDocLivenessPicture],
            t.[upl_FailedDocLivenessVideo],
            t.[upl_FailedDocMugshot],
            t.[ExpiryTZ],
            t.[ExpiryPassport],
            t.[ExpiryDL],
            t.[upl_BusinessDocumentation],
            t.[ActualAddressStreetLatin],
            t.[ActualAddressCityLatin],
            p1.[Text] AS [CustomerClubID_Text],
            p2.[Text] AS [AssignedDistributorID_Text]
        FROM [Customer] t
        LEFT JOIN [ccvwComboList_CustomerClub] p1 ON t.[CustomerClubID] = p1.[ID]
        LEFT JOIN [ccvwComboList_Distributor] p2 ON t.[AssignedDistributorID] = p2.[ID]
        WHERE 1=1
          AND (@AssignedDistributorID IS NULL OR t.[AssignedDistributorID] = @AssignedDistributorID)
          AND (@CellphoneNumber IS NULL OR t.[CellphoneNumber] LIKE '%' + @CellphoneNumber + '%')
          AND (@clc_CustomerIdentifier IS NULL OR t.[clc_CustomerIdentifier] LIKE '%' + @clc_CustomerIdentifier + '%')
          AND (@clc_WhenRegistered IS NULL OR t.[clc_WhenRegistered] = @clc_WhenRegistered)
          AND (@spt_enmBankDocumentationStatus_DocumentationStatus IS NULL OR t.[spt_enmBankDocumentationStatus_DocumentationStatus] LIKE '%' + @spt_enmBankDocumentationStatus_DocumentationStatus + '%')
          AND (@CustomerClubID IS NULL OR t.[CustomerClubID] = @CustomerClubID)
          AND (@enmCustomerType IS NULL OR t.[enmCustomerType] LIKE '%' + @enmCustomerType + '%')
          AND (@spt_enmIsOnTerrorList IS NULL OR t.[spt_enmIsOnTerrorList] LIKE '%' + @spt_enmIsOnTerrorList + '%')
          AND (@spt_IsEnabled IS NULL OR t.[spt_IsEnabled] = @spt_IsEnabled)
          AND (@spt_BusinessLogoNeedsApproval IS NULL OR t.[spt_BusinessLogoNeedsApproval] = @spt_BusinessLogoNeedsApproval)
          AND (@LastName IS NULL OR t.[LastName] LIKE '%' + @LastName + '%')
          AND (@LastNameLatin IS NULL OR t.[LastNameLatin] LIKE '%' + @LastNameLatin + '%')
          AND (@spt_enmSecurityTier IS NULL OR t.[spt_enmSecurityTier] LIKE '%' + @spt_enmSecurityTier + '%')
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_Customer],
            [ID],
            [FirstName],
            [LastName],
            [FirstNameLatin],
            [LastNameLatin],
            [email],
            [BirthDate],
            [IsraelIDNumber],
            [lkpPassportCountry_Country],
            [PassportNumber],
            [DateIssued],
            [ExpiryDateObs],
            [clc_CustomerIdentifier],
            [CellphoneNumber],
            [HomePhoneNumber],
            [ActualAddressNumber],
            [ActualAddressStreet],
            [ActualAddressCity],
            [ActualZipCode],
            [MailAddressNumber],
            [MailAddressStreet],
            [MailAddressCity],
            [MailZipCode],
            [enmGender],
            [clc_WhenRegistered],
            [enmLanguage],
            [spt_Comment],
            [spt_IsEnabled],
            [IsEnabledChangedBy],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID],
            [spt_HasSignedServiceRequest],
            [lkpBank],
            [lkpBranch],
            [BankAccount],
            [lkpSecretQuestion],
            [entResponseToSecretQuestion],
            [SAPAccountNumber],
            [enmMessagingMode],
            [enmCustomerType],
            [spt_enmIsOnTerrorList],
            [scb_enmIsOnTerrorList],
            [spt_TerrorListUpdatedOn],
            [UserPhoto],
            [CustomerClubID],
            [AssignedDistributorID],
            [upl_TZFront],
            [upl_TZBack],
            [upl_Passport],
            [upl_Mugshot],
            [upl_ManiDocumentation],
            [ActualAddressApt],
            [MailAddressApt],
            [entSecurityCode],
            [upl_BankDocumentation],
            [spt_enmBankDocumentationStatus_DocumentationStatus],
            [scb_enmBankDocumentationStatus_DocumentationStatus],
            [Scratch],
            [IsBusiness],
            [BusinessName],
            [spt_enmBusinessDocumentationStatus_DocumentationStatus],
            [scb_enmBusinessDocumentationStatus_DocumentationStatus],
            [upl_LivenessVideo],
            [upl_LivenessPicture],
            [VerificationResults],
            [OCRSuccess],
            [LivenessSuccess],
            [BiometricMatchSuccess],
            [BiometricMatchScore],
            [IsRejected],
            [RejectedReason],
            [upl_PaymentsDocumentation],
            [IPRegisteredFrom],
            [upl_DLFront],
            [upl_DLBack],
            [upl_FailedDocFront],
            [enmLastIDTypeRecd_IdentificationMethod],
            [upl_BusinessLogo],
            [spt_enmSecurityTier],
            [spt_BusinessLogoNeedsApproval],
            [spt_enmSecurityTierChangeStatus_DocumentationStatus],
            [scb_enmSecurityTierChangeStatus_DocumentationStatus],
            [upl_FailedDocBack],
            [CaseNumber],
            [FailedDocDetails],
            [upl_FailedDocLivenessPicture],
            [upl_FailedDocLivenessVideo],
            [upl_FailedDocMugshot],
            [ExpiryTZ],
            [ExpiryPassport],
            [ExpiryDL],
            [upl_BusinessDocumentation],
            [ActualAddressStreetLatin],
            [ActualAddressCityLatin]
        FROM [Customer]
        WHERE 1=1
          AND (@AssignedDistributorID IS NULL OR [AssignedDistributorID] = @AssignedDistributorID)
          AND (@CellphoneNumber IS NULL OR [CellphoneNumber] LIKE '%' + @CellphoneNumber + '%')
          AND (@clc_CustomerIdentifier IS NULL OR [clc_CustomerIdentifier] LIKE '%' + @clc_CustomerIdentifier + '%')
          AND (@clc_WhenRegistered IS NULL OR [clc_WhenRegistered] = @clc_WhenRegistered)
          AND (@spt_enmBankDocumentationStatus_DocumentationStatus IS NULL OR [spt_enmBankDocumentationStatus_DocumentationStatus] LIKE '%' + @spt_enmBankDocumentationStatus_DocumentationStatus + '%')
          AND (@CustomerClubID IS NULL OR [CustomerClubID] = @CustomerClubID)
          AND (@enmCustomerType IS NULL OR [enmCustomerType] LIKE '%' + @enmCustomerType + '%')
          AND (@spt_enmIsOnTerrorList IS NULL OR [spt_enmIsOnTerrorList] LIKE '%' + @spt_enmIsOnTerrorList + '%')
          AND (@spt_IsEnabled IS NULL OR [spt_IsEnabled] = @spt_IsEnabled)
          AND (@spt_BusinessLogoNeedsApproval IS NULL OR [spt_BusinessLogoNeedsApproval] = @spt_BusinessLogoNeedsApproval)
          AND (@LastName IS NULL OR [LastName] LIKE '%' + @LastName + '%')
          AND (@LastNameLatin IS NULL OR [LastNameLatin] LIKE '%' + @LastNameLatin + '%')
          AND (@spt_enmSecurityTier IS NULL OR [spt_enmSecurityTier] LIKE '%' + @spt_enmSecurityTier + '%')
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetCustomerByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Customer],
        [ID],
        [FirstName],
        [LastName],
        [FirstNameLatin],
        [LastNameLatin],
        [email],
        [BirthDate],
        [IsraelIDNumber],
        [lkpPassportCountry_Country],
        [PassportNumber],
        [DateIssued],
        [ExpiryDateObs],
        [clc_CustomerIdentifier],
        [CellphoneNumber],
        [HomePhoneNumber],
        [ActualAddressNumber],
        [ActualAddressStreet],
        [ActualAddressCity],
        [ActualZipCode],
        [MailAddressNumber],
        [MailAddressStreet],
        [MailAddressCity],
        [MailZipCode],
        [enmGender],
        [clc_WhenRegistered],
        [enmLanguage],
        [spt_Comment],
        [spt_IsEnabled],
        [IsEnabledChangedBy],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spt_HasSignedServiceRequest],
        [lkpBank],
        [lkpBranch],
        [BankAccount],
        [lkpSecretQuestion],
        [entResponseToSecretQuestion],
        [SAPAccountNumber],
        [enmMessagingMode],
        [enmCustomerType],
        [spt_enmIsOnTerrorList],
        [scb_enmIsOnTerrorList],
        [spt_TerrorListUpdatedOn],
        [UserPhoto],
        [CustomerClubID],
        [AssignedDistributorID],
        [upl_TZFront],
        [upl_TZBack],
        [upl_Passport],
        [upl_Mugshot],
        [upl_ManiDocumentation],
        [ActualAddressApt],
        [MailAddressApt],
        [entSecurityCode],
        [upl_BankDocumentation],
        [spt_enmBankDocumentationStatus_DocumentationStatus],
        [scb_enmBankDocumentationStatus_DocumentationStatus],
        [Scratch],
        [IsBusiness],
        [BusinessName],
        [spt_enmBusinessDocumentationStatus_DocumentationStatus],
        [scb_enmBusinessDocumentationStatus_DocumentationStatus],
        [upl_LivenessVideo],
        [upl_LivenessPicture],
        [VerificationResults],
        [OCRSuccess],
        [LivenessSuccess],
        [BiometricMatchSuccess],
        [BiometricMatchScore],
        [IsRejected],
        [RejectedReason],
        [upl_PaymentsDocumentation],
        [IPRegisteredFrom],
        [upl_DLFront],
        [upl_DLBack],
        [upl_FailedDocFront],
        [enmLastIDTypeRecd_IdentificationMethod],
        [upl_BusinessLogo],
        [spt_enmSecurityTier],
        [spt_BusinessLogoNeedsApproval],
        [spt_enmSecurityTierChangeStatus_DocumentationStatus],
        [scb_enmSecurityTierChangeStatus_DocumentationStatus],
        [upl_FailedDocBack],
        [CaseNumber],
        [FailedDocDetails],
        [upl_FailedDocLivenessPicture],
        [upl_FailedDocLivenessVideo],
        [upl_FailedDocMugshot],
        [ExpiryTZ],
        [ExpiryPassport],
        [ExpiryDL],
        [upl_BusinessDocumentation],
        [ActualAddressStreetLatin],
        [ActualAddressCityLatin]
    FROM [Customer]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddCustomer]
    @TableName_Customer bit = NULL,
    @FirstName nvarchar(100),
    @LastName nvarchar(100),
    @FirstNameLatin varchar(50),
    @LastNameLatin varchar(50),
    @email varchar(50) = NULL,
    @BirthDate date = NULL,
    @IsraelIDNumber varchar(50) = NULL,
    @lkpPassportCountry_Country varchar(3) = NULL,
    @PassportNumber varchar(50) = NULL,
    @DateIssued date = NULL,
    @ExpiryDateObs date = NULL,
    @CellphoneNumber varchar(50) = NULL,
    @HomePhoneNumber varchar(50) = NULL,
    @ActualAddressNumber nvarchar(100) = NULL,
    @ActualAddressStreet nvarchar(100) = NULL,
    @ActualAddressCity nvarchar(100) = NULL,
    @ActualZipCode varchar(50) = NULL,
    @MailAddressNumber nvarchar(100) = NULL,
    @MailAddressStreet nvarchar(100) = NULL,
    @MailAddressCity nvarchar(100) = NULL,
    @MailZipCode varchar(50) = NULL,
    @enmGender varchar(10),
    @enmLanguage varchar(2),
    @spt_Comment nvarchar(MAX) = NULL,
    @spt_IsEnabled bit = NULL,
    @IsEnabledChangedBy nvarchar(100) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @spt_HasSignedServiceRequest bit = NULL,
    @lkpBank int = NULL,
    @lkpBranch int = NULL,
    @BankAccount varchar(50) = NULL,
    @lkpSecretQuestion varchar(50) = NULL,
    @entResponseToSecretQuestion varchar(MAX) = NULL,
    @SAPAccountNumber varchar(50) = NULL,
    @enmMessagingMode varchar(50) = NULL,
    @enmCustomerType varchar(50) = NULL,
    @spt_enmIsOnTerrorList varchar(50) = NULL,
    @spt_TerrorListUpdatedOn date = NULL,
    @UserPhoto varbinary(MAX) = NULL,
    @CustomerClubID bigint = NULL,
    @AssignedDistributorID bigint = NULL,
    @upl_TZFront varchar(69) = NULL,
    @upl_TZBack varchar(69) = NULL,
    @upl_Passport varchar(69) = NULL,
    @upl_Mugshot varchar(69) = NULL,
    @upl_ManiDocumentation varchar(69) = NULL,
    @ActualAddressApt nvarchar(100) = NULL,
    @MailAddressApt nvarchar(100) = NULL,
    @entSecurityCode varchar(MAX) = NULL,
    @upl_BankDocumentation varchar(69) = NULL,
    @spt_enmBankDocumentationStatus_DocumentationStatus varchar(50) = NULL,
    @Scratch nvarchar(510) = NULL,
    @IsBusiness bit = NULL,
    @BusinessName nvarchar(100) = NULL,
    @spt_enmBusinessDocumentationStatus_DocumentationStatus varchar(50) = NULL,
    @upl_LivenessVideo varchar(69) = NULL,
    @upl_LivenessPicture varchar(69) = NULL,
    @VerificationResults varchar(1000) = NULL,
    @OCRSuccess bit = NULL,
    @LivenessSuccess bit = NULL,
    @BiometricMatchSuccess bit = NULL,
    @BiometricMatchScore float = NULL,
    @IsRejected bit = NULL,
    @RejectedReason nvarchar(480) = NULL,
    @upl_PaymentsDocumentation varchar(69) = NULL,
    @IPRegisteredFrom varchar(50) = NULL,
    @upl_DLFront varchar(69) = NULL,
    @upl_DLBack varchar(69) = NULL,
    @upl_FailedDocFront varchar(69) = NULL,
    @enmLastIDTypeRecd_IdentificationMethod varchar(50) = NULL,
    @upl_BusinessLogo varchar(69) = NULL,
    @spt_enmSecurityTier varchar(50) = NULL,
    @spt_BusinessLogoNeedsApproval bit = NULL,
    @spt_enmSecurityTierChangeStatus_DocumentationStatus varchar(50) = NULL,
    @upl_FailedDocBack varchar(69) = NULL,
    @CaseNumber varchar(50) = NULL,
    @FailedDocDetails nvarchar(3000) = NULL,
    @upl_FailedDocLivenessPicture varchar(69) = NULL,
    @upl_FailedDocLivenessVideo varchar(69) = NULL,
    @upl_FailedDocMugshot varchar(69) = NULL,
    @ExpiryTZ date = NULL,
    @ExpiryPassport date = NULL,
    @ExpiryDL date = NULL,
    @upl_BusinessDocumentation varchar(69) = NULL,
    @ActualAddressStreetLatin nvarchar(100) = NULL,
    @ActualAddressCityLatin nvarchar(100) = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [Customer] (
        [TableName_Customer],
        [FirstName],
        [LastName],
        [FirstNameLatin],
        [LastNameLatin],
        [email],
        [BirthDate],
        [IsraelIDNumber],
        [lkpPassportCountry_Country],
        [PassportNumber],
        [DateIssued],
        [ExpiryDateObs],
        [CellphoneNumber],
        [HomePhoneNumber],
        [ActualAddressNumber],
        [ActualAddressStreet],
        [ActualAddressCity],
        [ActualZipCode],
        [MailAddressNumber],
        [MailAddressStreet],
        [MailAddressCity],
        [MailZipCode],
        [enmGender],
        [enmLanguage],
        [spt_Comment],
        [spt_IsEnabled],
        [IsEnabledChangedBy],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spt_HasSignedServiceRequest],
        [lkpBank],
        [lkpBranch],
        [BankAccount],
        [lkpSecretQuestion],
        [entResponseToSecretQuestion],
        [SAPAccountNumber],
        [enmMessagingMode],
        [enmCustomerType],
        [spt_enmIsOnTerrorList],
        [spt_TerrorListUpdatedOn],
        [UserPhoto],
        [CustomerClubID],
        [AssignedDistributorID],
        [upl_TZFront],
        [upl_TZBack],
        [upl_Passport],
        [upl_Mugshot],
        [upl_ManiDocumentation],
        [ActualAddressApt],
        [MailAddressApt],
        [entSecurityCode],
        [upl_BankDocumentation],
        [spt_enmBankDocumentationStatus_DocumentationStatus],
        [Scratch],
        [IsBusiness],
        [BusinessName],
        [spt_enmBusinessDocumentationStatus_DocumentationStatus],
        [upl_LivenessVideo],
        [upl_LivenessPicture],
        [VerificationResults],
        [OCRSuccess],
        [LivenessSuccess],
        [BiometricMatchSuccess],
        [BiometricMatchScore],
        [IsRejected],
        [RejectedReason],
        [upl_PaymentsDocumentation],
        [IPRegisteredFrom],
        [upl_DLFront],
        [upl_DLBack],
        [upl_FailedDocFront],
        [enmLastIDTypeRecd_IdentificationMethod],
        [upl_BusinessLogo],
        [spt_enmSecurityTier],
        [spt_BusinessLogoNeedsApproval],
        [spt_enmSecurityTierChangeStatus_DocumentationStatus],
        [upl_FailedDocBack],
        [CaseNumber],
        [FailedDocDetails],
        [upl_FailedDocLivenessPicture],
        [upl_FailedDocLivenessVideo],
        [upl_FailedDocMugshot],
        [ExpiryTZ],
        [ExpiryPassport],
        [ExpiryDL],
        [upl_BusinessDocumentation],
        [ActualAddressStreetLatin],
        [ActualAddressCityLatin],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_Customer,
        @FirstName,
        @LastName,
        @FirstNameLatin,
        @LastNameLatin,
        @email,
        @BirthDate,
        @IsraelIDNumber,
        @lkpPassportCountry_Country,
        @PassportNumber,
        @DateIssued,
        @ExpiryDateObs,
        @CellphoneNumber,
        @HomePhoneNumber,
        @ActualAddressNumber,
        @ActualAddressStreet,
        @ActualAddressCity,
        @ActualZipCode,
        @MailAddressNumber,
        @MailAddressStreet,
        @MailAddressCity,
        @MailZipCode,
        @enmGender,
        @enmLanguage,
        @spt_Comment,
        @spt_IsEnabled,
        @IsEnabledChangedBy,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        @spt_HasSignedServiceRequest,
        @lkpBank,
        @lkpBranch,
        @BankAccount,
        @lkpSecretQuestion,
        @entResponseToSecretQuestion,
        @SAPAccountNumber,
        @enmMessagingMode,
        @enmCustomerType,
        @spt_enmIsOnTerrorList,
        @spt_TerrorListUpdatedOn,
        @UserPhoto,
        @CustomerClubID,
        @AssignedDistributorID,
        @upl_TZFront,
        @upl_TZBack,
        @upl_Passport,
        @upl_Mugshot,
        @upl_ManiDocumentation,
        @ActualAddressApt,
        @MailAddressApt,
        @entSecurityCode,
        @upl_BankDocumentation,
        @spt_enmBankDocumentationStatus_DocumentationStatus,
        @Scratch,
        @IsBusiness,
        @BusinessName,
        @spt_enmBusinessDocumentationStatus_DocumentationStatus,
        @upl_LivenessVideo,
        @upl_LivenessPicture,
        @VerificationResults,
        @OCRSuccess,
        @LivenessSuccess,
        @BiometricMatchSuccess,
        @BiometricMatchScore,
        @IsRejected,
        @RejectedReason,
        @upl_PaymentsDocumentation,
        @IPRegisteredFrom,
        @upl_DLFront,
        @upl_DLBack,
        @upl_FailedDocFront,
        @enmLastIDTypeRecd_IdentificationMethod,
        @upl_BusinessLogo,
        @spt_enmSecurityTier,
        @spt_BusinessLogoNeedsApproval,
        @spt_enmSecurityTierChangeStatus_DocumentationStatus,
        @upl_FailedDocBack,
        @CaseNumber,
        @FailedDocDetails,
        @upl_FailedDocLivenessPicture,
        @upl_FailedDocLivenessVideo,
        @upl_FailedDocMugshot,
        @ExpiryTZ,
        @ExpiryPassport,
        @ExpiryDL,
        @upl_BusinessDocumentation,
        @ActualAddressStreetLatin,
        @ActualAddressCityLatin,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateCustomer]
    @ID bigint,
    @TableName_Customer bit = NULL,
    @FirstName nvarchar(100),
    @LastName nvarchar(100),
    @FirstNameLatin varchar(50),
    @LastNameLatin varchar(50),
    @email varchar(50) = NULL,
    @BirthDate date = NULL,
    @IsraelIDNumber varchar(50) = NULL,
    @lkpPassportCountry_Country varchar(3) = NULL,
    @PassportNumber varchar(50) = NULL,
    @DateIssued date = NULL,
    @ExpiryDateObs date = NULL,
    @CellphoneNumber varchar(50) = NULL,
    @HomePhoneNumber varchar(50) = NULL,
    @ActualAddressNumber nvarchar(100) = NULL,
    @ActualAddressStreet nvarchar(100) = NULL,
    @ActualAddressCity nvarchar(100) = NULL,
    @ActualZipCode varchar(50) = NULL,
    @MailAddressNumber nvarchar(100) = NULL,
    @MailAddressStreet nvarchar(100) = NULL,
    @MailAddressCity nvarchar(100) = NULL,
    @MailZipCode varchar(50) = NULL,
    @enmGender varchar(10),
    @enmLanguage varchar(2),
    @spt_Comment nvarchar(MAX) = NULL,
    @spt_IsEnabled bit = NULL,
    @IsEnabledChangedBy nvarchar(100) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @spt_HasSignedServiceRequest bit = NULL,
    @lkpBank int = NULL,
    @lkpBranch int = NULL,
    @BankAccount varchar(50) = NULL,
    @lkpSecretQuestion varchar(50) = NULL,
    @entResponseToSecretQuestion varchar(MAX) = NULL,
    @SAPAccountNumber varchar(50) = NULL,
    @enmMessagingMode varchar(50) = NULL,
    @enmCustomerType varchar(50) = NULL,
    @spt_enmIsOnTerrorList varchar(50) = NULL,
    @scb_enmIsOnTerrorList nvarchar(200) = NULL,
    @spt_TerrorListUpdatedOn date = NULL,
    @UserPhoto varbinary(MAX) = NULL,
    @CustomerClubID bigint = NULL,
    @AssignedDistributorID bigint = NULL,
    @upl_TZFront varchar(69) = NULL,
    @upl_TZBack varchar(69) = NULL,
    @upl_Passport varchar(69) = NULL,
    @upl_Mugshot varchar(69) = NULL,
    @upl_ManiDocumentation varchar(69) = NULL,
    @ActualAddressApt nvarchar(100) = NULL,
    @MailAddressApt nvarchar(100) = NULL,
    @entSecurityCode varchar(MAX) = NULL,
    @upl_BankDocumentation varchar(69) = NULL,
    @spt_enmBankDocumentationStatus_DocumentationStatus varchar(50) = NULL,
    @scb_enmBankDocumentationStatus_DocumentationStatus nvarchar(200) = NULL,
    @Scratch nvarchar(510) = NULL,
    @IsBusiness bit = NULL,
    @BusinessName nvarchar(100) = NULL,
    @spt_enmBusinessDocumentationStatus_DocumentationStatus varchar(50) = NULL,
    @scb_enmBusinessDocumentationStatus_DocumentationStatus nvarchar(200) = NULL,
    @upl_LivenessVideo varchar(69) = NULL,
    @upl_LivenessPicture varchar(69) = NULL,
    @VerificationResults varchar(1000) = NULL,
    @OCRSuccess bit = NULL,
    @LivenessSuccess bit = NULL,
    @BiometricMatchSuccess bit = NULL,
    @BiometricMatchScore float = NULL,
    @IsRejected bit = NULL,
    @RejectedReason nvarchar(480) = NULL,
    @upl_PaymentsDocumentation varchar(69) = NULL,
    @IPRegisteredFrom varchar(50) = NULL,
    @upl_DLFront varchar(69) = NULL,
    @upl_DLBack varchar(69) = NULL,
    @upl_FailedDocFront varchar(69) = NULL,
    @enmLastIDTypeRecd_IdentificationMethod varchar(50) = NULL,
    @upl_BusinessLogo varchar(69) = NULL,
    @spt_enmSecurityTier varchar(50) = NULL,
    @spt_BusinessLogoNeedsApproval bit = NULL,
    @spt_enmSecurityTierChangeStatus_DocumentationStatus varchar(50) = NULL,
    @scb_enmSecurityTierChangeStatus_DocumentationStatus nvarchar(200) = NULL,
    @upl_FailedDocBack varchar(69) = NULL,
    @CaseNumber varchar(50) = NULL,
    @FailedDocDetails nvarchar(3000) = NULL,
    @upl_FailedDocLivenessPicture varchar(69) = NULL,
    @upl_FailedDocLivenessVideo varchar(69) = NULL,
    @upl_FailedDocMugshot varchar(69) = NULL,
    @ExpiryTZ date = NULL,
    @ExpiryPassport date = NULL,
    @ExpiryDL date = NULL,
    @upl_BusinessDocumentation varchar(69) = NULL,
    @ActualAddressStreetLatin nvarchar(100) = NULL,
    @ActualAddressCityLatin nvarchar(100) = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [Customer]
    SET
        [TableName_Customer] = @TableName_Customer,
        [FirstName] = @FirstName,
        [LastName] = @LastName,
        [FirstNameLatin] = @FirstNameLatin,
        [LastNameLatin] = @LastNameLatin,
        [email] = @email,
        [BirthDate] = @BirthDate,
        [IsraelIDNumber] = @IsraelIDNumber,
        [lkpPassportCountry_Country] = @lkpPassportCountry_Country,
        [PassportNumber] = @PassportNumber,
        [DateIssued] = @DateIssued,
        [ExpiryDateObs] = @ExpiryDateObs,
        [CellphoneNumber] = @CellphoneNumber,
        [HomePhoneNumber] = @HomePhoneNumber,
        [ActualAddressNumber] = @ActualAddressNumber,
        [ActualAddressStreet] = @ActualAddressStreet,
        [ActualAddressCity] = @ActualAddressCity,
        [ActualZipCode] = @ActualZipCode,
        [MailAddressNumber] = @MailAddressNumber,
        [MailAddressStreet] = @MailAddressStreet,
        [MailAddressCity] = @MailAddressCity,
        [MailZipCode] = @MailZipCode,
        [enmGender] = @enmGender,
        [enmLanguage] = @enmLanguage,
        [spt_Comment] = @spt_Comment,
        [spt_IsEnabled] = @spt_IsEnabled,
        [IsEnabledChangedBy] = @IsEnabledChangedBy,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [spt_HasSignedServiceRequest] = @spt_HasSignedServiceRequest,
        [lkpBank] = @lkpBank,
        [lkpBranch] = @lkpBranch,
        [BankAccount] = @BankAccount,
        [lkpSecretQuestion] = @lkpSecretQuestion,
        [entResponseToSecretQuestion] = @entResponseToSecretQuestion,
        [SAPAccountNumber] = @SAPAccountNumber,
        [enmMessagingMode] = @enmMessagingMode,
        [enmCustomerType] = @enmCustomerType,
        [spt_enmIsOnTerrorList] = @spt_enmIsOnTerrorList,
        [scb_enmIsOnTerrorList] = @scb_enmIsOnTerrorList,
        [spt_TerrorListUpdatedOn] = @spt_TerrorListUpdatedOn,
        [UserPhoto] = @UserPhoto,
        [CustomerClubID] = @CustomerClubID,
        [AssignedDistributorID] = @AssignedDistributorID,
        [upl_TZFront] = @upl_TZFront,
        [upl_TZBack] = @upl_TZBack,
        [upl_Passport] = @upl_Passport,
        [upl_Mugshot] = @upl_Mugshot,
        [upl_ManiDocumentation] = @upl_ManiDocumentation,
        [ActualAddressApt] = @ActualAddressApt,
        [MailAddressApt] = @MailAddressApt,
        [entSecurityCode] = @entSecurityCode,
        [upl_BankDocumentation] = @upl_BankDocumentation,
        [spt_enmBankDocumentationStatus_DocumentationStatus] = @spt_enmBankDocumentationStatus_DocumentationStatus,
        [scb_enmBankDocumentationStatus_DocumentationStatus] = @scb_enmBankDocumentationStatus_DocumentationStatus,
        [Scratch] = @Scratch,
        [IsBusiness] = @IsBusiness,
        [BusinessName] = @BusinessName,
        [spt_enmBusinessDocumentationStatus_DocumentationStatus] = @spt_enmBusinessDocumentationStatus_DocumentationStatus,
        [scb_enmBusinessDocumentationStatus_DocumentationStatus] = @scb_enmBusinessDocumentationStatus_DocumentationStatus,
        [upl_LivenessVideo] = @upl_LivenessVideo,
        [upl_LivenessPicture] = @upl_LivenessPicture,
        [VerificationResults] = @VerificationResults,
        [OCRSuccess] = @OCRSuccess,
        [LivenessSuccess] = @LivenessSuccess,
        [BiometricMatchSuccess] = @BiometricMatchSuccess,
        [BiometricMatchScore] = @BiometricMatchScore,
        [IsRejected] = @IsRejected,
        [RejectedReason] = @RejectedReason,
        [upl_PaymentsDocumentation] = @upl_PaymentsDocumentation,
        [IPRegisteredFrom] = @IPRegisteredFrom,
        [upl_DLFront] = @upl_DLFront,
        [upl_DLBack] = @upl_DLBack,
        [upl_FailedDocFront] = @upl_FailedDocFront,
        [enmLastIDTypeRecd_IdentificationMethod] = @enmLastIDTypeRecd_IdentificationMethod,
        [upl_BusinessLogo] = @upl_BusinessLogo,
        [spt_enmSecurityTier] = @spt_enmSecurityTier,
        [spt_BusinessLogoNeedsApproval] = @spt_BusinessLogoNeedsApproval,
        [spt_enmSecurityTierChangeStatus_DocumentationStatus] = @spt_enmSecurityTierChangeStatus_DocumentationStatus,
        [scb_enmSecurityTierChangeStatus_DocumentationStatus] = @scb_enmSecurityTierChangeStatus_DocumentationStatus,
        [upl_FailedDocBack] = @upl_FailedDocBack,
        [CaseNumber] = @CaseNumber,
        [FailedDocDetails] = @FailedDocDetails,
        [upl_FailedDocLivenessPicture] = @upl_FailedDocLivenessPicture,
        [upl_FailedDocLivenessVideo] = @upl_FailedDocLivenessVideo,
        [upl_FailedDocMugshot] = @upl_FailedDocMugshot,
        [ExpiryTZ] = @ExpiryTZ,
        [ExpiryPassport] = @ExpiryPassport,
        [ExpiryDL] = @ExpiryDL,
        [upl_BusinessDocumentation] = @upl_BusinessDocumentation,
        [ActualAddressStreetLatin] = @ActualAddressStreetLatin,
        [ActualAddressCityLatin] = @ActualAddressCityLatin,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteCustomer]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [Customer]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_Customer_AssignedDistributor
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetCustomerByASSIGNEDDISTRIBUTORID]
    @AssignedDistributorID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Customer],
        [ID],
        [FirstName],
        [LastName],
        [FirstNameLatin],
        [LastNameLatin],
        [email],
        [BirthDate],
        [IsraelIDNumber],
        [lkpPassportCountry_Country],
        [PassportNumber],
        [DateIssued],
        [ExpiryDateObs],
        [clc_CustomerIdentifier],
        [CellphoneNumber],
        [HomePhoneNumber],
        [ActualAddressNumber],
        [ActualAddressStreet],
        [ActualAddressCity],
        [ActualZipCode],
        [MailAddressNumber],
        [MailAddressStreet],
        [MailAddressCity],
        [MailZipCode],
        [enmGender],
        [clc_WhenRegistered],
        [enmLanguage],
        [spt_Comment],
        [spt_IsEnabled],
        [IsEnabledChangedBy],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spt_HasSignedServiceRequest],
        [lkpBank],
        [lkpBranch],
        [BankAccount],
        [lkpSecretQuestion],
        [entResponseToSecretQuestion],
        [SAPAccountNumber],
        [enmMessagingMode],
        [enmCustomerType],
        [spt_enmIsOnTerrorList],
        [scb_enmIsOnTerrorList],
        [spt_TerrorListUpdatedOn],
        [UserPhoto],
        [CustomerClubID],
        [AssignedDistributorID],
        [upl_TZFront],
        [upl_TZBack],
        [upl_Passport],
        [upl_Mugshot],
        [upl_ManiDocumentation],
        [ActualAddressApt],
        [MailAddressApt],
        [entSecurityCode],
        [upl_BankDocumentation],
        [spt_enmBankDocumentationStatus_DocumentationStatus],
        [scb_enmBankDocumentationStatus_DocumentationStatus],
        [Scratch],
        [IsBusiness],
        [BusinessName],
        [spt_enmBusinessDocumentationStatus_DocumentationStatus],
        [scb_enmBusinessDocumentationStatus_DocumentationStatus],
        [upl_LivenessVideo],
        [upl_LivenessPicture],
        [VerificationResults],
        [OCRSuccess],
        [LivenessSuccess],
        [BiometricMatchSuccess],
        [BiometricMatchScore],
        [IsRejected],
        [RejectedReason],
        [upl_PaymentsDocumentation],
        [IPRegisteredFrom],
        [upl_DLFront],
        [upl_DLBack],
        [upl_FailedDocFront],
        [enmLastIDTypeRecd_IdentificationMethod],
        [upl_BusinessLogo],
        [spt_enmSecurityTier],
        [spt_BusinessLogoNeedsApproval],
        [spt_enmSecurityTierChangeStatus_DocumentationStatus],
        [scb_enmSecurityTierChangeStatus_DocumentationStatus],
        [upl_FailedDocBack],
        [CaseNumber],
        [FailedDocDetails],
        [upl_FailedDocLivenessPicture],
        [upl_FailedDocLivenessVideo],
        [upl_FailedDocMugshot],
        [ExpiryTZ],
        [ExpiryPassport],
        [ExpiryDL],
        [upl_BusinessDocumentation],
        [ActualAddressStreetLatin],
        [ActualAddressCityLatin]
    FROM [Customer]
    WHERE [AssignedDistributorID] = @AssignedDistributorID
;
END

GO

-- Procedure for Index: IXCustomer_CellphoneNumber
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetCustomerByCELLPHONENUMBER]
    @CellphoneNumber varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Customer],
        [ID],
        [FirstName],
        [LastName],
        [FirstNameLatin],
        [LastNameLatin],
        [email],
        [BirthDate],
        [IsraelIDNumber],
        [lkpPassportCountry_Country],
        [PassportNumber],
        [DateIssued],
        [ExpiryDateObs],
        [clc_CustomerIdentifier],
        [CellphoneNumber],
        [HomePhoneNumber],
        [ActualAddressNumber],
        [ActualAddressStreet],
        [ActualAddressCity],
        [ActualZipCode],
        [MailAddressNumber],
        [MailAddressStreet],
        [MailAddressCity],
        [MailZipCode],
        [enmGender],
        [clc_WhenRegistered],
        [enmLanguage],
        [spt_Comment],
        [spt_IsEnabled],
        [IsEnabledChangedBy],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spt_HasSignedServiceRequest],
        [lkpBank],
        [lkpBranch],
        [BankAccount],
        [lkpSecretQuestion],
        [entResponseToSecretQuestion],
        [SAPAccountNumber],
        [enmMessagingMode],
        [enmCustomerType],
        [spt_enmIsOnTerrorList],
        [scb_enmIsOnTerrorList],
        [spt_TerrorListUpdatedOn],
        [UserPhoto],
        [CustomerClubID],
        [AssignedDistributorID],
        [upl_TZFront],
        [upl_TZBack],
        [upl_Passport],
        [upl_Mugshot],
        [upl_ManiDocumentation],
        [ActualAddressApt],
        [MailAddressApt],
        [entSecurityCode],
        [upl_BankDocumentation],
        [spt_enmBankDocumentationStatus_DocumentationStatus],
        [scb_enmBankDocumentationStatus_DocumentationStatus],
        [Scratch],
        [IsBusiness],
        [BusinessName],
        [spt_enmBusinessDocumentationStatus_DocumentationStatus],
        [scb_enmBusinessDocumentationStatus_DocumentationStatus],
        [upl_LivenessVideo],
        [upl_LivenessPicture],
        [VerificationResults],
        [OCRSuccess],
        [LivenessSuccess],
        [BiometricMatchSuccess],
        [BiometricMatchScore],
        [IsRejected],
        [RejectedReason],
        [upl_PaymentsDocumentation],
        [IPRegisteredFrom],
        [upl_DLFront],
        [upl_DLBack],
        [upl_FailedDocFront],
        [enmLastIDTypeRecd_IdentificationMethod],
        [upl_BusinessLogo],
        [spt_enmSecurityTier],
        [spt_BusinessLogoNeedsApproval],
        [spt_enmSecurityTierChangeStatus_DocumentationStatus],
        [scb_enmSecurityTierChangeStatus_DocumentationStatus],
        [upl_FailedDocBack],
        [CaseNumber],
        [FailedDocDetails],
        [upl_FailedDocLivenessPicture],
        [upl_FailedDocLivenessVideo],
        [upl_FailedDocMugshot],
        [ExpiryTZ],
        [ExpiryPassport],
        [ExpiryDL],
        [upl_BusinessDocumentation],
        [ActualAddressStreetLatin],
        [ActualAddressCityLatin]
    FROM [Customer]
    WHERE [CellphoneNumber] = @CellphoneNumber
;
END

GO

-- Procedure for Index: IXCustomer_CustomerIdentifier
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetCustomerByCLCCUSTOMERIDENTIFIER]
    @clc_CustomerIdentifier varchar(104)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Customer],
        [ID],
        [FirstName],
        [LastName],
        [FirstNameLatin],
        [LastNameLatin],
        [email],
        [BirthDate],
        [IsraelIDNumber],
        [lkpPassportCountry_Country],
        [PassportNumber],
        [DateIssued],
        [ExpiryDateObs],
        [clc_CustomerIdentifier],
        [CellphoneNumber],
        [HomePhoneNumber],
        [ActualAddressNumber],
        [ActualAddressStreet],
        [ActualAddressCity],
        [ActualZipCode],
        [MailAddressNumber],
        [MailAddressStreet],
        [MailAddressCity],
        [MailZipCode],
        [enmGender],
        [clc_WhenRegistered],
        [enmLanguage],
        [spt_Comment],
        [spt_IsEnabled],
        [IsEnabledChangedBy],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spt_HasSignedServiceRequest],
        [lkpBank],
        [lkpBranch],
        [BankAccount],
        [lkpSecretQuestion],
        [entResponseToSecretQuestion],
        [SAPAccountNumber],
        [enmMessagingMode],
        [enmCustomerType],
        [spt_enmIsOnTerrorList],
        [scb_enmIsOnTerrorList],
        [spt_TerrorListUpdatedOn],
        [UserPhoto],
        [CustomerClubID],
        [AssignedDistributorID],
        [upl_TZFront],
        [upl_TZBack],
        [upl_Passport],
        [upl_Mugshot],
        [upl_ManiDocumentation],
        [ActualAddressApt],
        [MailAddressApt],
        [entSecurityCode],
        [upl_BankDocumentation],
        [spt_enmBankDocumentationStatus_DocumentationStatus],
        [scb_enmBankDocumentationStatus_DocumentationStatus],
        [Scratch],
        [IsBusiness],
        [BusinessName],
        [spt_enmBusinessDocumentationStatus_DocumentationStatus],
        [scb_enmBusinessDocumentationStatus_DocumentationStatus],
        [upl_LivenessVideo],
        [upl_LivenessPicture],
        [VerificationResults],
        [OCRSuccess],
        [LivenessSuccess],
        [BiometricMatchSuccess],
        [BiometricMatchScore],
        [IsRejected],
        [RejectedReason],
        [upl_PaymentsDocumentation],
        [IPRegisteredFrom],
        [upl_DLFront],
        [upl_DLBack],
        [upl_FailedDocFront],
        [enmLastIDTypeRecd_IdentificationMethod],
        [upl_BusinessLogo],
        [spt_enmSecurityTier],
        [spt_BusinessLogoNeedsApproval],
        [spt_enmSecurityTierChangeStatus_DocumentationStatus],
        [scb_enmSecurityTierChangeStatus_DocumentationStatus],
        [upl_FailedDocBack],
        [CaseNumber],
        [FailedDocDetails],
        [upl_FailedDocLivenessPicture],
        [upl_FailedDocLivenessVideo],
        [upl_FailedDocMugshot],
        [ExpiryTZ],
        [ExpiryPassport],
        [ExpiryDL],
        [upl_BusinessDocumentation],
        [ActualAddressStreetLatin],
        [ActualAddressCityLatin]
    FROM [Customer]
    WHERE [clc_CustomerIdentifier] = @clc_CustomerIdentifier
;
END

GO

-- Procedure for Index: IX_Customer
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillCustomerByCLCWHENREGISTERED]
    @clc_WhenRegistered datetime
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Customer],
        [ID],
        [FirstName],
        [LastName],
        [FirstNameLatin],
        [LastNameLatin],
        [email],
        [BirthDate],
        [IsraelIDNumber],
        [lkpPassportCountry_Country],
        [PassportNumber],
        [DateIssued],
        [ExpiryDateObs],
        [clc_CustomerIdentifier],
        [CellphoneNumber],
        [HomePhoneNumber],
        [ActualAddressNumber],
        [ActualAddressStreet],
        [ActualAddressCity],
        [ActualZipCode],
        [MailAddressNumber],
        [MailAddressStreet],
        [MailAddressCity],
        [MailZipCode],
        [enmGender],
        [clc_WhenRegistered],
        [enmLanguage],
        [spt_Comment],
        [spt_IsEnabled],
        [IsEnabledChangedBy],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spt_HasSignedServiceRequest],
        [lkpBank],
        [lkpBranch],
        [BankAccount],
        [lkpSecretQuestion],
        [entResponseToSecretQuestion],
        [SAPAccountNumber],
        [enmMessagingMode],
        [enmCustomerType],
        [spt_enmIsOnTerrorList],
        [scb_enmIsOnTerrorList],
        [spt_TerrorListUpdatedOn],
        [UserPhoto],
        [CustomerClubID],
        [AssignedDistributorID],
        [upl_TZFront],
        [upl_TZBack],
        [upl_Passport],
        [upl_Mugshot],
        [upl_ManiDocumentation],
        [ActualAddressApt],
        [MailAddressApt],
        [entSecurityCode],
        [upl_BankDocumentation],
        [spt_enmBankDocumentationStatus_DocumentationStatus],
        [scb_enmBankDocumentationStatus_DocumentationStatus],
        [Scratch],
        [IsBusiness],
        [BusinessName],
        [spt_enmBusinessDocumentationStatus_DocumentationStatus],
        [scb_enmBusinessDocumentationStatus_DocumentationStatus],
        [upl_LivenessVideo],
        [upl_LivenessPicture],
        [VerificationResults],
        [OCRSuccess],
        [LivenessSuccess],
        [BiometricMatchSuccess],
        [BiometricMatchScore],
        [IsRejected],
        [RejectedReason],
        [upl_PaymentsDocumentation],
        [IPRegisteredFrom],
        [upl_DLFront],
        [upl_DLBack],
        [upl_FailedDocFront],
        [enmLastIDTypeRecd_IdentificationMethod],
        [upl_BusinessLogo],
        [spt_enmSecurityTier],
        [spt_BusinessLogoNeedsApproval],
        [spt_enmSecurityTierChangeStatus_DocumentationStatus],
        [scb_enmSecurityTierChangeStatus_DocumentationStatus],
        [upl_FailedDocBack],
        [CaseNumber],
        [FailedDocDetails],
        [upl_FailedDocLivenessPicture],
        [upl_FailedDocLivenessVideo],
        [upl_FailedDocMugshot],
        [ExpiryTZ],
        [ExpiryPassport],
        [ExpiryDL],
        [upl_BusinessDocumentation],
        [ActualAddressStreetLatin],
        [ActualAddressCityLatin]
    FROM [Customer]
    WHERE [clc_WhenRegistered] = @clc_WhenRegistered
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_Customer_BankDocumentationStatus
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillCustomerBySPTENMBANKDOCUMENTATIONSTATUSDOCUMENTATIONSTATUS]
    @spt_enmBankDocumentationStatus_DocumentationStatus varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Customer],
        [ID],
        [FirstName],
        [LastName],
        [FirstNameLatin],
        [LastNameLatin],
        [email],
        [BirthDate],
        [IsraelIDNumber],
        [lkpPassportCountry_Country],
        [PassportNumber],
        [DateIssued],
        [ExpiryDateObs],
        [clc_CustomerIdentifier],
        [CellphoneNumber],
        [HomePhoneNumber],
        [ActualAddressNumber],
        [ActualAddressStreet],
        [ActualAddressCity],
        [ActualZipCode],
        [MailAddressNumber],
        [MailAddressStreet],
        [MailAddressCity],
        [MailZipCode],
        [enmGender],
        [clc_WhenRegistered],
        [enmLanguage],
        [spt_Comment],
        [spt_IsEnabled],
        [IsEnabledChangedBy],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spt_HasSignedServiceRequest],
        [lkpBank],
        [lkpBranch],
        [BankAccount],
        [lkpSecretQuestion],
        [entResponseToSecretQuestion],
        [SAPAccountNumber],
        [enmMessagingMode],
        [enmCustomerType],
        [spt_enmIsOnTerrorList],
        [scb_enmIsOnTerrorList],
        [spt_TerrorListUpdatedOn],
        [UserPhoto],
        [CustomerClubID],
        [AssignedDistributorID],
        [upl_TZFront],
        [upl_TZBack],
        [upl_Passport],
        [upl_Mugshot],
        [upl_ManiDocumentation],
        [ActualAddressApt],
        [MailAddressApt],
        [entSecurityCode],
        [upl_BankDocumentation],
        [spt_enmBankDocumentationStatus_DocumentationStatus],
        [scb_enmBankDocumentationStatus_DocumentationStatus],
        [Scratch],
        [IsBusiness],
        [BusinessName],
        [spt_enmBusinessDocumentationStatus_DocumentationStatus],
        [scb_enmBusinessDocumentationStatus_DocumentationStatus],
        [upl_LivenessVideo],
        [upl_LivenessPicture],
        [VerificationResults],
        [OCRSuccess],
        [LivenessSuccess],
        [BiometricMatchSuccess],
        [BiometricMatchScore],
        [IsRejected],
        [RejectedReason],
        [upl_PaymentsDocumentation],
        [IPRegisteredFrom],
        [upl_DLFront],
        [upl_DLBack],
        [upl_FailedDocFront],
        [enmLastIDTypeRecd_IdentificationMethod],
        [upl_BusinessLogo],
        [spt_enmSecurityTier],
        [spt_BusinessLogoNeedsApproval],
        [spt_enmSecurityTierChangeStatus_DocumentationStatus],
        [scb_enmSecurityTierChangeStatus_DocumentationStatus],
        [upl_FailedDocBack],
        [CaseNumber],
        [FailedDocDetails],
        [upl_FailedDocLivenessPicture],
        [upl_FailedDocLivenessVideo],
        [upl_FailedDocMugshot],
        [ExpiryTZ],
        [ExpiryPassport],
        [ExpiryDL],
        [upl_BusinessDocumentation],
        [ActualAddressStreetLatin],
        [ActualAddressCityLatin]
    FROM [Customer]
    WHERE [spt_enmBankDocumentationStatus_DocumentationStatus] = @spt_enmBankDocumentationStatus_DocumentationStatus
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_Customer_CustomerClubID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillCustomerByCUSTOMERCLUBID]
    @CustomerClubID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Customer],
        [ID],
        [FirstName],
        [LastName],
        [FirstNameLatin],
        [LastNameLatin],
        [email],
        [BirthDate],
        [IsraelIDNumber],
        [lkpPassportCountry_Country],
        [PassportNumber],
        [DateIssued],
        [ExpiryDateObs],
        [clc_CustomerIdentifier],
        [CellphoneNumber],
        [HomePhoneNumber],
        [ActualAddressNumber],
        [ActualAddressStreet],
        [ActualAddressCity],
        [ActualZipCode],
        [MailAddressNumber],
        [MailAddressStreet],
        [MailAddressCity],
        [MailZipCode],
        [enmGender],
        [clc_WhenRegistered],
        [enmLanguage],
        [spt_Comment],
        [spt_IsEnabled],
        [IsEnabledChangedBy],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spt_HasSignedServiceRequest],
        [lkpBank],
        [lkpBranch],
        [BankAccount],
        [lkpSecretQuestion],
        [entResponseToSecretQuestion],
        [SAPAccountNumber],
        [enmMessagingMode],
        [enmCustomerType],
        [spt_enmIsOnTerrorList],
        [scb_enmIsOnTerrorList],
        [spt_TerrorListUpdatedOn],
        [UserPhoto],
        [CustomerClubID],
        [AssignedDistributorID],
        [upl_TZFront],
        [upl_TZBack],
        [upl_Passport],
        [upl_Mugshot],
        [upl_ManiDocumentation],
        [ActualAddressApt],
        [MailAddressApt],
        [entSecurityCode],
        [upl_BankDocumentation],
        [spt_enmBankDocumentationStatus_DocumentationStatus],
        [scb_enmBankDocumentationStatus_DocumentationStatus],
        [Scratch],
        [IsBusiness],
        [BusinessName],
        [spt_enmBusinessDocumentationStatus_DocumentationStatus],
        [scb_enmBusinessDocumentationStatus_DocumentationStatus],
        [upl_LivenessVideo],
        [upl_LivenessPicture],
        [VerificationResults],
        [OCRSuccess],
        [LivenessSuccess],
        [BiometricMatchSuccess],
        [BiometricMatchScore],
        [IsRejected],
        [RejectedReason],
        [upl_PaymentsDocumentation],
        [IPRegisteredFrom],
        [upl_DLFront],
        [upl_DLBack],
        [upl_FailedDocFront],
        [enmLastIDTypeRecd_IdentificationMethod],
        [upl_BusinessLogo],
        [spt_enmSecurityTier],
        [spt_BusinessLogoNeedsApproval],
        [spt_enmSecurityTierChangeStatus_DocumentationStatus],
        [scb_enmSecurityTierChangeStatus_DocumentationStatus],
        [upl_FailedDocBack],
        [CaseNumber],
        [FailedDocDetails],
        [upl_FailedDocLivenessPicture],
        [upl_FailedDocLivenessVideo],
        [upl_FailedDocMugshot],
        [ExpiryTZ],
        [ExpiryPassport],
        [ExpiryDL],
        [upl_BusinessDocumentation],
        [ActualAddressStreetLatin],
        [ActualAddressCityLatin]
    FROM [Customer]
    WHERE [CustomerClubID] = @CustomerClubID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_Customer_CustomerType
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillCustomerByENMCUSTOMERTYPE]
    @enmCustomerType varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Customer],
        [ID],
        [FirstName],
        [LastName],
        [FirstNameLatin],
        [LastNameLatin],
        [email],
        [BirthDate],
        [IsraelIDNumber],
        [lkpPassportCountry_Country],
        [PassportNumber],
        [DateIssued],
        [ExpiryDateObs],
        [clc_CustomerIdentifier],
        [CellphoneNumber],
        [HomePhoneNumber],
        [ActualAddressNumber],
        [ActualAddressStreet],
        [ActualAddressCity],
        [ActualZipCode],
        [MailAddressNumber],
        [MailAddressStreet],
        [MailAddressCity],
        [MailZipCode],
        [enmGender],
        [clc_WhenRegistered],
        [enmLanguage],
        [spt_Comment],
        [spt_IsEnabled],
        [IsEnabledChangedBy],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spt_HasSignedServiceRequest],
        [lkpBank],
        [lkpBranch],
        [BankAccount],
        [lkpSecretQuestion],
        [entResponseToSecretQuestion],
        [SAPAccountNumber],
        [enmMessagingMode],
        [enmCustomerType],
        [spt_enmIsOnTerrorList],
        [scb_enmIsOnTerrorList],
        [spt_TerrorListUpdatedOn],
        [UserPhoto],
        [CustomerClubID],
        [AssignedDistributorID],
        [upl_TZFront],
        [upl_TZBack],
        [upl_Passport],
        [upl_Mugshot],
        [upl_ManiDocumentation],
        [ActualAddressApt],
        [MailAddressApt],
        [entSecurityCode],
        [upl_BankDocumentation],
        [spt_enmBankDocumentationStatus_DocumentationStatus],
        [scb_enmBankDocumentationStatus_DocumentationStatus],
        [Scratch],
        [IsBusiness],
        [BusinessName],
        [spt_enmBusinessDocumentationStatus_DocumentationStatus],
        [scb_enmBusinessDocumentationStatus_DocumentationStatus],
        [upl_LivenessVideo],
        [upl_LivenessPicture],
        [VerificationResults],
        [OCRSuccess],
        [LivenessSuccess],
        [BiometricMatchSuccess],
        [BiometricMatchScore],
        [IsRejected],
        [RejectedReason],
        [upl_PaymentsDocumentation],
        [IPRegisteredFrom],
        [upl_DLFront],
        [upl_DLBack],
        [upl_FailedDocFront],
        [enmLastIDTypeRecd_IdentificationMethod],
        [upl_BusinessLogo],
        [spt_enmSecurityTier],
        [spt_BusinessLogoNeedsApproval],
        [spt_enmSecurityTierChangeStatus_DocumentationStatus],
        [scb_enmSecurityTierChangeStatus_DocumentationStatus],
        [upl_FailedDocBack],
        [CaseNumber],
        [FailedDocDetails],
        [upl_FailedDocLivenessPicture],
        [upl_FailedDocLivenessVideo],
        [upl_FailedDocMugshot],
        [ExpiryTZ],
        [ExpiryPassport],
        [ExpiryDL],
        [upl_BusinessDocumentation],
        [ActualAddressStreetLatin],
        [ActualAddressCityLatin]
    FROM [Customer]
    WHERE [enmCustomerType] = @enmCustomerType
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_Customer_IsOnTerrorList
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillCustomerBySPTENMISONTERRORLIST]
    @spt_enmIsOnTerrorList varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Customer],
        [ID],
        [FirstName],
        [LastName],
        [FirstNameLatin],
        [LastNameLatin],
        [email],
        [BirthDate],
        [IsraelIDNumber],
        [lkpPassportCountry_Country],
        [PassportNumber],
        [DateIssued],
        [ExpiryDateObs],
        [clc_CustomerIdentifier],
        [CellphoneNumber],
        [HomePhoneNumber],
        [ActualAddressNumber],
        [ActualAddressStreet],
        [ActualAddressCity],
        [ActualZipCode],
        [MailAddressNumber],
        [MailAddressStreet],
        [MailAddressCity],
        [MailZipCode],
        [enmGender],
        [clc_WhenRegistered],
        [enmLanguage],
        [spt_Comment],
        [spt_IsEnabled],
        [IsEnabledChangedBy],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spt_HasSignedServiceRequest],
        [lkpBank],
        [lkpBranch],
        [BankAccount],
        [lkpSecretQuestion],
        [entResponseToSecretQuestion],
        [SAPAccountNumber],
        [enmMessagingMode],
        [enmCustomerType],
        [spt_enmIsOnTerrorList],
        [scb_enmIsOnTerrorList],
        [spt_TerrorListUpdatedOn],
        [UserPhoto],
        [CustomerClubID],
        [AssignedDistributorID],
        [upl_TZFront],
        [upl_TZBack],
        [upl_Passport],
        [upl_Mugshot],
        [upl_ManiDocumentation],
        [ActualAddressApt],
        [MailAddressApt],
        [entSecurityCode],
        [upl_BankDocumentation],
        [spt_enmBankDocumentationStatus_DocumentationStatus],
        [scb_enmBankDocumentationStatus_DocumentationStatus],
        [Scratch],
        [IsBusiness],
        [BusinessName],
        [spt_enmBusinessDocumentationStatus_DocumentationStatus],
        [scb_enmBusinessDocumentationStatus_DocumentationStatus],
        [upl_LivenessVideo],
        [upl_LivenessPicture],
        [VerificationResults],
        [OCRSuccess],
        [LivenessSuccess],
        [BiometricMatchSuccess],
        [BiometricMatchScore],
        [IsRejected],
        [RejectedReason],
        [upl_PaymentsDocumentation],
        [IPRegisteredFrom],
        [upl_DLFront],
        [upl_DLBack],
        [upl_FailedDocFront],
        [enmLastIDTypeRecd_IdentificationMethod],
        [upl_BusinessLogo],
        [spt_enmSecurityTier],
        [spt_BusinessLogoNeedsApproval],
        [spt_enmSecurityTierChangeStatus_DocumentationStatus],
        [scb_enmSecurityTierChangeStatus_DocumentationStatus],
        [upl_FailedDocBack],
        [CaseNumber],
        [FailedDocDetails],
        [upl_FailedDocLivenessPicture],
        [upl_FailedDocLivenessVideo],
        [upl_FailedDocMugshot],
        [ExpiryTZ],
        [ExpiryPassport],
        [ExpiryDL],
        [upl_BusinessDocumentation],
        [ActualAddressStreetLatin],
        [ActualAddressCityLatin]
    FROM [Customer]
    WHERE [spt_enmIsOnTerrorList] = @spt_enmIsOnTerrorList
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_Customer_spt_IsEnabled
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillCustomerBySPTISENABLED]
    @spt_IsEnabled bit
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Customer],
        [ID],
        [FirstName],
        [LastName],
        [FirstNameLatin],
        [LastNameLatin],
        [email],
        [BirthDate],
        [IsraelIDNumber],
        [lkpPassportCountry_Country],
        [PassportNumber],
        [DateIssued],
        [ExpiryDateObs],
        [clc_CustomerIdentifier],
        [CellphoneNumber],
        [HomePhoneNumber],
        [ActualAddressNumber],
        [ActualAddressStreet],
        [ActualAddressCity],
        [ActualZipCode],
        [MailAddressNumber],
        [MailAddressStreet],
        [MailAddressCity],
        [MailZipCode],
        [enmGender],
        [clc_WhenRegistered],
        [enmLanguage],
        [spt_Comment],
        [spt_IsEnabled],
        [IsEnabledChangedBy],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spt_HasSignedServiceRequest],
        [lkpBank],
        [lkpBranch],
        [BankAccount],
        [lkpSecretQuestion],
        [entResponseToSecretQuestion],
        [SAPAccountNumber],
        [enmMessagingMode],
        [enmCustomerType],
        [spt_enmIsOnTerrorList],
        [scb_enmIsOnTerrorList],
        [spt_TerrorListUpdatedOn],
        [UserPhoto],
        [CustomerClubID],
        [AssignedDistributorID],
        [upl_TZFront],
        [upl_TZBack],
        [upl_Passport],
        [upl_Mugshot],
        [upl_ManiDocumentation],
        [ActualAddressApt],
        [MailAddressApt],
        [entSecurityCode],
        [upl_BankDocumentation],
        [spt_enmBankDocumentationStatus_DocumentationStatus],
        [scb_enmBankDocumentationStatus_DocumentationStatus],
        [Scratch],
        [IsBusiness],
        [BusinessName],
        [spt_enmBusinessDocumentationStatus_DocumentationStatus],
        [scb_enmBusinessDocumentationStatus_DocumentationStatus],
        [upl_LivenessVideo],
        [upl_LivenessPicture],
        [VerificationResults],
        [OCRSuccess],
        [LivenessSuccess],
        [BiometricMatchSuccess],
        [BiometricMatchScore],
        [IsRejected],
        [RejectedReason],
        [upl_PaymentsDocumentation],
        [IPRegisteredFrom],
        [upl_DLFront],
        [upl_DLBack],
        [upl_FailedDocFront],
        [enmLastIDTypeRecd_IdentificationMethod],
        [upl_BusinessLogo],
        [spt_enmSecurityTier],
        [spt_BusinessLogoNeedsApproval],
        [spt_enmSecurityTierChangeStatus_DocumentationStatus],
        [scb_enmSecurityTierChangeStatus_DocumentationStatus],
        [upl_FailedDocBack],
        [CaseNumber],
        [FailedDocDetails],
        [upl_FailedDocLivenessPicture],
        [upl_FailedDocLivenessVideo],
        [upl_FailedDocMugshot],
        [ExpiryTZ],
        [ExpiryPassport],
        [ExpiryDL],
        [upl_BusinessDocumentation],
        [ActualAddressStreetLatin],
        [ActualAddressCityLatin]
    FROM [Customer]
    WHERE [spt_IsEnabled] = @spt_IsEnabled
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXCustomer_BusinessLogoNeedsApproval
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillCustomerBySPTBUSINESSLOGONEEDSAPPROVAL]
    @spt_BusinessLogoNeedsApproval bit
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Customer],
        [ID],
        [FirstName],
        [LastName],
        [FirstNameLatin],
        [LastNameLatin],
        [email],
        [BirthDate],
        [IsraelIDNumber],
        [lkpPassportCountry_Country],
        [PassportNumber],
        [DateIssued],
        [ExpiryDateObs],
        [clc_CustomerIdentifier],
        [CellphoneNumber],
        [HomePhoneNumber],
        [ActualAddressNumber],
        [ActualAddressStreet],
        [ActualAddressCity],
        [ActualZipCode],
        [MailAddressNumber],
        [MailAddressStreet],
        [MailAddressCity],
        [MailZipCode],
        [enmGender],
        [clc_WhenRegistered],
        [enmLanguage],
        [spt_Comment],
        [spt_IsEnabled],
        [IsEnabledChangedBy],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spt_HasSignedServiceRequest],
        [lkpBank],
        [lkpBranch],
        [BankAccount],
        [lkpSecretQuestion],
        [entResponseToSecretQuestion],
        [SAPAccountNumber],
        [enmMessagingMode],
        [enmCustomerType],
        [spt_enmIsOnTerrorList],
        [scb_enmIsOnTerrorList],
        [spt_TerrorListUpdatedOn],
        [UserPhoto],
        [CustomerClubID],
        [AssignedDistributorID],
        [upl_TZFront],
        [upl_TZBack],
        [upl_Passport],
        [upl_Mugshot],
        [upl_ManiDocumentation],
        [ActualAddressApt],
        [MailAddressApt],
        [entSecurityCode],
        [upl_BankDocumentation],
        [spt_enmBankDocumentationStatus_DocumentationStatus],
        [scb_enmBankDocumentationStatus_DocumentationStatus],
        [Scratch],
        [IsBusiness],
        [BusinessName],
        [spt_enmBusinessDocumentationStatus_DocumentationStatus],
        [scb_enmBusinessDocumentationStatus_DocumentationStatus],
        [upl_LivenessVideo],
        [upl_LivenessPicture],
        [VerificationResults],
        [OCRSuccess],
        [LivenessSuccess],
        [BiometricMatchSuccess],
        [BiometricMatchScore],
        [IsRejected],
        [RejectedReason],
        [upl_PaymentsDocumentation],
        [IPRegisteredFrom],
        [upl_DLFront],
        [upl_DLBack],
        [upl_FailedDocFront],
        [enmLastIDTypeRecd_IdentificationMethod],
        [upl_BusinessLogo],
        [spt_enmSecurityTier],
        [spt_BusinessLogoNeedsApproval],
        [spt_enmSecurityTierChangeStatus_DocumentationStatus],
        [scb_enmSecurityTierChangeStatus_DocumentationStatus],
        [upl_FailedDocBack],
        [CaseNumber],
        [FailedDocDetails],
        [upl_FailedDocLivenessPicture],
        [upl_FailedDocLivenessVideo],
        [upl_FailedDocMugshot],
        [ExpiryTZ],
        [ExpiryPassport],
        [ExpiryDL],
        [upl_BusinessDocumentation],
        [ActualAddressStreetLatin],
        [ActualAddressCityLatin]
    FROM [Customer]
    WHERE [spt_BusinessLogoNeedsApproval] = @spt_BusinessLogoNeedsApproval
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXCustomer_LastName
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillCustomerByLASTNAME]
    @LastName nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Customer],
        [ID],
        [FirstName],
        [LastName],
        [FirstNameLatin],
        [LastNameLatin],
        [email],
        [BirthDate],
        [IsraelIDNumber],
        [lkpPassportCountry_Country],
        [PassportNumber],
        [DateIssued],
        [ExpiryDateObs],
        [clc_CustomerIdentifier],
        [CellphoneNumber],
        [HomePhoneNumber],
        [ActualAddressNumber],
        [ActualAddressStreet],
        [ActualAddressCity],
        [ActualZipCode],
        [MailAddressNumber],
        [MailAddressStreet],
        [MailAddressCity],
        [MailZipCode],
        [enmGender],
        [clc_WhenRegistered],
        [enmLanguage],
        [spt_Comment],
        [spt_IsEnabled],
        [IsEnabledChangedBy],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spt_HasSignedServiceRequest],
        [lkpBank],
        [lkpBranch],
        [BankAccount],
        [lkpSecretQuestion],
        [entResponseToSecretQuestion],
        [SAPAccountNumber],
        [enmMessagingMode],
        [enmCustomerType],
        [spt_enmIsOnTerrorList],
        [scb_enmIsOnTerrorList],
        [spt_TerrorListUpdatedOn],
        [UserPhoto],
        [CustomerClubID],
        [AssignedDistributorID],
        [upl_TZFront],
        [upl_TZBack],
        [upl_Passport],
        [upl_Mugshot],
        [upl_ManiDocumentation],
        [ActualAddressApt],
        [MailAddressApt],
        [entSecurityCode],
        [upl_BankDocumentation],
        [spt_enmBankDocumentationStatus_DocumentationStatus],
        [scb_enmBankDocumentationStatus_DocumentationStatus],
        [Scratch],
        [IsBusiness],
        [BusinessName],
        [spt_enmBusinessDocumentationStatus_DocumentationStatus],
        [scb_enmBusinessDocumentationStatus_DocumentationStatus],
        [upl_LivenessVideo],
        [upl_LivenessPicture],
        [VerificationResults],
        [OCRSuccess],
        [LivenessSuccess],
        [BiometricMatchSuccess],
        [BiometricMatchScore],
        [IsRejected],
        [RejectedReason],
        [upl_PaymentsDocumentation],
        [IPRegisteredFrom],
        [upl_DLFront],
        [upl_DLBack],
        [upl_FailedDocFront],
        [enmLastIDTypeRecd_IdentificationMethod],
        [upl_BusinessLogo],
        [spt_enmSecurityTier],
        [spt_BusinessLogoNeedsApproval],
        [spt_enmSecurityTierChangeStatus_DocumentationStatus],
        [scb_enmSecurityTierChangeStatus_DocumentationStatus],
        [upl_FailedDocBack],
        [CaseNumber],
        [FailedDocDetails],
        [upl_FailedDocLivenessPicture],
        [upl_FailedDocLivenessVideo],
        [upl_FailedDocMugshot],
        [ExpiryTZ],
        [ExpiryPassport],
        [ExpiryDL],
        [upl_BusinessDocumentation],
        [ActualAddressStreetLatin],
        [ActualAddressCityLatin]
    FROM [Customer]
    WHERE [LastName] = @LastName
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXCustomer_LastNameLatin
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillCustomerByLASTNAMELATIN]
    @LastNameLatin varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Customer],
        [ID],
        [FirstName],
        [LastName],
        [FirstNameLatin],
        [LastNameLatin],
        [email],
        [BirthDate],
        [IsraelIDNumber],
        [lkpPassportCountry_Country],
        [PassportNumber],
        [DateIssued],
        [ExpiryDateObs],
        [clc_CustomerIdentifier],
        [CellphoneNumber],
        [HomePhoneNumber],
        [ActualAddressNumber],
        [ActualAddressStreet],
        [ActualAddressCity],
        [ActualZipCode],
        [MailAddressNumber],
        [MailAddressStreet],
        [MailAddressCity],
        [MailZipCode],
        [enmGender],
        [clc_WhenRegistered],
        [enmLanguage],
        [spt_Comment],
        [spt_IsEnabled],
        [IsEnabledChangedBy],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spt_HasSignedServiceRequest],
        [lkpBank],
        [lkpBranch],
        [BankAccount],
        [lkpSecretQuestion],
        [entResponseToSecretQuestion],
        [SAPAccountNumber],
        [enmMessagingMode],
        [enmCustomerType],
        [spt_enmIsOnTerrorList],
        [scb_enmIsOnTerrorList],
        [spt_TerrorListUpdatedOn],
        [UserPhoto],
        [CustomerClubID],
        [AssignedDistributorID],
        [upl_TZFront],
        [upl_TZBack],
        [upl_Passport],
        [upl_Mugshot],
        [upl_ManiDocumentation],
        [ActualAddressApt],
        [MailAddressApt],
        [entSecurityCode],
        [upl_BankDocumentation],
        [spt_enmBankDocumentationStatus_DocumentationStatus],
        [scb_enmBankDocumentationStatus_DocumentationStatus],
        [Scratch],
        [IsBusiness],
        [BusinessName],
        [spt_enmBusinessDocumentationStatus_DocumentationStatus],
        [scb_enmBusinessDocumentationStatus_DocumentationStatus],
        [upl_LivenessVideo],
        [upl_LivenessPicture],
        [VerificationResults],
        [OCRSuccess],
        [LivenessSuccess],
        [BiometricMatchSuccess],
        [BiometricMatchScore],
        [IsRejected],
        [RejectedReason],
        [upl_PaymentsDocumentation],
        [IPRegisteredFrom],
        [upl_DLFront],
        [upl_DLBack],
        [upl_FailedDocFront],
        [enmLastIDTypeRecd_IdentificationMethod],
        [upl_BusinessLogo],
        [spt_enmSecurityTier],
        [spt_BusinessLogoNeedsApproval],
        [spt_enmSecurityTierChangeStatus_DocumentationStatus],
        [scb_enmSecurityTierChangeStatus_DocumentationStatus],
        [upl_FailedDocBack],
        [CaseNumber],
        [FailedDocDetails],
        [upl_FailedDocLivenessPicture],
        [upl_FailedDocLivenessVideo],
        [upl_FailedDocMugshot],
        [ExpiryTZ],
        [ExpiryPassport],
        [ExpiryDL],
        [upl_BusinessDocumentation],
        [ActualAddressStreetLatin],
        [ActualAddressCityLatin]
    FROM [Customer]
    WHERE [LastNameLatin] = @LastNameLatin
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXCustomer_SecurityTier
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillCustomerBySPTENMSECURITYTIER]
    @spt_enmSecurityTier varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Customer],
        [ID],
        [FirstName],
        [LastName],
        [FirstNameLatin],
        [LastNameLatin],
        [email],
        [BirthDate],
        [IsraelIDNumber],
        [lkpPassportCountry_Country],
        [PassportNumber],
        [DateIssued],
        [ExpiryDateObs],
        [clc_CustomerIdentifier],
        [CellphoneNumber],
        [HomePhoneNumber],
        [ActualAddressNumber],
        [ActualAddressStreet],
        [ActualAddressCity],
        [ActualZipCode],
        [MailAddressNumber],
        [MailAddressStreet],
        [MailAddressCity],
        [MailZipCode],
        [enmGender],
        [clc_WhenRegistered],
        [enmLanguage],
        [spt_Comment],
        [spt_IsEnabled],
        [IsEnabledChangedBy],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spt_HasSignedServiceRequest],
        [lkpBank],
        [lkpBranch],
        [BankAccount],
        [lkpSecretQuestion],
        [entResponseToSecretQuestion],
        [SAPAccountNumber],
        [enmMessagingMode],
        [enmCustomerType],
        [spt_enmIsOnTerrorList],
        [scb_enmIsOnTerrorList],
        [spt_TerrorListUpdatedOn],
        [UserPhoto],
        [CustomerClubID],
        [AssignedDistributorID],
        [upl_TZFront],
        [upl_TZBack],
        [upl_Passport],
        [upl_Mugshot],
        [upl_ManiDocumentation],
        [ActualAddressApt],
        [MailAddressApt],
        [entSecurityCode],
        [upl_BankDocumentation],
        [spt_enmBankDocumentationStatus_DocumentationStatus],
        [scb_enmBankDocumentationStatus_DocumentationStatus],
        [Scratch],
        [IsBusiness],
        [BusinessName],
        [spt_enmBusinessDocumentationStatus_DocumentationStatus],
        [scb_enmBusinessDocumentationStatus_DocumentationStatus],
        [upl_LivenessVideo],
        [upl_LivenessPicture],
        [VerificationResults],
        [OCRSuccess],
        [LivenessSuccess],
        [BiometricMatchSuccess],
        [BiometricMatchScore],
        [IsRejected],
        [RejectedReason],
        [upl_PaymentsDocumentation],
        [IPRegisteredFrom],
        [upl_DLFront],
        [upl_DLBack],
        [upl_FailedDocFront],
        [enmLastIDTypeRecd_IdentificationMethod],
        [upl_BusinessLogo],
        [spt_enmSecurityTier],
        [spt_BusinessLogoNeedsApproval],
        [spt_enmSecurityTierChangeStatus_DocumentationStatus],
        [scb_enmSecurityTierChangeStatus_DocumentationStatus],
        [upl_FailedDocBack],
        [CaseNumber],
        [FailedDocDetails],
        [upl_FailedDocLivenessPicture],
        [upl_FailedDocLivenessVideo],
        [upl_FailedDocMugshot],
        [ExpiryTZ],
        [ExpiryPassport],
        [ExpiryDL],
        [upl_BusinessDocumentation],
        [ActualAddressStreetLatin],
        [ActualAddressCityLatin]
    FROM [Customer]
    WHERE [spt_enmSecurityTier] = @spt_enmSecurityTier
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: CustomerCardTransaction
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllCustomerCardTransactions]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[ID],
            t.[FileName],
            t.[RowNumberInFile],
            t.[CustomerID],
            t.[CardID],
            t.[Date],
            t.[WhenApproved],
            t.[ApprovalCode],
            t.[TransactionType],
            t.[CardUseMethod],
            t.[EstablishmentName],
            t.[EstablishmentEnglishName],
            t.[lkpMerchantCategory],
            t.[Currency],
            t.[ExchangeRateUsed],
            t.[AmountInLocalCurrency],
            t.[AmountInCardCurrency],
            t.[VAT],
            t.[Commission],
            t.[EstablishmentAddress],
            t.[EstablishmentCity],
            t.[EstablishmentCountry],
            t.[EstablishmentLocation],
            t.[IsEMV],
            t.[spt_IsContested],
            t.[ClientPayment],
            t.[ICPPayment],
            t.[DistributorPayment],
            t.[ICPProfit],
            t.[enmUpayCardTransactionType_CustomerTransactionType],
            t.[spt_CHBRefused],
            t.[ClientCHBFee],
            t.[spt_Comment],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            t.[lgOwningDistributorID],
            t.[CardCid],
            t.[OrgCode],
            t.[upl_Receipt],
            t.[lgCardClubID],
            p1.[Text] AS [CustomerID_Text],
            p2.[Text] AS [CardID_Text],
            p3.[Text] AS [lgOwningDistributorID_Text],
            p4.[Text] AS [lgCardClubID_Text]
        FROM [CustomerCardTransaction] t
        LEFT JOIN [ccvwComboList_Customer] p1 ON t.[CustomerID] = p1.[ID]
        LEFT JOIN [ccvwComboList_Card] p2 ON t.[CardID] = p2.[ID]
        LEFT JOIN [ccvwComboList_Distributor] p3 ON t.[lgOwningDistributorID] = p3.[ID]
        LEFT JOIN [ccvwComboList_CardClub] p4 ON t.[lgCardClubID] = p4.[ID]
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [ID],
            [FileName],
            [RowNumberInFile],
            [CustomerID],
            [CardID],
            [Date],
            [WhenApproved],
            [ApprovalCode],
            [TransactionType],
            [CardUseMethod],
            [EstablishmentName],
            [EstablishmentEnglishName],
            [lkpMerchantCategory],
            [Currency],
            [ExchangeRateUsed],
            [AmountInLocalCurrency],
            [AmountInCardCurrency],
            [VAT],
            [Commission],
            [EstablishmentAddress],
            [EstablishmentCity],
            [EstablishmentCountry],
            [EstablishmentLocation],
            [IsEMV],
            [spt_IsContested],
            [ClientPayment],
            [ICPPayment],
            [DistributorPayment],
            [ICPProfit],
            [enmUpayCardTransactionType_CustomerTransactionType],
            [spt_CHBRefused],
            [ClientCHBFee],
            [spt_Comment],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID],
            [lgOwningDistributorID],
            [CardCid],
            [OrgCode],
            [upl_Receipt],
            [lgCardClubID]
        FROM [CustomerCardTransaction]
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredCustomerCardTransactions]
    @CardID INT = NULL,
    @WhenApproved DATETIME = NULL,
    @ApprovalCode NVARCHAR(100) = NULL,
    @AmountInCardCurrency DECIMAL(18,2) = NULL,
    @FileName VARCHAR(50) = NULL,
    @RowNumberInFile INT = NULL,
    @lgCardClubID INT = NULL,
    @CardCid VARCHAR(10) = NULL,
    @enmUpayCardTransactionType_CustomerTransactionType VARCHAR(50) = NULL,
    @AmountInLocalCurrency DECIMAL(18,2) = NULL,
    @spt_IsContested BIT = NULL,
    @Date DATETIME = NULL,
    @Currency VARCHAR(50) = NULL,
    @CustomerID INT = NULL,
    @lgOwningDistributorID INT = NULL,
    @TransactionType NVARCHAR(100) = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[ID],
            t.[FileName],
            t.[RowNumberInFile],
            t.[CustomerID],
            t.[CardID],
            t.[Date],
            t.[WhenApproved],
            t.[ApprovalCode],
            t.[TransactionType],
            t.[CardUseMethod],
            t.[EstablishmentName],
            t.[EstablishmentEnglishName],
            t.[lkpMerchantCategory],
            t.[Currency],
            t.[ExchangeRateUsed],
            t.[AmountInLocalCurrency],
            t.[AmountInCardCurrency],
            t.[VAT],
            t.[Commission],
            t.[EstablishmentAddress],
            t.[EstablishmentCity],
            t.[EstablishmentCountry],
            t.[EstablishmentLocation],
            t.[IsEMV],
            t.[spt_IsContested],
            t.[ClientPayment],
            t.[ICPPayment],
            t.[DistributorPayment],
            t.[ICPProfit],
            t.[enmUpayCardTransactionType_CustomerTransactionType],
            t.[spt_CHBRefused],
            t.[ClientCHBFee],
            t.[spt_Comment],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            t.[lgOwningDistributorID],
            t.[CardCid],
            t.[OrgCode],
            t.[upl_Receipt],
            t.[lgCardClubID],
            p1.[Text] AS [CustomerID_Text],
            p2.[Text] AS [CardID_Text],
            p3.[Text] AS [lgOwningDistributorID_Text],
            p4.[Text] AS [lgCardClubID_Text]
        FROM [CustomerCardTransaction] t
        LEFT JOIN [ccvwComboList_Customer] p1 ON t.[CustomerID] = p1.[ID]
        LEFT JOIN [ccvwComboList_Card] p2 ON t.[CardID] = p2.[ID]
        LEFT JOIN [ccvwComboList_Distributor] p3 ON t.[lgOwningDistributorID] = p3.[ID]
        LEFT JOIN [ccvwComboList_CardClub] p4 ON t.[lgCardClubID] = p4.[ID]
        WHERE 1=1
          AND (@CardID IS NULL OR t.[CardID] = @CardID)
          AND (@WhenApproved IS NULL OR t.[WhenApproved] = @WhenApproved)
          AND (@ApprovalCode IS NULL OR t.[ApprovalCode] LIKE '%' + @ApprovalCode + '%')
          AND (@AmountInCardCurrency IS NULL OR t.[AmountInCardCurrency] = @AmountInCardCurrency)
          AND (@FileName IS NULL OR t.[FileName] LIKE '%' + @FileName + '%')
          AND (@RowNumberInFile IS NULL OR t.[RowNumberInFile] = @RowNumberInFile)
          AND (@lgCardClubID IS NULL OR t.[lgCardClubID] = @lgCardClubID)
          AND (@CardCid IS NULL OR t.[CardCid] LIKE '%' + @CardCid + '%')
          AND (@enmUpayCardTransactionType_CustomerTransactionType IS NULL OR t.[enmUpayCardTransactionType_CustomerTransactionType] LIKE '%' + @enmUpayCardTransactionType_CustomerTransactionType + '%')
          AND (@AmountInCardCurrency IS NULL OR t.[AmountInCardCurrency] = @AmountInCardCurrency)
          AND (@AmountInLocalCurrency IS NULL OR t.[AmountInLocalCurrency] = @AmountInLocalCurrency)
          AND (@CardID IS NULL OR t.[CardID] = @CardID)
          AND (@CardID IS NULL OR t.[CardID] = @CardID)
          AND (@spt_IsContested IS NULL OR t.[spt_IsContested] = @spt_IsContested)
          AND (@CardID IS NULL OR t.[CardID] = @CardID)
          AND (@Date IS NULL OR t.[Date] = @Date)
          AND (@Currency IS NULL OR t.[Currency] LIKE '%' + @Currency + '%')
          AND (@CustomerID IS NULL OR t.[CustomerID] = @CustomerID)
          AND (@Date IS NULL OR t.[Date] = @Date)
          AND (@lgOwningDistributorID IS NULL OR t.[lgOwningDistributorID] = @lgOwningDistributorID)
          AND (@TransactionType IS NULL OR t.[TransactionType] LIKE '%' + @TransactionType + '%')
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [ID],
            [FileName],
            [RowNumberInFile],
            [CustomerID],
            [CardID],
            [Date],
            [WhenApproved],
            [ApprovalCode],
            [TransactionType],
            [CardUseMethod],
            [EstablishmentName],
            [EstablishmentEnglishName],
            [lkpMerchantCategory],
            [Currency],
            [ExchangeRateUsed],
            [AmountInLocalCurrency],
            [AmountInCardCurrency],
            [VAT],
            [Commission],
            [EstablishmentAddress],
            [EstablishmentCity],
            [EstablishmentCountry],
            [EstablishmentLocation],
            [IsEMV],
            [spt_IsContested],
            [ClientPayment],
            [ICPPayment],
            [DistributorPayment],
            [ICPProfit],
            [enmUpayCardTransactionType_CustomerTransactionType],
            [spt_CHBRefused],
            [ClientCHBFee],
            [spt_Comment],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID],
            [lgOwningDistributorID],
            [CardCid],
            [OrgCode],
            [upl_Receipt],
            [lgCardClubID]
        FROM [CustomerCardTransaction]
        WHERE 1=1
          AND (@CardID IS NULL OR [CardID] = @CardID)
          AND (@WhenApproved IS NULL OR [WhenApproved] = @WhenApproved)
          AND (@ApprovalCode IS NULL OR [ApprovalCode] LIKE '%' + @ApprovalCode + '%')
          AND (@AmountInCardCurrency IS NULL OR [AmountInCardCurrency] = @AmountInCardCurrency)
          AND (@FileName IS NULL OR [FileName] LIKE '%' + @FileName + '%')
          AND (@RowNumberInFile IS NULL OR [RowNumberInFile] = @RowNumberInFile)
          AND (@lgCardClubID IS NULL OR [lgCardClubID] = @lgCardClubID)
          AND (@CardCid IS NULL OR [CardCid] LIKE '%' + @CardCid + '%')
          AND (@enmUpayCardTransactionType_CustomerTransactionType IS NULL OR [enmUpayCardTransactionType_CustomerTransactionType] LIKE '%' + @enmUpayCardTransactionType_CustomerTransactionType + '%')
          AND (@AmountInCardCurrency IS NULL OR [AmountInCardCurrency] = @AmountInCardCurrency)
          AND (@AmountInLocalCurrency IS NULL OR [AmountInLocalCurrency] = @AmountInLocalCurrency)
          AND (@CardID IS NULL OR [CardID] = @CardID)
          AND (@CardID IS NULL OR [CardID] = @CardID)
          AND (@spt_IsContested IS NULL OR [spt_IsContested] = @spt_IsContested)
          AND (@CardID IS NULL OR [CardID] = @CardID)
          AND (@Date IS NULL OR [Date] = @Date)
          AND (@Currency IS NULL OR [Currency] LIKE '%' + @Currency + '%')
          AND (@CustomerID IS NULL OR [CustomerID] = @CustomerID)
          AND (@Date IS NULL OR [Date] = @Date)
          AND (@lgOwningDistributorID IS NULL OR [lgOwningDistributorID] = @lgOwningDistributorID)
          AND (@TransactionType IS NULL OR [TransactionType] LIKE '%' + @TransactionType + '%')
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetCustomerCardTransactionByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [FileName],
        [RowNumberInFile],
        [CustomerID],
        [CardID],
        [Date],
        [WhenApproved],
        [ApprovalCode],
        [TransactionType],
        [CardUseMethod],
        [EstablishmentName],
        [EstablishmentEnglishName],
        [lkpMerchantCategory],
        [Currency],
        [ExchangeRateUsed],
        [AmountInLocalCurrency],
        [AmountInCardCurrency],
        [VAT],
        [Commission],
        [EstablishmentAddress],
        [EstablishmentCity],
        [EstablishmentCountry],
        [EstablishmentLocation],
        [IsEMV],
        [spt_IsContested],
        [ClientPayment],
        [ICPPayment],
        [DistributorPayment],
        [ICPProfit],
        [enmUpayCardTransactionType_CustomerTransactionType],
        [spt_CHBRefused],
        [ClientCHBFee],
        [spt_Comment],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [lgOwningDistributorID],
        [CardCid],
        [OrgCode],
        [upl_Receipt],
        [lgCardClubID]
    FROM [CustomerCardTransaction]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddCustomerCardTransaction]
    @FileName varchar(50),
    @RowNumberInFile int,
    @CustomerID bigint,
    @CardID bigint,
    @Date date,
    @WhenApproved datetimeoffset = NULL,
    @ApprovalCode nvarchar(100) = NULL,
    @TransactionType nvarchar(100) = NULL,
    @CardUseMethod nvarchar(100) = NULL,
    @EstablishmentName nvarchar(100) = NULL,
    @EstablishmentEnglishName nvarchar(100) = NULL,
    @lkpMerchantCategory int = NULL,
    @Currency varchar(50) = NULL,
    @ExchangeRateUsed decimal(18,0) = NULL,
    @AmountInLocalCurrency decimal(18,0) = NULL,
    @AmountInCardCurrency decimal(18,0) = NULL,
    @VAT decimal(18,0) = NULL,
    @Commission decimal(18,0) = NULL,
    @EstablishmentAddress nvarchar(200) = NULL,
    @EstablishmentCity nvarchar(100) = NULL,
    @EstablishmentCountry nvarchar(100) = NULL,
    @EstablishmentLocation GEOMETRY = NULL,
    @IsEMV bit = NULL,
    @spt_IsContested bit = NULL,
    @ClientPayment decimal(18,0) = NULL,
    @ICPPayment decimal(18,0) = NULL,
    @DistributorPayment decimal(18,0) = NULL,
    @ICPProfit decimal(18,0) = NULL,
    @enmUpayCardTransactionType_CustomerTransactionType varchar(50) = NULL,
    @spt_CHBRefused bit = NULL,
    @ClientCHBFee decimal(18,0) = NULL,
    @spt_Comment nvarchar(MAX) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @lgOwningDistributorID bigint = NULL,
    @CardCid varchar(10) = NULL,
    @OrgCode varchar(10) = NULL,
    @upl_Receipt varchar(69) = NULL,
    @lgCardClubID bigint = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [CustomerCardTransaction] (
        [FileName],
        [RowNumberInFile],
        [CustomerID],
        [CardID],
        [Date],
        [WhenApproved],
        [ApprovalCode],
        [TransactionType],
        [CardUseMethod],
        [EstablishmentName],
        [EstablishmentEnglishName],
        [lkpMerchantCategory],
        [Currency],
        [ExchangeRateUsed],
        [AmountInLocalCurrency],
        [AmountInCardCurrency],
        [VAT],
        [Commission],
        [EstablishmentAddress],
        [EstablishmentCity],
        [EstablishmentCountry],
        [EstablishmentLocation],
        [IsEMV],
        [spt_IsContested],
        [ClientPayment],
        [ICPPayment],
        [DistributorPayment],
        [ICPProfit],
        [enmUpayCardTransactionType_CustomerTransactionType],
        [spt_CHBRefused],
        [ClientCHBFee],
        [spt_Comment],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [lgOwningDistributorID],
        [CardCid],
        [OrgCode],
        [upl_Receipt],
        [lgCardClubID],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @FileName,
        @RowNumberInFile,
        @CustomerID,
        @CardID,
        @Date,
        @WhenApproved,
        @ApprovalCode,
        @TransactionType,
        @CardUseMethod,
        @EstablishmentName,
        @EstablishmentEnglishName,
        @lkpMerchantCategory,
        @Currency,
        @ExchangeRateUsed,
        @AmountInLocalCurrency,
        @AmountInCardCurrency,
        @VAT,
        @Commission,
        @EstablishmentAddress,
        @EstablishmentCity,
        @EstablishmentCountry,
        @EstablishmentLocation,
        @IsEMV,
        @spt_IsContested,
        @ClientPayment,
        @ICPPayment,
        @DistributorPayment,
        @ICPProfit,
        @enmUpayCardTransactionType_CustomerTransactionType,
        @spt_CHBRefused,
        @ClientCHBFee,
        @spt_Comment,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        @lgOwningDistributorID,
        @CardCid,
        @OrgCode,
        @upl_Receipt,
        @lgCardClubID,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateCustomerCardTransaction]
    @ID bigint,
    @FileName varchar(50),
    @RowNumberInFile int,
    @CustomerID bigint,
    @CardID bigint,
    @Date date,
    @WhenApproved datetimeoffset = NULL,
    @ApprovalCode nvarchar(100) = NULL,
    @TransactionType nvarchar(100) = NULL,
    @CardUseMethod nvarchar(100) = NULL,
    @EstablishmentName nvarchar(100) = NULL,
    @EstablishmentEnglishName nvarchar(100) = NULL,
    @lkpMerchantCategory int = NULL,
    @Currency varchar(50) = NULL,
    @ExchangeRateUsed decimal(18,0) = NULL,
    @AmountInLocalCurrency decimal(18,0) = NULL,
    @AmountInCardCurrency decimal(18,0) = NULL,
    @VAT decimal(18,0) = NULL,
    @Commission decimal(18,0) = NULL,
    @EstablishmentAddress nvarchar(200) = NULL,
    @EstablishmentCity nvarchar(100) = NULL,
    @EstablishmentCountry nvarchar(100) = NULL,
    @EstablishmentLocation GEOMETRY = NULL,
    @IsEMV bit = NULL,
    @spt_IsContested bit = NULL,
    @ClientPayment decimal(18,0) = NULL,
    @ICPPayment decimal(18,0) = NULL,
    @DistributorPayment decimal(18,0) = NULL,
    @ICPProfit decimal(18,0) = NULL,
    @enmUpayCardTransactionType_CustomerTransactionType varchar(50) = NULL,
    @spt_CHBRefused bit = NULL,
    @ClientCHBFee decimal(18,0) = NULL,
    @spt_Comment nvarchar(MAX) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @lgOwningDistributorID bigint = NULL,
    @CardCid varchar(10) = NULL,
    @OrgCode varchar(10) = NULL,
    @upl_Receipt varchar(69) = NULL,
    @lgCardClubID bigint = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [CustomerCardTransaction]
    SET
        [FileName] = @FileName,
        [RowNumberInFile] = @RowNumberInFile,
        [CustomerID] = @CustomerID,
        [CardID] = @CardID,
        [Date] = @Date,
        [WhenApproved] = @WhenApproved,
        [ApprovalCode] = @ApprovalCode,
        [TransactionType] = @TransactionType,
        [CardUseMethod] = @CardUseMethod,
        [EstablishmentName] = @EstablishmentName,
        [EstablishmentEnglishName] = @EstablishmentEnglishName,
        [lkpMerchantCategory] = @lkpMerchantCategory,
        [Currency] = @Currency,
        [ExchangeRateUsed] = @ExchangeRateUsed,
        [AmountInLocalCurrency] = @AmountInLocalCurrency,
        [AmountInCardCurrency] = @AmountInCardCurrency,
        [VAT] = @VAT,
        [Commission] = @Commission,
        [EstablishmentAddress] = @EstablishmentAddress,
        [EstablishmentCity] = @EstablishmentCity,
        [EstablishmentCountry] = @EstablishmentCountry,
        [EstablishmentLocation] = @EstablishmentLocation,
        [IsEMV] = @IsEMV,
        [spt_IsContested] = @spt_IsContested,
        [ClientPayment] = @ClientPayment,
        [ICPPayment] = @ICPPayment,
        [DistributorPayment] = @DistributorPayment,
        [ICPProfit] = @ICPProfit,
        [enmUpayCardTransactionType_CustomerTransactionType] = @enmUpayCardTransactionType_CustomerTransactionType,
        [spt_CHBRefused] = @spt_CHBRefused,
        [ClientCHBFee] = @ClientCHBFee,
        [spt_Comment] = @spt_Comment,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [lgOwningDistributorID] = @lgOwningDistributorID,
        [CardCid] = @CardCid,
        [OrgCode] = @OrgCode,
        [upl_Receipt] = @upl_Receipt,
        [lgCardClubID] = @lgCardClubID,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteCustomerCardTransaction]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [CustomerCardTransaction]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IXCustomerCardTransaction_CardID_WhenApproved_ApprovalCode_AmountinCardCurrency
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetCustomerCardTransactionByCARDIDAndWHENAPPROVEDAndAPPROVALCODEAndAMOUNTINCARDCURRENCY]
    @CardID bigint,
    @WhenApproved datetimeoffset,
    @ApprovalCode nvarchar(100),
    @AmountInCardCurrency decimal(18,0)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [FileName],
        [RowNumberInFile],
        [CustomerID],
        [CardID],
        [Date],
        [WhenApproved],
        [ApprovalCode],
        [TransactionType],
        [CardUseMethod],
        [EstablishmentName],
        [EstablishmentEnglishName],
        [lkpMerchantCategory],
        [Currency],
        [ExchangeRateUsed],
        [AmountInLocalCurrency],
        [AmountInCardCurrency],
        [VAT],
        [Commission],
        [EstablishmentAddress],
        [EstablishmentCity],
        [EstablishmentCountry],
        [EstablishmentLocation],
        [IsEMV],
        [spt_IsContested],
        [ClientPayment],
        [ICPPayment],
        [DistributorPayment],
        [ICPProfit],
        [enmUpayCardTransactionType_CustomerTransactionType],
        [spt_CHBRefused],
        [ClientCHBFee],
        [spt_Comment],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [lgOwningDistributorID],
        [CardCid],
        [OrgCode],
        [upl_Receipt],
        [lgCardClubID]
    FROM [CustomerCardTransaction]
    WHERE [CardID] = @CardID AND [WhenApproved] = @WhenApproved AND [ApprovalCode] = @ApprovalCode AND [AmountInCardCurrency] = @AmountInCardCurrency
;
END

GO

-- Procedure for Index: IXCustomerCardTransaction_FileName_RowNumberInFile
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetCustomerCardTransactionByFILENAMEAndROWNUMBERINFILE]
    @FileName varchar(50),
    @RowNumberInFile int
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [FileName],
        [RowNumberInFile],
        [CustomerID],
        [CardID],
        [Date],
        [WhenApproved],
        [ApprovalCode],
        [TransactionType],
        [CardUseMethod],
        [EstablishmentName],
        [EstablishmentEnglishName],
        [lkpMerchantCategory],
        [Currency],
        [ExchangeRateUsed],
        [AmountInLocalCurrency],
        [AmountInCardCurrency],
        [VAT],
        [Commission],
        [EstablishmentAddress],
        [EstablishmentCity],
        [EstablishmentCountry],
        [EstablishmentLocation],
        [IsEMV],
        [spt_IsContested],
        [ClientPayment],
        [ICPPayment],
        [DistributorPayment],
        [ICPProfit],
        [enmUpayCardTransactionType_CustomerTransactionType],
        [spt_CHBRefused],
        [ClientCHBFee],
        [spt_Comment],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [lgOwningDistributorID],
        [CardCid],
        [OrgCode],
        [upl_Receipt],
        [lgCardClubID]
    FROM [CustomerCardTransaction]
    WHERE [FileName] = @FileName AND [RowNumberInFile] = @RowNumberInFile
;
END

GO

-- Procedure for Index: IX_CustomerCardTransaction
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillCustomerCardTransactionByLGCARDCLUBID]
    @lgCardClubID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [FileName],
        [RowNumberInFile],
        [CustomerID],
        [CardID],
        [Date],
        [WhenApproved],
        [ApprovalCode],
        [TransactionType],
        [CardUseMethod],
        [EstablishmentName],
        [EstablishmentEnglishName],
        [lkpMerchantCategory],
        [Currency],
        [ExchangeRateUsed],
        [AmountInLocalCurrency],
        [AmountInCardCurrency],
        [VAT],
        [Commission],
        [EstablishmentAddress],
        [EstablishmentCity],
        [EstablishmentCountry],
        [EstablishmentLocation],
        [IsEMV],
        [spt_IsContested],
        [ClientPayment],
        [ICPPayment],
        [DistributorPayment],
        [ICPProfit],
        [enmUpayCardTransactionType_CustomerTransactionType],
        [spt_CHBRefused],
        [ClientCHBFee],
        [spt_Comment],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [lgOwningDistributorID],
        [CardCid],
        [OrgCode],
        [upl_Receipt],
        [lgCardClubID]
    FROM [CustomerCardTransaction]
    WHERE [lgCardClubID] = @lgCardClubID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_CustomerCardTransaction_CardCid
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillCustomerCardTransactionByCARDCID]
    @CardCid varchar(10)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [FileName],
        [RowNumberInFile],
        [CustomerID],
        [CardID],
        [Date],
        [WhenApproved],
        [ApprovalCode],
        [TransactionType],
        [CardUseMethod],
        [EstablishmentName],
        [EstablishmentEnglishName],
        [lkpMerchantCategory],
        [Currency],
        [ExchangeRateUsed],
        [AmountInLocalCurrency],
        [AmountInCardCurrency],
        [VAT],
        [Commission],
        [EstablishmentAddress],
        [EstablishmentCity],
        [EstablishmentCountry],
        [EstablishmentLocation],
        [IsEMV],
        [spt_IsContested],
        [ClientPayment],
        [ICPPayment],
        [DistributorPayment],
        [ICPProfit],
        [enmUpayCardTransactionType_CustomerTransactionType],
        [spt_CHBRefused],
        [ClientCHBFee],
        [spt_Comment],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [lgOwningDistributorID],
        [CardCid],
        [OrgCode],
        [upl_Receipt],
        [lgCardClubID]
    FROM [CustomerCardTransaction]
    WHERE [CardCid] = @CardCid
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_CustomerCardTransaction_UpayCardTransactionType
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillCustomerCardTransactionByENMUPAYCARDTRANSACTIONTYPECUSTOMERTRANSACTIONTYPE]
    @enmUpayCardTransactionType_CustomerTransactionType varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [FileName],
        [RowNumberInFile],
        [CustomerID],
        [CardID],
        [Date],
        [WhenApproved],
        [ApprovalCode],
        [TransactionType],
        [CardUseMethod],
        [EstablishmentName],
        [EstablishmentEnglishName],
        [lkpMerchantCategory],
        [Currency],
        [ExchangeRateUsed],
        [AmountInLocalCurrency],
        [AmountInCardCurrency],
        [VAT],
        [Commission],
        [EstablishmentAddress],
        [EstablishmentCity],
        [EstablishmentCountry],
        [EstablishmentLocation],
        [IsEMV],
        [spt_IsContested],
        [ClientPayment],
        [ICPPayment],
        [DistributorPayment],
        [ICPProfit],
        [enmUpayCardTransactionType_CustomerTransactionType],
        [spt_CHBRefused],
        [ClientCHBFee],
        [spt_Comment],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [lgOwningDistributorID],
        [CardCid],
        [OrgCode],
        [upl_Receipt],
        [lgCardClubID]
    FROM [CustomerCardTransaction]
    WHERE [enmUpayCardTransactionType_CustomerTransactionType] = @enmUpayCardTransactionType_CustomerTransactionType
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXCustomerCardTransaction_AmountinCardCurrency
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillCustomerCardTransactionByAMOUNTINCARDCURRENCY]
    @AmountInCardCurrency decimal(18,0)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [FileName],
        [RowNumberInFile],
        [CustomerID],
        [CardID],
        [Date],
        [WhenApproved],
        [ApprovalCode],
        [TransactionType],
        [CardUseMethod],
        [EstablishmentName],
        [EstablishmentEnglishName],
        [lkpMerchantCategory],
        [Currency],
        [ExchangeRateUsed],
        [AmountInLocalCurrency],
        [AmountInCardCurrency],
        [VAT],
        [Commission],
        [EstablishmentAddress],
        [EstablishmentCity],
        [EstablishmentCountry],
        [EstablishmentLocation],
        [IsEMV],
        [spt_IsContested],
        [ClientPayment],
        [ICPPayment],
        [DistributorPayment],
        [ICPProfit],
        [enmUpayCardTransactionType_CustomerTransactionType],
        [spt_CHBRefused],
        [ClientCHBFee],
        [spt_Comment],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [lgOwningDistributorID],
        [CardCid],
        [OrgCode],
        [upl_Receipt],
        [lgCardClubID]
    FROM [CustomerCardTransaction]
    WHERE [AmountInCardCurrency] = @AmountInCardCurrency
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXCustomerCardTransaction_AmountinLocalCurrency
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillCustomerCardTransactionByAMOUNTINLOCALCURRENCY]
    @AmountInLocalCurrency decimal(18,0)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [FileName],
        [RowNumberInFile],
        [CustomerID],
        [CardID],
        [Date],
        [WhenApproved],
        [ApprovalCode],
        [TransactionType],
        [CardUseMethod],
        [EstablishmentName],
        [EstablishmentEnglishName],
        [lkpMerchantCategory],
        [Currency],
        [ExchangeRateUsed],
        [AmountInLocalCurrency],
        [AmountInCardCurrency],
        [VAT],
        [Commission],
        [EstablishmentAddress],
        [EstablishmentCity],
        [EstablishmentCountry],
        [EstablishmentLocation],
        [IsEMV],
        [spt_IsContested],
        [ClientPayment],
        [ICPPayment],
        [DistributorPayment],
        [ICPProfit],
        [enmUpayCardTransactionType_CustomerTransactionType],
        [spt_CHBRefused],
        [ClientCHBFee],
        [spt_Comment],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [lgOwningDistributorID],
        [CardCid],
        [OrgCode],
        [upl_Receipt],
        [lgCardClubID]
    FROM [CustomerCardTransaction]
    WHERE [AmountInLocalCurrency] = @AmountInLocalCurrency
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXCustomerCardTransaction_CardID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillCustomerCardTransactionByCARDID]
    @CardID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [FileName],
        [RowNumberInFile],
        [CustomerID],
        [CardID],
        [Date],
        [WhenApproved],
        [ApprovalCode],
        [TransactionType],
        [CardUseMethod],
        [EstablishmentName],
        [EstablishmentEnglishName],
        [lkpMerchantCategory],
        [Currency],
        [ExchangeRateUsed],
        [AmountInLocalCurrency],
        [AmountInCardCurrency],
        [VAT],
        [Commission],
        [EstablishmentAddress],
        [EstablishmentCity],
        [EstablishmentCountry],
        [EstablishmentLocation],
        [IsEMV],
        [spt_IsContested],
        [ClientPayment],
        [ICPPayment],
        [DistributorPayment],
        [ICPProfit],
        [enmUpayCardTransactionType_CustomerTransactionType],
        [spt_CHBRefused],
        [ClientCHBFee],
        [spt_Comment],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [lgOwningDistributorID],
        [CardCid],
        [OrgCode],
        [upl_Receipt],
        [lgCardClubID]
    FROM [CustomerCardTransaction]
    WHERE [CardID] = @CardID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXCustomerCardTransaction_CardID&IsContested
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillCustomerCardTransactionByCARDIDAndSPTISCONTESTED]
    @CardID bigint,
    @spt_IsContested bit
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [FileName],
        [RowNumberInFile],
        [CustomerID],
        [CardID],
        [Date],
        [WhenApproved],
        [ApprovalCode],
        [TransactionType],
        [CardUseMethod],
        [EstablishmentName],
        [EstablishmentEnglishName],
        [lkpMerchantCategory],
        [Currency],
        [ExchangeRateUsed],
        [AmountInLocalCurrency],
        [AmountInCardCurrency],
        [VAT],
        [Commission],
        [EstablishmentAddress],
        [EstablishmentCity],
        [EstablishmentCountry],
        [EstablishmentLocation],
        [IsEMV],
        [spt_IsContested],
        [ClientPayment],
        [ICPPayment],
        [DistributorPayment],
        [ICPProfit],
        [enmUpayCardTransactionType_CustomerTransactionType],
        [spt_CHBRefused],
        [ClientCHBFee],
        [spt_Comment],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [lgOwningDistributorID],
        [CardCid],
        [OrgCode],
        [upl_Receipt],
        [lgCardClubID]
    FROM [CustomerCardTransaction]
    WHERE [CardID] = @CardID AND [spt_IsContested] = @spt_IsContested
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXCustomerCardTransaction_CardID_Date
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillCustomerCardTransactionByCARDIDAndDATE]
    @CardID bigint,
    @Date date
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [FileName],
        [RowNumberInFile],
        [CustomerID],
        [CardID],
        [Date],
        [WhenApproved],
        [ApprovalCode],
        [TransactionType],
        [CardUseMethod],
        [EstablishmentName],
        [EstablishmentEnglishName],
        [lkpMerchantCategory],
        [Currency],
        [ExchangeRateUsed],
        [AmountInLocalCurrency],
        [AmountInCardCurrency],
        [VAT],
        [Commission],
        [EstablishmentAddress],
        [EstablishmentCity],
        [EstablishmentCountry],
        [EstablishmentLocation],
        [IsEMV],
        [spt_IsContested],
        [ClientPayment],
        [ICPPayment],
        [DistributorPayment],
        [ICPProfit],
        [enmUpayCardTransactionType_CustomerTransactionType],
        [spt_CHBRefused],
        [ClientCHBFee],
        [spt_Comment],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [lgOwningDistributorID],
        [CardCid],
        [OrgCode],
        [upl_Receipt],
        [lgCardClubID]
    FROM [CustomerCardTransaction]
    WHERE [CardID] = @CardID AND [Date] = @Date
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXCustomerCardTransaction_Currency
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillCustomerCardTransactionByCURRENCY]
    @Currency varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [FileName],
        [RowNumberInFile],
        [CustomerID],
        [CardID],
        [Date],
        [WhenApproved],
        [ApprovalCode],
        [TransactionType],
        [CardUseMethod],
        [EstablishmentName],
        [EstablishmentEnglishName],
        [lkpMerchantCategory],
        [Currency],
        [ExchangeRateUsed],
        [AmountInLocalCurrency],
        [AmountInCardCurrency],
        [VAT],
        [Commission],
        [EstablishmentAddress],
        [EstablishmentCity],
        [EstablishmentCountry],
        [EstablishmentLocation],
        [IsEMV],
        [spt_IsContested],
        [ClientPayment],
        [ICPPayment],
        [DistributorPayment],
        [ICPProfit],
        [enmUpayCardTransactionType_CustomerTransactionType],
        [spt_CHBRefused],
        [ClientCHBFee],
        [spt_Comment],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [lgOwningDistributorID],
        [CardCid],
        [OrgCode],
        [upl_Receipt],
        [lgCardClubID]
    FROM [CustomerCardTransaction]
    WHERE [Currency] = @Currency
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXCustomerCardTransaction_CustomerID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillCustomerCardTransactionByCUSTOMERID]
    @CustomerID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [FileName],
        [RowNumberInFile],
        [CustomerID],
        [CardID],
        [Date],
        [WhenApproved],
        [ApprovalCode],
        [TransactionType],
        [CardUseMethod],
        [EstablishmentName],
        [EstablishmentEnglishName],
        [lkpMerchantCategory],
        [Currency],
        [ExchangeRateUsed],
        [AmountInLocalCurrency],
        [AmountInCardCurrency],
        [VAT],
        [Commission],
        [EstablishmentAddress],
        [EstablishmentCity],
        [EstablishmentCountry],
        [EstablishmentLocation],
        [IsEMV],
        [spt_IsContested],
        [ClientPayment],
        [ICPPayment],
        [DistributorPayment],
        [ICPProfit],
        [enmUpayCardTransactionType_CustomerTransactionType],
        [spt_CHBRefused],
        [ClientCHBFee],
        [spt_Comment],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [lgOwningDistributorID],
        [CardCid],
        [OrgCode],
        [upl_Receipt],
        [lgCardClubID]
    FROM [CustomerCardTransaction]
    WHERE [CustomerID] = @CustomerID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXCustomerCardTransaction_Date
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillCustomerCardTransactionByDATE]
    @Date date
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [FileName],
        [RowNumberInFile],
        [CustomerID],
        [CardID],
        [Date],
        [WhenApproved],
        [ApprovalCode],
        [TransactionType],
        [CardUseMethod],
        [EstablishmentName],
        [EstablishmentEnglishName],
        [lkpMerchantCategory],
        [Currency],
        [ExchangeRateUsed],
        [AmountInLocalCurrency],
        [AmountInCardCurrency],
        [VAT],
        [Commission],
        [EstablishmentAddress],
        [EstablishmentCity],
        [EstablishmentCountry],
        [EstablishmentLocation],
        [IsEMV],
        [spt_IsContested],
        [ClientPayment],
        [ICPPayment],
        [DistributorPayment],
        [ICPProfit],
        [enmUpayCardTransactionType_CustomerTransactionType],
        [spt_CHBRefused],
        [ClientCHBFee],
        [spt_Comment],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [lgOwningDistributorID],
        [CardCid],
        [OrgCode],
        [upl_Receipt],
        [lgCardClubID]
    FROM [CustomerCardTransaction]
    WHERE [Date] = @Date
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXCustomerCardTransaction_lgOwningDistributorID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillCustomerCardTransactionByLGOWNINGDISTRIBUTORID]
    @lgOwningDistributorID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [FileName],
        [RowNumberInFile],
        [CustomerID],
        [CardID],
        [Date],
        [WhenApproved],
        [ApprovalCode],
        [TransactionType],
        [CardUseMethod],
        [EstablishmentName],
        [EstablishmentEnglishName],
        [lkpMerchantCategory],
        [Currency],
        [ExchangeRateUsed],
        [AmountInLocalCurrency],
        [AmountInCardCurrency],
        [VAT],
        [Commission],
        [EstablishmentAddress],
        [EstablishmentCity],
        [EstablishmentCountry],
        [EstablishmentLocation],
        [IsEMV],
        [spt_IsContested],
        [ClientPayment],
        [ICPPayment],
        [DistributorPayment],
        [ICPProfit],
        [enmUpayCardTransactionType_CustomerTransactionType],
        [spt_CHBRefused],
        [ClientCHBFee],
        [spt_Comment],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [lgOwningDistributorID],
        [CardCid],
        [OrgCode],
        [upl_Receipt],
        [lgCardClubID]
    FROM [CustomerCardTransaction]
    WHERE [lgOwningDistributorID] = @lgOwningDistributorID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXCustomerCardTransaction_TransactionType
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillCustomerCardTransactionByTRANSACTIONTYPE]
    @TransactionType nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [FileName],
        [RowNumberInFile],
        [CustomerID],
        [CardID],
        [Date],
        [WhenApproved],
        [ApprovalCode],
        [TransactionType],
        [CardUseMethod],
        [EstablishmentName],
        [EstablishmentEnglishName],
        [lkpMerchantCategory],
        [Currency],
        [ExchangeRateUsed],
        [AmountInLocalCurrency],
        [AmountInCardCurrency],
        [VAT],
        [Commission],
        [EstablishmentAddress],
        [EstablishmentCity],
        [EstablishmentCountry],
        [EstablishmentLocation],
        [IsEMV],
        [spt_IsContested],
        [ClientPayment],
        [ICPPayment],
        [DistributorPayment],
        [ICPProfit],
        [enmUpayCardTransactionType_CustomerTransactionType],
        [spt_CHBRefused],
        [ClientCHBFee],
        [spt_Comment],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [lgOwningDistributorID],
        [CardCid],
        [OrgCode],
        [upl_Receipt],
        [lgCardClubID]
    FROM [CustomerCardTransaction]
    WHERE [TransactionType] = @TransactionType
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: CustomerCardTransactionDefinition
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllCustomerCardTransactionDefinitions]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CustomerCardTransactionDefinition],
        [ID],
        [LeumiCardTransactionType],
        [enmUpayCardTransactionType_CustomerTransactionType],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [CustomerCardTransactionDefinition]
    ORDER BY [ID]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredCustomerCardTransactionDefinitions]
    @LeumiCardTransactionType NVARCHAR(100) = NULL,
    @enmUpayCardTransactionType_CustomerTransactionType VARCHAR(50) = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CustomerCardTransactionDefinition],
        [ID],
        [LeumiCardTransactionType],
        [enmUpayCardTransactionType_CustomerTransactionType],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [CustomerCardTransactionDefinition]
    WHERE 1=1
      AND (@LeumiCardTransactionType IS NULL OR [LeumiCardTransactionType] LIKE '%' + @LeumiCardTransactionType + '%')
      AND (@enmUpayCardTransactionType_CustomerTransactionType IS NULL OR [enmUpayCardTransactionType_CustomerTransactionType] LIKE '%' + @enmUpayCardTransactionType_CustomerTransactionType + '%')
    ORDER BY [ID]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetCustomerCardTransactionDefinitionByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CustomerCardTransactionDefinition],
        [ID],
        [LeumiCardTransactionType],
        [enmUpayCardTransactionType_CustomerTransactionType],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [CustomerCardTransactionDefinition]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddCustomerCardTransactionDefinition]
    @TableName_CustomerCardTransactionDefinition bit = NULL,
    @LeumiCardTransactionType nvarchar(100),
    @enmUpayCardTransactionType_CustomerTransactionType varchar(50),
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [CustomerCardTransactionDefinition] (
        [TableName_CustomerCardTransactionDefinition],
        [LeumiCardTransactionType],
        [enmUpayCardTransactionType_CustomerTransactionType],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_CustomerCardTransactionDefinition,
        @LeumiCardTransactionType,
        @enmUpayCardTransactionType_CustomerTransactionType,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateCustomerCardTransactionDefinition]
    @ID bigint,
    @TableName_CustomerCardTransactionDefinition bit = NULL,
    @LeumiCardTransactionType nvarchar(100),
    @enmUpayCardTransactionType_CustomerTransactionType varchar(50),
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [CustomerCardTransactionDefinition]
    SET
        [TableName_CustomerCardTransactionDefinition] = @TableName_CustomerCardTransactionDefinition,
        [LeumiCardTransactionType] = @LeumiCardTransactionType,
        [enmUpayCardTransactionType_CustomerTransactionType] = @enmUpayCardTransactionType_CustomerTransactionType,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteCustomerCardTransactionDefinition]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [CustomerCardTransactionDefinition]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IXCustomerCardTransactionDefinition_LeumiCardTransactionType
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetCustomerCardTransactionDefinitionByLEUMICARDTRANSACTIONTYPE]
    @LeumiCardTransactionType nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CustomerCardTransactionDefinition],
        [ID],
        [LeumiCardTransactionType],
        [enmUpayCardTransactionType_CustomerTransactionType],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [CustomerCardTransactionDefinition]
    WHERE [LeumiCardTransactionType] = @LeumiCardTransactionType
;
END

GO

-- Procedure for Index: IXCustomerCardTransactionDefinition_UpayCardTransactionType
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillCustomerCardTransactionDefinitionByENMUPAYCARDTRANSACTIONTYPECUSTOMERTRANSACTIONTYPE]
    @enmUpayCardTransactionType_CustomerTransactionType varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CustomerCardTransactionDefinition],
        [ID],
        [LeumiCardTransactionType],
        [enmUpayCardTransactionType_CustomerTransactionType],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [CustomerCardTransactionDefinition]
    WHERE [enmUpayCardTransactionType_CustomerTransactionType] = @enmUpayCardTransactionType_CustomerTransactionType
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: CustomerClub
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllCustomerClubs]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CustomerClub],
        [ID],
        [ClubName],
        [IsRoot],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [IsForBusinessCustomer],
        [UseForUnassignedCustomer],
        [UseForUnassignedBusinessCustomer],
        [AppsFlyerFlag],
        [locMarketingHeader],
        [locMarketingDetails]
    FROM [CustomerClub]
    ORDER BY [ID]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredCustomerClubs]
    @AppsFlyerFlag VARCHAR(50) = NULL,
    @ClubName NVARCHAR(100) = NULL,
    @IsRoot BIT = NULL,
    @UseForUnassignedBusinessCustomer BIT = NULL,
    @UseForUnassignedCustomer BIT = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CustomerClub],
        [ID],
        [ClubName],
        [IsRoot],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [IsForBusinessCustomer],
        [UseForUnassignedCustomer],
        [UseForUnassignedBusinessCustomer],
        [AppsFlyerFlag],
        [locMarketingHeader],
        [locMarketingDetails]
    FROM [CustomerClub]
    WHERE 1=1
      AND (@AppsFlyerFlag IS NULL OR [AppsFlyerFlag] LIKE '%' + @AppsFlyerFlag + '%')
      AND (@ClubName IS NULL OR [ClubName] LIKE '%' + @ClubName + '%')
      AND (@IsRoot IS NULL OR [IsRoot] = @IsRoot)
      AND (@UseForUnassignedBusinessCustomer IS NULL OR [UseForUnassignedBusinessCustomer] = @UseForUnassignedBusinessCustomer)
      AND (@UseForUnassignedCustomer IS NULL OR [UseForUnassignedCustomer] = @UseForUnassignedCustomer)
    ORDER BY [ID]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetCustomerClubByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CustomerClub],
        [ID],
        [ClubName],
        [IsRoot],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [IsForBusinessCustomer],
        [UseForUnassignedCustomer],
        [UseForUnassignedBusinessCustomer],
        [AppsFlyerFlag],
        [locMarketingHeader],
        [locMarketingDetails]
    FROM [CustomerClub]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddCustomerClub]
    @TableName_CustomerClub bit = NULL,
    @ClubName nvarchar(100) = NULL,
    @IsRoot bit = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @IsForBusinessCustomer bit = NULL,
    @UseForUnassignedCustomer bit = NULL,
    @UseForUnassignedBusinessCustomer bit = NULL,
    @AppsFlyerFlag varchar(50) = NULL,
    @locMarketingHeader varchar(50) = NULL,
    @locMarketingDetails varchar(50) = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [CustomerClub] (
        [TableName_CustomerClub],
        [ClubName],
        [IsRoot],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [IsForBusinessCustomer],
        [UseForUnassignedCustomer],
        [UseForUnassignedBusinessCustomer],
        [AppsFlyerFlag],
        [locMarketingHeader],
        [locMarketingDetails],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_CustomerClub,
        @ClubName,
        @IsRoot,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        @IsForBusinessCustomer,
        @UseForUnassignedCustomer,
        @UseForUnassignedBusinessCustomer,
        @AppsFlyerFlag,
        @locMarketingHeader,
        @locMarketingDetails,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateCustomerClub]
    @ID bigint,
    @TableName_CustomerClub bit = NULL,
    @ClubName nvarchar(100) = NULL,
    @IsRoot bit = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @IsForBusinessCustomer bit = NULL,
    @UseForUnassignedCustomer bit = NULL,
    @UseForUnassignedBusinessCustomer bit = NULL,
    @AppsFlyerFlag varchar(50) = NULL,
    @locMarketingHeader varchar(50) = NULL,
    @locMarketingDetails varchar(50) = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [CustomerClub]
    SET
        [TableName_CustomerClub] = @TableName_CustomerClub,
        [ClubName] = @ClubName,
        [IsRoot] = @IsRoot,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [IsForBusinessCustomer] = @IsForBusinessCustomer,
        [UseForUnassignedCustomer] = @UseForUnassignedCustomer,
        [UseForUnassignedBusinessCustomer] = @UseForUnassignedBusinessCustomer,
        [AppsFlyerFlag] = @AppsFlyerFlag,
        [locMarketingHeader] = @locMarketingHeader,
        [locMarketingDetails] = @locMarketingDetails,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteCustomerClub]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [CustomerClub]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_CustomerClub_AppsFlyerFlag
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetCustomerClubByAPPSFLYERFLAG]
    @AppsFlyerFlag varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CustomerClub],
        [ID],
        [ClubName],
        [IsRoot],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [IsForBusinessCustomer],
        [UseForUnassignedCustomer],
        [UseForUnassignedBusinessCustomer],
        [AppsFlyerFlag],
        [locMarketingHeader],
        [locMarketingDetails]
    FROM [CustomerClub]
    WHERE [AppsFlyerFlag] = @AppsFlyerFlag
;
END

GO

-- Procedure for Index: IX_CustomerClub_ClubName
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetCustomerClubByCLUBNAME]
    @ClubName nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CustomerClub],
        [ID],
        [ClubName],
        [IsRoot],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [IsForBusinessCustomer],
        [UseForUnassignedCustomer],
        [UseForUnassignedBusinessCustomer],
        [AppsFlyerFlag],
        [locMarketingHeader],
        [locMarketingDetails]
    FROM [CustomerClub]
    WHERE [ClubName] = @ClubName
;
END

GO

-- Procedure for Index: IX_CustomerClub_IsRoot
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetCustomerClubByISROOT]
    @IsRoot bit
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CustomerClub],
        [ID],
        [ClubName],
        [IsRoot],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [IsForBusinessCustomer],
        [UseForUnassignedCustomer],
        [UseForUnassignedBusinessCustomer],
        [AppsFlyerFlag],
        [locMarketingHeader],
        [locMarketingDetails]
    FROM [CustomerClub]
    WHERE [IsRoot] = @IsRoot
;
END

GO

-- Procedure for Index: IX_CustomerClub_UseForUnassignedBusinessCustomer
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetCustomerClubByUSEFORUNASSIGNEDBUSINESSCUSTOMER]
    @UseForUnassignedBusinessCustomer bit
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CustomerClub],
        [ID],
        [ClubName],
        [IsRoot],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [IsForBusinessCustomer],
        [UseForUnassignedCustomer],
        [UseForUnassignedBusinessCustomer],
        [AppsFlyerFlag],
        [locMarketingHeader],
        [locMarketingDetails]
    FROM [CustomerClub]
    WHERE [UseForUnassignedBusinessCustomer] = @UseForUnassignedBusinessCustomer
;
END

GO

-- Procedure for Index: IX_CustomerClub_UseForUnassignedCustomer
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetCustomerClubByUSEFORUNASSIGNEDCUSTOMER]
    @UseForUnassignedCustomer bit
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CustomerClub],
        [ID],
        [ClubName],
        [IsRoot],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [IsForBusinessCustomer],
        [UseForUnassignedCustomer],
        [UseForUnassignedBusinessCustomer],
        [AppsFlyerFlag],
        [locMarketingHeader],
        [locMarketingDetails]
    FROM [CustomerClub]
    WHERE [UseForUnassignedCustomer] = @UseForUnassignedCustomer
;
END

GO


-- =========================================
-- Stored Procedures for Table: CustomerCreditCard
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllCustomerCreditCards]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_CustomerCreditCard],
            t.[ID],
            t.[CustomerID],
            t.[CardToken],
            t.[Expiry],
            t.[Last4Numbers],
            t.[spt_LastSuccessfulDate],
            t.[clc_WhenAdded],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            t.[lkpCardBrand],
            t.[CardIsForeign],
            t.[IsDefault],
            t.[IsForShow],
            t.[Bin],
            t.[PaymentType],
            p1.[Text] AS [CustomerID_Text]
        FROM [CustomerCreditCard] t
        LEFT JOIN [ccvwComboList_Customer] p1 ON t.[CustomerID] = p1.[ID]
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_CustomerCreditCard],
            [ID],
            [CustomerID],
            [CardToken],
            [Expiry],
            [Last4Numbers],
            [spt_LastSuccessfulDate],
            [clc_WhenAdded],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID],
            [lkpCardBrand],
            [CardIsForeign],
            [IsDefault],
            [IsForShow],
            [Bin],
            [PaymentType]
        FROM [CustomerCreditCard]
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredCustomerCreditCards]
    @CardToken VARCHAR(250) = NULL,
    @CustomerID INT = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_CustomerCreditCard],
            t.[ID],
            t.[CustomerID],
            t.[CardToken],
            t.[Expiry],
            t.[Last4Numbers],
            t.[spt_LastSuccessfulDate],
            t.[clc_WhenAdded],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            t.[lkpCardBrand],
            t.[CardIsForeign],
            t.[IsDefault],
            t.[IsForShow],
            t.[Bin],
            t.[PaymentType],
            p1.[Text] AS [CustomerID_Text]
        FROM [CustomerCreditCard] t
        LEFT JOIN [ccvwComboList_Customer] p1 ON t.[CustomerID] = p1.[ID]
        WHERE 1=1
          AND (@CardToken IS NULL OR t.[CardToken] LIKE '%' + @CardToken + '%')
          AND (@CustomerID IS NULL OR t.[CustomerID] = @CustomerID)
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_CustomerCreditCard],
            [ID],
            [CustomerID],
            [CardToken],
            [Expiry],
            [Last4Numbers],
            [spt_LastSuccessfulDate],
            [clc_WhenAdded],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID],
            [lkpCardBrand],
            [CardIsForeign],
            [IsDefault],
            [IsForShow],
            [Bin],
            [PaymentType]
        FROM [CustomerCreditCard]
        WHERE 1=1
          AND (@CardToken IS NULL OR [CardToken] LIKE '%' + @CardToken + '%')
          AND (@CustomerID IS NULL OR [CustomerID] = @CustomerID)
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetCustomerCreditCardByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CustomerCreditCard],
        [ID],
        [CustomerID],
        [CardToken],
        [Expiry],
        [Last4Numbers],
        [spt_LastSuccessfulDate],
        [clc_WhenAdded],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [lkpCardBrand],
        [CardIsForeign],
        [IsDefault],
        [IsForShow],
        [Bin],
        [PaymentType]
    FROM [CustomerCreditCard]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddCustomerCreditCard]
    @TableName_CustomerCreditCard bit = NULL,
    @CustomerID bigint,
    @CardToken varchar(250) = NULL,
    @Expiry date = NULL,
    @Last4Numbers varchar(4) = NULL,
    @spt_LastSuccessfulDate datetime = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @lkpCardBrand int = NULL,
    @CardIsForeign bit = NULL,
    @IsDefault bit = NULL,
    @IsForShow bit = NULL,
    @Bin nvarchar(100) = NULL,
    @PaymentType nvarchar(100) = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [CustomerCreditCard] (
        [TableName_CustomerCreditCard],
        [CustomerID],
        [CardToken],
        [Expiry],
        [Last4Numbers],
        [spt_LastSuccessfulDate],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [lkpCardBrand],
        [CardIsForeign],
        [IsDefault],
        [IsForShow],
        [Bin],
        [PaymentType],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_CustomerCreditCard,
        @CustomerID,
        @CardToken,
        @Expiry,
        @Last4Numbers,
        @spt_LastSuccessfulDate,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        @lkpCardBrand,
        @CardIsForeign,
        @IsDefault,
        @IsForShow,
        @Bin,
        @PaymentType,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateCustomerCreditCard]
    @ID bigint,
    @TableName_CustomerCreditCard bit = NULL,
    @CustomerID bigint,
    @CardToken varchar(250) = NULL,
    @Expiry date = NULL,
    @Last4Numbers varchar(4) = NULL,
    @spt_LastSuccessfulDate datetime = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @lkpCardBrand int = NULL,
    @CardIsForeign bit = NULL,
    @IsDefault bit = NULL,
    @IsForShow bit = NULL,
    @Bin nvarchar(100) = NULL,
    @PaymentType nvarchar(100) = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [CustomerCreditCard]
    SET
        [TableName_CustomerCreditCard] = @TableName_CustomerCreditCard,
        [CustomerID] = @CustomerID,
        [CardToken] = @CardToken,
        [Expiry] = @Expiry,
        [Last4Numbers] = @Last4Numbers,
        [spt_LastSuccessfulDate] = @spt_LastSuccessfulDate,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [lkpCardBrand] = @lkpCardBrand,
        [CardIsForeign] = @CardIsForeign,
        [IsDefault] = @IsDefault,
        [IsForShow] = @IsForShow,
        [Bin] = @Bin,
        [PaymentType] = @PaymentType,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteCustomerCreditCard]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [CustomerCreditCard]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_CustomerCreditCard_CardToken
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetCustomerCreditCardByCARDTOKEN]
    @CardToken varchar(250)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CustomerCreditCard],
        [ID],
        [CustomerID],
        [CardToken],
        [Expiry],
        [Last4Numbers],
        [spt_LastSuccessfulDate],
        [clc_WhenAdded],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [lkpCardBrand],
        [CardIsForeign],
        [IsDefault],
        [IsForShow],
        [Bin],
        [PaymentType]
    FROM [CustomerCreditCard]
    WHERE [CardToken] = @CardToken
;
END

GO

-- Procedure for Index: IX_CustomerCreditCard_Customer
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillCustomerCreditCardByCUSTOMERID]
    @CustomerID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CustomerCreditCard],
        [ID],
        [CustomerID],
        [CardToken],
        [Expiry],
        [Last4Numbers],
        [spt_LastSuccessfulDate],
        [clc_WhenAdded],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [lkpCardBrand],
        [CardIsForeign],
        [IsDefault],
        [IsForShow],
        [Bin],
        [PaymentType]
    FROM [CustomerCreditCard]
    WHERE [CustomerID] = @CustomerID
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: CustomerKYC
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllCustomerKYCs]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_CustomerKYC],
            t.[ID],
            t.[CustomerID],
            t.[lkpEmploymentStatus],
            t.[Employer],
            t.[EmploymentPosition],
            t.[PublicPosition],
            t.[ConnectionWithPublicPerson],
            t.[lkpAdditionalCitizenship_Country],
            t.[WasPreviouslyDeniedBankService],
            t.[IsSingleBeneficiary],
            t.[AdditionalBeneficiaries],
            t.[lkpSourceOfFunds],
            t.[SourceOfFundsOther],
            t.[upl_ManiPremiumBeneficiaryDocument],
            t.[spt_enmManiPremiumBeneficiaryDocumentStatus_DocumentationStatus],
            t.[scb_enmManiPremiumBeneficiaryDocumentStatus_DocumentationStatus],
            t.[ManiPremiumTextExpected],
            t.[ManiPremiumTextReceived],
            t.[ManiPremiumTextLanguage],
            t.[ManiPremiumTextScore],
            t.[ManiPremiumTextThreshold],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            t.[upl_ManiPremiumTextVideo],
            p1.[Text] AS [CustomerID_Text]
        FROM [CustomerKYC] t
        LEFT JOIN [ccvwComboList_Customer] p1 ON t.[CustomerID] = p1.[ID]
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_CustomerKYC],
            [ID],
            [CustomerID],
            [lkpEmploymentStatus],
            [Employer],
            [EmploymentPosition],
            [PublicPosition],
            [ConnectionWithPublicPerson],
            [lkpAdditionalCitizenship_Country],
            [WasPreviouslyDeniedBankService],
            [IsSingleBeneficiary],
            [AdditionalBeneficiaries],
            [lkpSourceOfFunds],
            [SourceOfFundsOther],
            [upl_ManiPremiumBeneficiaryDocument],
            [spt_enmManiPremiumBeneficiaryDocumentStatus_DocumentationStatus],
            [scb_enmManiPremiumBeneficiaryDocumentStatus_DocumentationStatus],
            [ManiPremiumTextExpected],
            [ManiPremiumTextReceived],
            [ManiPremiumTextLanguage],
            [ManiPremiumTextScore],
            [ManiPremiumTextThreshold],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID],
            [upl_ManiPremiumTextVideo]
        FROM [CustomerKYC]
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredCustomerKYCs]
    @CustomerID INT = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_CustomerKYC],
            t.[ID],
            t.[CustomerID],
            t.[lkpEmploymentStatus],
            t.[Employer],
            t.[EmploymentPosition],
            t.[PublicPosition],
            t.[ConnectionWithPublicPerson],
            t.[lkpAdditionalCitizenship_Country],
            t.[WasPreviouslyDeniedBankService],
            t.[IsSingleBeneficiary],
            t.[AdditionalBeneficiaries],
            t.[lkpSourceOfFunds],
            t.[SourceOfFundsOther],
            t.[upl_ManiPremiumBeneficiaryDocument],
            t.[spt_enmManiPremiumBeneficiaryDocumentStatus_DocumentationStatus],
            t.[scb_enmManiPremiumBeneficiaryDocumentStatus_DocumentationStatus],
            t.[ManiPremiumTextExpected],
            t.[ManiPremiumTextReceived],
            t.[ManiPremiumTextLanguage],
            t.[ManiPremiumTextScore],
            t.[ManiPremiumTextThreshold],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            t.[upl_ManiPremiumTextVideo],
            p1.[Text] AS [CustomerID_Text]
        FROM [CustomerKYC] t
        LEFT JOIN [ccvwComboList_Customer] p1 ON t.[CustomerID] = p1.[ID]
        WHERE 1=1
          AND (@CustomerID IS NULL OR t.[CustomerID] = @CustomerID)
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_CustomerKYC],
            [ID],
            [CustomerID],
            [lkpEmploymentStatus],
            [Employer],
            [EmploymentPosition],
            [PublicPosition],
            [ConnectionWithPublicPerson],
            [lkpAdditionalCitizenship_Country],
            [WasPreviouslyDeniedBankService],
            [IsSingleBeneficiary],
            [AdditionalBeneficiaries],
            [lkpSourceOfFunds],
            [SourceOfFundsOther],
            [upl_ManiPremiumBeneficiaryDocument],
            [spt_enmManiPremiumBeneficiaryDocumentStatus_DocumentationStatus],
            [scb_enmManiPremiumBeneficiaryDocumentStatus_DocumentationStatus],
            [ManiPremiumTextExpected],
            [ManiPremiumTextReceived],
            [ManiPremiumTextLanguage],
            [ManiPremiumTextScore],
            [ManiPremiumTextThreshold],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID],
            [upl_ManiPremiumTextVideo]
        FROM [CustomerKYC]
        WHERE 1=1
          AND (@CustomerID IS NULL OR [CustomerID] = @CustomerID)
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetCustomerKYCByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CustomerKYC],
        [ID],
        [CustomerID],
        [lkpEmploymentStatus],
        [Employer],
        [EmploymentPosition],
        [PublicPosition],
        [ConnectionWithPublicPerson],
        [lkpAdditionalCitizenship_Country],
        [WasPreviouslyDeniedBankService],
        [IsSingleBeneficiary],
        [AdditionalBeneficiaries],
        [lkpSourceOfFunds],
        [SourceOfFundsOther],
        [upl_ManiPremiumBeneficiaryDocument],
        [spt_enmManiPremiumBeneficiaryDocumentStatus_DocumentationStatus],
        [scb_enmManiPremiumBeneficiaryDocumentStatus_DocumentationStatus],
        [ManiPremiumTextExpected],
        [ManiPremiumTextReceived],
        [ManiPremiumTextLanguage],
        [ManiPremiumTextScore],
        [ManiPremiumTextThreshold],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [upl_ManiPremiumTextVideo]
    FROM [CustomerKYC]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddCustomerKYC]
    @TableName_CustomerKYC bit = NULL,
    @CustomerID bigint,
    @lkpEmploymentStatus nvarchar(100) = NULL,
    @Employer nvarchar(100) = NULL,
    @EmploymentPosition nvarchar(100) = NULL,
    @PublicPosition nvarchar(100) = NULL,
    @ConnectionWithPublicPerson nvarchar(100) = NULL,
    @lkpAdditionalCitizenship_Country varchar(3) = NULL,
    @WasPreviouslyDeniedBankService bit = NULL,
    @IsSingleBeneficiary bit = NULL,
    @AdditionalBeneficiaries nvarchar(400) = NULL,
    @lkpSourceOfFunds varchar(50) = NULL,
    @SourceOfFundsOther nvarchar(100) = NULL,
    @upl_ManiPremiumBeneficiaryDocument varchar(69) = NULL,
    @spt_enmManiPremiumBeneficiaryDocumentStatus_DocumentationStatus varchar(50) = NULL,
    @ManiPremiumTextExpected nvarchar(4000) = NULL,
    @ManiPremiumTextReceived nvarchar(4000) = NULL,
    @ManiPremiumTextLanguage varchar(50) = NULL,
    @ManiPremiumTextScore float = NULL,
    @ManiPremiumTextThreshold float = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @upl_ManiPremiumTextVideo varchar(69) = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [CustomerKYC] (
        [TableName_CustomerKYC],
        [CustomerID],
        [lkpEmploymentStatus],
        [Employer],
        [EmploymentPosition],
        [PublicPosition],
        [ConnectionWithPublicPerson],
        [lkpAdditionalCitizenship_Country],
        [WasPreviouslyDeniedBankService],
        [IsSingleBeneficiary],
        [AdditionalBeneficiaries],
        [lkpSourceOfFunds],
        [SourceOfFundsOther],
        [upl_ManiPremiumBeneficiaryDocument],
        [spt_enmManiPremiumBeneficiaryDocumentStatus_DocumentationStatus],
        [ManiPremiumTextExpected],
        [ManiPremiumTextReceived],
        [ManiPremiumTextLanguage],
        [ManiPremiumTextScore],
        [ManiPremiumTextThreshold],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [upl_ManiPremiumTextVideo],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_CustomerKYC,
        @CustomerID,
        @lkpEmploymentStatus,
        @Employer,
        @EmploymentPosition,
        @PublicPosition,
        @ConnectionWithPublicPerson,
        @lkpAdditionalCitizenship_Country,
        @WasPreviouslyDeniedBankService,
        @IsSingleBeneficiary,
        @AdditionalBeneficiaries,
        @lkpSourceOfFunds,
        @SourceOfFundsOther,
        @upl_ManiPremiumBeneficiaryDocument,
        @spt_enmManiPremiumBeneficiaryDocumentStatus_DocumentationStatus,
        @ManiPremiumTextExpected,
        @ManiPremiumTextReceived,
        @ManiPremiumTextLanguage,
        @ManiPremiumTextScore,
        @ManiPremiumTextThreshold,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        @upl_ManiPremiumTextVideo,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateCustomerKYC]
    @ID bigint,
    @TableName_CustomerKYC bit = NULL,
    @CustomerID bigint,
    @lkpEmploymentStatus nvarchar(100) = NULL,
    @Employer nvarchar(100) = NULL,
    @EmploymentPosition nvarchar(100) = NULL,
    @PublicPosition nvarchar(100) = NULL,
    @ConnectionWithPublicPerson nvarchar(100) = NULL,
    @lkpAdditionalCitizenship_Country varchar(3) = NULL,
    @WasPreviouslyDeniedBankService bit = NULL,
    @IsSingleBeneficiary bit = NULL,
    @AdditionalBeneficiaries nvarchar(400) = NULL,
    @lkpSourceOfFunds varchar(50) = NULL,
    @SourceOfFundsOther nvarchar(100) = NULL,
    @upl_ManiPremiumBeneficiaryDocument varchar(69) = NULL,
    @spt_enmManiPremiumBeneficiaryDocumentStatus_DocumentationStatus varchar(50) = NULL,
    @scb_enmManiPremiumBeneficiaryDocumentStatus_DocumentationStatus nvarchar(200) = NULL,
    @ManiPremiumTextExpected nvarchar(4000) = NULL,
    @ManiPremiumTextReceived nvarchar(4000) = NULL,
    @ManiPremiumTextLanguage varchar(50) = NULL,
    @ManiPremiumTextScore float = NULL,
    @ManiPremiumTextThreshold float = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @upl_ManiPremiumTextVideo varchar(69) = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [CustomerKYC]
    SET
        [TableName_CustomerKYC] = @TableName_CustomerKYC,
        [CustomerID] = @CustomerID,
        [lkpEmploymentStatus] = @lkpEmploymentStatus,
        [Employer] = @Employer,
        [EmploymentPosition] = @EmploymentPosition,
        [PublicPosition] = @PublicPosition,
        [ConnectionWithPublicPerson] = @ConnectionWithPublicPerson,
        [lkpAdditionalCitizenship_Country] = @lkpAdditionalCitizenship_Country,
        [WasPreviouslyDeniedBankService] = @WasPreviouslyDeniedBankService,
        [IsSingleBeneficiary] = @IsSingleBeneficiary,
        [AdditionalBeneficiaries] = @AdditionalBeneficiaries,
        [lkpSourceOfFunds] = @lkpSourceOfFunds,
        [SourceOfFundsOther] = @SourceOfFundsOther,
        [upl_ManiPremiumBeneficiaryDocument] = @upl_ManiPremiumBeneficiaryDocument,
        [spt_enmManiPremiumBeneficiaryDocumentStatus_DocumentationStatus] = @spt_enmManiPremiumBeneficiaryDocumentStatus_DocumentationStatus,
        [scb_enmManiPremiumBeneficiaryDocumentStatus_DocumentationStatus] = @scb_enmManiPremiumBeneficiaryDocumentStatus_DocumentationStatus,
        [ManiPremiumTextExpected] = @ManiPremiumTextExpected,
        [ManiPremiumTextReceived] = @ManiPremiumTextReceived,
        [ManiPremiumTextLanguage] = @ManiPremiumTextLanguage,
        [ManiPremiumTextScore] = @ManiPremiumTextScore,
        [ManiPremiumTextThreshold] = @ManiPremiumTextThreshold,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [upl_ManiPremiumTextVideo] = @upl_ManiPremiumTextVideo,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteCustomerKYC]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [CustomerKYC]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_CustomerKYC_Customer
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetCustomerKYCByCUSTOMERID]
    @CustomerID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CustomerKYC],
        [ID],
        [CustomerID],
        [lkpEmploymentStatus],
        [Employer],
        [EmploymentPosition],
        [PublicPosition],
        [ConnectionWithPublicPerson],
        [lkpAdditionalCitizenship_Country],
        [WasPreviouslyDeniedBankService],
        [IsSingleBeneficiary],
        [AdditionalBeneficiaries],
        [lkpSourceOfFunds],
        [SourceOfFundsOther],
        [upl_ManiPremiumBeneficiaryDocument],
        [spt_enmManiPremiumBeneficiaryDocumentStatus_DocumentationStatus],
        [scb_enmManiPremiumBeneficiaryDocumentStatus_DocumentationStatus],
        [ManiPremiumTextExpected],
        [ManiPremiumTextReceived],
        [ManiPremiumTextLanguage],
        [ManiPremiumTextScore],
        [ManiPremiumTextThreshold],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [upl_ManiPremiumTextVideo]
    FROM [CustomerKYC]
    WHERE [CustomerID] = @CustomerID
;
END

GO


-- =========================================
-- Stored Procedures for Table: CustomerPartnership
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllCustomerPartnerships]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_CustomerPartnership],
            t.[ID],
            t.[CustomerID],
            t.[enmCustomerPartnership],
            t.[PartnershipCode],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            p1.[Text] AS [CustomerID_Text]
        FROM [CustomerPartnership] t
        LEFT JOIN [ccvwComboList_Customer] p1 ON t.[CustomerID] = p1.[ID]
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_CustomerPartnership],
            [ID],
            [CustomerID],
            [enmCustomerPartnership],
            [PartnershipCode],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID]
        FROM [CustomerPartnership]
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredCustomerPartnerships]
    @CustomerID INT = NULL,
    @enmCustomerPartnership NVARCHAR(100) = NULL,
    @PartnershipCode NVARCHAR(100) = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_CustomerPartnership],
            t.[ID],
            t.[CustomerID],
            t.[enmCustomerPartnership],
            t.[PartnershipCode],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            p1.[Text] AS [CustomerID_Text]
        FROM [CustomerPartnership] t
        LEFT JOIN [ccvwComboList_Customer] p1 ON t.[CustomerID] = p1.[ID]
        WHERE 1=1
          AND (@CustomerID IS NULL OR t.[CustomerID] = @CustomerID)
          AND (@enmCustomerPartnership IS NULL OR t.[enmCustomerPartnership] LIKE '%' + @enmCustomerPartnership + '%')
          AND (@PartnershipCode IS NULL OR t.[PartnershipCode] LIKE '%' + @PartnershipCode + '%')
          AND (@enmCustomerPartnership IS NULL OR t.[enmCustomerPartnership] LIKE '%' + @enmCustomerPartnership + '%')
          AND (@CustomerID IS NULL OR t.[CustomerID] = @CustomerID)
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_CustomerPartnership],
            [ID],
            [CustomerID],
            [enmCustomerPartnership],
            [PartnershipCode],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID]
        FROM [CustomerPartnership]
        WHERE 1=1
          AND (@CustomerID IS NULL OR [CustomerID] = @CustomerID)
          AND (@enmCustomerPartnership IS NULL OR [enmCustomerPartnership] LIKE '%' + @enmCustomerPartnership + '%')
          AND (@PartnershipCode IS NULL OR [PartnershipCode] LIKE '%' + @PartnershipCode + '%')
          AND (@enmCustomerPartnership IS NULL OR [enmCustomerPartnership] LIKE '%' + @enmCustomerPartnership + '%')
          AND (@CustomerID IS NULL OR [CustomerID] = @CustomerID)
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetCustomerPartnershipByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CustomerPartnership],
        [ID],
        [CustomerID],
        [enmCustomerPartnership],
        [PartnershipCode],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [CustomerPartnership]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddCustomerPartnership]
    @TableName_CustomerPartnership bit = NULL,
    @CustomerID bigint,
    @enmCustomerPartnership nvarchar(100),
    @PartnershipCode nvarchar(100),
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [CustomerPartnership] (
        [TableName_CustomerPartnership],
        [CustomerID],
        [enmCustomerPartnership],
        [PartnershipCode],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_CustomerPartnership,
        @CustomerID,
        @enmCustomerPartnership,
        @PartnershipCode,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateCustomerPartnership]
    @ID bigint,
    @TableName_CustomerPartnership bit = NULL,
    @CustomerID bigint,
    @enmCustomerPartnership nvarchar(100),
    @PartnershipCode nvarchar(100),
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [CustomerPartnership]
    SET
        [TableName_CustomerPartnership] = @TableName_CustomerPartnership,
        [CustomerID] = @CustomerID,
        [enmCustomerPartnership] = @enmCustomerPartnership,
        [PartnershipCode] = @PartnershipCode,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteCustomerPartnership]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [CustomerPartnership]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_CustomerPartnership_CustomerID_enmCustomerPartnership
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetCustomerPartnershipByCUSTOMERIDAndENMCUSTOMERPARTNERSHIP]
    @CustomerID bigint,
    @enmCustomerPartnership nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CustomerPartnership],
        [ID],
        [CustomerID],
        [enmCustomerPartnership],
        [PartnershipCode],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [CustomerPartnership]
    WHERE [CustomerID] = @CustomerID AND [enmCustomerPartnership] = @enmCustomerPartnership
;
END

GO

-- Procedure for Index: IX_CustomerPartnership_PartnershipCode_enmCustomerPartnership
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetCustomerPartnershipByPARTNERSHIPCODEAndENMCUSTOMERPARTNERSHIP]
    @PartnershipCode nvarchar(100),
    @enmCustomerPartnership nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CustomerPartnership],
        [ID],
        [CustomerID],
        [enmCustomerPartnership],
        [PartnershipCode],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [CustomerPartnership]
    WHERE [PartnershipCode] = @PartnershipCode AND [enmCustomerPartnership] = @enmCustomerPartnership
;
END

GO

-- Procedure for Index: IX_CustomerPartnership_CustomerID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillCustomerPartnershipByCUSTOMERID]
    @CustomerID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CustomerPartnership],
        [ID],
        [CustomerID],
        [enmCustomerPartnership],
        [PartnershipCode],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [CustomerPartnership]
    WHERE [CustomerID] = @CustomerID
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: CustomerPerformance
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllCustomerPerformances]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_CustomerPerformance],
            t.[ID],
            t.[CustomerID],
            t.[spt_NumberOfActivePrepaidCards],
            t.[spt_PrepaidCardBalanceSum],
            t.[agg_PrepaidCardAmountLoadedToday],
            t.[agg_PrepaidCardAmountLoadedThisMonth],
            t.[agg_PrepaidCardLoadCountToday],
            t.[agg_PrepaidCardLoadCountThisMonth],
            t.[agg_PrepaidCardAmountLoadedLast6Months],
            t.[agg_PrepaidCardTotalAmountLoaded],
            t.[agg_PrepaidCardTotalLoadCount],
            t.[spt_WalletBalanceRaw],
            t.[spt_WalletBalanceCommitted],
            t.[clc_WalletBalanceWorking],
            t.[agg_WalletWithdrawalAmtViaCreditCardToday],
            t.[agg_WalletWithdrawalAmtViaCreditCardThisMonth],
            t.[agg_WalletWithdrawalAmtViaBankToday],
            t.[agg_WalletWithdrawalAmtViaBankThisMonth],
            t.[agg_WalletWithdrawalAmtViaChangerToday],
            t.[agg_WalletWithdrawalAmtViaChangerThisMonth],
            t.[agg_WalletWithdrawalCountViaCreditCardToday],
            t.[agg_WalletWithdrawalCountViaCreditCardThisMonth],
            t.[agg_WalletWithdrawalCountViaBankToday],
            t.[agg_WalletWithdrawalCountViaBankThisMonth],
            t.[agg_WalletWithdrawalCountViaChangerToday],
            t.[agg_WalletWithdrawalCountViaChangerThisMonth],
            t.[agg_WalletTransferPaidAmtToday],
            t.[agg_WalletTransferPaidAmtThisMonth],
            t.[agg_WalletTransferPaidCountToday],
            t.[agg_WalletTransferPaidCountThisMonth],
            t.[agg_WalletTotalTransferPaidAmount],
            t.[agg_WalletTotalTransferPaidCount],
            t.[spt_LastTimeEnteredCustomerApplication],
            t.[spt_LastTimeLoadedCard],
            t.[spt_LastTimeDidWalletTransfer],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            t.[agg_WalletTransferPaidCountLast7Days],
            t.[agg_WalletDepositAmtViaCreditCardThisMonth],
            t.[agg_WalletDepositAmtViaCreditCardToday],
            t.[agg_WalletDepositAmtViaBankToday],
            t.[agg_WalletDepositAmtViaBankThisMonth],
            t.[agg_WalletDepositAmtViaChangerToday],
            t.[agg_WalletDepositAmtViaChangerThisMonth],
            t.[agg_WalletDepositCountViaCreditCardToday],
            t.[agg_WalletDepositCountViaCreditCardThisMonth],
            t.[agg_WalletDepositCountViaBankToday],
            t.[agg_WalletDepositCountViaBankThisMonth],
            t.[agg_WalletDepositCountViaChangerToday],
            t.[agg_WalletDepositCountViaChangerThisMonth],
            t.[agg_WalletTransferReceivedAmtToday],
            t.[agg_WalletTransferReceivedAmtThisMonth],
            t.[agg_WalletTransferReceivedCountToday],
            t.[agg_WalletTransferReceivedCountThisMonth],
            t.[agg_WalletTotalTransferReceivedAmount],
            t.[agg_WalletTotalTransferReceivedCount],
            t.[agg_WalletTransferPaidAmtLast7Days],
            t.[agg_TotalTransferredToWallet1Month],
            t.[agg_TotalTransferredToWallet6Months],
            t.[agg_TotalTransferredToWallet],
            p1.[Text] AS [CustomerID_Text]
        FROM [CustomerPerformance] t
        LEFT JOIN [ccvwComboList_Customer] p1 ON t.[CustomerID] = p1.[ID]
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_CustomerPerformance],
            [ID],
            [CustomerID],
            [spt_NumberOfActivePrepaidCards],
            [spt_PrepaidCardBalanceSum],
            [agg_PrepaidCardAmountLoadedToday],
            [agg_PrepaidCardAmountLoadedThisMonth],
            [agg_PrepaidCardLoadCountToday],
            [agg_PrepaidCardLoadCountThisMonth],
            [agg_PrepaidCardAmountLoadedLast6Months],
            [agg_PrepaidCardTotalAmountLoaded],
            [agg_PrepaidCardTotalLoadCount],
            [spt_WalletBalanceRaw],
            [spt_WalletBalanceCommitted],
            [clc_WalletBalanceWorking],
            [agg_WalletWithdrawalAmtViaCreditCardToday],
            [agg_WalletWithdrawalAmtViaCreditCardThisMonth],
            [agg_WalletWithdrawalAmtViaBankToday],
            [agg_WalletWithdrawalAmtViaBankThisMonth],
            [agg_WalletWithdrawalAmtViaChangerToday],
            [agg_WalletWithdrawalAmtViaChangerThisMonth],
            [agg_WalletWithdrawalCountViaCreditCardToday],
            [agg_WalletWithdrawalCountViaCreditCardThisMonth],
            [agg_WalletWithdrawalCountViaBankToday],
            [agg_WalletWithdrawalCountViaBankThisMonth],
            [agg_WalletWithdrawalCountViaChangerToday],
            [agg_WalletWithdrawalCountViaChangerThisMonth],
            [agg_WalletTransferPaidAmtToday],
            [agg_WalletTransferPaidAmtThisMonth],
            [agg_WalletTransferPaidCountToday],
            [agg_WalletTransferPaidCountThisMonth],
            [agg_WalletTotalTransferPaidAmount],
            [agg_WalletTotalTransferPaidCount],
            [spt_LastTimeEnteredCustomerApplication],
            [spt_LastTimeLoadedCard],
            [spt_LastTimeDidWalletTransfer],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID],
            [agg_WalletTransferPaidCountLast7Days],
            [agg_WalletDepositAmtViaCreditCardThisMonth],
            [agg_WalletDepositAmtViaCreditCardToday],
            [agg_WalletDepositAmtViaBankToday],
            [agg_WalletDepositAmtViaBankThisMonth],
            [agg_WalletDepositAmtViaChangerToday],
            [agg_WalletDepositAmtViaChangerThisMonth],
            [agg_WalletDepositCountViaCreditCardToday],
            [agg_WalletDepositCountViaCreditCardThisMonth],
            [agg_WalletDepositCountViaBankToday],
            [agg_WalletDepositCountViaBankThisMonth],
            [agg_WalletDepositCountViaChangerToday],
            [agg_WalletDepositCountViaChangerThisMonth],
            [agg_WalletTransferReceivedAmtToday],
            [agg_WalletTransferReceivedAmtThisMonth],
            [agg_WalletTransferReceivedCountToday],
            [agg_WalletTransferReceivedCountThisMonth],
            [agg_WalletTotalTransferReceivedAmount],
            [agg_WalletTotalTransferReceivedCount],
            [agg_WalletTransferPaidAmtLast7Days],
            [agg_TotalTransferredToWallet1Month],
            [agg_TotalTransferredToWallet6Months],
            [agg_TotalTransferredToWallet]
        FROM [CustomerPerformance]
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredCustomerPerformances]
    @CustomerID INT = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_CustomerPerformance],
            t.[ID],
            t.[CustomerID],
            t.[spt_NumberOfActivePrepaidCards],
            t.[spt_PrepaidCardBalanceSum],
            t.[agg_PrepaidCardAmountLoadedToday],
            t.[agg_PrepaidCardAmountLoadedThisMonth],
            t.[agg_PrepaidCardLoadCountToday],
            t.[agg_PrepaidCardLoadCountThisMonth],
            t.[agg_PrepaidCardAmountLoadedLast6Months],
            t.[agg_PrepaidCardTotalAmountLoaded],
            t.[agg_PrepaidCardTotalLoadCount],
            t.[spt_WalletBalanceRaw],
            t.[spt_WalletBalanceCommitted],
            t.[clc_WalletBalanceWorking],
            t.[agg_WalletWithdrawalAmtViaCreditCardToday],
            t.[agg_WalletWithdrawalAmtViaCreditCardThisMonth],
            t.[agg_WalletWithdrawalAmtViaBankToday],
            t.[agg_WalletWithdrawalAmtViaBankThisMonth],
            t.[agg_WalletWithdrawalAmtViaChangerToday],
            t.[agg_WalletWithdrawalAmtViaChangerThisMonth],
            t.[agg_WalletWithdrawalCountViaCreditCardToday],
            t.[agg_WalletWithdrawalCountViaCreditCardThisMonth],
            t.[agg_WalletWithdrawalCountViaBankToday],
            t.[agg_WalletWithdrawalCountViaBankThisMonth],
            t.[agg_WalletWithdrawalCountViaChangerToday],
            t.[agg_WalletWithdrawalCountViaChangerThisMonth],
            t.[agg_WalletTransferPaidAmtToday],
            t.[agg_WalletTransferPaidAmtThisMonth],
            t.[agg_WalletTransferPaidCountToday],
            t.[agg_WalletTransferPaidCountThisMonth],
            t.[agg_WalletTotalTransferPaidAmount],
            t.[agg_WalletTotalTransferPaidCount],
            t.[spt_LastTimeEnteredCustomerApplication],
            t.[spt_LastTimeLoadedCard],
            t.[spt_LastTimeDidWalletTransfer],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            t.[agg_WalletTransferPaidCountLast7Days],
            t.[agg_WalletDepositAmtViaCreditCardThisMonth],
            t.[agg_WalletDepositAmtViaCreditCardToday],
            t.[agg_WalletDepositAmtViaBankToday],
            t.[agg_WalletDepositAmtViaBankThisMonth],
            t.[agg_WalletDepositAmtViaChangerToday],
            t.[agg_WalletDepositAmtViaChangerThisMonth],
            t.[agg_WalletDepositCountViaCreditCardToday],
            t.[agg_WalletDepositCountViaCreditCardThisMonth],
            t.[agg_WalletDepositCountViaBankToday],
            t.[agg_WalletDepositCountViaBankThisMonth],
            t.[agg_WalletDepositCountViaChangerToday],
            t.[agg_WalletDepositCountViaChangerThisMonth],
            t.[agg_WalletTransferReceivedAmtToday],
            t.[agg_WalletTransferReceivedAmtThisMonth],
            t.[agg_WalletTransferReceivedCountToday],
            t.[agg_WalletTransferReceivedCountThisMonth],
            t.[agg_WalletTotalTransferReceivedAmount],
            t.[agg_WalletTotalTransferReceivedCount],
            t.[agg_WalletTransferPaidAmtLast7Days],
            t.[agg_TotalTransferredToWallet1Month],
            t.[agg_TotalTransferredToWallet6Months],
            t.[agg_TotalTransferredToWallet],
            p1.[Text] AS [CustomerID_Text]
        FROM [CustomerPerformance] t
        LEFT JOIN [ccvwComboList_Customer] p1 ON t.[CustomerID] = p1.[ID]
        WHERE 1=1
          AND (@CustomerID IS NULL OR t.[CustomerID] = @CustomerID)
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_CustomerPerformance],
            [ID],
            [CustomerID],
            [spt_NumberOfActivePrepaidCards],
            [spt_PrepaidCardBalanceSum],
            [agg_PrepaidCardAmountLoadedToday],
            [agg_PrepaidCardAmountLoadedThisMonth],
            [agg_PrepaidCardLoadCountToday],
            [agg_PrepaidCardLoadCountThisMonth],
            [agg_PrepaidCardAmountLoadedLast6Months],
            [agg_PrepaidCardTotalAmountLoaded],
            [agg_PrepaidCardTotalLoadCount],
            [spt_WalletBalanceRaw],
            [spt_WalletBalanceCommitted],
            [clc_WalletBalanceWorking],
            [agg_WalletWithdrawalAmtViaCreditCardToday],
            [agg_WalletWithdrawalAmtViaCreditCardThisMonth],
            [agg_WalletWithdrawalAmtViaBankToday],
            [agg_WalletWithdrawalAmtViaBankThisMonth],
            [agg_WalletWithdrawalAmtViaChangerToday],
            [agg_WalletWithdrawalAmtViaChangerThisMonth],
            [agg_WalletWithdrawalCountViaCreditCardToday],
            [agg_WalletWithdrawalCountViaCreditCardThisMonth],
            [agg_WalletWithdrawalCountViaBankToday],
            [agg_WalletWithdrawalCountViaBankThisMonth],
            [agg_WalletWithdrawalCountViaChangerToday],
            [agg_WalletWithdrawalCountViaChangerThisMonth],
            [agg_WalletTransferPaidAmtToday],
            [agg_WalletTransferPaidAmtThisMonth],
            [agg_WalletTransferPaidCountToday],
            [agg_WalletTransferPaidCountThisMonth],
            [agg_WalletTotalTransferPaidAmount],
            [agg_WalletTotalTransferPaidCount],
            [spt_LastTimeEnteredCustomerApplication],
            [spt_LastTimeLoadedCard],
            [spt_LastTimeDidWalletTransfer],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID],
            [agg_WalletTransferPaidCountLast7Days],
            [agg_WalletDepositAmtViaCreditCardThisMonth],
            [agg_WalletDepositAmtViaCreditCardToday],
            [agg_WalletDepositAmtViaBankToday],
            [agg_WalletDepositAmtViaBankThisMonth],
            [agg_WalletDepositAmtViaChangerToday],
            [agg_WalletDepositAmtViaChangerThisMonth],
            [agg_WalletDepositCountViaCreditCardToday],
            [agg_WalletDepositCountViaCreditCardThisMonth],
            [agg_WalletDepositCountViaBankToday],
            [agg_WalletDepositCountViaBankThisMonth],
            [agg_WalletDepositCountViaChangerToday],
            [agg_WalletDepositCountViaChangerThisMonth],
            [agg_WalletTransferReceivedAmtToday],
            [agg_WalletTransferReceivedAmtThisMonth],
            [agg_WalletTransferReceivedCountToday],
            [agg_WalletTransferReceivedCountThisMonth],
            [agg_WalletTotalTransferReceivedAmount],
            [agg_WalletTotalTransferReceivedCount],
            [agg_WalletTransferPaidAmtLast7Days],
            [agg_TotalTransferredToWallet1Month],
            [agg_TotalTransferredToWallet6Months],
            [agg_TotalTransferredToWallet]
        FROM [CustomerPerformance]
        WHERE 1=1
          AND (@CustomerID IS NULL OR [CustomerID] = @CustomerID)
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetCustomerPerformanceByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CustomerPerformance],
        [ID],
        [CustomerID],
        [spt_NumberOfActivePrepaidCards],
        [spt_PrepaidCardBalanceSum],
        [agg_PrepaidCardAmountLoadedToday],
        [agg_PrepaidCardAmountLoadedThisMonth],
        [agg_PrepaidCardLoadCountToday],
        [agg_PrepaidCardLoadCountThisMonth],
        [agg_PrepaidCardAmountLoadedLast6Months],
        [agg_PrepaidCardTotalAmountLoaded],
        [agg_PrepaidCardTotalLoadCount],
        [spt_WalletBalanceRaw],
        [spt_WalletBalanceCommitted],
        [clc_WalletBalanceWorking],
        [agg_WalletWithdrawalAmtViaCreditCardToday],
        [agg_WalletWithdrawalAmtViaCreditCardThisMonth],
        [agg_WalletWithdrawalAmtViaBankToday],
        [agg_WalletWithdrawalAmtViaBankThisMonth],
        [agg_WalletWithdrawalAmtViaChangerToday],
        [agg_WalletWithdrawalAmtViaChangerThisMonth],
        [agg_WalletWithdrawalCountViaCreditCardToday],
        [agg_WalletWithdrawalCountViaCreditCardThisMonth],
        [agg_WalletWithdrawalCountViaBankToday],
        [agg_WalletWithdrawalCountViaBankThisMonth],
        [agg_WalletWithdrawalCountViaChangerToday],
        [agg_WalletWithdrawalCountViaChangerThisMonth],
        [agg_WalletTransferPaidAmtToday],
        [agg_WalletTransferPaidAmtThisMonth],
        [agg_WalletTransferPaidCountToday],
        [agg_WalletTransferPaidCountThisMonth],
        [agg_WalletTotalTransferPaidAmount],
        [agg_WalletTotalTransferPaidCount],
        [spt_LastTimeEnteredCustomerApplication],
        [spt_LastTimeLoadedCard],
        [spt_LastTimeDidWalletTransfer],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [agg_WalletTransferPaidCountLast7Days],
        [agg_WalletDepositAmtViaCreditCardThisMonth],
        [agg_WalletDepositAmtViaCreditCardToday],
        [agg_WalletDepositAmtViaBankToday],
        [agg_WalletDepositAmtViaBankThisMonth],
        [agg_WalletDepositAmtViaChangerToday],
        [agg_WalletDepositAmtViaChangerThisMonth],
        [agg_WalletDepositCountViaCreditCardToday],
        [agg_WalletDepositCountViaCreditCardThisMonth],
        [agg_WalletDepositCountViaBankToday],
        [agg_WalletDepositCountViaBankThisMonth],
        [agg_WalletDepositCountViaChangerToday],
        [agg_WalletDepositCountViaChangerThisMonth],
        [agg_WalletTransferReceivedAmtToday],
        [agg_WalletTransferReceivedAmtThisMonth],
        [agg_WalletTransferReceivedCountToday],
        [agg_WalletTransferReceivedCountThisMonth],
        [agg_WalletTotalTransferReceivedAmount],
        [agg_WalletTotalTransferReceivedCount],
        [agg_WalletTransferPaidAmtLast7Days],
        [agg_TotalTransferredToWallet1Month],
        [agg_TotalTransferredToWallet6Months],
        [agg_TotalTransferredToWallet]
    FROM [CustomerPerformance]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddCustomerPerformance]
    @TableName_CustomerPerformance bit = NULL,
    @CustomerID bigint = NULL,
    @spt_NumberOfActivePrepaidCards int = NULL,
    @spt_PrepaidCardBalanceSum decimal(18,0) = NULL,
    @spt_WalletBalanceRaw decimal(18,0) = NULL,
    @spt_WalletBalanceCommitted decimal(18,0) = NULL,
    @spt_LastTimeEnteredCustomerApplication datetimeoffset = NULL,
    @spt_LastTimeLoadedCard datetimeoffset = NULL,
    @spt_LastTimeDidWalletTransfer datetimeoffset = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [CustomerPerformance] (
        [TableName_CustomerPerformance],
        [CustomerID],
        [spt_NumberOfActivePrepaidCards],
        [spt_PrepaidCardBalanceSum],
        [spt_WalletBalanceRaw],
        [spt_WalletBalanceCommitted],
        [spt_LastTimeEnteredCustomerApplication],
        [spt_LastTimeLoadedCard],
        [spt_LastTimeDidWalletTransfer],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_CustomerPerformance,
        @CustomerID,
        @spt_NumberOfActivePrepaidCards,
        @spt_PrepaidCardBalanceSum,
        @spt_WalletBalanceRaw,
        @spt_WalletBalanceCommitted,
        @spt_LastTimeEnteredCustomerApplication,
        @spt_LastTimeLoadedCard,
        @spt_LastTimeDidWalletTransfer,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateCustomerPerformance]
    @ID bigint,
    @TableName_CustomerPerformance bit = NULL,
    @CustomerID bigint = NULL,
    @spt_NumberOfActivePrepaidCards int = NULL,
    @spt_PrepaidCardBalanceSum decimal(18,0) = NULL,
    @spt_WalletBalanceRaw decimal(18,0) = NULL,
    @spt_WalletBalanceCommitted decimal(18,0) = NULL,
    @spt_LastTimeEnteredCustomerApplication datetimeoffset = NULL,
    @spt_LastTimeLoadedCard datetimeoffset = NULL,
    @spt_LastTimeDidWalletTransfer datetimeoffset = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [CustomerPerformance]
    SET
        [TableName_CustomerPerformance] = @TableName_CustomerPerformance,
        [CustomerID] = @CustomerID,
        [spt_NumberOfActivePrepaidCards] = @spt_NumberOfActivePrepaidCards,
        [spt_PrepaidCardBalanceSum] = @spt_PrepaidCardBalanceSum,
        [spt_WalletBalanceRaw] = @spt_WalletBalanceRaw,
        [spt_WalletBalanceCommitted] = @spt_WalletBalanceCommitted,
        [spt_LastTimeEnteredCustomerApplication] = @spt_LastTimeEnteredCustomerApplication,
        [spt_LastTimeLoadedCard] = @spt_LastTimeLoadedCard,
        [spt_LastTimeDidWalletTransfer] = @spt_LastTimeDidWalletTransfer,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteCustomerPerformance]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [CustomerPerformance]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_CustomerPerformance_CustomerID
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetCustomerPerformanceByCUSTOMERID]
    @CustomerID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CustomerPerformance],
        [ID],
        [CustomerID],
        [spt_NumberOfActivePrepaidCards],
        [spt_PrepaidCardBalanceSum],
        [agg_PrepaidCardAmountLoadedToday],
        [agg_PrepaidCardAmountLoadedThisMonth],
        [agg_PrepaidCardLoadCountToday],
        [agg_PrepaidCardLoadCountThisMonth],
        [agg_PrepaidCardAmountLoadedLast6Months],
        [agg_PrepaidCardTotalAmountLoaded],
        [agg_PrepaidCardTotalLoadCount],
        [spt_WalletBalanceRaw],
        [spt_WalletBalanceCommitted],
        [clc_WalletBalanceWorking],
        [agg_WalletWithdrawalAmtViaCreditCardToday],
        [agg_WalletWithdrawalAmtViaCreditCardThisMonth],
        [agg_WalletWithdrawalAmtViaBankToday],
        [agg_WalletWithdrawalAmtViaBankThisMonth],
        [agg_WalletWithdrawalAmtViaChangerToday],
        [agg_WalletWithdrawalAmtViaChangerThisMonth],
        [agg_WalletWithdrawalCountViaCreditCardToday],
        [agg_WalletWithdrawalCountViaCreditCardThisMonth],
        [agg_WalletWithdrawalCountViaBankToday],
        [agg_WalletWithdrawalCountViaBankThisMonth],
        [agg_WalletWithdrawalCountViaChangerToday],
        [agg_WalletWithdrawalCountViaChangerThisMonth],
        [agg_WalletTransferPaidAmtToday],
        [agg_WalletTransferPaidAmtThisMonth],
        [agg_WalletTransferPaidCountToday],
        [agg_WalletTransferPaidCountThisMonth],
        [agg_WalletTotalTransferPaidAmount],
        [agg_WalletTotalTransferPaidCount],
        [spt_LastTimeEnteredCustomerApplication],
        [spt_LastTimeLoadedCard],
        [spt_LastTimeDidWalletTransfer],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [agg_WalletTransferPaidCountLast7Days],
        [agg_WalletDepositAmtViaCreditCardThisMonth],
        [agg_WalletDepositAmtViaCreditCardToday],
        [agg_WalletDepositAmtViaBankToday],
        [agg_WalletDepositAmtViaBankThisMonth],
        [agg_WalletDepositAmtViaChangerToday],
        [agg_WalletDepositAmtViaChangerThisMonth],
        [agg_WalletDepositCountViaCreditCardToday],
        [agg_WalletDepositCountViaCreditCardThisMonth],
        [agg_WalletDepositCountViaBankToday],
        [agg_WalletDepositCountViaBankThisMonth],
        [agg_WalletDepositCountViaChangerToday],
        [agg_WalletDepositCountViaChangerThisMonth],
        [agg_WalletTransferReceivedAmtToday],
        [agg_WalletTransferReceivedAmtThisMonth],
        [agg_WalletTransferReceivedCountToday],
        [agg_WalletTransferReceivedCountThisMonth],
        [agg_WalletTotalTransferReceivedAmount],
        [agg_WalletTotalTransferReceivedCount],
        [agg_WalletTransferPaidAmtLast7Days],
        [agg_TotalTransferredToWallet1Month],
        [agg_TotalTransferredToWallet6Months],
        [agg_TotalTransferredToWallet]
    FROM [CustomerPerformance]
    WHERE [CustomerID] = @CustomerID
;
END

GO


-- =========================================
-- Stored Procedures for Table: CustomerWallet
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllCustomerWallets]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_CustomerWallet],
            t.[ID],
            t.[CustomerID],
            t.[WhenExecuted],
            t.[enmType_WalletTransactionType],
            t.[Description],
            t.[DescriptionInCustLang],
            t.[Reference],
            t.[ReferenceTable],
            t.[ReferenceID],
            t.[Amount],
            t.[clc_Balance],
            t.[WhenApproved],
            t.[WhoInitiatedID],
            t.[spt_Comments],
            t.[AddedToBackOffice],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[UpdatingLoginID],
            t.[InvoiceURL],
            t.[RequestedTransactionID],
            t.[CounterpartCustomerID],
            t.[TransferText],
            p1.[Text] AS [CustomerID_Text],
            p2.[Text] AS [WhoInitiatedID_Text],
            p3.[Text] AS [RequestedTransactionID_Text]
        FROM [CustomerWallet] t
        LEFT JOIN [ccvwComboList_Customer] p1 ON t.[CustomerID] = p1.[ID]
        LEFT JOIN [ccvwComboList_c_User] p2 ON t.[WhoInitiatedID] = p2.[ID]
        LEFT JOIN [ccvwComboList_RequestedTransaction] p3 ON t.[RequestedTransactionID] = p3.[ID]
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_CustomerWallet],
            [ID],
            [CustomerID],
            [WhenExecuted],
            [enmType_WalletTransactionType],
            [Description],
            [DescriptionInCustLang],
            [Reference],
            [ReferenceTable],
            [ReferenceID],
            [Amount],
            [clc_Balance],
            [WhenApproved],
            [WhoInitiatedID],
            [spt_Comments],
            [AddedToBackOffice],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [UpdatingLoginID],
            [InvoiceURL],
            [RequestedTransactionID],
            [CounterpartCustomerID],
            [TransferText]
        FROM [CustomerWallet]
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredCustomerWallets]
    @CustomerID INT = NULL,
    @Reference NVARCHAR(100) = NULL,
    @RequestedTransactionID INT = NULL,
    @enmType_WalletTransactionType VARCHAR(50) = NULL,
    @WhenExecuted DATETIME = NULL,
    @ReferenceTable VARCHAR(50) = NULL,
    @WhoInitiatedID INT = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_CustomerWallet],
            t.[ID],
            t.[CustomerID],
            t.[WhenExecuted],
            t.[enmType_WalletTransactionType],
            t.[Description],
            t.[DescriptionInCustLang],
            t.[Reference],
            t.[ReferenceTable],
            t.[ReferenceID],
            t.[Amount],
            t.[clc_Balance],
            t.[WhenApproved],
            t.[WhoInitiatedID],
            t.[spt_Comments],
            t.[AddedToBackOffice],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[UpdatingLoginID],
            t.[InvoiceURL],
            t.[RequestedTransactionID],
            t.[CounterpartCustomerID],
            t.[TransferText],
            p1.[Text] AS [CustomerID_Text],
            p2.[Text] AS [WhoInitiatedID_Text],
            p3.[Text] AS [RequestedTransactionID_Text]
        FROM [CustomerWallet] t
        LEFT JOIN [ccvwComboList_Customer] p1 ON t.[CustomerID] = p1.[ID]
        LEFT JOIN [ccvwComboList_c_User] p2 ON t.[WhoInitiatedID] = p2.[ID]
        LEFT JOIN [ccvwComboList_RequestedTransaction] p3 ON t.[RequestedTransactionID] = p3.[ID]
        WHERE 1=1
          AND (@CustomerID IS NULL OR t.[CustomerID] = @CustomerID)
          AND (@CustomerID IS NULL OR t.[CustomerID] = @CustomerID)
          AND (@Reference IS NULL OR t.[Reference] LIKE '%' + @Reference + '%')
          AND (@RequestedTransactionID IS NULL OR t.[RequestedTransactionID] = @RequestedTransactionID)
          AND (@enmType_WalletTransactionType IS NULL OR t.[enmType_WalletTransactionType] LIKE '%' + @enmType_WalletTransactionType + '%')
          AND (@enmType_WalletTransactionType IS NULL OR t.[enmType_WalletTransactionType] LIKE '%' + @enmType_WalletTransactionType + '%')
          AND (@WhenExecuted IS NULL OR t.[WhenExecuted] = @WhenExecuted)
          AND (@ReferenceTable IS NULL OR t.[ReferenceTable] LIKE '%' + @ReferenceTable + '%')
          AND (@WhenExecuted IS NULL OR t.[WhenExecuted] = @WhenExecuted)
          AND (@CustomerID IS NULL OR t.[CustomerID] = @CustomerID)
          AND (@WhoInitiatedID IS NULL OR t.[WhoInitiatedID] = @WhoInitiatedID)
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_CustomerWallet],
            [ID],
            [CustomerID],
            [WhenExecuted],
            [enmType_WalletTransactionType],
            [Description],
            [DescriptionInCustLang],
            [Reference],
            [ReferenceTable],
            [ReferenceID],
            [Amount],
            [clc_Balance],
            [WhenApproved],
            [WhoInitiatedID],
            [spt_Comments],
            [AddedToBackOffice],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [UpdatingLoginID],
            [InvoiceURL],
            [RequestedTransactionID],
            [CounterpartCustomerID],
            [TransferText]
        FROM [CustomerWallet]
        WHERE 1=1
          AND (@CustomerID IS NULL OR [CustomerID] = @CustomerID)
          AND (@CustomerID IS NULL OR [CustomerID] = @CustomerID)
          AND (@Reference IS NULL OR [Reference] LIKE '%' + @Reference + '%')
          AND (@RequestedTransactionID IS NULL OR [RequestedTransactionID] = @RequestedTransactionID)
          AND (@enmType_WalletTransactionType IS NULL OR [enmType_WalletTransactionType] LIKE '%' + @enmType_WalletTransactionType + '%')
          AND (@enmType_WalletTransactionType IS NULL OR [enmType_WalletTransactionType] LIKE '%' + @enmType_WalletTransactionType + '%')
          AND (@WhenExecuted IS NULL OR [WhenExecuted] = @WhenExecuted)
          AND (@ReferenceTable IS NULL OR [ReferenceTable] LIKE '%' + @ReferenceTable + '%')
          AND (@WhenExecuted IS NULL OR [WhenExecuted] = @WhenExecuted)
          AND (@CustomerID IS NULL OR [CustomerID] = @CustomerID)
          AND (@WhoInitiatedID IS NULL OR [WhoInitiatedID] = @WhoInitiatedID)
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetCustomerWalletByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CustomerWallet],
        [ID],
        [CustomerID],
        [WhenExecuted],
        [enmType_WalletTransactionType],
        [Description],
        [DescriptionInCustLang],
        [Reference],
        [ReferenceTable],
        [ReferenceID],
        [Amount],
        [clc_Balance],
        [WhenApproved],
        [WhoInitiatedID],
        [spt_Comments],
        [AddedToBackOffice],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [UpdatingLoginID],
        [InvoiceURL],
        [RequestedTransactionID],
        [CounterpartCustomerID],
        [TransferText]
    FROM [CustomerWallet]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddCustomerWallet]
    @TableName_CustomerWallet bit = NULL,
    @CustomerID bigint = NULL,
    @WhenExecuted datetimeoffset = NULL,
    @enmType_WalletTransactionType varchar(50) = NULL,
    @Description nvarchar(200) = NULL,
    @DescriptionInCustLang nvarchar(200) = NULL,
    @Reference nvarchar(100) = NULL,
    @ReferenceTable varchar(50) = NULL,
    @ReferenceID bigint = NULL,
    @Amount decimal(18,0) = NULL,
    @WhenApproved datetimeoffset = NULL,
    @WhoInitiatedID bigint = NULL,
    @spt_Comments nvarchar(4000) = NULL,
    @AddedToBackOffice bit = NULL,
    @UpdatingLoginID bigint = NULL,
    @InvoiceURL varchar(254) = NULL,
    @RequestedTransactionID bigint = NULL,
    @CounterpartCustomerID bigint = NULL,
    @TransferText nvarchar(200) = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [CustomerWallet] (
        [TableName_CustomerWallet],
        [CustomerID],
        [WhenExecuted],
        [enmType_WalletTransactionType],
        [Description],
        [DescriptionInCustLang],
        [Reference],
        [ReferenceTable],
        [ReferenceID],
        [Amount],
        [WhenApproved],
        [WhoInitiatedID],
        [spt_Comments],
        [AddedToBackOffice],
        [UpdatingLoginID],
        [InvoiceURL],
        [RequestedTransactionID],
        [CounterpartCustomerID],
        [TransferText],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_CustomerWallet,
        @CustomerID,
        @WhenExecuted,
        @enmType_WalletTransactionType,
        @Description,
        @DescriptionInCustLang,
        @Reference,
        @ReferenceTable,
        @ReferenceID,
        @Amount,
        @WhenApproved,
        @WhoInitiatedID,
        @spt_Comments,
        @AddedToBackOffice,
        @UpdatingLoginID,
        @InvoiceURL,
        @RequestedTransactionID,
        @CounterpartCustomerID,
        @TransferText,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateCustomerWallet]
    @ID bigint,
    @TableName_CustomerWallet bit = NULL,
    @CustomerID bigint = NULL,
    @WhenExecuted datetimeoffset = NULL,
    @enmType_WalletTransactionType varchar(50) = NULL,
    @Description nvarchar(200) = NULL,
    @DescriptionInCustLang nvarchar(200) = NULL,
    @Reference nvarchar(100) = NULL,
    @ReferenceTable varchar(50) = NULL,
    @ReferenceID bigint = NULL,
    @Amount decimal(18,0) = NULL,
    @WhenApproved datetimeoffset = NULL,
    @WhoInitiatedID bigint = NULL,
    @spt_Comments nvarchar(4000) = NULL,
    @AddedToBackOffice bit = NULL,
    @UpdatingLoginID bigint = NULL,
    @InvoiceURL varchar(254) = NULL,
    @RequestedTransactionID bigint = NULL,
    @CounterpartCustomerID bigint = NULL,
    @TransferText nvarchar(200) = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [CustomerWallet]
    SET
        [TableName_CustomerWallet] = @TableName_CustomerWallet,
        [CustomerID] = @CustomerID,
        [WhenExecuted] = @WhenExecuted,
        [enmType_WalletTransactionType] = @enmType_WalletTransactionType,
        [Description] = @Description,
        [DescriptionInCustLang] = @DescriptionInCustLang,
        [Reference] = @Reference,
        [ReferenceTable] = @ReferenceTable,
        [ReferenceID] = @ReferenceID,
        [Amount] = @Amount,
        [WhenApproved] = @WhenApproved,
        [WhoInitiatedID] = @WhoInitiatedID,
        [spt_Comments] = @spt_Comments,
        [AddedToBackOffice] = @AddedToBackOffice,
        [UpdatingLoginID] = @UpdatingLoginID,
        [InvoiceURL] = @InvoiceURL,
        [RequestedTransactionID] = @RequestedTransactionID,
        [CounterpartCustomerID] = @CounterpartCustomerID,
        [TransferText] = @TransferText,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteCustomerWallet]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [CustomerWallet]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_CustomerWallet_CustomerID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillCustomerWalletByCUSTOMERID]
    @CustomerID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CustomerWallet],
        [ID],
        [CustomerID],
        [WhenExecuted],
        [enmType_WalletTransactionType],
        [Description],
        [DescriptionInCustLang],
        [Reference],
        [ReferenceTable],
        [ReferenceID],
        [Amount],
        [clc_Balance],
        [WhenApproved],
        [WhoInitiatedID],
        [spt_Comments],
        [AddedToBackOffice],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [UpdatingLoginID],
        [InvoiceURL],
        [RequestedTransactionID],
        [CounterpartCustomerID],
        [TransferText]
    FROM [CustomerWallet]
    WHERE [CustomerID] = @CustomerID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_CustomerWallet_CustomerID_Reference
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillCustomerWalletByCUSTOMERIDAndREFERENCE]
    @CustomerID bigint,
    @Reference nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CustomerWallet],
        [ID],
        [CustomerID],
        [WhenExecuted],
        [enmType_WalletTransactionType],
        [Description],
        [DescriptionInCustLang],
        [Reference],
        [ReferenceTable],
        [ReferenceID],
        [Amount],
        [clc_Balance],
        [WhenApproved],
        [WhoInitiatedID],
        [spt_Comments],
        [AddedToBackOffice],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [UpdatingLoginID],
        [InvoiceURL],
        [RequestedTransactionID],
        [CounterpartCustomerID],
        [TransferText]
    FROM [CustomerWallet]
    WHERE [CustomerID] = @CustomerID AND [Reference] = @Reference
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_CustomerWallet_RequestedTransaction
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillCustomerWalletByREQUESTEDTRANSACTIONID]
    @RequestedTransactionID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CustomerWallet],
        [ID],
        [CustomerID],
        [WhenExecuted],
        [enmType_WalletTransactionType],
        [Description],
        [DescriptionInCustLang],
        [Reference],
        [ReferenceTable],
        [ReferenceID],
        [Amount],
        [clc_Balance],
        [WhenApproved],
        [WhoInitiatedID],
        [spt_Comments],
        [AddedToBackOffice],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [UpdatingLoginID],
        [InvoiceURL],
        [RequestedTransactionID],
        [CounterpartCustomerID],
        [TransferText]
    FROM [CustomerWallet]
    WHERE [RequestedTransactionID] = @RequestedTransactionID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_CustomerWallet_Type
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillCustomerWalletByENMTYPEWALLETTRANSACTIONTYPE]
    @enmType_WalletTransactionType varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CustomerWallet],
        [ID],
        [CustomerID],
        [WhenExecuted],
        [enmType_WalletTransactionType],
        [Description],
        [DescriptionInCustLang],
        [Reference],
        [ReferenceTable],
        [ReferenceID],
        [Amount],
        [clc_Balance],
        [WhenApproved],
        [WhoInitiatedID],
        [spt_Comments],
        [AddedToBackOffice],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [UpdatingLoginID],
        [InvoiceURL],
        [RequestedTransactionID],
        [CounterpartCustomerID],
        [TransferText]
    FROM [CustomerWallet]
    WHERE [enmType_WalletTransactionType] = @enmType_WalletTransactionType
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_CustomerWallet_WalletTransactionType_WhenRequested_ReferenceTable
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillCustomerWalletByENMTYPEWALLETTRANSACTIONTYPEAndWHENEXECUTEDAndREFERENCETABLE]
    @enmType_WalletTransactionType varchar(50),
    @WhenExecuted datetimeoffset,
    @ReferenceTable varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CustomerWallet],
        [ID],
        [CustomerID],
        [WhenExecuted],
        [enmType_WalletTransactionType],
        [Description],
        [DescriptionInCustLang],
        [Reference],
        [ReferenceTable],
        [ReferenceID],
        [Amount],
        [clc_Balance],
        [WhenApproved],
        [WhoInitiatedID],
        [spt_Comments],
        [AddedToBackOffice],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [UpdatingLoginID],
        [InvoiceURL],
        [RequestedTransactionID],
        [CounterpartCustomerID],
        [TransferText]
    FROM [CustomerWallet]
    WHERE [enmType_WalletTransactionType] = @enmType_WalletTransactionType AND [WhenExecuted] = @WhenExecuted AND [ReferenceTable] = @ReferenceTable
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_CustomerWallet_WhenRequested_CustomerID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillCustomerWalletByWHENEXECUTEDAndCUSTOMERID]
    @WhenExecuted datetimeoffset,
    @CustomerID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CustomerWallet],
        [ID],
        [CustomerID],
        [WhenExecuted],
        [enmType_WalletTransactionType],
        [Description],
        [DescriptionInCustLang],
        [Reference],
        [ReferenceTable],
        [ReferenceID],
        [Amount],
        [clc_Balance],
        [WhenApproved],
        [WhoInitiatedID],
        [spt_Comments],
        [AddedToBackOffice],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [UpdatingLoginID],
        [InvoiceURL],
        [RequestedTransactionID],
        [CounterpartCustomerID],
        [TransferText]
    FROM [CustomerWallet]
    WHERE [WhenExecuted] = @WhenExecuted AND [CustomerID] = @CustomerID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_CustomerWallet_WhoInitiatedID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillCustomerWalletByWHOINITIATEDID]
    @WhoInitiatedID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CustomerWallet],
        [ID],
        [CustomerID],
        [WhenExecuted],
        [enmType_WalletTransactionType],
        [Description],
        [DescriptionInCustLang],
        [Reference],
        [ReferenceTable],
        [ReferenceID],
        [Amount],
        [clc_Balance],
        [WhenApproved],
        [WhoInitiatedID],
        [spt_Comments],
        [AddedToBackOffice],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [UpdatingLoginID],
        [InvoiceURL],
        [RequestedTransactionID],
        [CounterpartCustomerID],
        [TransferText]
    FROM [CustomerWallet]
    WHERE [WhoInitiatedID] = @WhoInitiatedID
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: Distributor
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllDistributors]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Distributor],
        [ID],
        [BusinessName],
        [BusinessPhoneNumber],
        [ContactName],
        [email],
        [CellphoneNumber],
        [ActualAddressStreetAndNumber],
        [ActualAddressCity],
        [ActualZipCode],
        [MailAddressStreetAndNumber],
        [MailAddressCity],
        [MailZipCode],
        [GovernmentCompanyNumber],
        [enmPaymentMethod],
        [BankNumber],
        [BankBranchNumber],
        [entBankAccountNumber],
        [SAPDebitAccountNumber],
        [SAPCreditAccountNumber],
        [SAPCreditCommissionAccountNumber],
        [spt_Comment],
        [clc_WhenRegistered],
        [spt_IsEnabled],
        [agg_LoadsToday],
        [agg_LoadsThisMonth],
        [agg_AmountLoadedToday],
        [agg_AmountLoadedThisMonth],
        [agg_CommissionEarnedToday],
        [agg_CommissionThisMonth],
        [spt_LastActivityTime],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [enmDistributorType],
        [CanActivateCards],
        [CanUnloadCards],
        [CanSeeCardTransactions],
        [ShowBranchesInWeb],
        [CanOnlyLoadOwnedCards],
        [CanLoadCards],
        [AllowZeroMinimumLoadAmount],
        [blg_Obligo],
        [BusinessNameLatin],
        [spt_IsNewCardsCashWithdrawalAllowed],
        [spt_enmIsOnTerrorList],
        [scb_enmIsOnTerrorList],
        [spt_TerrorListUpdatedOn],
        [UniqueCustomerReferenceForSelfOwnedCards],
        [FeesPaidByReceiver],
        [CanVerifyActivationDocuments],
        [CanWithdrawalCash],
        [CanDepositCash]
    FROM [Distributor]
    ORDER BY [ID]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredDistributors]
    @BusinessName NVARCHAR(100) = NULL,
    @BusinessNameLatin VARCHAR(50) = NULL,
    @GovernmentCompanyNumber VARCHAR(50) = NULL,
    @spt_enmIsOnTerrorList VARCHAR(50) = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Distributor],
        [ID],
        [BusinessName],
        [BusinessPhoneNumber],
        [ContactName],
        [email],
        [CellphoneNumber],
        [ActualAddressStreetAndNumber],
        [ActualAddressCity],
        [ActualZipCode],
        [MailAddressStreetAndNumber],
        [MailAddressCity],
        [MailZipCode],
        [GovernmentCompanyNumber],
        [enmPaymentMethod],
        [BankNumber],
        [BankBranchNumber],
        [entBankAccountNumber],
        [SAPDebitAccountNumber],
        [SAPCreditAccountNumber],
        [SAPCreditCommissionAccountNumber],
        [spt_Comment],
        [clc_WhenRegistered],
        [spt_IsEnabled],
        [agg_LoadsToday],
        [agg_LoadsThisMonth],
        [agg_AmountLoadedToday],
        [agg_AmountLoadedThisMonth],
        [agg_CommissionEarnedToday],
        [agg_CommissionThisMonth],
        [spt_LastActivityTime],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [enmDistributorType],
        [CanActivateCards],
        [CanUnloadCards],
        [CanSeeCardTransactions],
        [ShowBranchesInWeb],
        [CanOnlyLoadOwnedCards],
        [CanLoadCards],
        [AllowZeroMinimumLoadAmount],
        [blg_Obligo],
        [BusinessNameLatin],
        [spt_IsNewCardsCashWithdrawalAllowed],
        [spt_enmIsOnTerrorList],
        [scb_enmIsOnTerrorList],
        [spt_TerrorListUpdatedOn],
        [UniqueCustomerReferenceForSelfOwnedCards],
        [FeesPaidByReceiver],
        [CanVerifyActivationDocuments],
        [CanWithdrawalCash],
        [CanDepositCash]
    FROM [Distributor]
    WHERE 1=1
      AND (@BusinessName IS NULL OR [BusinessName] LIKE '%' + @BusinessName + '%')
      AND (@BusinessNameLatin IS NULL OR [BusinessNameLatin] LIKE '%' + @BusinessNameLatin + '%')
      AND (@GovernmentCompanyNumber IS NULL OR [GovernmentCompanyNumber] LIKE '%' + @GovernmentCompanyNumber + '%')
      AND (@spt_enmIsOnTerrorList IS NULL OR [spt_enmIsOnTerrorList] LIKE '%' + @spt_enmIsOnTerrorList + '%')
    ORDER BY [ID]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetDistributorByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Distributor],
        [ID],
        [BusinessName],
        [BusinessPhoneNumber],
        [ContactName],
        [email],
        [CellphoneNumber],
        [ActualAddressStreetAndNumber],
        [ActualAddressCity],
        [ActualZipCode],
        [MailAddressStreetAndNumber],
        [MailAddressCity],
        [MailZipCode],
        [GovernmentCompanyNumber],
        [enmPaymentMethod],
        [BankNumber],
        [BankBranchNumber],
        [entBankAccountNumber],
        [SAPDebitAccountNumber],
        [SAPCreditAccountNumber],
        [SAPCreditCommissionAccountNumber],
        [spt_Comment],
        [clc_WhenRegistered],
        [spt_IsEnabled],
        [agg_LoadsToday],
        [agg_LoadsThisMonth],
        [agg_AmountLoadedToday],
        [agg_AmountLoadedThisMonth],
        [agg_CommissionEarnedToday],
        [agg_CommissionThisMonth],
        [spt_LastActivityTime],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [enmDistributorType],
        [CanActivateCards],
        [CanUnloadCards],
        [CanSeeCardTransactions],
        [ShowBranchesInWeb],
        [CanOnlyLoadOwnedCards],
        [CanLoadCards],
        [AllowZeroMinimumLoadAmount],
        [blg_Obligo],
        [BusinessNameLatin],
        [spt_IsNewCardsCashWithdrawalAllowed],
        [spt_enmIsOnTerrorList],
        [scb_enmIsOnTerrorList],
        [spt_TerrorListUpdatedOn],
        [UniqueCustomerReferenceForSelfOwnedCards],
        [FeesPaidByReceiver],
        [CanVerifyActivationDocuments],
        [CanWithdrawalCash],
        [CanDepositCash]
    FROM [Distributor]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddDistributor]
    @TableName_Distributor bit = NULL,
    @BusinessName nvarchar(100),
    @BusinessPhoneNumber varchar(50) = NULL,
    @ContactName nvarchar(100) = NULL,
    @email varchar(50) = NULL,
    @CellphoneNumber varchar(50) = NULL,
    @ActualAddressStreetAndNumber nvarchar(200) = NULL,
    @ActualAddressCity nvarchar(100) = NULL,
    @ActualZipCode varchar(50) = NULL,
    @MailAddressStreetAndNumber nvarchar(200) = NULL,
    @MailAddressCity nvarchar(100) = NULL,
    @MailZipCode varchar(50) = NULL,
    @GovernmentCompanyNumber varchar(50) = NULL,
    @enmPaymentMethod varchar(50) = NULL,
    @BankNumber varchar(50) = NULL,
    @BankBranchNumber varchar(50) = NULL,
    @entBankAccountNumber varchar(MAX) = NULL,
    @SAPDebitAccountNumber varchar(50) = NULL,
    @SAPCreditAccountNumber varchar(50) = NULL,
    @SAPCreditCommissionAccountNumber varchar(50) = NULL,
    @spt_Comment nvarchar(MAX) = NULL,
    @spt_IsEnabled bit = NULL,
    @spt_LastActivityTime datetimeoffset = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @enmDistributorType varchar(50) = NULL,
    @CanActivateCards bit = NULL,
    @CanUnloadCards bit = NULL,
    @CanSeeCardTransactions bit = NULL,
    @ShowBranchesInWeb bit = NULL,
    @CanOnlyLoadOwnedCards bit = NULL,
    @CanLoadCards bit = NULL,
    @AllowZeroMinimumLoadAmount bit,
    @BusinessNameLatin varchar(50),
    @spt_IsNewCardsCashWithdrawalAllowed bit = NULL,
    @spt_enmIsOnTerrorList varchar(50) = NULL,
    @spt_TerrorListUpdatedOn date = NULL,
    @UniqueCustomerReferenceForSelfOwnedCards bit = NULL,
    @FeesPaidByReceiver bit,
    @CanVerifyActivationDocuments bit = NULL,
    @CanWithdrawalCash bit = NULL,
    @CanDepositCash bit = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [Distributor] (
        [TableName_Distributor],
        [BusinessName],
        [BusinessPhoneNumber],
        [ContactName],
        [email],
        [CellphoneNumber],
        [ActualAddressStreetAndNumber],
        [ActualAddressCity],
        [ActualZipCode],
        [MailAddressStreetAndNumber],
        [MailAddressCity],
        [MailZipCode],
        [GovernmentCompanyNumber],
        [enmPaymentMethod],
        [BankNumber],
        [BankBranchNumber],
        [entBankAccountNumber],
        [SAPDebitAccountNumber],
        [SAPCreditAccountNumber],
        [SAPCreditCommissionAccountNumber],
        [spt_Comment],
        [spt_IsEnabled],
        [spt_LastActivityTime],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [enmDistributorType],
        [CanActivateCards],
        [CanUnloadCards],
        [CanSeeCardTransactions],
        [ShowBranchesInWeb],
        [CanOnlyLoadOwnedCards],
        [CanLoadCards],
        [AllowZeroMinimumLoadAmount],
        [BusinessNameLatin],
        [spt_IsNewCardsCashWithdrawalAllowed],
        [spt_enmIsOnTerrorList],
        [spt_TerrorListUpdatedOn],
        [UniqueCustomerReferenceForSelfOwnedCards],
        [FeesPaidByReceiver],
        [CanVerifyActivationDocuments],
        [CanWithdrawalCash],
        [CanDepositCash],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_Distributor,
        @BusinessName,
        @BusinessPhoneNumber,
        @ContactName,
        @email,
        @CellphoneNumber,
        @ActualAddressStreetAndNumber,
        @ActualAddressCity,
        @ActualZipCode,
        @MailAddressStreetAndNumber,
        @MailAddressCity,
        @MailZipCode,
        @GovernmentCompanyNumber,
        @enmPaymentMethod,
        @BankNumber,
        @BankBranchNumber,
        @entBankAccountNumber,
        @SAPDebitAccountNumber,
        @SAPCreditAccountNumber,
        @SAPCreditCommissionAccountNumber,
        @spt_Comment,
        @spt_IsEnabled,
        @spt_LastActivityTime,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        @enmDistributorType,
        @CanActivateCards,
        @CanUnloadCards,
        @CanSeeCardTransactions,
        @ShowBranchesInWeb,
        @CanOnlyLoadOwnedCards,
        @CanLoadCards,
        @AllowZeroMinimumLoadAmount,
        @BusinessNameLatin,
        @spt_IsNewCardsCashWithdrawalAllowed,
        @spt_enmIsOnTerrorList,
        @spt_TerrorListUpdatedOn,
        @UniqueCustomerReferenceForSelfOwnedCards,
        @FeesPaidByReceiver,
        @CanVerifyActivationDocuments,
        @CanWithdrawalCash,
        @CanDepositCash,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateDistributor]
    @ID bigint,
    @TableName_Distributor bit = NULL,
    @BusinessName nvarchar(100),
    @BusinessPhoneNumber varchar(50) = NULL,
    @ContactName nvarchar(100) = NULL,
    @email varchar(50) = NULL,
    @CellphoneNumber varchar(50) = NULL,
    @ActualAddressStreetAndNumber nvarchar(200) = NULL,
    @ActualAddressCity nvarchar(100) = NULL,
    @ActualZipCode varchar(50) = NULL,
    @MailAddressStreetAndNumber nvarchar(200) = NULL,
    @MailAddressCity nvarchar(100) = NULL,
    @MailZipCode varchar(50) = NULL,
    @GovernmentCompanyNumber varchar(50) = NULL,
    @enmPaymentMethod varchar(50) = NULL,
    @BankNumber varchar(50) = NULL,
    @BankBranchNumber varchar(50) = NULL,
    @entBankAccountNumber varchar(MAX) = NULL,
    @SAPDebitAccountNumber varchar(50) = NULL,
    @SAPCreditAccountNumber varchar(50) = NULL,
    @SAPCreditCommissionAccountNumber varchar(50) = NULL,
    @spt_Comment nvarchar(MAX) = NULL,
    @spt_IsEnabled bit = NULL,
    @spt_LastActivityTime datetimeoffset = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @enmDistributorType varchar(50) = NULL,
    @CanActivateCards bit = NULL,
    @CanUnloadCards bit = NULL,
    @CanSeeCardTransactions bit = NULL,
    @ShowBranchesInWeb bit = NULL,
    @CanOnlyLoadOwnedCards bit = NULL,
    @CanLoadCards bit = NULL,
    @AllowZeroMinimumLoadAmount bit,
    @BusinessNameLatin varchar(50),
    @spt_IsNewCardsCashWithdrawalAllowed bit = NULL,
    @spt_enmIsOnTerrorList varchar(50) = NULL,
    @scb_enmIsOnTerrorList nvarchar(200) = NULL,
    @spt_TerrorListUpdatedOn date = NULL,
    @UniqueCustomerReferenceForSelfOwnedCards bit = NULL,
    @FeesPaidByReceiver bit,
    @CanVerifyActivationDocuments bit = NULL,
    @CanWithdrawalCash bit = NULL,
    @CanDepositCash bit = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [Distributor]
    SET
        [TableName_Distributor] = @TableName_Distributor,
        [BusinessName] = @BusinessName,
        [BusinessPhoneNumber] = @BusinessPhoneNumber,
        [ContactName] = @ContactName,
        [email] = @email,
        [CellphoneNumber] = @CellphoneNumber,
        [ActualAddressStreetAndNumber] = @ActualAddressStreetAndNumber,
        [ActualAddressCity] = @ActualAddressCity,
        [ActualZipCode] = @ActualZipCode,
        [MailAddressStreetAndNumber] = @MailAddressStreetAndNumber,
        [MailAddressCity] = @MailAddressCity,
        [MailZipCode] = @MailZipCode,
        [GovernmentCompanyNumber] = @GovernmentCompanyNumber,
        [enmPaymentMethod] = @enmPaymentMethod,
        [BankNumber] = @BankNumber,
        [BankBranchNumber] = @BankBranchNumber,
        [entBankAccountNumber] = @entBankAccountNumber,
        [SAPDebitAccountNumber] = @SAPDebitAccountNumber,
        [SAPCreditAccountNumber] = @SAPCreditAccountNumber,
        [SAPCreditCommissionAccountNumber] = @SAPCreditCommissionAccountNumber,
        [spt_Comment] = @spt_Comment,
        [spt_IsEnabled] = @spt_IsEnabled,
        [spt_LastActivityTime] = @spt_LastActivityTime,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [enmDistributorType] = @enmDistributorType,
        [CanActivateCards] = @CanActivateCards,
        [CanUnloadCards] = @CanUnloadCards,
        [CanSeeCardTransactions] = @CanSeeCardTransactions,
        [ShowBranchesInWeb] = @ShowBranchesInWeb,
        [CanOnlyLoadOwnedCards] = @CanOnlyLoadOwnedCards,
        [CanLoadCards] = @CanLoadCards,
        [AllowZeroMinimumLoadAmount] = @AllowZeroMinimumLoadAmount,
        [BusinessNameLatin] = @BusinessNameLatin,
        [spt_IsNewCardsCashWithdrawalAllowed] = @spt_IsNewCardsCashWithdrawalAllowed,
        [spt_enmIsOnTerrorList] = @spt_enmIsOnTerrorList,
        [scb_enmIsOnTerrorList] = @scb_enmIsOnTerrorList,
        [spt_TerrorListUpdatedOn] = @spt_TerrorListUpdatedOn,
        [UniqueCustomerReferenceForSelfOwnedCards] = @UniqueCustomerReferenceForSelfOwnedCards,
        [FeesPaidByReceiver] = @FeesPaidByReceiver,
        [CanVerifyActivationDocuments] = @CanVerifyActivationDocuments,
        [CanWithdrawalCash] = @CanWithdrawalCash,
        [CanDepositCash] = @CanDepositCash,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteDistributor]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [Distributor]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IXDistributor_BusinessName
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetDistributorByBUSINESSNAME]
    @BusinessName nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Distributor],
        [ID],
        [BusinessName],
        [BusinessPhoneNumber],
        [ContactName],
        [email],
        [CellphoneNumber],
        [ActualAddressStreetAndNumber],
        [ActualAddressCity],
        [ActualZipCode],
        [MailAddressStreetAndNumber],
        [MailAddressCity],
        [MailZipCode],
        [GovernmentCompanyNumber],
        [enmPaymentMethod],
        [BankNumber],
        [BankBranchNumber],
        [entBankAccountNumber],
        [SAPDebitAccountNumber],
        [SAPCreditAccountNumber],
        [SAPCreditCommissionAccountNumber],
        [spt_Comment],
        [clc_WhenRegistered],
        [spt_IsEnabled],
        [agg_LoadsToday],
        [agg_LoadsThisMonth],
        [agg_AmountLoadedToday],
        [agg_AmountLoadedThisMonth],
        [agg_CommissionEarnedToday],
        [agg_CommissionThisMonth],
        [spt_LastActivityTime],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [enmDistributorType],
        [CanActivateCards],
        [CanUnloadCards],
        [CanSeeCardTransactions],
        [ShowBranchesInWeb],
        [CanOnlyLoadOwnedCards],
        [CanLoadCards],
        [AllowZeroMinimumLoadAmount],
        [blg_Obligo],
        [BusinessNameLatin],
        [spt_IsNewCardsCashWithdrawalAllowed],
        [spt_enmIsOnTerrorList],
        [scb_enmIsOnTerrorList],
        [spt_TerrorListUpdatedOn],
        [UniqueCustomerReferenceForSelfOwnedCards],
        [FeesPaidByReceiver],
        [CanVerifyActivationDocuments],
        [CanWithdrawalCash],
        [CanDepositCash]
    FROM [Distributor]
    WHERE [BusinessName] = @BusinessName
;
END

GO

-- Procedure for Index: IXDistributor_BusinessNameLatin
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetDistributorByBUSINESSNAMELATIN]
    @BusinessNameLatin varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Distributor],
        [ID],
        [BusinessName],
        [BusinessPhoneNumber],
        [ContactName],
        [email],
        [CellphoneNumber],
        [ActualAddressStreetAndNumber],
        [ActualAddressCity],
        [ActualZipCode],
        [MailAddressStreetAndNumber],
        [MailAddressCity],
        [MailZipCode],
        [GovernmentCompanyNumber],
        [enmPaymentMethod],
        [BankNumber],
        [BankBranchNumber],
        [entBankAccountNumber],
        [SAPDebitAccountNumber],
        [SAPCreditAccountNumber],
        [SAPCreditCommissionAccountNumber],
        [spt_Comment],
        [clc_WhenRegistered],
        [spt_IsEnabled],
        [agg_LoadsToday],
        [agg_LoadsThisMonth],
        [agg_AmountLoadedToday],
        [agg_AmountLoadedThisMonth],
        [agg_CommissionEarnedToday],
        [agg_CommissionThisMonth],
        [spt_LastActivityTime],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [enmDistributorType],
        [CanActivateCards],
        [CanUnloadCards],
        [CanSeeCardTransactions],
        [ShowBranchesInWeb],
        [CanOnlyLoadOwnedCards],
        [CanLoadCards],
        [AllowZeroMinimumLoadAmount],
        [blg_Obligo],
        [BusinessNameLatin],
        [spt_IsNewCardsCashWithdrawalAllowed],
        [spt_enmIsOnTerrorList],
        [scb_enmIsOnTerrorList],
        [spt_TerrorListUpdatedOn],
        [UniqueCustomerReferenceForSelfOwnedCards],
        [FeesPaidByReceiver],
        [CanVerifyActivationDocuments],
        [CanWithdrawalCash],
        [CanDepositCash]
    FROM [Distributor]
    WHERE [BusinessNameLatin] = @BusinessNameLatin
;
END

GO

-- Procedure for Index: IX_Distributor_GovernmentCompanyNumber
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillDistributorByGOVERNMENTCOMPANYNUMBER]
    @GovernmentCompanyNumber varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Distributor],
        [ID],
        [BusinessName],
        [BusinessPhoneNumber],
        [ContactName],
        [email],
        [CellphoneNumber],
        [ActualAddressStreetAndNumber],
        [ActualAddressCity],
        [ActualZipCode],
        [MailAddressStreetAndNumber],
        [MailAddressCity],
        [MailZipCode],
        [GovernmentCompanyNumber],
        [enmPaymentMethod],
        [BankNumber],
        [BankBranchNumber],
        [entBankAccountNumber],
        [SAPDebitAccountNumber],
        [SAPCreditAccountNumber],
        [SAPCreditCommissionAccountNumber],
        [spt_Comment],
        [clc_WhenRegistered],
        [spt_IsEnabled],
        [agg_LoadsToday],
        [agg_LoadsThisMonth],
        [agg_AmountLoadedToday],
        [agg_AmountLoadedThisMonth],
        [agg_CommissionEarnedToday],
        [agg_CommissionThisMonth],
        [spt_LastActivityTime],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [enmDistributorType],
        [CanActivateCards],
        [CanUnloadCards],
        [CanSeeCardTransactions],
        [ShowBranchesInWeb],
        [CanOnlyLoadOwnedCards],
        [CanLoadCards],
        [AllowZeroMinimumLoadAmount],
        [blg_Obligo],
        [BusinessNameLatin],
        [spt_IsNewCardsCashWithdrawalAllowed],
        [spt_enmIsOnTerrorList],
        [scb_enmIsOnTerrorList],
        [spt_TerrorListUpdatedOn],
        [UniqueCustomerReferenceForSelfOwnedCards],
        [FeesPaidByReceiver],
        [CanVerifyActivationDocuments],
        [CanWithdrawalCash],
        [CanDepositCash]
    FROM [Distributor]
    WHERE [GovernmentCompanyNumber] = @GovernmentCompanyNumber
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_Distributor_IsOnTerrorList
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillDistributorBySPTENMISONTERRORLIST]
    @spt_enmIsOnTerrorList varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Distributor],
        [ID],
        [BusinessName],
        [BusinessPhoneNumber],
        [ContactName],
        [email],
        [CellphoneNumber],
        [ActualAddressStreetAndNumber],
        [ActualAddressCity],
        [ActualZipCode],
        [MailAddressStreetAndNumber],
        [MailAddressCity],
        [MailZipCode],
        [GovernmentCompanyNumber],
        [enmPaymentMethod],
        [BankNumber],
        [BankBranchNumber],
        [entBankAccountNumber],
        [SAPDebitAccountNumber],
        [SAPCreditAccountNumber],
        [SAPCreditCommissionAccountNumber],
        [spt_Comment],
        [clc_WhenRegistered],
        [spt_IsEnabled],
        [agg_LoadsToday],
        [agg_LoadsThisMonth],
        [agg_AmountLoadedToday],
        [agg_AmountLoadedThisMonth],
        [agg_CommissionEarnedToday],
        [agg_CommissionThisMonth],
        [spt_LastActivityTime],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [enmDistributorType],
        [CanActivateCards],
        [CanUnloadCards],
        [CanSeeCardTransactions],
        [ShowBranchesInWeb],
        [CanOnlyLoadOwnedCards],
        [CanLoadCards],
        [AllowZeroMinimumLoadAmount],
        [blg_Obligo],
        [BusinessNameLatin],
        [spt_IsNewCardsCashWithdrawalAllowed],
        [spt_enmIsOnTerrorList],
        [scb_enmIsOnTerrorList],
        [spt_TerrorListUpdatedOn],
        [UniqueCustomerReferenceForSelfOwnedCards],
        [FeesPaidByReceiver],
        [CanVerifyActivationDocuments],
        [CanWithdrawalCash],
        [CanDepositCash]
    FROM [Distributor]
    WHERE [spt_enmIsOnTerrorList] = @spt_enmIsOnTerrorList
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: DistributorBranch
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllDistributorBranchs]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_DistributorBranch],
            t.[ID],
            t.[DistributorID],
            t.[locName],
            t.[locStreetAndNumber],
            t.[locCity],
            t.[lkpRegion],
            t.[PhoneNumber],
            t.[email],
            t.[Location],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            p1.[Text] AS [DistributorID_Text]
        FROM [DistributorBranch] t
        LEFT JOIN [ccvwComboList_Distributor] p1 ON t.[DistributorID] = p1.[ID]
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_DistributorBranch],
            [ID],
            [DistributorID],
            [locName],
            [locStreetAndNumber],
            [locCity],
            [lkpRegion],
            [PhoneNumber],
            [email],
            [Location],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID]
        FROM [DistributorBranch]
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredDistributorBranchs]
    @locCity NVARCHAR(100) = NULL,
    @DistributorID INT = NULL,
    @lkpRegion VARCHAR(50) = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_DistributorBranch],
            t.[ID],
            t.[DistributorID],
            t.[locName],
            t.[locStreetAndNumber],
            t.[locCity],
            t.[lkpRegion],
            t.[PhoneNumber],
            t.[email],
            t.[Location],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            p1.[Text] AS [DistributorID_Text]
        FROM [DistributorBranch] t
        LEFT JOIN [ccvwComboList_Distributor] p1 ON t.[DistributorID] = p1.[ID]
        WHERE 1=1
          AND (@locCity IS NULL OR t.[locCity] LIKE '%' + @locCity + '%')
          AND (@DistributorID IS NULL OR t.[DistributorID] = @DistributorID)
          AND (@lkpRegion IS NULL OR t.[lkpRegion] LIKE '%' + @lkpRegion + '%')
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_DistributorBranch],
            [ID],
            [DistributorID],
            [locName],
            [locStreetAndNumber],
            [locCity],
            [lkpRegion],
            [PhoneNumber],
            [email],
            [Location],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID]
        FROM [DistributorBranch]
        WHERE 1=1
          AND (@locCity IS NULL OR [locCity] LIKE '%' + @locCity + '%')
          AND (@DistributorID IS NULL OR [DistributorID] = @DistributorID)
          AND (@lkpRegion IS NULL OR [lkpRegion] LIKE '%' + @lkpRegion + '%')
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetDistributorBranchByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_DistributorBranch],
        [ID],
        [DistributorID],
        [locName],
        [locStreetAndNumber],
        [locCity],
        [lkpRegion],
        [PhoneNumber],
        [email],
        [Location],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [DistributorBranch]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddDistributorBranch]
    @TableName_DistributorBranch bit = NULL,
    @DistributorID bigint,
    @locName nvarchar(100),
    @locStreetAndNumber nvarchar(200) = NULL,
    @locCity nvarchar(100) = NULL,
    @lkpRegion varchar(50) = NULL,
    @PhoneNumber varchar(50) = NULL,
    @email varchar(50) = NULL,
    @Location GEOMETRY = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [DistributorBranch] (
        [TableName_DistributorBranch],
        [DistributorID],
        [locName],
        [locStreetAndNumber],
        [locCity],
        [lkpRegion],
        [PhoneNumber],
        [email],
        [Location],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_DistributorBranch,
        @DistributorID,
        @locName,
        @locStreetAndNumber,
        @locCity,
        @lkpRegion,
        @PhoneNumber,
        @email,
        @Location,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateDistributorBranch]
    @ID bigint,
    @TableName_DistributorBranch bit = NULL,
    @DistributorID bigint,
    @locName nvarchar(100),
    @locStreetAndNumber nvarchar(200) = NULL,
    @locCity nvarchar(100) = NULL,
    @lkpRegion varchar(50) = NULL,
    @PhoneNumber varchar(50) = NULL,
    @email varchar(50) = NULL,
    @Location GEOMETRY = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [DistributorBranch]
    SET
        [TableName_DistributorBranch] = @TableName_DistributorBranch,
        [DistributorID] = @DistributorID,
        [locName] = @locName,
        [locStreetAndNumber] = @locStreetAndNumber,
        [locCity] = @locCity,
        [lkpRegion] = @lkpRegion,
        [PhoneNumber] = @PhoneNumber,
        [email] = @email,
        [Location] = @Location,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteDistributorBranch]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [DistributorBranch]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IXDistributorBranch_City
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillDistributorBranchByLOCCITY]
    @locCity nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_DistributorBranch],
        [ID],
        [DistributorID],
        [locName],
        [locStreetAndNumber],
        [locCity],
        [lkpRegion],
        [PhoneNumber],
        [email],
        [Location],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [DistributorBranch]
    WHERE [locCity] = @locCity
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXDistributorBranch_DistributorID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillDistributorBranchByDISTRIBUTORID]
    @DistributorID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_DistributorBranch],
        [ID],
        [DistributorID],
        [locName],
        [locStreetAndNumber],
        [locCity],
        [lkpRegion],
        [PhoneNumber],
        [email],
        [Location],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [DistributorBranch]
    WHERE [DistributorID] = @DistributorID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXDistributorBranch_Region
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillDistributorBranchByLKPREGION]
    @lkpRegion varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_DistributorBranch],
        [ID],
        [DistributorID],
        [locName],
        [locStreetAndNumber],
        [locCity],
        [lkpRegion],
        [PhoneNumber],
        [email],
        [Location],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [DistributorBranch]
    WHERE [lkpRegion] = @lkpRegion
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: DistributorObligo
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllDistributorObligos]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_DistributorObligo],
            t.[ID],
            t.[DistributorID],
            t.[WhenExecuted],
            t.[enmObligoTransactionType],
            t.[Amount],
            t.[Reference],
            t.[Authoriser],
            t.[Balance],
            t.[spt_Comments],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            p1.[Text] AS [DistributorID_Text]
        FROM [DistributorObligo] t
        LEFT JOIN [ccvwComboList_Distributor] p1 ON t.[DistributorID] = p1.[ID]
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_DistributorObligo],
            [ID],
            [DistributorID],
            [WhenExecuted],
            [enmObligoTransactionType],
            [Amount],
            [Reference],
            [Authoriser],
            [Balance],
            [spt_Comments],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID]
        FROM [DistributorObligo]
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredDistributorObligos]
    @DistributorID INT = NULL,
    @WhenExecuted DATETIME = NULL,
    @enmObligoTransactionType VARCHAR(50) = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_DistributorObligo],
            t.[ID],
            t.[DistributorID],
            t.[WhenExecuted],
            t.[enmObligoTransactionType],
            t.[Amount],
            t.[Reference],
            t.[Authoriser],
            t.[Balance],
            t.[spt_Comments],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            p1.[Text] AS [DistributorID_Text]
        FROM [DistributorObligo] t
        LEFT JOIN [ccvwComboList_Distributor] p1 ON t.[DistributorID] = p1.[ID]
        WHERE 1=1
          AND (@DistributorID IS NULL OR t.[DistributorID] = @DistributorID)
          AND (@DistributorID IS NULL OR t.[DistributorID] = @DistributorID)
          AND (@WhenExecuted IS NULL OR t.[WhenExecuted] = @WhenExecuted)
          AND (@enmObligoTransactionType IS NULL OR t.[enmObligoTransactionType] LIKE '%' + @enmObligoTransactionType + '%')
          AND (@WhenExecuted IS NULL OR t.[WhenExecuted] = @WhenExecuted)
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_DistributorObligo],
            [ID],
            [DistributorID],
            [WhenExecuted],
            [enmObligoTransactionType],
            [Amount],
            [Reference],
            [Authoriser],
            [Balance],
            [spt_Comments],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID]
        FROM [DistributorObligo]
        WHERE 1=1
          AND (@DistributorID IS NULL OR [DistributorID] = @DistributorID)
          AND (@DistributorID IS NULL OR [DistributorID] = @DistributorID)
          AND (@WhenExecuted IS NULL OR [WhenExecuted] = @WhenExecuted)
          AND (@enmObligoTransactionType IS NULL OR [enmObligoTransactionType] LIKE '%' + @enmObligoTransactionType + '%')
          AND (@WhenExecuted IS NULL OR [WhenExecuted] = @WhenExecuted)
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetDistributorObligoByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_DistributorObligo],
        [ID],
        [DistributorID],
        [WhenExecuted],
        [enmObligoTransactionType],
        [Amount],
        [Reference],
        [Authoriser],
        [Balance],
        [spt_Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [DistributorObligo]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddDistributorObligo]
    @TableName_DistributorObligo bit = NULL,
    @DistributorID bigint = NULL,
    @WhenExecuted datetimeoffset = NULL,
    @enmObligoTransactionType varchar(50) = NULL,
    @Amount decimal(18,0) = NULL,
    @Reference nvarchar(200) = NULL,
    @Authoriser nvarchar(200) = NULL,
    @Balance decimal(18,0) = NULL,
    @spt_Comments nvarchar(500) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [DistributorObligo] (
        [TableName_DistributorObligo],
        [DistributorID],
        [WhenExecuted],
        [enmObligoTransactionType],
        [Amount],
        [Reference],
        [Authoriser],
        [Balance],
        [spt_Comments],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_DistributorObligo,
        @DistributorID,
        @WhenExecuted,
        @enmObligoTransactionType,
        @Amount,
        @Reference,
        @Authoriser,
        @Balance,
        @spt_Comments,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateDistributorObligo]
    @ID bigint,
    @TableName_DistributorObligo bit = NULL,
    @DistributorID bigint = NULL,
    @WhenExecuted datetimeoffset = NULL,
    @enmObligoTransactionType varchar(50) = NULL,
    @Amount decimal(18,0) = NULL,
    @Reference nvarchar(200) = NULL,
    @Authoriser nvarchar(200) = NULL,
    @Balance decimal(18,0) = NULL,
    @spt_Comments nvarchar(500) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [DistributorObligo]
    SET
        [TableName_DistributorObligo] = @TableName_DistributorObligo,
        [DistributorID] = @DistributorID,
        [WhenExecuted] = @WhenExecuted,
        [enmObligoTransactionType] = @enmObligoTransactionType,
        [Amount] = @Amount,
        [Reference] = @Reference,
        [Authoriser] = @Authoriser,
        [Balance] = @Balance,
        [spt_Comments] = @spt_Comments,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteDistributorObligo]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [DistributorObligo]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IXDistributorObligo_DistributorID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillDistributorObligoByDISTRIBUTORID]
    @DistributorID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_DistributorObligo],
        [ID],
        [DistributorID],
        [WhenExecuted],
        [enmObligoTransactionType],
        [Amount],
        [Reference],
        [Authoriser],
        [Balance],
        [spt_Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [DistributorObligo]
    WHERE [DistributorID] = @DistributorID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXDistributorObligo_DistributorID_WhenExecuted
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillDistributorObligoByDISTRIBUTORIDAndWHENEXECUTED]
    @DistributorID bigint,
    @WhenExecuted datetimeoffset
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_DistributorObligo],
        [ID],
        [DistributorID],
        [WhenExecuted],
        [enmObligoTransactionType],
        [Amount],
        [Reference],
        [Authoriser],
        [Balance],
        [spt_Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [DistributorObligo]
    WHERE [DistributorID] = @DistributorID AND [WhenExecuted] = @WhenExecuted
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXDistributorObligo_ObligoTransactionType
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillDistributorObligoByENMOBLIGOTRANSACTIONTYPE]
    @enmObligoTransactionType varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_DistributorObligo],
        [ID],
        [DistributorID],
        [WhenExecuted],
        [enmObligoTransactionType],
        [Amount],
        [Reference],
        [Authoriser],
        [Balance],
        [spt_Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [DistributorObligo]
    WHERE [enmObligoTransactionType] = @enmObligoTransactionType
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXDistributorObligo_WhenExecuted
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillDistributorObligoByWHENEXECUTED]
    @WhenExecuted datetimeoffset
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_DistributorObligo],
        [ID],
        [DistributorID],
        [WhenExecuted],
        [enmObligoTransactionType],
        [Amount],
        [Reference],
        [Authoriser],
        [Balance],
        [spt_Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [DistributorObligo]
    WHERE [WhenExecuted] = @WhenExecuted
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: DrivebotPayment
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllDrivebotPayments]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_DrivebotPayment],
            t.[ID],
            t.[CustomerID],
            t.[PartnershipCode],
            t.[DriverName],
            t.[StationId],
            t.[StationName],
            t.[Amount],
            t.[WalletPhoneNumber],
            t.[RequestedTransactionID],
            t.[ManiSuccess],
            t.[ManiErrorDescription],
            t.[DrivebotSuccess],
            t.[DrivebotDescription],
            t.[DrivebotUpdateTime],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            p1.[Text] AS [CustomerID_Text],
            p2.[Text] AS [RequestedTransactionID_Text]
        FROM [DrivebotPayment] t
        LEFT JOIN [ccvwComboList_Customer] p1 ON t.[CustomerID] = p1.[ID]
        LEFT JOIN [ccvwComboList_RequestedTransaction] p2 ON t.[RequestedTransactionID] = p2.[ID]
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_DrivebotPayment],
            [ID],
            [CustomerID],
            [PartnershipCode],
            [DriverName],
            [StationId],
            [StationName],
            [Amount],
            [WalletPhoneNumber],
            [RequestedTransactionID],
            [ManiSuccess],
            [ManiErrorDescription],
            [DrivebotSuccess],
            [DrivebotDescription],
            [DrivebotUpdateTime],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID]
        FROM [DrivebotPayment]
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredDrivebotPayments]
    @RequestedTransactionID INT = NULL,
    @CustomerID INT = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_DrivebotPayment],
            t.[ID],
            t.[CustomerID],
            t.[PartnershipCode],
            t.[DriverName],
            t.[StationId],
            t.[StationName],
            t.[Amount],
            t.[WalletPhoneNumber],
            t.[RequestedTransactionID],
            t.[ManiSuccess],
            t.[ManiErrorDescription],
            t.[DrivebotSuccess],
            t.[DrivebotDescription],
            t.[DrivebotUpdateTime],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            p1.[Text] AS [CustomerID_Text],
            p2.[Text] AS [RequestedTransactionID_Text]
        FROM [DrivebotPayment] t
        LEFT JOIN [ccvwComboList_Customer] p1 ON t.[CustomerID] = p1.[ID]
        LEFT JOIN [ccvwComboList_RequestedTransaction] p2 ON t.[RequestedTransactionID] = p2.[ID]
        WHERE 1=1
          AND (@RequestedTransactionID IS NULL OR t.[RequestedTransactionID] = @RequestedTransactionID)
          AND (@CustomerID IS NULL OR t.[CustomerID] = @CustomerID)
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_DrivebotPayment],
            [ID],
            [CustomerID],
            [PartnershipCode],
            [DriverName],
            [StationId],
            [StationName],
            [Amount],
            [WalletPhoneNumber],
            [RequestedTransactionID],
            [ManiSuccess],
            [ManiErrorDescription],
            [DrivebotSuccess],
            [DrivebotDescription],
            [DrivebotUpdateTime],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID]
        FROM [DrivebotPayment]
        WHERE 1=1
          AND (@RequestedTransactionID IS NULL OR [RequestedTransactionID] = @RequestedTransactionID)
          AND (@CustomerID IS NULL OR [CustomerID] = @CustomerID)
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetDrivebotPaymentByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_DrivebotPayment],
        [ID],
        [CustomerID],
        [PartnershipCode],
        [DriverName],
        [StationId],
        [StationName],
        [Amount],
        [WalletPhoneNumber],
        [RequestedTransactionID],
        [ManiSuccess],
        [ManiErrorDescription],
        [DrivebotSuccess],
        [DrivebotDescription],
        [DrivebotUpdateTime],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [DrivebotPayment]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddDrivebotPayment]
    @TableName_DrivebotPayment bit = NULL,
    @CustomerID bigint,
    @PartnershipCode nvarchar(100),
    @DriverName nvarchar(100),
    @StationId nvarchar(100),
    @StationName nvarchar(100),
    @Amount decimal(18,0),
    @WalletPhoneNumber nvarchar(100),
    @RequestedTransactionID bigint,
    @ManiSuccess bit,
    @ManiErrorDescription nvarchar(256) = NULL,
    @DrivebotSuccess bit = NULL,
    @DrivebotDescription nvarchar(256) = NULL,
    @DrivebotUpdateTime datetime = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [DrivebotPayment] (
        [TableName_DrivebotPayment],
        [CustomerID],
        [PartnershipCode],
        [DriverName],
        [StationId],
        [StationName],
        [Amount],
        [WalletPhoneNumber],
        [RequestedTransactionID],
        [ManiSuccess],
        [ManiErrorDescription],
        [DrivebotSuccess],
        [DrivebotDescription],
        [DrivebotUpdateTime],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_DrivebotPayment,
        @CustomerID,
        @PartnershipCode,
        @DriverName,
        @StationId,
        @StationName,
        @Amount,
        @WalletPhoneNumber,
        @RequestedTransactionID,
        @ManiSuccess,
        @ManiErrorDescription,
        @DrivebotSuccess,
        @DrivebotDescription,
        @DrivebotUpdateTime,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateDrivebotPayment]
    @ID bigint,
    @TableName_DrivebotPayment bit = NULL,
    @CustomerID bigint,
    @PartnershipCode nvarchar(100),
    @DriverName nvarchar(100),
    @StationId nvarchar(100),
    @StationName nvarchar(100),
    @Amount decimal(18,0),
    @WalletPhoneNumber nvarchar(100),
    @RequestedTransactionID bigint,
    @ManiSuccess bit,
    @ManiErrorDescription nvarchar(256) = NULL,
    @DrivebotSuccess bit = NULL,
    @DrivebotDescription nvarchar(256) = NULL,
    @DrivebotUpdateTime datetime = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [DrivebotPayment]
    SET
        [TableName_DrivebotPayment] = @TableName_DrivebotPayment,
        [CustomerID] = @CustomerID,
        [PartnershipCode] = @PartnershipCode,
        [DriverName] = @DriverName,
        [StationId] = @StationId,
        [StationName] = @StationName,
        [Amount] = @Amount,
        [WalletPhoneNumber] = @WalletPhoneNumber,
        [RequestedTransactionID] = @RequestedTransactionID,
        [ManiSuccess] = @ManiSuccess,
        [ManiErrorDescription] = @ManiErrorDescription,
        [DrivebotSuccess] = @DrivebotSuccess,
        [DrivebotDescription] = @DrivebotDescription,
        [DrivebotUpdateTime] = @DrivebotUpdateTime,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteDrivebotPayment]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [DrivebotPayment]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IXDrivebotPayment_RequestedTransactionId
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetDrivebotPaymentByREQUESTEDTRANSACTIONID]
    @RequestedTransactionID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_DrivebotPayment],
        [ID],
        [CustomerID],
        [PartnershipCode],
        [DriverName],
        [StationId],
        [StationName],
        [Amount],
        [WalletPhoneNumber],
        [RequestedTransactionID],
        [ManiSuccess],
        [ManiErrorDescription],
        [DrivebotSuccess],
        [DrivebotDescription],
        [DrivebotUpdateTime],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [DrivebotPayment]
    WHERE [RequestedTransactionID] = @RequestedTransactionID
;
END

GO

-- Procedure for Index: IXDrivebotPayment_CustomerID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillDrivebotPaymentByCUSTOMERID]
    @CustomerID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_DrivebotPayment],
        [ID],
        [CustomerID],
        [PartnershipCode],
        [DriverName],
        [StationId],
        [StationName],
        [Amount],
        [WalletPhoneNumber],
        [RequestedTransactionID],
        [ManiSuccess],
        [ManiErrorDescription],
        [DrivebotSuccess],
        [DrivebotDescription],
        [DrivebotUpdateTime],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [DrivebotPayment]
    WHERE [CustomerID] = @CustomerID
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: EntityRiskColor
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllEntityRiskColors]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[ID],
            t.[TableName_EntityRiskColor],
            t.[enmEntityType],
            t.[EntityID],
            t.[enmCurrentColor],
            t.[PreviousColorID],
            t.[LastUpdated],
            t.[UpdatedByRuleID],
            t.[UpdatedByUserID],
            t.[AddedOn],
            t.[AddedBy],
            t.[ChangedOn],
            t.[ChangedBy],
            t.[UpdatingLoginID],
            p1.[Text] AS [UpdatedByRuleID_Text]
        FROM [EntityRiskColor] t
        LEFT JOIN [ccvwComboList_RiskRule] p1 ON t.[UpdatedByRuleID] = p1.[ID]
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [ID],
            [TableName_EntityRiskColor],
            [enmEntityType],
            [EntityID],
            [enmCurrentColor],
            [PreviousColorID],
            [LastUpdated],
            [UpdatedByRuleID],
            [UpdatedByUserID],
            [AddedOn],
            [AddedBy],
            [ChangedOn],
            [ChangedBy],
            [UpdatingLoginID]
        FROM [EntityRiskColor]
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredEntityRiskColors]
    @enmEntityType VARCHAR(50) = NULL,
    @EntityID INT = NULL,
    @enmCurrentColor VARCHAR(50) = NULL,
    @UpdatedByRuleID INT = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[ID],
            t.[TableName_EntityRiskColor],
            t.[enmEntityType],
            t.[EntityID],
            t.[enmCurrentColor],
            t.[PreviousColorID],
            t.[LastUpdated],
            t.[UpdatedByRuleID],
            t.[UpdatedByUserID],
            t.[AddedOn],
            t.[AddedBy],
            t.[ChangedOn],
            t.[ChangedBy],
            t.[UpdatingLoginID],
            p1.[Text] AS [UpdatedByRuleID_Text]
        FROM [EntityRiskColor] t
        LEFT JOIN [ccvwComboList_RiskRule] p1 ON t.[UpdatedByRuleID] = p1.[ID]
        WHERE 1=1
          AND (@enmEntityType IS NULL OR t.[enmEntityType] LIKE '%' + @enmEntityType + '%')
          AND (@EntityID IS NULL OR t.[EntityID] = @EntityID)
          AND (@enmCurrentColor IS NULL OR t.[enmCurrentColor] LIKE '%' + @enmCurrentColor + '%')
          AND (@UpdatedByRuleID IS NULL OR t.[UpdatedByRuleID] = @UpdatedByRuleID)
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [ID],
            [TableName_EntityRiskColor],
            [enmEntityType],
            [EntityID],
            [enmCurrentColor],
            [PreviousColorID],
            [LastUpdated],
            [UpdatedByRuleID],
            [UpdatedByUserID],
            [AddedOn],
            [AddedBy],
            [ChangedOn],
            [ChangedBy],
            [UpdatingLoginID]
        FROM [EntityRiskColor]
        WHERE 1=1
          AND (@enmEntityType IS NULL OR [enmEntityType] LIKE '%' + @enmEntityType + '%')
          AND (@EntityID IS NULL OR [EntityID] = @EntityID)
          AND (@enmCurrentColor IS NULL OR [enmCurrentColor] LIKE '%' + @enmCurrentColor + '%')
          AND (@UpdatedByRuleID IS NULL OR [UpdatedByRuleID] = @UpdatedByRuleID)
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetEntityRiskColorByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [TableName_EntityRiskColor],
        [enmEntityType],
        [EntityID],
        [enmCurrentColor],
        [PreviousColorID],
        [LastUpdated],
        [UpdatedByRuleID],
        [UpdatedByUserID],
        [AddedOn],
        [AddedBy],
        [ChangedOn],
        [ChangedBy],
        [UpdatingLoginID]
    FROM [EntityRiskColor]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddEntityRiskColor]
    @TableName_EntityRiskColor bit = NULL,
    @enmEntityType varchar(50),
    @EntityID bigint,
    @enmCurrentColor varchar(50),
    @PreviousColorID varchar(50) = NULL,
    @LastUpdated datetime,
    @UpdatedByRuleID bigint = NULL,
    @UpdatedByUserID bigint = NULL,
    @UpdatingLoginID bigint = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [EntityRiskColor] (
        [TableName_EntityRiskColor],
        [enmEntityType],
        [EntityID],
        [enmCurrentColor],
        [PreviousColorID],
        [LastUpdated],
        [UpdatedByRuleID],
        [UpdatedByUserID],
        [UpdatingLoginID],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_EntityRiskColor,
        @enmEntityType,
        @EntityID,
        @enmCurrentColor,
        @PreviousColorID,
        @LastUpdated,
        @UpdatedByRuleID,
        @UpdatedByUserID,
        @UpdatingLoginID,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateEntityRiskColor]
    @ID bigint,
    @TableName_EntityRiskColor bit = NULL,
    @enmEntityType varchar(50),
    @EntityID bigint,
    @enmCurrentColor varchar(50),
    @PreviousColorID varchar(50) = NULL,
    @LastUpdated datetime,
    @UpdatedByRuleID bigint = NULL,
    @UpdatedByUserID bigint = NULL,
    @UpdatingLoginID bigint = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [EntityRiskColor]
    SET
        [TableName_EntityRiskColor] = @TableName_EntityRiskColor,
        [enmEntityType] = @enmEntityType,
        [EntityID] = @EntityID,
        [enmCurrentColor] = @enmCurrentColor,
        [PreviousColorID] = @PreviousColorID,
        [LastUpdated] = @LastUpdated,
        [UpdatedByRuleID] = @UpdatedByRuleID,
        [UpdatedByUserID] = @UpdatedByUserID,
        [UpdatingLoginID] = @UpdatingLoginID,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteEntityRiskColor]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [EntityRiskColor]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: UQ_EntityRiskColor_Entity
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetEntityRiskColorByENMENTITYTYPEAndENTITYID]
    @enmEntityType varchar(50),
    @EntityID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [TableName_EntityRiskColor],
        [enmEntityType],
        [EntityID],
        [enmCurrentColor],
        [PreviousColorID],
        [LastUpdated],
        [UpdatedByRuleID],
        [UpdatedByUserID],
        [AddedOn],
        [AddedBy],
        [ChangedOn],
        [ChangedBy],
        [UpdatingLoginID]
    FROM [EntityRiskColor]
    WHERE [enmEntityType] = @enmEntityType AND [EntityID] = @EntityID
;
END

GO

-- Procedure for Index: IX_EntityRiskColor_Color
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillEntityRiskColorByENMCURRENTCOLOR]
    @enmCurrentColor varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [TableName_EntityRiskColor],
        [enmEntityType],
        [EntityID],
        [enmCurrentColor],
        [PreviousColorID],
        [LastUpdated],
        [UpdatedByRuleID],
        [UpdatedByUserID],
        [AddedOn],
        [AddedBy],
        [ChangedOn],
        [ChangedBy],
        [UpdatingLoginID]
    FROM [EntityRiskColor]
    WHERE [enmCurrentColor] = @enmCurrentColor
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_EntityRiskColor_UpdatedByRuleID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillEntityRiskColorByUPDATEDBYRULEID]
    @UpdatedByRuleID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [TableName_EntityRiskColor],
        [enmEntityType],
        [EntityID],
        [enmCurrentColor],
        [PreviousColorID],
        [LastUpdated],
        [UpdatedByRuleID],
        [UpdatedByUserID],
        [AddedOn],
        [AddedBy],
        [ChangedOn],
        [ChangedBy],
        [UpdatingLoginID]
    FROM [EntityRiskColor]
    WHERE [UpdatedByRuleID] = @UpdatedByRuleID
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: ExchangeRate
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllExchangeRates]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_ExchangeRate],
        [ID],
        [Date],
        [enmCurrency],
        [ExchangeRateToIls],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [ExchangeRate]
    ORDER BY [ID]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredExchangeRates]
    @enmCurrency VARCHAR(3) = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_ExchangeRate],
        [ID],
        [Date],
        [enmCurrency],
        [ExchangeRateToIls],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [ExchangeRate]
    WHERE 1=1
      AND (@enmCurrency IS NULL OR [enmCurrency] LIKE '%' + @enmCurrency + '%')
    ORDER BY [ID]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetExchangeRateByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_ExchangeRate],
        [ID],
        [Date],
        [enmCurrency],
        [ExchangeRateToIls],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [ExchangeRate]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddExchangeRate]
    @TableName_ExchangeRate bit = NULL,
    @Date date,
    @enmCurrency varchar(3),
    @ExchangeRateToIls decimal(18,0) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [ExchangeRate] (
        [TableName_ExchangeRate],
        [Date],
        [enmCurrency],
        [ExchangeRateToIls],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_ExchangeRate,
        @Date,
        @enmCurrency,
        @ExchangeRateToIls,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateExchangeRate]
    @ID bigint,
    @TableName_ExchangeRate bit = NULL,
    @Date date,
    @enmCurrency varchar(3),
    @ExchangeRateToIls decimal(18,0) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [ExchangeRate]
    SET
        [TableName_ExchangeRate] = @TableName_ExchangeRate,
        [Date] = @Date,
        [enmCurrency] = @enmCurrency,
        [ExchangeRateToIls] = @ExchangeRateToIls,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteExchangeRate]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [ExchangeRate]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IXExchangeRate_Currency
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetExchangeRateByENMCURRENCY]
    @enmCurrency varchar(3)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_ExchangeRate],
        [ID],
        [Date],
        [enmCurrency],
        [ExchangeRateToIls],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [ExchangeRate]
    WHERE [enmCurrency] = @enmCurrency
;
END

GO


-- =========================================
-- Stored Procedures for Table: ExternalCustomer
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllExternalCustomers]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_ExternalCustomer],
            t.[ID],
            t.[CustomerID],
            t.[enmExternalService],
            t.[ExternalCustomerIdentifier],
            t.[clc_DateCreated],
            t.[WhenCustomerDetailsUpdatedAtExternalService],
            t.[WhenDocumentationRecdFromExternalService],
            t.[enmExternalCustomerStatus],
            t.[StatusDescription],
            t.[LastLoggedAlertID],
            t.[spt_Comments],
            t.[WhenLastUsed],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            p1.[Text] AS [CustomerID_Text]
        FROM [ExternalCustomer] t
        LEFT JOIN [ccvwComboList_Customer] p1 ON t.[CustomerID] = p1.[ID]
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_ExternalCustomer],
            [ID],
            [CustomerID],
            [enmExternalService],
            [ExternalCustomerIdentifier],
            [clc_DateCreated],
            [WhenCustomerDetailsUpdatedAtExternalService],
            [WhenDocumentationRecdFromExternalService],
            [enmExternalCustomerStatus],
            [StatusDescription],
            [LastLoggedAlertID],
            [spt_Comments],
            [WhenLastUsed],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID]
        FROM [ExternalCustomer]
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredExternalCustomers]
    @CustomerID INT = NULL,
    @enmExternalService VARCHAR(50) = NULL,
    @ExternalCustomerIdentifier NVARCHAR(200) = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_ExternalCustomer],
            t.[ID],
            t.[CustomerID],
            t.[enmExternalService],
            t.[ExternalCustomerIdentifier],
            t.[clc_DateCreated],
            t.[WhenCustomerDetailsUpdatedAtExternalService],
            t.[WhenDocumentationRecdFromExternalService],
            t.[enmExternalCustomerStatus],
            t.[StatusDescription],
            t.[LastLoggedAlertID],
            t.[spt_Comments],
            t.[WhenLastUsed],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            p1.[Text] AS [CustomerID_Text]
        FROM [ExternalCustomer] t
        LEFT JOIN [ccvwComboList_Customer] p1 ON t.[CustomerID] = p1.[ID]
        WHERE 1=1
          AND (@CustomerID IS NULL OR t.[CustomerID] = @CustomerID)
          AND (@enmExternalService IS NULL OR t.[enmExternalService] LIKE '%' + @enmExternalService + '%')
          AND (@enmExternalService IS NULL OR t.[enmExternalService] LIKE '%' + @enmExternalService + '%')
          AND (@ExternalCustomerIdentifier IS NULL OR t.[ExternalCustomerIdentifier] LIKE '%' + @ExternalCustomerIdentifier + '%')
          AND (@CustomerID IS NULL OR t.[CustomerID] = @CustomerID)
          AND (@enmExternalService IS NULL OR t.[enmExternalService] LIKE '%' + @enmExternalService + '%')
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_ExternalCustomer],
            [ID],
            [CustomerID],
            [enmExternalService],
            [ExternalCustomerIdentifier],
            [clc_DateCreated],
            [WhenCustomerDetailsUpdatedAtExternalService],
            [WhenDocumentationRecdFromExternalService],
            [enmExternalCustomerStatus],
            [StatusDescription],
            [LastLoggedAlertID],
            [spt_Comments],
            [WhenLastUsed],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID]
        FROM [ExternalCustomer]
        WHERE 1=1
          AND (@CustomerID IS NULL OR [CustomerID] = @CustomerID)
          AND (@enmExternalService IS NULL OR [enmExternalService] LIKE '%' + @enmExternalService + '%')
          AND (@enmExternalService IS NULL OR [enmExternalService] LIKE '%' + @enmExternalService + '%')
          AND (@ExternalCustomerIdentifier IS NULL OR [ExternalCustomerIdentifier] LIKE '%' + @ExternalCustomerIdentifier + '%')
          AND (@CustomerID IS NULL OR [CustomerID] = @CustomerID)
          AND (@enmExternalService IS NULL OR [enmExternalService] LIKE '%' + @enmExternalService + '%')
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetExternalCustomerByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_ExternalCustomer],
        [ID],
        [CustomerID],
        [enmExternalService],
        [ExternalCustomerIdentifier],
        [clc_DateCreated],
        [WhenCustomerDetailsUpdatedAtExternalService],
        [WhenDocumentationRecdFromExternalService],
        [enmExternalCustomerStatus],
        [StatusDescription],
        [LastLoggedAlertID],
        [spt_Comments],
        [WhenLastUsed],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [ExternalCustomer]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddExternalCustomer]
    @TableName_ExternalCustomer bit = NULL,
    @CustomerID bigint,
    @enmExternalService varchar(50),
    @ExternalCustomerIdentifier nvarchar(200) = NULL,
    @WhenCustomerDetailsUpdatedAtExternalService datetimeoffset = NULL,
    @WhenDocumentationRecdFromExternalService datetimeoffset = NULL,
    @enmExternalCustomerStatus varchar(50) = NULL,
    @StatusDescription nvarchar(100) = NULL,
    @LastLoggedAlertID bigint = NULL,
    @spt_Comments nvarchar(500) = NULL,
    @WhenLastUsed datetimeoffset = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [ExternalCustomer] (
        [TableName_ExternalCustomer],
        [CustomerID],
        [enmExternalService],
        [ExternalCustomerIdentifier],
        [WhenCustomerDetailsUpdatedAtExternalService],
        [WhenDocumentationRecdFromExternalService],
        [enmExternalCustomerStatus],
        [StatusDescription],
        [LastLoggedAlertID],
        [spt_Comments],
        [WhenLastUsed],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_ExternalCustomer,
        @CustomerID,
        @enmExternalService,
        @ExternalCustomerIdentifier,
        @WhenCustomerDetailsUpdatedAtExternalService,
        @WhenDocumentationRecdFromExternalService,
        @enmExternalCustomerStatus,
        @StatusDescription,
        @LastLoggedAlertID,
        @spt_Comments,
        @WhenLastUsed,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateExternalCustomer]
    @ID bigint,
    @TableName_ExternalCustomer bit = NULL,
    @CustomerID bigint,
    @enmExternalService varchar(50),
    @ExternalCustomerIdentifier nvarchar(200) = NULL,
    @WhenCustomerDetailsUpdatedAtExternalService datetimeoffset = NULL,
    @WhenDocumentationRecdFromExternalService datetimeoffset = NULL,
    @enmExternalCustomerStatus varchar(50) = NULL,
    @StatusDescription nvarchar(100) = NULL,
    @LastLoggedAlertID bigint = NULL,
    @spt_Comments nvarchar(500) = NULL,
    @WhenLastUsed datetimeoffset = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [ExternalCustomer]
    SET
        [TableName_ExternalCustomer] = @TableName_ExternalCustomer,
        [CustomerID] = @CustomerID,
        [enmExternalService] = @enmExternalService,
        [ExternalCustomerIdentifier] = @ExternalCustomerIdentifier,
        [WhenCustomerDetailsUpdatedAtExternalService] = @WhenCustomerDetailsUpdatedAtExternalService,
        [WhenDocumentationRecdFromExternalService] = @WhenDocumentationRecdFromExternalService,
        [enmExternalCustomerStatus] = @enmExternalCustomerStatus,
        [StatusDescription] = @StatusDescription,
        [LastLoggedAlertID] = @LastLoggedAlertID,
        [spt_Comments] = @spt_Comments,
        [WhenLastUsed] = @WhenLastUsed,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteExternalCustomer]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [ExternalCustomer]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_ExternalCustomer_CustomerID_xternalService
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetExternalCustomerByCUSTOMERIDAndENMEXTERNALSERVICE]
    @CustomerID bigint,
    @enmExternalService varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_ExternalCustomer],
        [ID],
        [CustomerID],
        [enmExternalService],
        [ExternalCustomerIdentifier],
        [clc_DateCreated],
        [WhenCustomerDetailsUpdatedAtExternalService],
        [WhenDocumentationRecdFromExternalService],
        [enmExternalCustomerStatus],
        [StatusDescription],
        [LastLoggedAlertID],
        [spt_Comments],
        [WhenLastUsed],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [ExternalCustomer]
    WHERE [CustomerID] = @CustomerID AND [enmExternalService] = @enmExternalService
;
END

GO

-- Procedure for Index: IX_ExternalCustomer_ExternalService_ExternalCustomerIdentifier
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetExternalCustomerByENMEXTERNALSERVICEAndEXTERNALCUSTOMERIDENTIFIER]
    @enmExternalService varchar(50),
    @ExternalCustomerIdentifier nvarchar(200)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_ExternalCustomer],
        [ID],
        [CustomerID],
        [enmExternalService],
        [ExternalCustomerIdentifier],
        [clc_DateCreated],
        [WhenCustomerDetailsUpdatedAtExternalService],
        [WhenDocumentationRecdFromExternalService],
        [enmExternalCustomerStatus],
        [StatusDescription],
        [LastLoggedAlertID],
        [spt_Comments],
        [WhenLastUsed],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [ExternalCustomer]
    WHERE [enmExternalService] = @enmExternalService AND [ExternalCustomerIdentifier] = @ExternalCustomerIdentifier
;
END

GO

-- Procedure for Index: IX_ExternalCustomer_CustomerID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillExternalCustomerByCUSTOMERID]
    @CustomerID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_ExternalCustomer],
        [ID],
        [CustomerID],
        [enmExternalService],
        [ExternalCustomerIdentifier],
        [clc_DateCreated],
        [WhenCustomerDetailsUpdatedAtExternalService],
        [WhenDocumentationRecdFromExternalService],
        [enmExternalCustomerStatus],
        [StatusDescription],
        [LastLoggedAlertID],
        [spt_Comments],
        [WhenLastUsed],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [ExternalCustomer]
    WHERE [CustomerID] = @CustomerID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_ExternalCustomer_ExternalService
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillExternalCustomerByENMEXTERNALSERVICE]
    @enmExternalService varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_ExternalCustomer],
        [ID],
        [CustomerID],
        [enmExternalService],
        [ExternalCustomerIdentifier],
        [clc_DateCreated],
        [WhenCustomerDetailsUpdatedAtExternalService],
        [WhenDocumentationRecdFromExternalService],
        [enmExternalCustomerStatus],
        [StatusDescription],
        [LastLoggedAlertID],
        [spt_Comments],
        [WhenLastUsed],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [ExternalCustomer]
    WHERE [enmExternalService] = @enmExternalService
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: ExternalTransaction
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllExternalTransactions]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_ExternalTransaction],
            t.[ID],
            t.[enmExternalService],
            t.[clc_WhenInitialized],
            t.[CustomerID],
            t.[ExternalTransactionIdentifier],
            t.[TransactionCreditCardID],
            t.[CustomerWalletID],
            t.[MarginUsed],
            t.[ExecutingCurrency],
            t.[ExecutingCurrencyExchangeRate],
            t.[AmountILS],
            t.[Description],
            t.[StatusFromExternalService],
            t.[enmTransactionStatus_ExternalTransactionStatus],
            t.[PaymentApprovalCode],
            t.[WhenPaymentCompleted],
            t.[WhenTransactionCancelled],
            t.[WhenTransactionCompleted],
            t.[spt_Comments],
            t.[AmountRefunded],
            t.[WhenRefunded],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            t.[ExternalReferenceNo],
            p1.[Text] AS [CustomerID_Text],
            p2.[Text] AS [CustomerWalletID_Text]
        FROM [ExternalTransaction] t
        LEFT JOIN [ccvwComboList_Customer] p1 ON t.[CustomerID] = p1.[ID]
        LEFT JOIN [ccvwComboList_CustomerWallet] p2 ON t.[CustomerWalletID] = p2.[ID]
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_ExternalTransaction],
            [ID],
            [enmExternalService],
            [clc_WhenInitialized],
            [CustomerID],
            [ExternalTransactionIdentifier],
            [TransactionCreditCardID],
            [CustomerWalletID],
            [MarginUsed],
            [ExecutingCurrency],
            [ExecutingCurrencyExchangeRate],
            [AmountILS],
            [Description],
            [StatusFromExternalService],
            [enmTransactionStatus_ExternalTransactionStatus],
            [PaymentApprovalCode],
            [WhenPaymentCompleted],
            [WhenTransactionCancelled],
            [WhenTransactionCompleted],
            [spt_Comments],
            [AmountRefunded],
            [WhenRefunded],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID],
            [ExternalReferenceNo]
        FROM [ExternalTransaction]
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredExternalTransactions]
    @CustomerWalletID INT = NULL,
    @enmExternalService VARCHAR(50) = NULL,
    @ExternalTransactionIdentifier VARCHAR(100) = NULL,
    @TransactionCreditCardID INT = NULL,
    @CustomerID INT = NULL,
    @enmTransactionStatus_ExternalTransactionStatus VARCHAR(15) = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_ExternalTransaction],
            t.[ID],
            t.[enmExternalService],
            t.[clc_WhenInitialized],
            t.[CustomerID],
            t.[ExternalTransactionIdentifier],
            t.[TransactionCreditCardID],
            t.[CustomerWalletID],
            t.[MarginUsed],
            t.[ExecutingCurrency],
            t.[ExecutingCurrencyExchangeRate],
            t.[AmountILS],
            t.[Description],
            t.[StatusFromExternalService],
            t.[enmTransactionStatus_ExternalTransactionStatus],
            t.[PaymentApprovalCode],
            t.[WhenPaymentCompleted],
            t.[WhenTransactionCancelled],
            t.[WhenTransactionCompleted],
            t.[spt_Comments],
            t.[AmountRefunded],
            t.[WhenRefunded],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            t.[ExternalReferenceNo],
            p1.[Text] AS [CustomerID_Text],
            p2.[Text] AS [CustomerWalletID_Text]
        FROM [ExternalTransaction] t
        LEFT JOIN [ccvwComboList_Customer] p1 ON t.[CustomerID] = p1.[ID]
        LEFT JOIN [ccvwComboList_CustomerWallet] p2 ON t.[CustomerWalletID] = p2.[ID]
        WHERE 1=1
          AND (@CustomerWalletID IS NULL OR t.[CustomerWalletID] = @CustomerWalletID)
          AND (@enmExternalService IS NULL OR t.[enmExternalService] LIKE '%' + @enmExternalService + '%')
          AND (@ExternalTransactionIdentifier IS NULL OR t.[ExternalTransactionIdentifier] LIKE '%' + @ExternalTransactionIdentifier + '%')
          AND (@TransactionCreditCardID IS NULL OR t.[TransactionCreditCardID] = @TransactionCreditCardID)
          AND (@CustomerID IS NULL OR t.[CustomerID] = @CustomerID)
          AND (@enmTransactionStatus_ExternalTransactionStatus IS NULL OR t.[enmTransactionStatus_ExternalTransactionStatus] LIKE '%' + @enmTransactionStatus_ExternalTransactionStatus + '%')
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_ExternalTransaction],
            [ID],
            [enmExternalService],
            [clc_WhenInitialized],
            [CustomerID],
            [ExternalTransactionIdentifier],
            [TransactionCreditCardID],
            [CustomerWalletID],
            [MarginUsed],
            [ExecutingCurrency],
            [ExecutingCurrencyExchangeRate],
            [AmountILS],
            [Description],
            [StatusFromExternalService],
            [enmTransactionStatus_ExternalTransactionStatus],
            [PaymentApprovalCode],
            [WhenPaymentCompleted],
            [WhenTransactionCancelled],
            [WhenTransactionCompleted],
            [spt_Comments],
            [AmountRefunded],
            [WhenRefunded],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID],
            [ExternalReferenceNo]
        FROM [ExternalTransaction]
        WHERE 1=1
          AND (@CustomerWalletID IS NULL OR [CustomerWalletID] = @CustomerWalletID)
          AND (@enmExternalService IS NULL OR [enmExternalService] LIKE '%' + @enmExternalService + '%')
          AND (@ExternalTransactionIdentifier IS NULL OR [ExternalTransactionIdentifier] LIKE '%' + @ExternalTransactionIdentifier + '%')
          AND (@TransactionCreditCardID IS NULL OR [TransactionCreditCardID] = @TransactionCreditCardID)
          AND (@CustomerID IS NULL OR [CustomerID] = @CustomerID)
          AND (@enmTransactionStatus_ExternalTransactionStatus IS NULL OR [enmTransactionStatus_ExternalTransactionStatus] LIKE '%' + @enmTransactionStatus_ExternalTransactionStatus + '%')
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetExternalTransactionByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_ExternalTransaction],
        [ID],
        [enmExternalService],
        [clc_WhenInitialized],
        [CustomerID],
        [ExternalTransactionIdentifier],
        [TransactionCreditCardID],
        [CustomerWalletID],
        [MarginUsed],
        [ExecutingCurrency],
        [ExecutingCurrencyExchangeRate],
        [AmountILS],
        [Description],
        [StatusFromExternalService],
        [enmTransactionStatus_ExternalTransactionStatus],
        [PaymentApprovalCode],
        [WhenPaymentCompleted],
        [WhenTransactionCancelled],
        [WhenTransactionCompleted],
        [spt_Comments],
        [AmountRefunded],
        [WhenRefunded],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [ExternalReferenceNo]
    FROM [ExternalTransaction]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddExternalTransaction]
    @TableName_ExternalTransaction bit = NULL,
    @enmExternalService varchar(50),
    @CustomerID bigint,
    @ExternalTransactionIdentifier varchar(100) = NULL,
    @TransactionCreditCardID bigint = NULL,
    @CustomerWalletID bigint = NULL,
    @MarginUsed decimal(18,0) = NULL,
    @ExecutingCurrency varchar(3) = NULL,
    @ExecutingCurrencyExchangeRate decimal(18,0) = NULL,
    @AmountILS decimal(18,0) = NULL,
    @Description nvarchar(200) = NULL,
    @StatusFromExternalService varchar(50) = NULL,
    @enmTransactionStatus_ExternalTransactionStatus varchar(15) = NULL,
    @PaymentApprovalCode varchar(50) = NULL,
    @WhenPaymentCompleted datetimeoffset = NULL,
    @WhenTransactionCancelled datetimeoffset = NULL,
    @WhenTransactionCompleted datetimeoffset = NULL,
    @spt_Comments nvarchar(300) = NULL,
    @AmountRefunded decimal(18,0) = NULL,
    @WhenRefunded datetimeoffset = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @ExternalReferenceNo nvarchar(100) = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [ExternalTransaction] (
        [TableName_ExternalTransaction],
        [enmExternalService],
        [CustomerID],
        [ExternalTransactionIdentifier],
        [TransactionCreditCardID],
        [CustomerWalletID],
        [MarginUsed],
        [ExecutingCurrency],
        [ExecutingCurrencyExchangeRate],
        [AmountILS],
        [Description],
        [StatusFromExternalService],
        [enmTransactionStatus_ExternalTransactionStatus],
        [PaymentApprovalCode],
        [WhenPaymentCompleted],
        [WhenTransactionCancelled],
        [WhenTransactionCompleted],
        [spt_Comments],
        [AmountRefunded],
        [WhenRefunded],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [ExternalReferenceNo],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_ExternalTransaction,
        @enmExternalService,
        @CustomerID,
        @ExternalTransactionIdentifier,
        @TransactionCreditCardID,
        @CustomerWalletID,
        @MarginUsed,
        @ExecutingCurrency,
        @ExecutingCurrencyExchangeRate,
        @AmountILS,
        @Description,
        @StatusFromExternalService,
        @enmTransactionStatus_ExternalTransactionStatus,
        @PaymentApprovalCode,
        @WhenPaymentCompleted,
        @WhenTransactionCancelled,
        @WhenTransactionCompleted,
        @spt_Comments,
        @AmountRefunded,
        @WhenRefunded,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        @ExternalReferenceNo,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateExternalTransaction]
    @ID bigint,
    @TableName_ExternalTransaction bit = NULL,
    @enmExternalService varchar(50),
    @CustomerID bigint,
    @ExternalTransactionIdentifier varchar(100) = NULL,
    @TransactionCreditCardID bigint = NULL,
    @CustomerWalletID bigint = NULL,
    @MarginUsed decimal(18,0) = NULL,
    @ExecutingCurrency varchar(3) = NULL,
    @ExecutingCurrencyExchangeRate decimal(18,0) = NULL,
    @AmountILS decimal(18,0) = NULL,
    @Description nvarchar(200) = NULL,
    @StatusFromExternalService varchar(50) = NULL,
    @enmTransactionStatus_ExternalTransactionStatus varchar(15) = NULL,
    @PaymentApprovalCode varchar(50) = NULL,
    @WhenPaymentCompleted datetimeoffset = NULL,
    @WhenTransactionCancelled datetimeoffset = NULL,
    @WhenTransactionCompleted datetimeoffset = NULL,
    @spt_Comments nvarchar(300) = NULL,
    @AmountRefunded decimal(18,0) = NULL,
    @WhenRefunded datetimeoffset = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @ExternalReferenceNo nvarchar(100) = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [ExternalTransaction]
    SET
        [TableName_ExternalTransaction] = @TableName_ExternalTransaction,
        [enmExternalService] = @enmExternalService,
        [CustomerID] = @CustomerID,
        [ExternalTransactionIdentifier] = @ExternalTransactionIdentifier,
        [TransactionCreditCardID] = @TransactionCreditCardID,
        [CustomerWalletID] = @CustomerWalletID,
        [MarginUsed] = @MarginUsed,
        [ExecutingCurrency] = @ExecutingCurrency,
        [ExecutingCurrencyExchangeRate] = @ExecutingCurrencyExchangeRate,
        [AmountILS] = @AmountILS,
        [Description] = @Description,
        [StatusFromExternalService] = @StatusFromExternalService,
        [enmTransactionStatus_ExternalTransactionStatus] = @enmTransactionStatus_ExternalTransactionStatus,
        [PaymentApprovalCode] = @PaymentApprovalCode,
        [WhenPaymentCompleted] = @WhenPaymentCompleted,
        [WhenTransactionCancelled] = @WhenTransactionCancelled,
        [WhenTransactionCompleted] = @WhenTransactionCompleted,
        [spt_Comments] = @spt_Comments,
        [AmountRefunded] = @AmountRefunded,
        [WhenRefunded] = @WhenRefunded,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [ExternalReferenceNo] = @ExternalReferenceNo,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteExternalTransaction]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [ExternalTransaction]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_ExternalTransaction_CustomerWalletID
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetExternalTransactionByCUSTOMERWALLETID]
    @CustomerWalletID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_ExternalTransaction],
        [ID],
        [enmExternalService],
        [clc_WhenInitialized],
        [CustomerID],
        [ExternalTransactionIdentifier],
        [TransactionCreditCardID],
        [CustomerWalletID],
        [MarginUsed],
        [ExecutingCurrency],
        [ExecutingCurrencyExchangeRate],
        [AmountILS],
        [Description],
        [StatusFromExternalService],
        [enmTransactionStatus_ExternalTransactionStatus],
        [PaymentApprovalCode],
        [WhenPaymentCompleted],
        [WhenTransactionCancelled],
        [WhenTransactionCompleted],
        [spt_Comments],
        [AmountRefunded],
        [WhenRefunded],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [ExternalReferenceNo]
    FROM [ExternalTransaction]
    WHERE [CustomerWalletID] = @CustomerWalletID
;
END

GO

-- Procedure for Index: IX_ExternalTransaction_ExternalService_ExternalTransactionIdentifier
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetExternalTransactionByENMEXTERNALSERVICEAndEXTERNALTRANSACTIONIDENTIFIER]
    @enmExternalService varchar(50),
    @ExternalTransactionIdentifier varchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_ExternalTransaction],
        [ID],
        [enmExternalService],
        [clc_WhenInitialized],
        [CustomerID],
        [ExternalTransactionIdentifier],
        [TransactionCreditCardID],
        [CustomerWalletID],
        [MarginUsed],
        [ExecutingCurrency],
        [ExecutingCurrencyExchangeRate],
        [AmountILS],
        [Description],
        [StatusFromExternalService],
        [enmTransactionStatus_ExternalTransactionStatus],
        [PaymentApprovalCode],
        [WhenPaymentCompleted],
        [WhenTransactionCancelled],
        [WhenTransactionCompleted],
        [spt_Comments],
        [AmountRefunded],
        [WhenRefunded],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [ExternalReferenceNo]
    FROM [ExternalTransaction]
    WHERE [enmExternalService] = @enmExternalService AND [ExternalTransactionIdentifier] = @ExternalTransactionIdentifier
;
END

GO

-- Procedure for Index: IX_ExternalTransaction_TransactionCreditCardID
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetExternalTransactionByTRANSACTIONCREDITCARDID]
    @TransactionCreditCardID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_ExternalTransaction],
        [ID],
        [enmExternalService],
        [clc_WhenInitialized],
        [CustomerID],
        [ExternalTransactionIdentifier],
        [TransactionCreditCardID],
        [CustomerWalletID],
        [MarginUsed],
        [ExecutingCurrency],
        [ExecutingCurrencyExchangeRate],
        [AmountILS],
        [Description],
        [StatusFromExternalService],
        [enmTransactionStatus_ExternalTransactionStatus],
        [PaymentApprovalCode],
        [WhenPaymentCompleted],
        [WhenTransactionCancelled],
        [WhenTransactionCompleted],
        [spt_Comments],
        [AmountRefunded],
        [WhenRefunded],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [ExternalReferenceNo]
    FROM [ExternalTransaction]
    WHERE [TransactionCreditCardID] = @TransactionCreditCardID
;
END

GO

-- Procedure for Index: IX_ExternalTransaction_CustomerID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillExternalTransactionByCUSTOMERID]
    @CustomerID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_ExternalTransaction],
        [ID],
        [enmExternalService],
        [clc_WhenInitialized],
        [CustomerID],
        [ExternalTransactionIdentifier],
        [TransactionCreditCardID],
        [CustomerWalletID],
        [MarginUsed],
        [ExecutingCurrency],
        [ExecutingCurrencyExchangeRate],
        [AmountILS],
        [Description],
        [StatusFromExternalService],
        [enmTransactionStatus_ExternalTransactionStatus],
        [PaymentApprovalCode],
        [WhenPaymentCompleted],
        [WhenTransactionCancelled],
        [WhenTransactionCompleted],
        [spt_Comments],
        [AmountRefunded],
        [WhenRefunded],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [ExternalReferenceNo]
    FROM [ExternalTransaction]
    WHERE [CustomerID] = @CustomerID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_ExternalTransaction_StatusOfTransaction
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillExternalTransactionByENMTRANSACTIONSTATUSEXTERNALTRANSACTIONSTATUS]
    @enmTransactionStatus_ExternalTransactionStatus varchar(15)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_ExternalTransaction],
        [ID],
        [enmExternalService],
        [clc_WhenInitialized],
        [CustomerID],
        [ExternalTransactionIdentifier],
        [TransactionCreditCardID],
        [CustomerWalletID],
        [MarginUsed],
        [ExecutingCurrency],
        [ExecutingCurrencyExchangeRate],
        [AmountILS],
        [Description],
        [StatusFromExternalService],
        [enmTransactionStatus_ExternalTransactionStatus],
        [PaymentApprovalCode],
        [WhenPaymentCompleted],
        [WhenTransactionCancelled],
        [WhenTransactionCompleted],
        [spt_Comments],
        [AmountRefunded],
        [WhenRefunded],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [ExternalReferenceNo]
    FROM [ExternalTransaction]
    WHERE [enmTransactionStatus_ExternalTransactionStatus] = @enmTransactionStatus_ExternalTransactionStatus
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: Fee
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllFees]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Fee],
        [ID],
        [enmType_FeeType],
        [enmPayer_Entity],
        [enmRecipient_Entity],
        [DefaultAmt],
        [DefaultPctOfTrigger],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [DefaultMax],
        [DefaultMin]
    FROM [Fee]
    ORDER BY [ID]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredFees]
    @enmType_FeeType VARCHAR(50) = NULL,
    @enmPayer_Entity VARCHAR(50) = NULL,
    @enmRecipient_Entity VARCHAR(50) = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Fee],
        [ID],
        [enmType_FeeType],
        [enmPayer_Entity],
        [enmRecipient_Entity],
        [DefaultAmt],
        [DefaultPctOfTrigger],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [DefaultMax],
        [DefaultMin]
    FROM [Fee]
    WHERE 1=1
      AND (@enmType_FeeType IS NULL OR [enmType_FeeType] LIKE '%' + @enmType_FeeType + '%')
      AND (@enmPayer_Entity IS NULL OR [enmPayer_Entity] LIKE '%' + @enmPayer_Entity + '%')
      AND (@enmRecipient_Entity IS NULL OR [enmRecipient_Entity] LIKE '%' + @enmRecipient_Entity + '%')
      AND (@enmPayer_Entity IS NULL OR [enmPayer_Entity] LIKE '%' + @enmPayer_Entity + '%')
      AND (@enmRecipient_Entity IS NULL OR [enmRecipient_Entity] LIKE '%' + @enmRecipient_Entity + '%')
    ORDER BY [ID]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFeeByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Fee],
        [ID],
        [enmType_FeeType],
        [enmPayer_Entity],
        [enmRecipient_Entity],
        [DefaultAmt],
        [DefaultPctOfTrigger],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [DefaultMax],
        [DefaultMin]
    FROM [Fee]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddFee]
    @TableName_Fee bit = NULL,
    @enmType_FeeType varchar(50) = NULL,
    @enmPayer_Entity varchar(50) = NULL,
    @enmRecipient_Entity varchar(50) = NULL,
    @DefaultAmt decimal(18,0) = NULL,
    @DefaultPctOfTrigger decimal(18,0) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @DefaultMax decimal(18,0) = NULL,
    @DefaultMin decimal(18,0) = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [Fee] (
        [TableName_Fee],
        [enmType_FeeType],
        [enmPayer_Entity],
        [enmRecipient_Entity],
        [DefaultAmt],
        [DefaultPctOfTrigger],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [DefaultMax],
        [DefaultMin],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_Fee,
        @enmType_FeeType,
        @enmPayer_Entity,
        @enmRecipient_Entity,
        @DefaultAmt,
        @DefaultPctOfTrigger,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        @DefaultMax,
        @DefaultMin,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateFee]
    @ID bigint,
    @TableName_Fee bit = NULL,
    @enmType_FeeType varchar(50) = NULL,
    @enmPayer_Entity varchar(50) = NULL,
    @enmRecipient_Entity varchar(50) = NULL,
    @DefaultAmt decimal(18,0) = NULL,
    @DefaultPctOfTrigger decimal(18,0) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @DefaultMax decimal(18,0) = NULL,
    @DefaultMin decimal(18,0) = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [Fee]
    SET
        [TableName_Fee] = @TableName_Fee,
        [enmType_FeeType] = @enmType_FeeType,
        [enmPayer_Entity] = @enmPayer_Entity,
        [enmRecipient_Entity] = @enmRecipient_Entity,
        [DefaultAmt] = @DefaultAmt,
        [DefaultPctOfTrigger] = @DefaultPctOfTrigger,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [DefaultMax] = @DefaultMax,
        [DefaultMin] = @DefaultMin,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteFee]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [Fee]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_Fee_enmType_enmPayer_enmRecipient
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFeeByENMTYPEFEETYPEAndENMPAYERENTITYAndENMRECIPIENTENTITY]
    @enmType_FeeType varchar(50),
    @enmPayer_Entity varchar(50),
    @enmRecipient_Entity varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Fee],
        [ID],
        [enmType_FeeType],
        [enmPayer_Entity],
        [enmRecipient_Entity],
        [DefaultAmt],
        [DefaultPctOfTrigger],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [DefaultMax],
        [DefaultMin]
    FROM [Fee]
    WHERE [enmType_FeeType] = @enmType_FeeType AND [enmPayer_Entity] = @enmPayer_Entity AND [enmRecipient_Entity] = @enmRecipient_Entity
;
END

GO

-- Procedure for Index: IX_Fee_enmPayer
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillFeeByENMPAYERENTITY]
    @enmPayer_Entity varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Fee],
        [ID],
        [enmType_FeeType],
        [enmPayer_Entity],
        [enmRecipient_Entity],
        [DefaultAmt],
        [DefaultPctOfTrigger],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [DefaultMax],
        [DefaultMin]
    FROM [Fee]
    WHERE [enmPayer_Entity] = @enmPayer_Entity
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_Fee_enmRecipient
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillFeeByENMRECIPIENTENTITY]
    @enmRecipient_Entity varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Fee],
        [ID],
        [enmType_FeeType],
        [enmPayer_Entity],
        [enmRecipient_Entity],
        [DefaultAmt],
        [DefaultPctOfTrigger],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [DefaultMax],
        [DefaultMin]
    FROM [Fee]
    WHERE [enmRecipient_Entity] = @enmRecipient_Entity
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: FeeOverride
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllFeeOverrides]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_FeeOverride],
            t.[ID],
            t.[FeeID],
            t.[CardClubID],
            t.[DistributorID],
            t.[OverrideAmt],
            t.[OverridePctOfTrigger],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            t.[OverrideMax],
            t.[CustomerClubID],
            t.[OverrideMin],
            p1.[Text] AS [FeeID_Text],
            p2.[Text] AS [CardClubID_Text],
            p3.[Text] AS [DistributorID_Text],
            p4.[Text] AS [CustomerClubID_Text]
        FROM [FeeOverride] t
        LEFT JOIN [ccvwComboList_Fee] p1 ON t.[FeeID] = p1.[ID]
        LEFT JOIN [ccvwComboList_CardClub] p2 ON t.[CardClubID] = p2.[ID]
        LEFT JOIN [ccvwComboList_Distributor] p3 ON t.[DistributorID] = p3.[ID]
        LEFT JOIN [ccvwComboList_CustomerClub] p4 ON t.[CustomerClubID] = p4.[ID]
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_FeeOverride],
            [ID],
            [FeeID],
            [CardClubID],
            [DistributorID],
            [OverrideAmt],
            [OverridePctOfTrigger],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID],
            [OverrideMax],
            [CustomerClubID],
            [OverrideMin]
        FROM [FeeOverride]
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredFeeOverrides]
    @FeeID INT = NULL,
    @CardClubID INT = NULL,
    @DistributorID INT = NULL,
    @CustomerClubID INT = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_FeeOverride],
            t.[ID],
            t.[FeeID],
            t.[CardClubID],
            t.[DistributorID],
            t.[OverrideAmt],
            t.[OverridePctOfTrigger],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            t.[OverrideMax],
            t.[CustomerClubID],
            t.[OverrideMin],
            p1.[Text] AS [FeeID_Text],
            p2.[Text] AS [CardClubID_Text],
            p3.[Text] AS [DistributorID_Text],
            p4.[Text] AS [CustomerClubID_Text]
        FROM [FeeOverride] t
        LEFT JOIN [ccvwComboList_Fee] p1 ON t.[FeeID] = p1.[ID]
        LEFT JOIN [ccvwComboList_CardClub] p2 ON t.[CardClubID] = p2.[ID]
        LEFT JOIN [ccvwComboList_Distributor] p3 ON t.[DistributorID] = p3.[ID]
        LEFT JOIN [ccvwComboList_CustomerClub] p4 ON t.[CustomerClubID] = p4.[ID]
        WHERE 1=1
          AND (@FeeID IS NULL OR t.[FeeID] = @FeeID)
          AND (@CardClubID IS NULL OR t.[CardClubID] = @CardClubID)
          AND (@DistributorID IS NULL OR t.[DistributorID] = @DistributorID)
          AND (@FeeID IS NULL OR t.[FeeID] = @FeeID)
          AND (@CustomerClubID IS NULL OR t.[CustomerClubID] = @CustomerClubID)
          AND (@DistributorID IS NULL OR t.[DistributorID] = @DistributorID)
          AND (@CardClubID IS NULL OR t.[CardClubID] = @CardClubID)
          AND (@CustomerClubID IS NULL OR t.[CustomerClubID] = @CustomerClubID)
          AND (@DistributorID IS NULL OR t.[DistributorID] = @DistributorID)
          AND (@FeeID IS NULL OR t.[FeeID] = @FeeID)
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_FeeOverride],
            [ID],
            [FeeID],
            [CardClubID],
            [DistributorID],
            [OverrideAmt],
            [OverridePctOfTrigger],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID],
            [OverrideMax],
            [CustomerClubID],
            [OverrideMin]
        FROM [FeeOverride]
        WHERE 1=1
          AND (@FeeID IS NULL OR [FeeID] = @FeeID)
          AND (@CardClubID IS NULL OR [CardClubID] = @CardClubID)
          AND (@DistributorID IS NULL OR [DistributorID] = @DistributorID)
          AND (@FeeID IS NULL OR [FeeID] = @FeeID)
          AND (@CustomerClubID IS NULL OR [CustomerClubID] = @CustomerClubID)
          AND (@DistributorID IS NULL OR [DistributorID] = @DistributorID)
          AND (@CardClubID IS NULL OR [CardClubID] = @CardClubID)
          AND (@CustomerClubID IS NULL OR [CustomerClubID] = @CustomerClubID)
          AND (@DistributorID IS NULL OR [DistributorID] = @DistributorID)
          AND (@FeeID IS NULL OR [FeeID] = @FeeID)
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFeeOverrideByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_FeeOverride],
        [ID],
        [FeeID],
        [CardClubID],
        [DistributorID],
        [OverrideAmt],
        [OverridePctOfTrigger],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [OverrideMax],
        [CustomerClubID],
        [OverrideMin]
    FROM [FeeOverride]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddFeeOverride]
    @TableName_FeeOverride bit = NULL,
    @FeeID bigint = NULL,
    @CardClubID bigint = NULL,
    @DistributorID bigint = NULL,
    @OverrideAmt decimal(18,0) = NULL,
    @OverridePctOfTrigger decimal(18,0) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @OverrideMax decimal(18,0) = NULL,
    @CustomerClubID bigint = NULL,
    @OverrideMin decimal(18,0) = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [FeeOverride] (
        [TableName_FeeOverride],
        [FeeID],
        [CardClubID],
        [DistributorID],
        [OverrideAmt],
        [OverridePctOfTrigger],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [OverrideMax],
        [CustomerClubID],
        [OverrideMin],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_FeeOverride,
        @FeeID,
        @CardClubID,
        @DistributorID,
        @OverrideAmt,
        @OverridePctOfTrigger,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        @OverrideMax,
        @CustomerClubID,
        @OverrideMin,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateFeeOverride]
    @ID bigint,
    @TableName_FeeOverride bit = NULL,
    @FeeID bigint = NULL,
    @CardClubID bigint = NULL,
    @DistributorID bigint = NULL,
    @OverrideAmt decimal(18,0) = NULL,
    @OverridePctOfTrigger decimal(18,0) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @OverrideMax decimal(18,0) = NULL,
    @CustomerClubID bigint = NULL,
    @OverrideMin decimal(18,0) = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [FeeOverride]
    SET
        [TableName_FeeOverride] = @TableName_FeeOverride,
        [FeeID] = @FeeID,
        [CardClubID] = @CardClubID,
        [DistributorID] = @DistributorID,
        [OverrideAmt] = @OverrideAmt,
        [OverridePctOfTrigger] = @OverridePctOfTrigger,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [OverrideMax] = @OverrideMax,
        [CustomerClubID] = @CustomerClubID,
        [OverrideMin] = @OverrideMin,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteFeeOverride]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [FeeOverride]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_FeeOverrideFeeID_CardClubID_DistributorID
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFeeOverrideByFEEIDAndCARDCLUBIDAndDISTRIBUTORID]
    @FeeID bigint,
    @CardClubID bigint,
    @DistributorID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_FeeOverride],
        [ID],
        [FeeID],
        [CardClubID],
        [DistributorID],
        [OverrideAmt],
        [OverridePctOfTrigger],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [OverrideMax],
        [CustomerClubID],
        [OverrideMin]
    FROM [FeeOverride]
    WHERE [FeeID] = @FeeID AND [CardClubID] = @CardClubID AND [DistributorID] = @DistributorID
;
END

GO

-- Procedure for Index: IX_FeeOverrideFeeID_CustomerClubID_DistributorID
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFeeOverrideByFEEIDAndCUSTOMERCLUBIDAndDISTRIBUTORID]
    @FeeID bigint,
    @CustomerClubID bigint,
    @DistributorID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_FeeOverride],
        [ID],
        [FeeID],
        [CardClubID],
        [DistributorID],
        [OverrideAmt],
        [OverridePctOfTrigger],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [OverrideMax],
        [CustomerClubID],
        [OverrideMin]
    FROM [FeeOverride]
    WHERE [FeeID] = @FeeID AND [CustomerClubID] = @CustomerClubID AND [DistributorID] = @DistributorID
;
END

GO

-- Procedure for Index: IX_FeeOverride_CardClubID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillFeeOverrideByCARDCLUBID]
    @CardClubID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_FeeOverride],
        [ID],
        [FeeID],
        [CardClubID],
        [DistributorID],
        [OverrideAmt],
        [OverridePctOfTrigger],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [OverrideMax],
        [CustomerClubID],
        [OverrideMin]
    FROM [FeeOverride]
    WHERE [CardClubID] = @CardClubID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_FeeOverride_CustomerClubID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillFeeOverrideByCUSTOMERCLUBID]
    @CustomerClubID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_FeeOverride],
        [ID],
        [FeeID],
        [CardClubID],
        [DistributorID],
        [OverrideAmt],
        [OverridePctOfTrigger],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [OverrideMax],
        [CustomerClubID],
        [OverrideMin]
    FROM [FeeOverride]
    WHERE [CustomerClubID] = @CustomerClubID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_FeeOverride_DistributorID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillFeeOverrideByDISTRIBUTORID]
    @DistributorID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_FeeOverride],
        [ID],
        [FeeID],
        [CardClubID],
        [DistributorID],
        [OverrideAmt],
        [OverridePctOfTrigger],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [OverrideMax],
        [CustomerClubID],
        [OverrideMin]
    FROM [FeeOverride]
    WHERE [DistributorID] = @DistributorID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_FeeOverride_FeeID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillFeeOverrideByFEEID]
    @FeeID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_FeeOverride],
        [ID],
        [FeeID],
        [CardClubID],
        [DistributorID],
        [OverrideAmt],
        [OverridePctOfTrigger],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [OverrideMax],
        [CustomerClubID],
        [OverrideMin]
    FROM [FeeOverride]
    WHERE [FeeID] = @FeeID
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: GovtReport00
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllGovtReport00s]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_GovtReport00],
        [ID],
        [Name],
        [ReporterNumber],
        [ReporterIDNumber],
        [ReportYear],
        [clc_ReportNumber],
        [RecordType],
        [ReportMonth],
        [ReportCode],
        [ReporterName],
        [ReporterAddress01],
        [ReporterAddress02],
        [PhoneNumber],
        [PhoneNumber2],
        [Fax],
        [FileDescription],
        [BranchNumber],
        [VersionNumber],
        [clc_WhenCreated],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [GovtReport00]
    ORDER BY [ID]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredGovtReport00s]
    @Name VARCHAR(15) = NULL,
    @ReportMonth VARCHAR(6) = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_GovtReport00],
        [ID],
        [Name],
        [ReporterNumber],
        [ReporterIDNumber],
        [ReportYear],
        [clc_ReportNumber],
        [RecordType],
        [ReportMonth],
        [ReportCode],
        [ReporterName],
        [ReporterAddress01],
        [ReporterAddress02],
        [PhoneNumber],
        [PhoneNumber2],
        [Fax],
        [FileDescription],
        [BranchNumber],
        [VersionNumber],
        [clc_WhenCreated],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [GovtReport00]
    WHERE 1=1
      AND (@Name IS NULL OR [Name] LIKE '%' + @Name + '%')
      AND (@ReportMonth IS NULL OR [ReportMonth] LIKE '%' + @ReportMonth + '%')
    ORDER BY [ID]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetGovtReport00ByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_GovtReport00],
        [ID],
        [Name],
        [ReporterNumber],
        [ReporterIDNumber],
        [ReportYear],
        [clc_ReportNumber],
        [RecordType],
        [ReportMonth],
        [ReportCode],
        [ReporterName],
        [ReporterAddress01],
        [ReporterAddress02],
        [PhoneNumber],
        [PhoneNumber2],
        [Fax],
        [FileDescription],
        [BranchNumber],
        [VersionNumber],
        [clc_WhenCreated],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [GovtReport00]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddGovtReport00]
    @TableName_GovtReport00 bit = NULL,
    @Name varchar(15),
    @ReporterNumber varchar(15) = NULL,
    @ReporterIDNumber varchar(15) = NULL,
    @ReportYear varchar(4) = NULL,
    @RecordType varchar(2) = NULL,
    @ReportMonth varchar(6) = NULL,
    @ReportCode varchar(50) = NULL,
    @ReporterName nvarchar(200) = NULL,
    @ReporterAddress01 nvarchar(200) = NULL,
    @ReporterAddress02 nvarchar(200) = NULL,
    @PhoneNumber varchar(15) = NULL,
    @PhoneNumber2 varchar(15) = NULL,
    @Fax varchar(15) = NULL,
    @FileDescription nvarchar(200) = NULL,
    @BranchNumber varchar(10) = NULL,
    @VersionNumber varchar(2) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [GovtReport00] (
        [TableName_GovtReport00],
        [Name],
        [ReporterNumber],
        [ReporterIDNumber],
        [ReportYear],
        [RecordType],
        [ReportMonth],
        [ReportCode],
        [ReporterName],
        [ReporterAddress01],
        [ReporterAddress02],
        [PhoneNumber],
        [PhoneNumber2],
        [Fax],
        [FileDescription],
        [BranchNumber],
        [VersionNumber],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_GovtReport00,
        @Name,
        @ReporterNumber,
        @ReporterIDNumber,
        @ReportYear,
        @RecordType,
        @ReportMonth,
        @ReportCode,
        @ReporterName,
        @ReporterAddress01,
        @ReporterAddress02,
        @PhoneNumber,
        @PhoneNumber2,
        @Fax,
        @FileDescription,
        @BranchNumber,
        @VersionNumber,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateGovtReport00]
    @ID bigint,
    @TableName_GovtReport00 bit = NULL,
    @Name varchar(15),
    @ReporterNumber varchar(15) = NULL,
    @ReporterIDNumber varchar(15) = NULL,
    @ReportYear varchar(4) = NULL,
    @RecordType varchar(2) = NULL,
    @ReportMonth varchar(6) = NULL,
    @ReportCode varchar(50) = NULL,
    @ReporterName nvarchar(200) = NULL,
    @ReporterAddress01 nvarchar(200) = NULL,
    @ReporterAddress02 nvarchar(200) = NULL,
    @PhoneNumber varchar(15) = NULL,
    @PhoneNumber2 varchar(15) = NULL,
    @Fax varchar(15) = NULL,
    @FileDescription nvarchar(200) = NULL,
    @BranchNumber varchar(10) = NULL,
    @VersionNumber varchar(2) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [GovtReport00]
    SET
        [TableName_GovtReport00] = @TableName_GovtReport00,
        [Name] = @Name,
        [ReporterNumber] = @ReporterNumber,
        [ReporterIDNumber] = @ReporterIDNumber,
        [ReportYear] = @ReportYear,
        [RecordType] = @RecordType,
        [ReportMonth] = @ReportMonth,
        [ReportCode] = @ReportCode,
        [ReporterName] = @ReporterName,
        [ReporterAddress01] = @ReporterAddress01,
        [ReporterAddress02] = @ReporterAddress02,
        [PhoneNumber] = @PhoneNumber,
        [PhoneNumber2] = @PhoneNumber2,
        [Fax] = @Fax,
        [FileDescription] = @FileDescription,
        [BranchNumber] = @BranchNumber,
        [VersionNumber] = @VersionNumber,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteGovtReport00]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [GovtReport00]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_GovtReport00_Name
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetGovtReport00ByNAME]
    @Name varchar(15)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_GovtReport00],
        [ID],
        [Name],
        [ReporterNumber],
        [ReporterIDNumber],
        [ReportYear],
        [clc_ReportNumber],
        [RecordType],
        [ReportMonth],
        [ReportCode],
        [ReporterName],
        [ReporterAddress01],
        [ReporterAddress02],
        [PhoneNumber],
        [PhoneNumber2],
        [Fax],
        [FileDescription],
        [BranchNumber],
        [VersionNumber],
        [clc_WhenCreated],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [GovtReport00]
    WHERE [Name] = @Name
;
END

GO

-- Procedure for Index: IX_GovtReport00_ReportMonth
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetGovtReport00ByREPORTMONTH]
    @ReportMonth varchar(6)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_GovtReport00],
        [ID],
        [Name],
        [ReporterNumber],
        [ReporterIDNumber],
        [ReportYear],
        [clc_ReportNumber],
        [RecordType],
        [ReportMonth],
        [ReportCode],
        [ReporterName],
        [ReporterAddress01],
        [ReporterAddress02],
        [PhoneNumber],
        [PhoneNumber2],
        [Fax],
        [FileDescription],
        [BranchNumber],
        [VersionNumber],
        [clc_WhenCreated],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [GovtReport00]
    WHERE [ReportMonth] = @ReportMonth
;
END

GO


-- =========================================
-- Stored Procedures for Table: GovtReport10
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllGovtReport10s]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_GovtReport10],
            t.[ID],
            t.[GovtReport00ID],
            t.[ReporterNumber],
            t.[ReporterIDNumber],
            t.[ReportYear],
            t.[ReportNumber],
            t.[RecordType],
            t.[BranchNumber],
            t.[PrimaryActionIdentifier],
            t.[ActionType],
            t.[DateExecutedAtReporter],
            t.[FinancialInstitutionCode],
            t.[OtherFinancialCode],
            t.[FinancialInstitutionCountry],
            t.[CurrencyCode],
            t.[TransactionAmountILS],
            t.[SecondaryActionIdentifier],
            t.[TransactionAmountOriginalCurrency],
            t.[DateExecutedAtSupplier],
            t.[TransactionTypeAtSupplier],
            t.[Comments],
            t.[TimeExecutedAtSupplier],
            t.[ExchangeRate],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            t.[IP],
            p1.[Text] AS [GovtReport00ID_Text]
        FROM [GovtReport10] t
        LEFT JOIN [ccvwComboList_GovtReport00] p1 ON t.[GovtReport00ID] = p1.[ID]
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_GovtReport10],
            [ID],
            [GovtReport00ID],
            [ReporterNumber],
            [ReporterIDNumber],
            [ReportYear],
            [ReportNumber],
            [RecordType],
            [BranchNumber],
            [PrimaryActionIdentifier],
            [ActionType],
            [DateExecutedAtReporter],
            [FinancialInstitutionCode],
            [OtherFinancialCode],
            [FinancialInstitutionCountry],
            [CurrencyCode],
            [TransactionAmountILS],
            [SecondaryActionIdentifier],
            [TransactionAmountOriginalCurrency],
            [DateExecutedAtSupplier],
            [TransactionTypeAtSupplier],
            [Comments],
            [TimeExecutedAtSupplier],
            [ExchangeRate],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID],
            [IP]
        FROM [GovtReport10]
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredGovtReport10s]
    @GovtReport00ID INT = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_GovtReport10],
            t.[ID],
            t.[GovtReport00ID],
            t.[ReporterNumber],
            t.[ReporterIDNumber],
            t.[ReportYear],
            t.[ReportNumber],
            t.[RecordType],
            t.[BranchNumber],
            t.[PrimaryActionIdentifier],
            t.[ActionType],
            t.[DateExecutedAtReporter],
            t.[FinancialInstitutionCode],
            t.[OtherFinancialCode],
            t.[FinancialInstitutionCountry],
            t.[CurrencyCode],
            t.[TransactionAmountILS],
            t.[SecondaryActionIdentifier],
            t.[TransactionAmountOriginalCurrency],
            t.[DateExecutedAtSupplier],
            t.[TransactionTypeAtSupplier],
            t.[Comments],
            t.[TimeExecutedAtSupplier],
            t.[ExchangeRate],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            t.[IP],
            p1.[Text] AS [GovtReport00ID_Text]
        FROM [GovtReport10] t
        LEFT JOIN [ccvwComboList_GovtReport00] p1 ON t.[GovtReport00ID] = p1.[ID]
        WHERE 1=1
          AND (@GovtReport00ID IS NULL OR t.[GovtReport00ID] = @GovtReport00ID)
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_GovtReport10],
            [ID],
            [GovtReport00ID],
            [ReporterNumber],
            [ReporterIDNumber],
            [ReportYear],
            [ReportNumber],
            [RecordType],
            [BranchNumber],
            [PrimaryActionIdentifier],
            [ActionType],
            [DateExecutedAtReporter],
            [FinancialInstitutionCode],
            [OtherFinancialCode],
            [FinancialInstitutionCountry],
            [CurrencyCode],
            [TransactionAmountILS],
            [SecondaryActionIdentifier],
            [TransactionAmountOriginalCurrency],
            [DateExecutedAtSupplier],
            [TransactionTypeAtSupplier],
            [Comments],
            [TimeExecutedAtSupplier],
            [ExchangeRate],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID],
            [IP]
        FROM [GovtReport10]
        WHERE 1=1
          AND (@GovtReport00ID IS NULL OR [GovtReport00ID] = @GovtReport00ID)
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetGovtReport10ByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_GovtReport10],
        [ID],
        [GovtReport00ID],
        [ReporterNumber],
        [ReporterIDNumber],
        [ReportYear],
        [ReportNumber],
        [RecordType],
        [BranchNumber],
        [PrimaryActionIdentifier],
        [ActionType],
        [DateExecutedAtReporter],
        [FinancialInstitutionCode],
        [OtherFinancialCode],
        [FinancialInstitutionCountry],
        [CurrencyCode],
        [TransactionAmountILS],
        [SecondaryActionIdentifier],
        [TransactionAmountOriginalCurrency],
        [DateExecutedAtSupplier],
        [TransactionTypeAtSupplier],
        [Comments],
        [TimeExecutedAtSupplier],
        [ExchangeRate],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [IP]
    FROM [GovtReport10]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddGovtReport10]
    @TableName_GovtReport10 bit = NULL,
    @GovtReport00ID bigint = NULL,
    @ReporterNumber varchar(15) = NULL,
    @ReporterIDNumber varchar(15) = NULL,
    @ReportYear varchar(4) = NULL,
    @ReportNumber bigint = NULL,
    @RecordType varchar(2) = NULL,
    @BranchNumber varchar(10) = NULL,
    @PrimaryActionIdentifier varchar(18) = NULL,
    @ActionType varchar(2) = NULL,
    @DateExecutedAtReporter varchar(8) = NULL,
    @FinancialInstitutionCode varchar(2) = NULL,
    @OtherFinancialCode varchar(100) = NULL,
    @FinancialInstitutionCountry varchar(3) = NULL,
    @CurrencyCode varchar(3) = NULL,
    @TransactionAmountILS varchar(15) = NULL,
    @SecondaryActionIdentifier varchar(50) = NULL,
    @TransactionAmountOriginalCurrency varchar(50) = NULL,
    @DateExecutedAtSupplier varchar(8) = NULL,
    @TransactionTypeAtSupplier varchar(2) = NULL,
    @Comments nvarchar(200) = NULL,
    @TimeExecutedAtSupplier varchar(8) = NULL,
    @ExchangeRate varchar(34) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @IP varchar(50) = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [GovtReport10] (
        [TableName_GovtReport10],
        [GovtReport00ID],
        [ReporterNumber],
        [ReporterIDNumber],
        [ReportYear],
        [ReportNumber],
        [RecordType],
        [BranchNumber],
        [PrimaryActionIdentifier],
        [ActionType],
        [DateExecutedAtReporter],
        [FinancialInstitutionCode],
        [OtherFinancialCode],
        [FinancialInstitutionCountry],
        [CurrencyCode],
        [TransactionAmountILS],
        [SecondaryActionIdentifier],
        [TransactionAmountOriginalCurrency],
        [DateExecutedAtSupplier],
        [TransactionTypeAtSupplier],
        [Comments],
        [TimeExecutedAtSupplier],
        [ExchangeRate],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [IP],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_GovtReport10,
        @GovtReport00ID,
        @ReporterNumber,
        @ReporterIDNumber,
        @ReportYear,
        @ReportNumber,
        @RecordType,
        @BranchNumber,
        @PrimaryActionIdentifier,
        @ActionType,
        @DateExecutedAtReporter,
        @FinancialInstitutionCode,
        @OtherFinancialCode,
        @FinancialInstitutionCountry,
        @CurrencyCode,
        @TransactionAmountILS,
        @SecondaryActionIdentifier,
        @TransactionAmountOriginalCurrency,
        @DateExecutedAtSupplier,
        @TransactionTypeAtSupplier,
        @Comments,
        @TimeExecutedAtSupplier,
        @ExchangeRate,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        @IP,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateGovtReport10]
    @ID bigint,
    @TableName_GovtReport10 bit = NULL,
    @GovtReport00ID bigint = NULL,
    @ReporterNumber varchar(15) = NULL,
    @ReporterIDNumber varchar(15) = NULL,
    @ReportYear varchar(4) = NULL,
    @ReportNumber bigint = NULL,
    @RecordType varchar(2) = NULL,
    @BranchNumber varchar(10) = NULL,
    @PrimaryActionIdentifier varchar(18) = NULL,
    @ActionType varchar(2) = NULL,
    @DateExecutedAtReporter varchar(8) = NULL,
    @FinancialInstitutionCode varchar(2) = NULL,
    @OtherFinancialCode varchar(100) = NULL,
    @FinancialInstitutionCountry varchar(3) = NULL,
    @CurrencyCode varchar(3) = NULL,
    @TransactionAmountILS varchar(15) = NULL,
    @SecondaryActionIdentifier varchar(50) = NULL,
    @TransactionAmountOriginalCurrency varchar(50) = NULL,
    @DateExecutedAtSupplier varchar(8) = NULL,
    @TransactionTypeAtSupplier varchar(2) = NULL,
    @Comments nvarchar(200) = NULL,
    @TimeExecutedAtSupplier varchar(8) = NULL,
    @ExchangeRate varchar(34) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @IP varchar(50) = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [GovtReport10]
    SET
        [TableName_GovtReport10] = @TableName_GovtReport10,
        [GovtReport00ID] = @GovtReport00ID,
        [ReporterNumber] = @ReporterNumber,
        [ReporterIDNumber] = @ReporterIDNumber,
        [ReportYear] = @ReportYear,
        [ReportNumber] = @ReportNumber,
        [RecordType] = @RecordType,
        [BranchNumber] = @BranchNumber,
        [PrimaryActionIdentifier] = @PrimaryActionIdentifier,
        [ActionType] = @ActionType,
        [DateExecutedAtReporter] = @DateExecutedAtReporter,
        [FinancialInstitutionCode] = @FinancialInstitutionCode,
        [OtherFinancialCode] = @OtherFinancialCode,
        [FinancialInstitutionCountry] = @FinancialInstitutionCountry,
        [CurrencyCode] = @CurrencyCode,
        [TransactionAmountILS] = @TransactionAmountILS,
        [SecondaryActionIdentifier] = @SecondaryActionIdentifier,
        [TransactionAmountOriginalCurrency] = @TransactionAmountOriginalCurrency,
        [DateExecutedAtSupplier] = @DateExecutedAtSupplier,
        [TransactionTypeAtSupplier] = @TransactionTypeAtSupplier,
        [Comments] = @Comments,
        [TimeExecutedAtSupplier] = @TimeExecutedAtSupplier,
        [ExchangeRate] = @ExchangeRate,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [IP] = @IP,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteGovtReport10]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [GovtReport10]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_GovtReport10_GovtReport00ID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillGovtReport10ByGOVTREPORT00ID]
    @GovtReport00ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_GovtReport10],
        [ID],
        [GovtReport00ID],
        [ReporterNumber],
        [ReporterIDNumber],
        [ReportYear],
        [ReportNumber],
        [RecordType],
        [BranchNumber],
        [PrimaryActionIdentifier],
        [ActionType],
        [DateExecutedAtReporter],
        [FinancialInstitutionCode],
        [OtherFinancialCode],
        [FinancialInstitutionCountry],
        [CurrencyCode],
        [TransactionAmountILS],
        [SecondaryActionIdentifier],
        [TransactionAmountOriginalCurrency],
        [DateExecutedAtSupplier],
        [TransactionTypeAtSupplier],
        [Comments],
        [TimeExecutedAtSupplier],
        [ExchangeRate],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [IP]
    FROM [GovtReport10]
    WHERE [GovtReport00ID] = @GovtReport00ID
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: GovtReport30
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllGovtReport30s]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_GovtReport30],
            t.[ID],
            t.[GovtReport00ID],
            t.[ReporterNumber],
            t.[ReporterIDNumber],
            t.[ReportYear],
            t.[ReportNumber],
            t.[RecordType],
            t.[PrimaryActionIdentifier],
            t.[ReportApproverName],
            t.[ReportApproverGovtID],
            t.[ExecutorType],
            t.[ExecutorTypeOther],
            t.[ExecutorName],
            t.[ExecutorGovtID],
            t.[ExecutorCountry],
            t.[ExecutorMainAddress],
            t.[ExecutorAddlAddress],
            t.[ExecutorDateOfBirthIncorporation],
            t.[ExecutorPosition],
            t.[ExecutorPositionOther],
            t.[ExecutorGender],
            t.[ExecutorGenderOther],
            t.[ExecutorCountryCodePhone1],
            t.[ExecutorAreaCodePhone1],
            t.[ExecutorPhoneNumberPhone1],
            t.[ExecutorCountryCodePhone2],
            t.[ExecutorAreaCodePhone2],
            t.[ExecutorPhoneNumberPhone2],
            t.[ExecutorCountryCodeFax],
            t.[ExecutorAreaCodeFax],
            t.[ExecutorPhoneNumberFax],
            t.[ExecutorCountryCodeMobile],
            t.[ExecutorAreaCodeMobile],
            t.[ExecutorPhoneNumberMobile],
            t.[GovernmentIDType],
            t.[GovernmentIDTypeOther],
            t.[Address01Street],
            t.[Address01House],
            t.[Address01City],
            t.[Address01Zip],
            t.[Address01Country],
            t.[Address02Street],
            t.[Address02House],
            t.[Address02City],
            t.[Address02Zip],
            t.[Address02Country],
            t.[Comments],
            t.[ExecutorFirstName],
            t.[ExecutorLastNameOrCompanyName],
            t.[ExecutorActuallyDidIt],
            t.[StreetCode],
            t.[CityCode],
            t.[ExecutorEmail],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            p1.[Text] AS [GovtReport00ID_Text]
        FROM [GovtReport30] t
        LEFT JOIN [ccvwComboList_GovtReport00] p1 ON t.[GovtReport00ID] = p1.[ID]
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_GovtReport30],
            [ID],
            [GovtReport00ID],
            [ReporterNumber],
            [ReporterIDNumber],
            [ReportYear],
            [ReportNumber],
            [RecordType],
            [PrimaryActionIdentifier],
            [ReportApproverName],
            [ReportApproverGovtID],
            [ExecutorType],
            [ExecutorTypeOther],
            [ExecutorName],
            [ExecutorGovtID],
            [ExecutorCountry],
            [ExecutorMainAddress],
            [ExecutorAddlAddress],
            [ExecutorDateOfBirthIncorporation],
            [ExecutorPosition],
            [ExecutorPositionOther],
            [ExecutorGender],
            [ExecutorGenderOther],
            [ExecutorCountryCodePhone1],
            [ExecutorAreaCodePhone1],
            [ExecutorPhoneNumberPhone1],
            [ExecutorCountryCodePhone2],
            [ExecutorAreaCodePhone2],
            [ExecutorPhoneNumberPhone2],
            [ExecutorCountryCodeFax],
            [ExecutorAreaCodeFax],
            [ExecutorPhoneNumberFax],
            [ExecutorCountryCodeMobile],
            [ExecutorAreaCodeMobile],
            [ExecutorPhoneNumberMobile],
            [GovernmentIDType],
            [GovernmentIDTypeOther],
            [Address01Street],
            [Address01House],
            [Address01City],
            [Address01Zip],
            [Address01Country],
            [Address02Street],
            [Address02House],
            [Address02City],
            [Address02Zip],
            [Address02Country],
            [Comments],
            [ExecutorFirstName],
            [ExecutorLastNameOrCompanyName],
            [ExecutorActuallyDidIt],
            [StreetCode],
            [CityCode],
            [ExecutorEmail],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID]
        FROM [GovtReport30]
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredGovtReport30s]
    @GovtReport00ID INT = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_GovtReport30],
            t.[ID],
            t.[GovtReport00ID],
            t.[ReporterNumber],
            t.[ReporterIDNumber],
            t.[ReportYear],
            t.[ReportNumber],
            t.[RecordType],
            t.[PrimaryActionIdentifier],
            t.[ReportApproverName],
            t.[ReportApproverGovtID],
            t.[ExecutorType],
            t.[ExecutorTypeOther],
            t.[ExecutorName],
            t.[ExecutorGovtID],
            t.[ExecutorCountry],
            t.[ExecutorMainAddress],
            t.[ExecutorAddlAddress],
            t.[ExecutorDateOfBirthIncorporation],
            t.[ExecutorPosition],
            t.[ExecutorPositionOther],
            t.[ExecutorGender],
            t.[ExecutorGenderOther],
            t.[ExecutorCountryCodePhone1],
            t.[ExecutorAreaCodePhone1],
            t.[ExecutorPhoneNumberPhone1],
            t.[ExecutorCountryCodePhone2],
            t.[ExecutorAreaCodePhone2],
            t.[ExecutorPhoneNumberPhone2],
            t.[ExecutorCountryCodeFax],
            t.[ExecutorAreaCodeFax],
            t.[ExecutorPhoneNumberFax],
            t.[ExecutorCountryCodeMobile],
            t.[ExecutorAreaCodeMobile],
            t.[ExecutorPhoneNumberMobile],
            t.[GovernmentIDType],
            t.[GovernmentIDTypeOther],
            t.[Address01Street],
            t.[Address01House],
            t.[Address01City],
            t.[Address01Zip],
            t.[Address01Country],
            t.[Address02Street],
            t.[Address02House],
            t.[Address02City],
            t.[Address02Zip],
            t.[Address02Country],
            t.[Comments],
            t.[ExecutorFirstName],
            t.[ExecutorLastNameOrCompanyName],
            t.[ExecutorActuallyDidIt],
            t.[StreetCode],
            t.[CityCode],
            t.[ExecutorEmail],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            p1.[Text] AS [GovtReport00ID_Text]
        FROM [GovtReport30] t
        LEFT JOIN [ccvwComboList_GovtReport00] p1 ON t.[GovtReport00ID] = p1.[ID]
        WHERE 1=1
          AND (@GovtReport00ID IS NULL OR t.[GovtReport00ID] = @GovtReport00ID)
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_GovtReport30],
            [ID],
            [GovtReport00ID],
            [ReporterNumber],
            [ReporterIDNumber],
            [ReportYear],
            [ReportNumber],
            [RecordType],
            [PrimaryActionIdentifier],
            [ReportApproverName],
            [ReportApproverGovtID],
            [ExecutorType],
            [ExecutorTypeOther],
            [ExecutorName],
            [ExecutorGovtID],
            [ExecutorCountry],
            [ExecutorMainAddress],
            [ExecutorAddlAddress],
            [ExecutorDateOfBirthIncorporation],
            [ExecutorPosition],
            [ExecutorPositionOther],
            [ExecutorGender],
            [ExecutorGenderOther],
            [ExecutorCountryCodePhone1],
            [ExecutorAreaCodePhone1],
            [ExecutorPhoneNumberPhone1],
            [ExecutorCountryCodePhone2],
            [ExecutorAreaCodePhone2],
            [ExecutorPhoneNumberPhone2],
            [ExecutorCountryCodeFax],
            [ExecutorAreaCodeFax],
            [ExecutorPhoneNumberFax],
            [ExecutorCountryCodeMobile],
            [ExecutorAreaCodeMobile],
            [ExecutorPhoneNumberMobile],
            [GovernmentIDType],
            [GovernmentIDTypeOther],
            [Address01Street],
            [Address01House],
            [Address01City],
            [Address01Zip],
            [Address01Country],
            [Address02Street],
            [Address02House],
            [Address02City],
            [Address02Zip],
            [Address02Country],
            [Comments],
            [ExecutorFirstName],
            [ExecutorLastNameOrCompanyName],
            [ExecutorActuallyDidIt],
            [StreetCode],
            [CityCode],
            [ExecutorEmail],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID]
        FROM [GovtReport30]
        WHERE 1=1
          AND (@GovtReport00ID IS NULL OR [GovtReport00ID] = @GovtReport00ID)
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetGovtReport30ByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_GovtReport30],
        [ID],
        [GovtReport00ID],
        [ReporterNumber],
        [ReporterIDNumber],
        [ReportYear],
        [ReportNumber],
        [RecordType],
        [PrimaryActionIdentifier],
        [ReportApproverName],
        [ReportApproverGovtID],
        [ExecutorType],
        [ExecutorTypeOther],
        [ExecutorName],
        [ExecutorGovtID],
        [ExecutorCountry],
        [ExecutorMainAddress],
        [ExecutorAddlAddress],
        [ExecutorDateOfBirthIncorporation],
        [ExecutorPosition],
        [ExecutorPositionOther],
        [ExecutorGender],
        [ExecutorGenderOther],
        [ExecutorCountryCodePhone1],
        [ExecutorAreaCodePhone1],
        [ExecutorPhoneNumberPhone1],
        [ExecutorCountryCodePhone2],
        [ExecutorAreaCodePhone2],
        [ExecutorPhoneNumberPhone2],
        [ExecutorCountryCodeFax],
        [ExecutorAreaCodeFax],
        [ExecutorPhoneNumberFax],
        [ExecutorCountryCodeMobile],
        [ExecutorAreaCodeMobile],
        [ExecutorPhoneNumberMobile],
        [GovernmentIDType],
        [GovernmentIDTypeOther],
        [Address01Street],
        [Address01House],
        [Address01City],
        [Address01Zip],
        [Address01Country],
        [Address02Street],
        [Address02House],
        [Address02City],
        [Address02Zip],
        [Address02Country],
        [Comments],
        [ExecutorFirstName],
        [ExecutorLastNameOrCompanyName],
        [ExecutorActuallyDidIt],
        [StreetCode],
        [CityCode],
        [ExecutorEmail],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [GovtReport30]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddGovtReport30]
    @TableName_GovtReport30 bit = NULL,
    @GovtReport00ID bigint = NULL,
    @ReporterNumber varchar(15) = NULL,
    @ReporterIDNumber varchar(15) = NULL,
    @ReportYear varchar(4) = NULL,
    @ReportNumber bigint = NULL,
    @RecordType varchar(2) = NULL,
    @PrimaryActionIdentifier varchar(18) = NULL,
    @ReportApproverName nvarchar(100) = NULL,
    @ReportApproverGovtID varchar(50) = NULL,
    @ExecutorType varchar(2) = NULL,
    @ExecutorTypeOther nvarchar(200) = NULL,
    @ExecutorName nvarchar(200) = NULL,
    @ExecutorGovtID nvarchar(30) = NULL,
    @ExecutorCountry varchar(5) = NULL,
    @ExecutorMainAddress nvarchar(200) = NULL,
    @ExecutorAddlAddress nvarchar(200) = NULL,
    @ExecutorDateOfBirthIncorporation varchar(50) = NULL,
    @ExecutorPosition varchar(50) = NULL,
    @ExecutorPositionOther varchar(50) = NULL,
    @ExecutorGender varchar(2) = NULL,
    @ExecutorGenderOther nvarchar(200) = NULL,
    @ExecutorCountryCodePhone1 varchar(3) = NULL,
    @ExecutorAreaCodePhone1 varchar(4) = NULL,
    @ExecutorPhoneNumberPhone1 varchar(15) = NULL,
    @ExecutorCountryCodePhone2 varchar(3) = NULL,
    @ExecutorAreaCodePhone2 varchar(4) = NULL,
    @ExecutorPhoneNumberPhone2 varchar(15) = NULL,
    @ExecutorCountryCodeFax varchar(3) = NULL,
    @ExecutorAreaCodeFax varchar(4) = NULL,
    @ExecutorPhoneNumberFax varchar(15) = NULL,
    @ExecutorCountryCodeMobile varchar(3) = NULL,
    @ExecutorAreaCodeMobile varchar(4) = NULL,
    @ExecutorPhoneNumberMobile varchar(15) = NULL,
    @GovernmentIDType varchar(2) = NULL,
    @GovernmentIDTypeOther nvarchar(100) = NULL,
    @Address01Street nvarchar(40) = NULL,
    @Address01House nvarchar(40) = NULL,
    @Address01City nvarchar(40) = NULL,
    @Address01Zip varchar(10) = NULL,
    @Address01Country varchar(5) = NULL,
    @Address02Street nvarchar(40) = NULL,
    @Address02House nvarchar(40) = NULL,
    @Address02City nvarchar(40) = NULL,
    @Address02Zip varchar(10) = NULL,
    @Address02Country varchar(5) = NULL,
    @Comments nvarchar(200) = NULL,
    @ExecutorFirstName nvarchar(200) = NULL,
    @ExecutorLastNameOrCompanyName nvarchar(200) = NULL,
    @ExecutorActuallyDidIt varchar(2) = NULL,
    @StreetCode nvarchar(100) = NULL,
    @CityCode nvarchar(100) = NULL,
    @ExecutorEmail varchar(50) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [GovtReport30] (
        [TableName_GovtReport30],
        [GovtReport00ID],
        [ReporterNumber],
        [ReporterIDNumber],
        [ReportYear],
        [ReportNumber],
        [RecordType],
        [PrimaryActionIdentifier],
        [ReportApproverName],
        [ReportApproverGovtID],
        [ExecutorType],
        [ExecutorTypeOther],
        [ExecutorName],
        [ExecutorGovtID],
        [ExecutorCountry],
        [ExecutorMainAddress],
        [ExecutorAddlAddress],
        [ExecutorDateOfBirthIncorporation],
        [ExecutorPosition],
        [ExecutorPositionOther],
        [ExecutorGender],
        [ExecutorGenderOther],
        [ExecutorCountryCodePhone1],
        [ExecutorAreaCodePhone1],
        [ExecutorPhoneNumberPhone1],
        [ExecutorCountryCodePhone2],
        [ExecutorAreaCodePhone2],
        [ExecutorPhoneNumberPhone2],
        [ExecutorCountryCodeFax],
        [ExecutorAreaCodeFax],
        [ExecutorPhoneNumberFax],
        [ExecutorCountryCodeMobile],
        [ExecutorAreaCodeMobile],
        [ExecutorPhoneNumberMobile],
        [GovernmentIDType],
        [GovernmentIDTypeOther],
        [Address01Street],
        [Address01House],
        [Address01City],
        [Address01Zip],
        [Address01Country],
        [Address02Street],
        [Address02House],
        [Address02City],
        [Address02Zip],
        [Address02Country],
        [Comments],
        [ExecutorFirstName],
        [ExecutorLastNameOrCompanyName],
        [ExecutorActuallyDidIt],
        [StreetCode],
        [CityCode],
        [ExecutorEmail],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_GovtReport30,
        @GovtReport00ID,
        @ReporterNumber,
        @ReporterIDNumber,
        @ReportYear,
        @ReportNumber,
        @RecordType,
        @PrimaryActionIdentifier,
        @ReportApproverName,
        @ReportApproverGovtID,
        @ExecutorType,
        @ExecutorTypeOther,
        @ExecutorName,
        @ExecutorGovtID,
        @ExecutorCountry,
        @ExecutorMainAddress,
        @ExecutorAddlAddress,
        @ExecutorDateOfBirthIncorporation,
        @ExecutorPosition,
        @ExecutorPositionOther,
        @ExecutorGender,
        @ExecutorGenderOther,
        @ExecutorCountryCodePhone1,
        @ExecutorAreaCodePhone1,
        @ExecutorPhoneNumberPhone1,
        @ExecutorCountryCodePhone2,
        @ExecutorAreaCodePhone2,
        @ExecutorPhoneNumberPhone2,
        @ExecutorCountryCodeFax,
        @ExecutorAreaCodeFax,
        @ExecutorPhoneNumberFax,
        @ExecutorCountryCodeMobile,
        @ExecutorAreaCodeMobile,
        @ExecutorPhoneNumberMobile,
        @GovernmentIDType,
        @GovernmentIDTypeOther,
        @Address01Street,
        @Address01House,
        @Address01City,
        @Address01Zip,
        @Address01Country,
        @Address02Street,
        @Address02House,
        @Address02City,
        @Address02Zip,
        @Address02Country,
        @Comments,
        @ExecutorFirstName,
        @ExecutorLastNameOrCompanyName,
        @ExecutorActuallyDidIt,
        @StreetCode,
        @CityCode,
        @ExecutorEmail,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateGovtReport30]
    @ID bigint,
    @TableName_GovtReport30 bit = NULL,
    @GovtReport00ID bigint = NULL,
    @ReporterNumber varchar(15) = NULL,
    @ReporterIDNumber varchar(15) = NULL,
    @ReportYear varchar(4) = NULL,
    @ReportNumber bigint = NULL,
    @RecordType varchar(2) = NULL,
    @PrimaryActionIdentifier varchar(18) = NULL,
    @ReportApproverName nvarchar(100) = NULL,
    @ReportApproverGovtID varchar(50) = NULL,
    @ExecutorType varchar(2) = NULL,
    @ExecutorTypeOther nvarchar(200) = NULL,
    @ExecutorName nvarchar(200) = NULL,
    @ExecutorGovtID nvarchar(30) = NULL,
    @ExecutorCountry varchar(5) = NULL,
    @ExecutorMainAddress nvarchar(200) = NULL,
    @ExecutorAddlAddress nvarchar(200) = NULL,
    @ExecutorDateOfBirthIncorporation varchar(50) = NULL,
    @ExecutorPosition varchar(50) = NULL,
    @ExecutorPositionOther varchar(50) = NULL,
    @ExecutorGender varchar(2) = NULL,
    @ExecutorGenderOther nvarchar(200) = NULL,
    @ExecutorCountryCodePhone1 varchar(3) = NULL,
    @ExecutorAreaCodePhone1 varchar(4) = NULL,
    @ExecutorPhoneNumberPhone1 varchar(15) = NULL,
    @ExecutorCountryCodePhone2 varchar(3) = NULL,
    @ExecutorAreaCodePhone2 varchar(4) = NULL,
    @ExecutorPhoneNumberPhone2 varchar(15) = NULL,
    @ExecutorCountryCodeFax varchar(3) = NULL,
    @ExecutorAreaCodeFax varchar(4) = NULL,
    @ExecutorPhoneNumberFax varchar(15) = NULL,
    @ExecutorCountryCodeMobile varchar(3) = NULL,
    @ExecutorAreaCodeMobile varchar(4) = NULL,
    @ExecutorPhoneNumberMobile varchar(15) = NULL,
    @GovernmentIDType varchar(2) = NULL,
    @GovernmentIDTypeOther nvarchar(100) = NULL,
    @Address01Street nvarchar(40) = NULL,
    @Address01House nvarchar(40) = NULL,
    @Address01City nvarchar(40) = NULL,
    @Address01Zip varchar(10) = NULL,
    @Address01Country varchar(5) = NULL,
    @Address02Street nvarchar(40) = NULL,
    @Address02House nvarchar(40) = NULL,
    @Address02City nvarchar(40) = NULL,
    @Address02Zip varchar(10) = NULL,
    @Address02Country varchar(5) = NULL,
    @Comments nvarchar(200) = NULL,
    @ExecutorFirstName nvarchar(200) = NULL,
    @ExecutorLastNameOrCompanyName nvarchar(200) = NULL,
    @ExecutorActuallyDidIt varchar(2) = NULL,
    @StreetCode nvarchar(100) = NULL,
    @CityCode nvarchar(100) = NULL,
    @ExecutorEmail varchar(50) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [GovtReport30]
    SET
        [TableName_GovtReport30] = @TableName_GovtReport30,
        [GovtReport00ID] = @GovtReport00ID,
        [ReporterNumber] = @ReporterNumber,
        [ReporterIDNumber] = @ReporterIDNumber,
        [ReportYear] = @ReportYear,
        [ReportNumber] = @ReportNumber,
        [RecordType] = @RecordType,
        [PrimaryActionIdentifier] = @PrimaryActionIdentifier,
        [ReportApproverName] = @ReportApproverName,
        [ReportApproverGovtID] = @ReportApproverGovtID,
        [ExecutorType] = @ExecutorType,
        [ExecutorTypeOther] = @ExecutorTypeOther,
        [ExecutorName] = @ExecutorName,
        [ExecutorGovtID] = @ExecutorGovtID,
        [ExecutorCountry] = @ExecutorCountry,
        [ExecutorMainAddress] = @ExecutorMainAddress,
        [ExecutorAddlAddress] = @ExecutorAddlAddress,
        [ExecutorDateOfBirthIncorporation] = @ExecutorDateOfBirthIncorporation,
        [ExecutorPosition] = @ExecutorPosition,
        [ExecutorPositionOther] = @ExecutorPositionOther,
        [ExecutorGender] = @ExecutorGender,
        [ExecutorGenderOther] = @ExecutorGenderOther,
        [ExecutorCountryCodePhone1] = @ExecutorCountryCodePhone1,
        [ExecutorAreaCodePhone1] = @ExecutorAreaCodePhone1,
        [ExecutorPhoneNumberPhone1] = @ExecutorPhoneNumberPhone1,
        [ExecutorCountryCodePhone2] = @ExecutorCountryCodePhone2,
        [ExecutorAreaCodePhone2] = @ExecutorAreaCodePhone2,
        [ExecutorPhoneNumberPhone2] = @ExecutorPhoneNumberPhone2,
        [ExecutorCountryCodeFax] = @ExecutorCountryCodeFax,
        [ExecutorAreaCodeFax] = @ExecutorAreaCodeFax,
        [ExecutorPhoneNumberFax] = @ExecutorPhoneNumberFax,
        [ExecutorCountryCodeMobile] = @ExecutorCountryCodeMobile,
        [ExecutorAreaCodeMobile] = @ExecutorAreaCodeMobile,
        [ExecutorPhoneNumberMobile] = @ExecutorPhoneNumberMobile,
        [GovernmentIDType] = @GovernmentIDType,
        [GovernmentIDTypeOther] = @GovernmentIDTypeOther,
        [Address01Street] = @Address01Street,
        [Address01House] = @Address01House,
        [Address01City] = @Address01City,
        [Address01Zip] = @Address01Zip,
        [Address01Country] = @Address01Country,
        [Address02Street] = @Address02Street,
        [Address02House] = @Address02House,
        [Address02City] = @Address02City,
        [Address02Zip] = @Address02Zip,
        [Address02Country] = @Address02Country,
        [Comments] = @Comments,
        [ExecutorFirstName] = @ExecutorFirstName,
        [ExecutorLastNameOrCompanyName] = @ExecutorLastNameOrCompanyName,
        [ExecutorActuallyDidIt] = @ExecutorActuallyDidIt,
        [StreetCode] = @StreetCode,
        [CityCode] = @CityCode,
        [ExecutorEmail] = @ExecutorEmail,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteGovtReport30]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [GovtReport30]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_GovtReport30_GovtReport00ID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillGovtReport30ByGOVTREPORT00ID]
    @GovtReport00ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_GovtReport30],
        [ID],
        [GovtReport00ID],
        [ReporterNumber],
        [ReporterIDNumber],
        [ReportYear],
        [ReportNumber],
        [RecordType],
        [PrimaryActionIdentifier],
        [ReportApproverName],
        [ReportApproverGovtID],
        [ExecutorType],
        [ExecutorTypeOther],
        [ExecutorName],
        [ExecutorGovtID],
        [ExecutorCountry],
        [ExecutorMainAddress],
        [ExecutorAddlAddress],
        [ExecutorDateOfBirthIncorporation],
        [ExecutorPosition],
        [ExecutorPositionOther],
        [ExecutorGender],
        [ExecutorGenderOther],
        [ExecutorCountryCodePhone1],
        [ExecutorAreaCodePhone1],
        [ExecutorPhoneNumberPhone1],
        [ExecutorCountryCodePhone2],
        [ExecutorAreaCodePhone2],
        [ExecutorPhoneNumberPhone2],
        [ExecutorCountryCodeFax],
        [ExecutorAreaCodeFax],
        [ExecutorPhoneNumberFax],
        [ExecutorCountryCodeMobile],
        [ExecutorAreaCodeMobile],
        [ExecutorPhoneNumberMobile],
        [GovernmentIDType],
        [GovernmentIDTypeOther],
        [Address01Street],
        [Address01House],
        [Address01City],
        [Address01Zip],
        [Address01Country],
        [Address02Street],
        [Address02House],
        [Address02City],
        [Address02Zip],
        [Address02Country],
        [Comments],
        [ExecutorFirstName],
        [ExecutorLastNameOrCompanyName],
        [ExecutorActuallyDidIt],
        [StreetCode],
        [CityCode],
        [ExecutorEmail],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [GovtReport30]
    WHERE [GovtReport00ID] = @GovtReport00ID
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: GovtReport40
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllGovtReport40s]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_GovtReport40],
            t.[ID],
            t.[GovtReport00ID],
            t.[ReporterNumber],
            t.[ReporterIDNumber],
            t.[ReportYear],
            t.[ReportNumber],
            t.[RecordType],
            t.[PrimaryActionIdentifier],
            t.[FinancialInstitutionStatus],
            t.[BankNumber],
            t.[BankBranchNumber],
            t.[BankCountryCode],
            t.[BankName],
            t.[BankAddress],
            t.[BankAccountNumber],
            t.[ReferenceNumber],
            t.[FinancialInstitutionType],
            t.[FinancialInstitutionTypeOther],
            t.[BankAccountOwnerName],
            t.[BankAccountOwnerAddress],
            t.[RecipientName],
            t.[BankAccountOwnerGovernmentID],
            t.[Telephone1],
            t.[SecondaryActionIdentifier],
            t.[BankAccountOwnerCountry],
            t.[BankAccountOwnerGender],
            t.[BankAccountBirthdate],
            t.[RecipientGovernmentID],
            t.[RecipientAddress],
            t.[RecipientAccointOpeningDate],
            t.[MailingAddress],
            t.[CreditCardType],
            t.[CreditCardNumber],
            t.[CreditCardCountry],
            t.[CreditCardOwnerName],
            t.[CreditCardOwnerGovernmentID],
            t.[CreditCardOwnerCountry],
            t.[CreditCardClearingHouse],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            p1.[Text] AS [GovtReport00ID_Text]
        FROM [GovtReport40] t
        LEFT JOIN [ccvwComboList_GovtReport00] p1 ON t.[GovtReport00ID] = p1.[ID]
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_GovtReport40],
            [ID],
            [GovtReport00ID],
            [ReporterNumber],
            [ReporterIDNumber],
            [ReportYear],
            [ReportNumber],
            [RecordType],
            [PrimaryActionIdentifier],
            [FinancialInstitutionStatus],
            [BankNumber],
            [BankBranchNumber],
            [BankCountryCode],
            [BankName],
            [BankAddress],
            [BankAccountNumber],
            [ReferenceNumber],
            [FinancialInstitutionType],
            [FinancialInstitutionTypeOther],
            [BankAccountOwnerName],
            [BankAccountOwnerAddress],
            [RecipientName],
            [BankAccountOwnerGovernmentID],
            [Telephone1],
            [SecondaryActionIdentifier],
            [BankAccountOwnerCountry],
            [BankAccountOwnerGender],
            [BankAccountBirthdate],
            [RecipientGovernmentID],
            [RecipientAddress],
            [RecipientAccointOpeningDate],
            [MailingAddress],
            [CreditCardType],
            [CreditCardNumber],
            [CreditCardCountry],
            [CreditCardOwnerName],
            [CreditCardOwnerGovernmentID],
            [CreditCardOwnerCountry],
            [CreditCardClearingHouse],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID]
        FROM [GovtReport40]
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredGovtReport40s]
    @GovtReport00ID INT = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_GovtReport40],
            t.[ID],
            t.[GovtReport00ID],
            t.[ReporterNumber],
            t.[ReporterIDNumber],
            t.[ReportYear],
            t.[ReportNumber],
            t.[RecordType],
            t.[PrimaryActionIdentifier],
            t.[FinancialInstitutionStatus],
            t.[BankNumber],
            t.[BankBranchNumber],
            t.[BankCountryCode],
            t.[BankName],
            t.[BankAddress],
            t.[BankAccountNumber],
            t.[ReferenceNumber],
            t.[FinancialInstitutionType],
            t.[FinancialInstitutionTypeOther],
            t.[BankAccountOwnerName],
            t.[BankAccountOwnerAddress],
            t.[RecipientName],
            t.[BankAccountOwnerGovernmentID],
            t.[Telephone1],
            t.[SecondaryActionIdentifier],
            t.[BankAccountOwnerCountry],
            t.[BankAccountOwnerGender],
            t.[BankAccountBirthdate],
            t.[RecipientGovernmentID],
            t.[RecipientAddress],
            t.[RecipientAccointOpeningDate],
            t.[MailingAddress],
            t.[CreditCardType],
            t.[CreditCardNumber],
            t.[CreditCardCountry],
            t.[CreditCardOwnerName],
            t.[CreditCardOwnerGovernmentID],
            t.[CreditCardOwnerCountry],
            t.[CreditCardClearingHouse],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            p1.[Text] AS [GovtReport00ID_Text]
        FROM [GovtReport40] t
        LEFT JOIN [ccvwComboList_GovtReport00] p1 ON t.[GovtReport00ID] = p1.[ID]
        WHERE 1=1
          AND (@GovtReport00ID IS NULL OR t.[GovtReport00ID] = @GovtReport00ID)
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_GovtReport40],
            [ID],
            [GovtReport00ID],
            [ReporterNumber],
            [ReporterIDNumber],
            [ReportYear],
            [ReportNumber],
            [RecordType],
            [PrimaryActionIdentifier],
            [FinancialInstitutionStatus],
            [BankNumber],
            [BankBranchNumber],
            [BankCountryCode],
            [BankName],
            [BankAddress],
            [BankAccountNumber],
            [ReferenceNumber],
            [FinancialInstitutionType],
            [FinancialInstitutionTypeOther],
            [BankAccountOwnerName],
            [BankAccountOwnerAddress],
            [RecipientName],
            [BankAccountOwnerGovernmentID],
            [Telephone1],
            [SecondaryActionIdentifier],
            [BankAccountOwnerCountry],
            [BankAccountOwnerGender],
            [BankAccountBirthdate],
            [RecipientGovernmentID],
            [RecipientAddress],
            [RecipientAccointOpeningDate],
            [MailingAddress],
            [CreditCardType],
            [CreditCardNumber],
            [CreditCardCountry],
            [CreditCardOwnerName],
            [CreditCardOwnerGovernmentID],
            [CreditCardOwnerCountry],
            [CreditCardClearingHouse],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID]
        FROM [GovtReport40]
        WHERE 1=1
          AND (@GovtReport00ID IS NULL OR [GovtReport00ID] = @GovtReport00ID)
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetGovtReport40ByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_GovtReport40],
        [ID],
        [GovtReport00ID],
        [ReporterNumber],
        [ReporterIDNumber],
        [ReportYear],
        [ReportNumber],
        [RecordType],
        [PrimaryActionIdentifier],
        [FinancialInstitutionStatus],
        [BankNumber],
        [BankBranchNumber],
        [BankCountryCode],
        [BankName],
        [BankAddress],
        [BankAccountNumber],
        [ReferenceNumber],
        [FinancialInstitutionType],
        [FinancialInstitutionTypeOther],
        [BankAccountOwnerName],
        [BankAccountOwnerAddress],
        [RecipientName],
        [BankAccountOwnerGovernmentID],
        [Telephone1],
        [SecondaryActionIdentifier],
        [BankAccountOwnerCountry],
        [BankAccountOwnerGender],
        [BankAccountBirthdate],
        [RecipientGovernmentID],
        [RecipientAddress],
        [RecipientAccointOpeningDate],
        [MailingAddress],
        [CreditCardType],
        [CreditCardNumber],
        [CreditCardCountry],
        [CreditCardOwnerName],
        [CreditCardOwnerGovernmentID],
        [CreditCardOwnerCountry],
        [CreditCardClearingHouse],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [GovtReport40]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddGovtReport40]
    @TableName_GovtReport40 bit = NULL,
    @GovtReport00ID bigint = NULL,
    @ReporterNumber varchar(15) = NULL,
    @ReporterIDNumber varchar(15) = NULL,
    @ReportYear varchar(4) = NULL,
    @ReportNumber bigint = NULL,
    @RecordType varchar(2) = NULL,
    @PrimaryActionIdentifier varchar(18) = NULL,
    @FinancialInstitutionStatus varchar(1) = NULL,
    @BankNumber varchar(20) = NULL,
    @BankBranchNumber varchar(20) = NULL,
    @BankCountryCode varchar(5) = NULL,
    @BankName nvarchar(80) = NULL,
    @BankAddress nvarchar(200) = NULL,
    @BankAccountNumber nvarchar(20) = NULL,
    @ReferenceNumber varchar(10) = NULL,
    @FinancialInstitutionType varchar(2) = NULL,
    @FinancialInstitutionTypeOther varchar(10) = NULL,
    @BankAccountOwnerName nvarchar(200) = NULL,
    @BankAccountOwnerAddress nvarchar(200) = NULL,
    @RecipientName nvarchar(200) = NULL,
    @BankAccountOwnerGovernmentID varchar(10) = NULL,
    @Telephone1 varchar(15) = NULL,
    @SecondaryActionIdentifier varchar(50) = NULL,
    @BankAccountOwnerCountry varchar(5) = NULL,
    @BankAccountOwnerGender varchar(2) = NULL,
    @BankAccountBirthdate varchar(8) = NULL,
    @RecipientGovernmentID varchar(15) = NULL,
    @RecipientAddress nvarchar(200) = NULL,
    @RecipientAccointOpeningDate varchar(8) = NULL,
    @MailingAddress nvarchar(200) = NULL,
    @CreditCardType nvarchar(14) = NULL,
    @CreditCardNumber nvarchar(50) = NULL,
    @CreditCardCountry nvarchar(10) = NULL,
    @CreditCardOwnerName nvarchar(200) = NULL,
    @CreditCardOwnerGovernmentID varchar(15) = NULL,
    @CreditCardOwnerCountry varchar(5) = NULL,
    @CreditCardClearingHouse nvarchar(100) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [GovtReport40] (
        [TableName_GovtReport40],
        [GovtReport00ID],
        [ReporterNumber],
        [ReporterIDNumber],
        [ReportYear],
        [ReportNumber],
        [RecordType],
        [PrimaryActionIdentifier],
        [FinancialInstitutionStatus],
        [BankNumber],
        [BankBranchNumber],
        [BankCountryCode],
        [BankName],
        [BankAddress],
        [BankAccountNumber],
        [ReferenceNumber],
        [FinancialInstitutionType],
        [FinancialInstitutionTypeOther],
        [BankAccountOwnerName],
        [BankAccountOwnerAddress],
        [RecipientName],
        [BankAccountOwnerGovernmentID],
        [Telephone1],
        [SecondaryActionIdentifier],
        [BankAccountOwnerCountry],
        [BankAccountOwnerGender],
        [BankAccountBirthdate],
        [RecipientGovernmentID],
        [RecipientAddress],
        [RecipientAccointOpeningDate],
        [MailingAddress],
        [CreditCardType],
        [CreditCardNumber],
        [CreditCardCountry],
        [CreditCardOwnerName],
        [CreditCardOwnerGovernmentID],
        [CreditCardOwnerCountry],
        [CreditCardClearingHouse],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_GovtReport40,
        @GovtReport00ID,
        @ReporterNumber,
        @ReporterIDNumber,
        @ReportYear,
        @ReportNumber,
        @RecordType,
        @PrimaryActionIdentifier,
        @FinancialInstitutionStatus,
        @BankNumber,
        @BankBranchNumber,
        @BankCountryCode,
        @BankName,
        @BankAddress,
        @BankAccountNumber,
        @ReferenceNumber,
        @FinancialInstitutionType,
        @FinancialInstitutionTypeOther,
        @BankAccountOwnerName,
        @BankAccountOwnerAddress,
        @RecipientName,
        @BankAccountOwnerGovernmentID,
        @Telephone1,
        @SecondaryActionIdentifier,
        @BankAccountOwnerCountry,
        @BankAccountOwnerGender,
        @BankAccountBirthdate,
        @RecipientGovernmentID,
        @RecipientAddress,
        @RecipientAccointOpeningDate,
        @MailingAddress,
        @CreditCardType,
        @CreditCardNumber,
        @CreditCardCountry,
        @CreditCardOwnerName,
        @CreditCardOwnerGovernmentID,
        @CreditCardOwnerCountry,
        @CreditCardClearingHouse,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateGovtReport40]
    @ID bigint,
    @TableName_GovtReport40 bit = NULL,
    @GovtReport00ID bigint = NULL,
    @ReporterNumber varchar(15) = NULL,
    @ReporterIDNumber varchar(15) = NULL,
    @ReportYear varchar(4) = NULL,
    @ReportNumber bigint = NULL,
    @RecordType varchar(2) = NULL,
    @PrimaryActionIdentifier varchar(18) = NULL,
    @FinancialInstitutionStatus varchar(1) = NULL,
    @BankNumber varchar(20) = NULL,
    @BankBranchNumber varchar(20) = NULL,
    @BankCountryCode varchar(5) = NULL,
    @BankName nvarchar(80) = NULL,
    @BankAddress nvarchar(200) = NULL,
    @BankAccountNumber nvarchar(20) = NULL,
    @ReferenceNumber varchar(10) = NULL,
    @FinancialInstitutionType varchar(2) = NULL,
    @FinancialInstitutionTypeOther varchar(10) = NULL,
    @BankAccountOwnerName nvarchar(200) = NULL,
    @BankAccountOwnerAddress nvarchar(200) = NULL,
    @RecipientName nvarchar(200) = NULL,
    @BankAccountOwnerGovernmentID varchar(10) = NULL,
    @Telephone1 varchar(15) = NULL,
    @SecondaryActionIdentifier varchar(50) = NULL,
    @BankAccountOwnerCountry varchar(5) = NULL,
    @BankAccountOwnerGender varchar(2) = NULL,
    @BankAccountBirthdate varchar(8) = NULL,
    @RecipientGovernmentID varchar(15) = NULL,
    @RecipientAddress nvarchar(200) = NULL,
    @RecipientAccointOpeningDate varchar(8) = NULL,
    @MailingAddress nvarchar(200) = NULL,
    @CreditCardType nvarchar(14) = NULL,
    @CreditCardNumber nvarchar(50) = NULL,
    @CreditCardCountry nvarchar(10) = NULL,
    @CreditCardOwnerName nvarchar(200) = NULL,
    @CreditCardOwnerGovernmentID varchar(15) = NULL,
    @CreditCardOwnerCountry varchar(5) = NULL,
    @CreditCardClearingHouse nvarchar(100) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [GovtReport40]
    SET
        [TableName_GovtReport40] = @TableName_GovtReport40,
        [GovtReport00ID] = @GovtReport00ID,
        [ReporterNumber] = @ReporterNumber,
        [ReporterIDNumber] = @ReporterIDNumber,
        [ReportYear] = @ReportYear,
        [ReportNumber] = @ReportNumber,
        [RecordType] = @RecordType,
        [PrimaryActionIdentifier] = @PrimaryActionIdentifier,
        [FinancialInstitutionStatus] = @FinancialInstitutionStatus,
        [BankNumber] = @BankNumber,
        [BankBranchNumber] = @BankBranchNumber,
        [BankCountryCode] = @BankCountryCode,
        [BankName] = @BankName,
        [BankAddress] = @BankAddress,
        [BankAccountNumber] = @BankAccountNumber,
        [ReferenceNumber] = @ReferenceNumber,
        [FinancialInstitutionType] = @FinancialInstitutionType,
        [FinancialInstitutionTypeOther] = @FinancialInstitutionTypeOther,
        [BankAccountOwnerName] = @BankAccountOwnerName,
        [BankAccountOwnerAddress] = @BankAccountOwnerAddress,
        [RecipientName] = @RecipientName,
        [BankAccountOwnerGovernmentID] = @BankAccountOwnerGovernmentID,
        [Telephone1] = @Telephone1,
        [SecondaryActionIdentifier] = @SecondaryActionIdentifier,
        [BankAccountOwnerCountry] = @BankAccountOwnerCountry,
        [BankAccountOwnerGender] = @BankAccountOwnerGender,
        [BankAccountBirthdate] = @BankAccountBirthdate,
        [RecipientGovernmentID] = @RecipientGovernmentID,
        [RecipientAddress] = @RecipientAddress,
        [RecipientAccointOpeningDate] = @RecipientAccointOpeningDate,
        [MailingAddress] = @MailingAddress,
        [CreditCardType] = @CreditCardType,
        [CreditCardNumber] = @CreditCardNumber,
        [CreditCardCountry] = @CreditCardCountry,
        [CreditCardOwnerName] = @CreditCardOwnerName,
        [CreditCardOwnerGovernmentID] = @CreditCardOwnerGovernmentID,
        [CreditCardOwnerCountry] = @CreditCardOwnerCountry,
        [CreditCardClearingHouse] = @CreditCardClearingHouse,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteGovtReport40]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [GovtReport40]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_GovtReport40_GovtReport00ID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillGovtReport40ByGOVTREPORT00ID]
    @GovtReport00ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_GovtReport40],
        [ID],
        [GovtReport00ID],
        [ReporterNumber],
        [ReporterIDNumber],
        [ReportYear],
        [ReportNumber],
        [RecordType],
        [PrimaryActionIdentifier],
        [FinancialInstitutionStatus],
        [BankNumber],
        [BankBranchNumber],
        [BankCountryCode],
        [BankName],
        [BankAddress],
        [BankAccountNumber],
        [ReferenceNumber],
        [FinancialInstitutionType],
        [FinancialInstitutionTypeOther],
        [BankAccountOwnerName],
        [BankAccountOwnerAddress],
        [RecipientName],
        [BankAccountOwnerGovernmentID],
        [Telephone1],
        [SecondaryActionIdentifier],
        [BankAccountOwnerCountry],
        [BankAccountOwnerGender],
        [BankAccountBirthdate],
        [RecipientGovernmentID],
        [RecipientAddress],
        [RecipientAccointOpeningDate],
        [MailingAddress],
        [CreditCardType],
        [CreditCardNumber],
        [CreditCardCountry],
        [CreditCardOwnerName],
        [CreditCardOwnerGovernmentID],
        [CreditCardOwnerCountry],
        [CreditCardClearingHouse],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [GovtReport40]
    WHERE [GovtReport00ID] = @GovtReport00ID
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: GovtReport99
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllGovtReport99s]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_GovtReport99],
            t.[ID],
            t.[GovtReport00ID],
            t.[ReporterNumber],
            t.[ReporterIDNumber],
            t.[ReportYear],
            t.[ReportNumber],
            t.[RecordType],
            t.[ReportMonth],
            t.[NumberOfRowsIn10],
            t.[NumberOfRowsIn30],
            t.[NumberOfRowsIn40],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            p1.[Text] AS [GovtReport00ID_Text]
        FROM [GovtReport99] t
        LEFT JOIN [ccvwComboList_GovtReport00] p1 ON t.[GovtReport00ID] = p1.[ID]
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_GovtReport99],
            [ID],
            [GovtReport00ID],
            [ReporterNumber],
            [ReporterIDNumber],
            [ReportYear],
            [ReportNumber],
            [RecordType],
            [ReportMonth],
            [NumberOfRowsIn10],
            [NumberOfRowsIn30],
            [NumberOfRowsIn40],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID]
        FROM [GovtReport99]
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredGovtReport99s]
    @GovtReport00ID INT = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_GovtReport99],
            t.[ID],
            t.[GovtReport00ID],
            t.[ReporterNumber],
            t.[ReporterIDNumber],
            t.[ReportYear],
            t.[ReportNumber],
            t.[RecordType],
            t.[ReportMonth],
            t.[NumberOfRowsIn10],
            t.[NumberOfRowsIn30],
            t.[NumberOfRowsIn40],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            p1.[Text] AS [GovtReport00ID_Text]
        FROM [GovtReport99] t
        LEFT JOIN [ccvwComboList_GovtReport00] p1 ON t.[GovtReport00ID] = p1.[ID]
        WHERE 1=1
          AND (@GovtReport00ID IS NULL OR t.[GovtReport00ID] = @GovtReport00ID)
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_GovtReport99],
            [ID],
            [GovtReport00ID],
            [ReporterNumber],
            [ReporterIDNumber],
            [ReportYear],
            [ReportNumber],
            [RecordType],
            [ReportMonth],
            [NumberOfRowsIn10],
            [NumberOfRowsIn30],
            [NumberOfRowsIn40],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID]
        FROM [GovtReport99]
        WHERE 1=1
          AND (@GovtReport00ID IS NULL OR [GovtReport00ID] = @GovtReport00ID)
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetGovtReport99ByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_GovtReport99],
        [ID],
        [GovtReport00ID],
        [ReporterNumber],
        [ReporterIDNumber],
        [ReportYear],
        [ReportNumber],
        [RecordType],
        [ReportMonth],
        [NumberOfRowsIn10],
        [NumberOfRowsIn30],
        [NumberOfRowsIn40],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [GovtReport99]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddGovtReport99]
    @TableName_GovtReport99 bit = NULL,
    @GovtReport00ID bigint = NULL,
    @ReporterNumber varchar(15) = NULL,
    @ReporterIDNumber varchar(15) = NULL,
    @ReportYear varchar(4) = NULL,
    @ReportNumber bigint = NULL,
    @RecordType varchar(2) = NULL,
    @ReportMonth varchar(8) = NULL,
    @NumberOfRowsIn10 varchar(8) = NULL,
    @NumberOfRowsIn30 varchar(8) = NULL,
    @NumberOfRowsIn40 varchar(8) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [GovtReport99] (
        [TableName_GovtReport99],
        [GovtReport00ID],
        [ReporterNumber],
        [ReporterIDNumber],
        [ReportYear],
        [ReportNumber],
        [RecordType],
        [ReportMonth],
        [NumberOfRowsIn10],
        [NumberOfRowsIn30],
        [NumberOfRowsIn40],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_GovtReport99,
        @GovtReport00ID,
        @ReporterNumber,
        @ReporterIDNumber,
        @ReportYear,
        @ReportNumber,
        @RecordType,
        @ReportMonth,
        @NumberOfRowsIn10,
        @NumberOfRowsIn30,
        @NumberOfRowsIn40,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateGovtReport99]
    @ID bigint,
    @TableName_GovtReport99 bit = NULL,
    @GovtReport00ID bigint = NULL,
    @ReporterNumber varchar(15) = NULL,
    @ReporterIDNumber varchar(15) = NULL,
    @ReportYear varchar(4) = NULL,
    @ReportNumber bigint = NULL,
    @RecordType varchar(2) = NULL,
    @ReportMonth varchar(8) = NULL,
    @NumberOfRowsIn10 varchar(8) = NULL,
    @NumberOfRowsIn30 varchar(8) = NULL,
    @NumberOfRowsIn40 varchar(8) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [GovtReport99]
    SET
        [TableName_GovtReport99] = @TableName_GovtReport99,
        [GovtReport00ID] = @GovtReport00ID,
        [ReporterNumber] = @ReporterNumber,
        [ReporterIDNumber] = @ReporterIDNumber,
        [ReportYear] = @ReportYear,
        [ReportNumber] = @ReportNumber,
        [RecordType] = @RecordType,
        [ReportMonth] = @ReportMonth,
        [NumberOfRowsIn10] = @NumberOfRowsIn10,
        [NumberOfRowsIn30] = @NumberOfRowsIn30,
        [NumberOfRowsIn40] = @NumberOfRowsIn40,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteGovtReport99]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [GovtReport99]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_GovtReport99_GovtReport00ID
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetGovtReport99ByGOVTREPORT00ID]
    @GovtReport00ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_GovtReport99],
        [ID],
        [GovtReport00ID],
        [ReporterNumber],
        [ReporterIDNumber],
        [ReportYear],
        [ReportNumber],
        [RecordType],
        [ReportMonth],
        [NumberOfRowsIn10],
        [NumberOfRowsIn30],
        [NumberOfRowsIn40],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [GovtReport99]
    WHERE [GovtReport00ID] = @GovtReport00ID
;
END

GO


-- =========================================
-- Stored Procedures for Table: GovtReportDefinition
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllGovtReportDefinitions]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_GovtReportDefinition],
        [GovernmentReportMinimumAmount],
        [ReporterGovernmentID],
        [ReportCode],
        [BranchNumber],
        [ReporterName],
        [ReporterAddress01],
        [ReporterAddress02],
        [PhoneNumber],
        [PhoneNumber2],
        [Fax],
        [FileDescription],
        [VersionNumber],
        [ReportApproverName],
        [ReportApproverGovtID],
        [ReportBankNumber],
        [ReportBankBranchNumber],
        [ReportBankCountryCode],
        [ReportBankName],
        [ReportBankAddress],
        [ReportBankAccountNumber],
        [ChangedBy],
        [ChangedOn],
        [UpdatingLoginID]
    FROM [GovtReportDefinition]
    ORDER BY [TableName_GovtReportDefinition]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetGovtReportDefinitionByID]
    @TableName_GovtReportDefinition bit
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_GovtReportDefinition],
        [GovernmentReportMinimumAmount],
        [ReporterGovernmentID],
        [ReportCode],
        [BranchNumber],
        [ReporterName],
        [ReporterAddress01],
        [ReporterAddress02],
        [PhoneNumber],
        [PhoneNumber2],
        [Fax],
        [FileDescription],
        [VersionNumber],
        [ReportApproverName],
        [ReportApproverGovtID],
        [ReportBankNumber],
        [ReportBankBranchNumber],
        [ReportBankCountryCode],
        [ReportBankName],
        [ReportBankAddress],
        [ReportBankAccountNumber],
        [ChangedBy],
        [ChangedOn],
        [UpdatingLoginID]
    FROM [GovtReportDefinition]
    WHERE [TableName_GovtReportDefinition] = @TableName_GovtReportDefinition;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddGovtReportDefinition]
    @GovernmentReportMinimumAmount decimal(18,0) = NULL,
    @ReporterGovernmentID varchar(15) = NULL,
    @ReportCode varchar(50) = NULL,
    @BranchNumber varchar(10) = NULL,
    @ReporterName nvarchar(100) = NULL,
    @ReporterAddress01 nvarchar(200) = NULL,
    @ReporterAddress02 nvarchar(200) = NULL,
    @PhoneNumber varchar(15) = NULL,
    @PhoneNumber2 varchar(15) = NULL,
    @Fax varchar(15) = NULL,
    @FileDescription nvarchar(200) = NULL,
    @VersionNumber varchar(2) = NULL,
    @ReportApproverName nvarchar(100) = NULL,
    @ReportApproverGovtID varchar(50) = NULL,
    @ReportBankNumber varchar(20) = NULL,
    @ReportBankBranchNumber varchar(20) = NULL,
    @ReportBankCountryCode varchar(5) = NULL,
    @ReportBankName nvarchar(80) = NULL,
    @ReportBankAddress nvarchar(200) = NULL,
    @ReportBankAccountNumber nvarchar(30) = NULL,
    @UpdatingLoginID bigint = NULL
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [GovtReportDefinition] (
        [GovernmentReportMinimumAmount],
        [ReporterGovernmentID],
        [ReportCode],
        [BranchNumber],
        [ReporterName],
        [ReporterAddress01],
        [ReporterAddress02],
        [PhoneNumber],
        [PhoneNumber2],
        [Fax],
        [FileDescription],
        [VersionNumber],
        [ReportApproverName],
        [ReportApproverGovtID],
        [ReportBankNumber],
        [ReportBankBranchNumber],
        [ReportBankCountryCode],
        [ReportBankName],
        [ReportBankAddress],
        [ReportBankAccountNumber],
        [UpdatingLoginID]
    )
    VALUES (
        @GovernmentReportMinimumAmount,
        @ReporterGovernmentID,
        @ReportCode,
        @BranchNumber,
        @ReporterName,
        @ReporterAddress01,
        @ReporterAddress02,
        @PhoneNumber,
        @PhoneNumber2,
        @Fax,
        @FileDescription,
        @VersionNumber,
        @ReportApproverName,
        @ReportApproverGovtID,
        @ReportBankNumber,
        @ReportBankBranchNumber,
        @ReportBankCountryCode,
        @ReportBankName,
        @ReportBankAddress,
        @ReportBankAccountNumber,
        @UpdatingLoginID
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateGovtReportDefinition]
    @TableName_GovtReportDefinition bit,
    @GovernmentReportMinimumAmount decimal(18,0) = NULL,
    @ReporterGovernmentID varchar(15) = NULL,
    @ReportCode varchar(50) = NULL,
    @BranchNumber varchar(10) = NULL,
    @ReporterName nvarchar(100) = NULL,
    @ReporterAddress01 nvarchar(200) = NULL,
    @ReporterAddress02 nvarchar(200) = NULL,
    @PhoneNumber varchar(15) = NULL,
    @PhoneNumber2 varchar(15) = NULL,
    @Fax varchar(15) = NULL,
    @FileDescription nvarchar(200) = NULL,
    @VersionNumber varchar(2) = NULL,
    @ReportApproverName nvarchar(100) = NULL,
    @ReportApproverGovtID varchar(50) = NULL,
    @ReportBankNumber varchar(20) = NULL,
    @ReportBankBranchNumber varchar(20) = NULL,
    @ReportBankCountryCode varchar(5) = NULL,
    @ReportBankName nvarchar(80) = NULL,
    @ReportBankAddress nvarchar(200) = NULL,
    @ReportBankAccountNumber nvarchar(30) = NULL,
    @UpdatingLoginID bigint = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [GovtReportDefinition]
    SET
        [GovernmentReportMinimumAmount] = @GovernmentReportMinimumAmount,
        [ReporterGovernmentID] = @ReporterGovernmentID,
        [ReportCode] = @ReportCode,
        [BranchNumber] = @BranchNumber,
        [ReporterName] = @ReporterName,
        [ReporterAddress01] = @ReporterAddress01,
        [ReporterAddress02] = @ReporterAddress02,
        [PhoneNumber] = @PhoneNumber,
        [PhoneNumber2] = @PhoneNumber2,
        [Fax] = @Fax,
        [FileDescription] = @FileDescription,
        [VersionNumber] = @VersionNumber,
        [ReportApproverName] = @ReportApproverName,
        [ReportApproverGovtID] = @ReportApproverGovtID,
        [ReportBankNumber] = @ReportBankNumber,
        [ReportBankBranchNumber] = @ReportBankBranchNumber,
        [ReportBankCountryCode] = @ReportBankCountryCode,
        [ReportBankName] = @ReportBankName,
        [ReportBankAddress] = @ReportBankAddress,
        [ReportBankAccountNumber] = @ReportBankAccountNumber,
        [UpdatingLoginID] = @UpdatingLoginID,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [TableName_GovtReportDefinition] = @TableName_GovtReportDefinition;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteGovtReportDefinition]
    @TableName_GovtReportDefinition bit
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [GovtReportDefinition]
    WHERE [TableName_GovtReportDefinition] = @TableName_GovtReportDefinition;
END

GO



-- =========================================
-- Stored Procedures for Table: GovtReportDistributor
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllGovtReportDistributors]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_GovtReportDistributor],
            t.[ID],
            t.[DistributorID],
            t.[ReportFullName],
            t.[ReportIdentityNo],
            t.[ReportBirthOrIncorporationDate],
            t.[lkpReportGender],
            t.[ReportTelephoneAreaCode],
            t.[ReportTelephonePhoneNumber],
            t.[ReportFaxOrEmail],
            t.[ReportAddress01Street],
            t.[ReportAddress01House],
            t.[ReportAddress01City],
            t.[ReportAddress01Zip],
            t.[ReportFirstName],
            t.[ReportSurnameOrCompanyname],
            t.[ReportCellPhoneAreaCode],
            t.[ReportCellPhoneNumber],
            t.[ReportStreetCode],
            t.[ReportCityCode],
            t.[ReportS01FullName],
            t.[ReportS01IdentityNo],
            t.[ReportS01BirthOrIncorporationDate],
            t.[lkpReportS01Gender_ReportGender],
            t.[ReportS01TelephoneAreaCode],
            t.[ReportS01TelephonePhoneNumber],
            t.[ReportS01FaxOrEmail],
            t.[ReportS01Address01Street],
            t.[ReportS01Address01House],
            t.[ReportS01Address01City],
            t.[ReportS01Address01Zip],
            t.[ReportS01FirstName],
            t.[ReportS01SurnameOrCompanyname],
            t.[ReportS01CellPhoneAreaCode],
            t.[ReportS01CellPhoneNumber],
            t.[ReportS01StreetCode],
            t.[ReportS01CityCode],
            t.[ReportS02FullName],
            t.[ReportS02IdentityNo],
            t.[ReportS02BirthOrIncorporationDate],
            t.[lkpReportS02Gender_ReportGender],
            t.[ReportS02TelephoneAreaCode],
            t.[ReportS02TelephonePhoneNumber],
            t.[ReportS02FaxOrEmail],
            t.[ReportS02Address01Street],
            t.[ReportS02Address01House],
            t.[ReportS02Address01City],
            t.[ReportS02Address01Zip],
            t.[ReportS02FirstName],
            t.[ReportS02SurnameOrCompanyname],
            t.[ReportS02CellPhoneAreaCode],
            t.[ReportS02CellPhoneNumber],
            t.[ReportS02StreetCode],
            t.[ReportS02CityCode],
            t.[enmReportS01EntityType_GovtReportEntityType],
            t.[enmReportS02EntityType_GovtReportEntityType],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            t.[lkpIdentityNoType],
            t.[IsPublicBenefitCompany],
            p1.[Text] AS [DistributorID_Text]
        FROM [GovtReportDistributor] t
        LEFT JOIN [ccvwComboList_Distributor] p1 ON t.[DistributorID] = p1.[ID]
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_GovtReportDistributor],
            [ID],
            [DistributorID],
            [ReportFullName],
            [ReportIdentityNo],
            [ReportBirthOrIncorporationDate],
            [lkpReportGender],
            [ReportTelephoneAreaCode],
            [ReportTelephonePhoneNumber],
            [ReportFaxOrEmail],
            [ReportAddress01Street],
            [ReportAddress01House],
            [ReportAddress01City],
            [ReportAddress01Zip],
            [ReportFirstName],
            [ReportSurnameOrCompanyname],
            [ReportCellPhoneAreaCode],
            [ReportCellPhoneNumber],
            [ReportStreetCode],
            [ReportCityCode],
            [ReportS01FullName],
            [ReportS01IdentityNo],
            [ReportS01BirthOrIncorporationDate],
            [lkpReportS01Gender_ReportGender],
            [ReportS01TelephoneAreaCode],
            [ReportS01TelephonePhoneNumber],
            [ReportS01FaxOrEmail],
            [ReportS01Address01Street],
            [ReportS01Address01House],
            [ReportS01Address01City],
            [ReportS01Address01Zip],
            [ReportS01FirstName],
            [ReportS01SurnameOrCompanyname],
            [ReportS01CellPhoneAreaCode],
            [ReportS01CellPhoneNumber],
            [ReportS01StreetCode],
            [ReportS01CityCode],
            [ReportS02FullName],
            [ReportS02IdentityNo],
            [ReportS02BirthOrIncorporationDate],
            [lkpReportS02Gender_ReportGender],
            [ReportS02TelephoneAreaCode],
            [ReportS02TelephonePhoneNumber],
            [ReportS02FaxOrEmail],
            [ReportS02Address01Street],
            [ReportS02Address01House],
            [ReportS02Address01City],
            [ReportS02Address01Zip],
            [ReportS02FirstName],
            [ReportS02SurnameOrCompanyname],
            [ReportS02CellPhoneAreaCode],
            [ReportS02CellPhoneNumber],
            [ReportS02StreetCode],
            [ReportS02CityCode],
            [enmReportS01EntityType_GovtReportEntityType],
            [enmReportS02EntityType_GovtReportEntityType],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID],
            [lkpIdentityNoType],
            [IsPublicBenefitCompany]
        FROM [GovtReportDistributor]
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredGovtReportDistributors]
    @DistributorID INT = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_GovtReportDistributor],
            t.[ID],
            t.[DistributorID],
            t.[ReportFullName],
            t.[ReportIdentityNo],
            t.[ReportBirthOrIncorporationDate],
            t.[lkpReportGender],
            t.[ReportTelephoneAreaCode],
            t.[ReportTelephonePhoneNumber],
            t.[ReportFaxOrEmail],
            t.[ReportAddress01Street],
            t.[ReportAddress01House],
            t.[ReportAddress01City],
            t.[ReportAddress01Zip],
            t.[ReportFirstName],
            t.[ReportSurnameOrCompanyname],
            t.[ReportCellPhoneAreaCode],
            t.[ReportCellPhoneNumber],
            t.[ReportStreetCode],
            t.[ReportCityCode],
            t.[ReportS01FullName],
            t.[ReportS01IdentityNo],
            t.[ReportS01BirthOrIncorporationDate],
            t.[lkpReportS01Gender_ReportGender],
            t.[ReportS01TelephoneAreaCode],
            t.[ReportS01TelephonePhoneNumber],
            t.[ReportS01FaxOrEmail],
            t.[ReportS01Address01Street],
            t.[ReportS01Address01House],
            t.[ReportS01Address01City],
            t.[ReportS01Address01Zip],
            t.[ReportS01FirstName],
            t.[ReportS01SurnameOrCompanyname],
            t.[ReportS01CellPhoneAreaCode],
            t.[ReportS01CellPhoneNumber],
            t.[ReportS01StreetCode],
            t.[ReportS01CityCode],
            t.[ReportS02FullName],
            t.[ReportS02IdentityNo],
            t.[ReportS02BirthOrIncorporationDate],
            t.[lkpReportS02Gender_ReportGender],
            t.[ReportS02TelephoneAreaCode],
            t.[ReportS02TelephonePhoneNumber],
            t.[ReportS02FaxOrEmail],
            t.[ReportS02Address01Street],
            t.[ReportS02Address01House],
            t.[ReportS02Address01City],
            t.[ReportS02Address01Zip],
            t.[ReportS02FirstName],
            t.[ReportS02SurnameOrCompanyname],
            t.[ReportS02CellPhoneAreaCode],
            t.[ReportS02CellPhoneNumber],
            t.[ReportS02StreetCode],
            t.[ReportS02CityCode],
            t.[enmReportS01EntityType_GovtReportEntityType],
            t.[enmReportS02EntityType_GovtReportEntityType],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            t.[lkpIdentityNoType],
            t.[IsPublicBenefitCompany],
            p1.[Text] AS [DistributorID_Text]
        FROM [GovtReportDistributor] t
        LEFT JOIN [ccvwComboList_Distributor] p1 ON t.[DistributorID] = p1.[ID]
        WHERE 1=1
          AND (@DistributorID IS NULL OR t.[DistributorID] = @DistributorID)
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_GovtReportDistributor],
            [ID],
            [DistributorID],
            [ReportFullName],
            [ReportIdentityNo],
            [ReportBirthOrIncorporationDate],
            [lkpReportGender],
            [ReportTelephoneAreaCode],
            [ReportTelephonePhoneNumber],
            [ReportFaxOrEmail],
            [ReportAddress01Street],
            [ReportAddress01House],
            [ReportAddress01City],
            [ReportAddress01Zip],
            [ReportFirstName],
            [ReportSurnameOrCompanyname],
            [ReportCellPhoneAreaCode],
            [ReportCellPhoneNumber],
            [ReportStreetCode],
            [ReportCityCode],
            [ReportS01FullName],
            [ReportS01IdentityNo],
            [ReportS01BirthOrIncorporationDate],
            [lkpReportS01Gender_ReportGender],
            [ReportS01TelephoneAreaCode],
            [ReportS01TelephonePhoneNumber],
            [ReportS01FaxOrEmail],
            [ReportS01Address01Street],
            [ReportS01Address01House],
            [ReportS01Address01City],
            [ReportS01Address01Zip],
            [ReportS01FirstName],
            [ReportS01SurnameOrCompanyname],
            [ReportS01CellPhoneAreaCode],
            [ReportS01CellPhoneNumber],
            [ReportS01StreetCode],
            [ReportS01CityCode],
            [ReportS02FullName],
            [ReportS02IdentityNo],
            [ReportS02BirthOrIncorporationDate],
            [lkpReportS02Gender_ReportGender],
            [ReportS02TelephoneAreaCode],
            [ReportS02TelephonePhoneNumber],
            [ReportS02FaxOrEmail],
            [ReportS02Address01Street],
            [ReportS02Address01House],
            [ReportS02Address01City],
            [ReportS02Address01Zip],
            [ReportS02FirstName],
            [ReportS02SurnameOrCompanyname],
            [ReportS02CellPhoneAreaCode],
            [ReportS02CellPhoneNumber],
            [ReportS02StreetCode],
            [ReportS02CityCode],
            [enmReportS01EntityType_GovtReportEntityType],
            [enmReportS02EntityType_GovtReportEntityType],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID],
            [lkpIdentityNoType],
            [IsPublicBenefitCompany]
        FROM [GovtReportDistributor]
        WHERE 1=1
          AND (@DistributorID IS NULL OR [DistributorID] = @DistributorID)
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetGovtReportDistributorByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_GovtReportDistributor],
        [ID],
        [DistributorID],
        [ReportFullName],
        [ReportIdentityNo],
        [ReportBirthOrIncorporationDate],
        [lkpReportGender],
        [ReportTelephoneAreaCode],
        [ReportTelephonePhoneNumber],
        [ReportFaxOrEmail],
        [ReportAddress01Street],
        [ReportAddress01House],
        [ReportAddress01City],
        [ReportAddress01Zip],
        [ReportFirstName],
        [ReportSurnameOrCompanyname],
        [ReportCellPhoneAreaCode],
        [ReportCellPhoneNumber],
        [ReportStreetCode],
        [ReportCityCode],
        [ReportS01FullName],
        [ReportS01IdentityNo],
        [ReportS01BirthOrIncorporationDate],
        [lkpReportS01Gender_ReportGender],
        [ReportS01TelephoneAreaCode],
        [ReportS01TelephonePhoneNumber],
        [ReportS01FaxOrEmail],
        [ReportS01Address01Street],
        [ReportS01Address01House],
        [ReportS01Address01City],
        [ReportS01Address01Zip],
        [ReportS01FirstName],
        [ReportS01SurnameOrCompanyname],
        [ReportS01CellPhoneAreaCode],
        [ReportS01CellPhoneNumber],
        [ReportS01StreetCode],
        [ReportS01CityCode],
        [ReportS02FullName],
        [ReportS02IdentityNo],
        [ReportS02BirthOrIncorporationDate],
        [lkpReportS02Gender_ReportGender],
        [ReportS02TelephoneAreaCode],
        [ReportS02TelephonePhoneNumber],
        [ReportS02FaxOrEmail],
        [ReportS02Address01Street],
        [ReportS02Address01House],
        [ReportS02Address01City],
        [ReportS02Address01Zip],
        [ReportS02FirstName],
        [ReportS02SurnameOrCompanyname],
        [ReportS02CellPhoneAreaCode],
        [ReportS02CellPhoneNumber],
        [ReportS02StreetCode],
        [ReportS02CityCode],
        [enmReportS01EntityType_GovtReportEntityType],
        [enmReportS02EntityType_GovtReportEntityType],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [lkpIdentityNoType],
        [IsPublicBenefitCompany]
    FROM [GovtReportDistributor]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddGovtReportDistributor]
    @TableName_GovtReportDistributor bit = NULL,
    @DistributorID bigint = NULL,
    @ReportFullName nvarchar(100) = NULL,
    @ReportIdentityNo varchar(50) = NULL,
    @ReportBirthOrIncorporationDate datetime = NULL,
    @lkpReportGender int = NULL,
    @ReportTelephoneAreaCode varchar(50) = NULL,
    @ReportTelephonePhoneNumber varchar(50) = NULL,
    @ReportFaxOrEmail varchar(50) = NULL,
    @ReportAddress01Street nvarchar(100) = NULL,
    @ReportAddress01House nvarchar(100) = NULL,
    @ReportAddress01City nvarchar(100) = NULL,
    @ReportAddress01Zip nvarchar(100) = NULL,
    @ReportFirstName nvarchar(100) = NULL,
    @ReportSurnameOrCompanyname nvarchar(100) = NULL,
    @ReportCellPhoneAreaCode varchar(50) = NULL,
    @ReportCellPhoneNumber varchar(50) = NULL,
    @ReportStreetCode nvarchar(100) = NULL,
    @ReportCityCode nvarchar(100) = NULL,
    @ReportS01FullName nvarchar(100) = NULL,
    @ReportS01IdentityNo varchar(50) = NULL,
    @ReportS01BirthOrIncorporationDate datetime = NULL,
    @lkpReportS01Gender_ReportGender int = NULL,
    @ReportS01TelephoneAreaCode varchar(50) = NULL,
    @ReportS01TelephonePhoneNumber varchar(50) = NULL,
    @ReportS01FaxOrEmail varchar(50) = NULL,
    @ReportS01Address01Street nvarchar(100) = NULL,
    @ReportS01Address01House nvarchar(100) = NULL,
    @ReportS01Address01City nvarchar(100) = NULL,
    @ReportS01Address01Zip nvarchar(100) = NULL,
    @ReportS01FirstName nvarchar(100) = NULL,
    @ReportS01SurnameOrCompanyname nvarchar(100) = NULL,
    @ReportS01CellPhoneAreaCode varchar(50) = NULL,
    @ReportS01CellPhoneNumber varchar(50) = NULL,
    @ReportS01StreetCode nvarchar(100) = NULL,
    @ReportS01CityCode nvarchar(100) = NULL,
    @ReportS02FullName nvarchar(100) = NULL,
    @ReportS02IdentityNo varchar(50) = NULL,
    @ReportS02BirthOrIncorporationDate datetime = NULL,
    @lkpReportS02Gender_ReportGender int = NULL,
    @ReportS02TelephoneAreaCode varchar(50) = NULL,
    @ReportS02TelephonePhoneNumber varchar(50) = NULL,
    @ReportS02FaxOrEmail varchar(50) = NULL,
    @ReportS02Address01Street nvarchar(100) = NULL,
    @ReportS02Address01House nvarchar(100) = NULL,
    @ReportS02Address01City nvarchar(100) = NULL,
    @ReportS02Address01Zip nvarchar(100) = NULL,
    @ReportS02FirstName nvarchar(100) = NULL,
    @ReportS02SurnameOrCompanyname nvarchar(100) = NULL,
    @ReportS02CellPhoneAreaCode varchar(50) = NULL,
    @ReportS02CellPhoneNumber varchar(50) = NULL,
    @ReportS02StreetCode nvarchar(100) = NULL,
    @ReportS02CityCode nvarchar(100) = NULL,
    @enmReportS01EntityType_GovtReportEntityType varchar(50) = NULL,
    @enmReportS02EntityType_GovtReportEntityType varchar(50) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @lkpIdentityNoType int = NULL,
    @IsPublicBenefitCompany bit = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [GovtReportDistributor] (
        [TableName_GovtReportDistributor],
        [DistributorID],
        [ReportFullName],
        [ReportIdentityNo],
        [ReportBirthOrIncorporationDate],
        [lkpReportGender],
        [ReportTelephoneAreaCode],
        [ReportTelephonePhoneNumber],
        [ReportFaxOrEmail],
        [ReportAddress01Street],
        [ReportAddress01House],
        [ReportAddress01City],
        [ReportAddress01Zip],
        [ReportFirstName],
        [ReportSurnameOrCompanyname],
        [ReportCellPhoneAreaCode],
        [ReportCellPhoneNumber],
        [ReportStreetCode],
        [ReportCityCode],
        [ReportS01FullName],
        [ReportS01IdentityNo],
        [ReportS01BirthOrIncorporationDate],
        [lkpReportS01Gender_ReportGender],
        [ReportS01TelephoneAreaCode],
        [ReportS01TelephonePhoneNumber],
        [ReportS01FaxOrEmail],
        [ReportS01Address01Street],
        [ReportS01Address01House],
        [ReportS01Address01City],
        [ReportS01Address01Zip],
        [ReportS01FirstName],
        [ReportS01SurnameOrCompanyname],
        [ReportS01CellPhoneAreaCode],
        [ReportS01CellPhoneNumber],
        [ReportS01StreetCode],
        [ReportS01CityCode],
        [ReportS02FullName],
        [ReportS02IdentityNo],
        [ReportS02BirthOrIncorporationDate],
        [lkpReportS02Gender_ReportGender],
        [ReportS02TelephoneAreaCode],
        [ReportS02TelephonePhoneNumber],
        [ReportS02FaxOrEmail],
        [ReportS02Address01Street],
        [ReportS02Address01House],
        [ReportS02Address01City],
        [ReportS02Address01Zip],
        [ReportS02FirstName],
        [ReportS02SurnameOrCompanyname],
        [ReportS02CellPhoneAreaCode],
        [ReportS02CellPhoneNumber],
        [ReportS02StreetCode],
        [ReportS02CityCode],
        [enmReportS01EntityType_GovtReportEntityType],
        [enmReportS02EntityType_GovtReportEntityType],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [lkpIdentityNoType],
        [IsPublicBenefitCompany],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_GovtReportDistributor,
        @DistributorID,
        @ReportFullName,
        @ReportIdentityNo,
        @ReportBirthOrIncorporationDate,
        @lkpReportGender,
        @ReportTelephoneAreaCode,
        @ReportTelephonePhoneNumber,
        @ReportFaxOrEmail,
        @ReportAddress01Street,
        @ReportAddress01House,
        @ReportAddress01City,
        @ReportAddress01Zip,
        @ReportFirstName,
        @ReportSurnameOrCompanyname,
        @ReportCellPhoneAreaCode,
        @ReportCellPhoneNumber,
        @ReportStreetCode,
        @ReportCityCode,
        @ReportS01FullName,
        @ReportS01IdentityNo,
        @ReportS01BirthOrIncorporationDate,
        @lkpReportS01Gender_ReportGender,
        @ReportS01TelephoneAreaCode,
        @ReportS01TelephonePhoneNumber,
        @ReportS01FaxOrEmail,
        @ReportS01Address01Street,
        @ReportS01Address01House,
        @ReportS01Address01City,
        @ReportS01Address01Zip,
        @ReportS01FirstName,
        @ReportS01SurnameOrCompanyname,
        @ReportS01CellPhoneAreaCode,
        @ReportS01CellPhoneNumber,
        @ReportS01StreetCode,
        @ReportS01CityCode,
        @ReportS02FullName,
        @ReportS02IdentityNo,
        @ReportS02BirthOrIncorporationDate,
        @lkpReportS02Gender_ReportGender,
        @ReportS02TelephoneAreaCode,
        @ReportS02TelephonePhoneNumber,
        @ReportS02FaxOrEmail,
        @ReportS02Address01Street,
        @ReportS02Address01House,
        @ReportS02Address01City,
        @ReportS02Address01Zip,
        @ReportS02FirstName,
        @ReportS02SurnameOrCompanyname,
        @ReportS02CellPhoneAreaCode,
        @ReportS02CellPhoneNumber,
        @ReportS02StreetCode,
        @ReportS02CityCode,
        @enmReportS01EntityType_GovtReportEntityType,
        @enmReportS02EntityType_GovtReportEntityType,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        @lkpIdentityNoType,
        @IsPublicBenefitCompany,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateGovtReportDistributor]
    @ID bigint,
    @TableName_GovtReportDistributor bit = NULL,
    @DistributorID bigint = NULL,
    @ReportFullName nvarchar(100) = NULL,
    @ReportIdentityNo varchar(50) = NULL,
    @ReportBirthOrIncorporationDate datetime = NULL,
    @lkpReportGender int = NULL,
    @ReportTelephoneAreaCode varchar(50) = NULL,
    @ReportTelephonePhoneNumber varchar(50) = NULL,
    @ReportFaxOrEmail varchar(50) = NULL,
    @ReportAddress01Street nvarchar(100) = NULL,
    @ReportAddress01House nvarchar(100) = NULL,
    @ReportAddress01City nvarchar(100) = NULL,
    @ReportAddress01Zip nvarchar(100) = NULL,
    @ReportFirstName nvarchar(100) = NULL,
    @ReportSurnameOrCompanyname nvarchar(100) = NULL,
    @ReportCellPhoneAreaCode varchar(50) = NULL,
    @ReportCellPhoneNumber varchar(50) = NULL,
    @ReportStreetCode nvarchar(100) = NULL,
    @ReportCityCode nvarchar(100) = NULL,
    @ReportS01FullName nvarchar(100) = NULL,
    @ReportS01IdentityNo varchar(50) = NULL,
    @ReportS01BirthOrIncorporationDate datetime = NULL,
    @lkpReportS01Gender_ReportGender int = NULL,
    @ReportS01TelephoneAreaCode varchar(50) = NULL,
    @ReportS01TelephonePhoneNumber varchar(50) = NULL,
    @ReportS01FaxOrEmail varchar(50) = NULL,
    @ReportS01Address01Street nvarchar(100) = NULL,
    @ReportS01Address01House nvarchar(100) = NULL,
    @ReportS01Address01City nvarchar(100) = NULL,
    @ReportS01Address01Zip nvarchar(100) = NULL,
    @ReportS01FirstName nvarchar(100) = NULL,
    @ReportS01SurnameOrCompanyname nvarchar(100) = NULL,
    @ReportS01CellPhoneAreaCode varchar(50) = NULL,
    @ReportS01CellPhoneNumber varchar(50) = NULL,
    @ReportS01StreetCode nvarchar(100) = NULL,
    @ReportS01CityCode nvarchar(100) = NULL,
    @ReportS02FullName nvarchar(100) = NULL,
    @ReportS02IdentityNo varchar(50) = NULL,
    @ReportS02BirthOrIncorporationDate datetime = NULL,
    @lkpReportS02Gender_ReportGender int = NULL,
    @ReportS02TelephoneAreaCode varchar(50) = NULL,
    @ReportS02TelephonePhoneNumber varchar(50) = NULL,
    @ReportS02FaxOrEmail varchar(50) = NULL,
    @ReportS02Address01Street nvarchar(100) = NULL,
    @ReportS02Address01House nvarchar(100) = NULL,
    @ReportS02Address01City nvarchar(100) = NULL,
    @ReportS02Address01Zip nvarchar(100) = NULL,
    @ReportS02FirstName nvarchar(100) = NULL,
    @ReportS02SurnameOrCompanyname nvarchar(100) = NULL,
    @ReportS02CellPhoneAreaCode varchar(50) = NULL,
    @ReportS02CellPhoneNumber varchar(50) = NULL,
    @ReportS02StreetCode nvarchar(100) = NULL,
    @ReportS02CityCode nvarchar(100) = NULL,
    @enmReportS01EntityType_GovtReportEntityType varchar(50) = NULL,
    @enmReportS02EntityType_GovtReportEntityType varchar(50) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @lkpIdentityNoType int = NULL,
    @IsPublicBenefitCompany bit = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [GovtReportDistributor]
    SET
        [TableName_GovtReportDistributor] = @TableName_GovtReportDistributor,
        [DistributorID] = @DistributorID,
        [ReportFullName] = @ReportFullName,
        [ReportIdentityNo] = @ReportIdentityNo,
        [ReportBirthOrIncorporationDate] = @ReportBirthOrIncorporationDate,
        [lkpReportGender] = @lkpReportGender,
        [ReportTelephoneAreaCode] = @ReportTelephoneAreaCode,
        [ReportTelephonePhoneNumber] = @ReportTelephonePhoneNumber,
        [ReportFaxOrEmail] = @ReportFaxOrEmail,
        [ReportAddress01Street] = @ReportAddress01Street,
        [ReportAddress01House] = @ReportAddress01House,
        [ReportAddress01City] = @ReportAddress01City,
        [ReportAddress01Zip] = @ReportAddress01Zip,
        [ReportFirstName] = @ReportFirstName,
        [ReportSurnameOrCompanyname] = @ReportSurnameOrCompanyname,
        [ReportCellPhoneAreaCode] = @ReportCellPhoneAreaCode,
        [ReportCellPhoneNumber] = @ReportCellPhoneNumber,
        [ReportStreetCode] = @ReportStreetCode,
        [ReportCityCode] = @ReportCityCode,
        [ReportS01FullName] = @ReportS01FullName,
        [ReportS01IdentityNo] = @ReportS01IdentityNo,
        [ReportS01BirthOrIncorporationDate] = @ReportS01BirthOrIncorporationDate,
        [lkpReportS01Gender_ReportGender] = @lkpReportS01Gender_ReportGender,
        [ReportS01TelephoneAreaCode] = @ReportS01TelephoneAreaCode,
        [ReportS01TelephonePhoneNumber] = @ReportS01TelephonePhoneNumber,
        [ReportS01FaxOrEmail] = @ReportS01FaxOrEmail,
        [ReportS01Address01Street] = @ReportS01Address01Street,
        [ReportS01Address01House] = @ReportS01Address01House,
        [ReportS01Address01City] = @ReportS01Address01City,
        [ReportS01Address01Zip] = @ReportS01Address01Zip,
        [ReportS01FirstName] = @ReportS01FirstName,
        [ReportS01SurnameOrCompanyname] = @ReportS01SurnameOrCompanyname,
        [ReportS01CellPhoneAreaCode] = @ReportS01CellPhoneAreaCode,
        [ReportS01CellPhoneNumber] = @ReportS01CellPhoneNumber,
        [ReportS01StreetCode] = @ReportS01StreetCode,
        [ReportS01CityCode] = @ReportS01CityCode,
        [ReportS02FullName] = @ReportS02FullName,
        [ReportS02IdentityNo] = @ReportS02IdentityNo,
        [ReportS02BirthOrIncorporationDate] = @ReportS02BirthOrIncorporationDate,
        [lkpReportS02Gender_ReportGender] = @lkpReportS02Gender_ReportGender,
        [ReportS02TelephoneAreaCode] = @ReportS02TelephoneAreaCode,
        [ReportS02TelephonePhoneNumber] = @ReportS02TelephonePhoneNumber,
        [ReportS02FaxOrEmail] = @ReportS02FaxOrEmail,
        [ReportS02Address01Street] = @ReportS02Address01Street,
        [ReportS02Address01House] = @ReportS02Address01House,
        [ReportS02Address01City] = @ReportS02Address01City,
        [ReportS02Address01Zip] = @ReportS02Address01Zip,
        [ReportS02FirstName] = @ReportS02FirstName,
        [ReportS02SurnameOrCompanyname] = @ReportS02SurnameOrCompanyname,
        [ReportS02CellPhoneAreaCode] = @ReportS02CellPhoneAreaCode,
        [ReportS02CellPhoneNumber] = @ReportS02CellPhoneNumber,
        [ReportS02StreetCode] = @ReportS02StreetCode,
        [ReportS02CityCode] = @ReportS02CityCode,
        [enmReportS01EntityType_GovtReportEntityType] = @enmReportS01EntityType_GovtReportEntityType,
        [enmReportS02EntityType_GovtReportEntityType] = @enmReportS02EntityType_GovtReportEntityType,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [lkpIdentityNoType] = @lkpIdentityNoType,
        [IsPublicBenefitCompany] = @IsPublicBenefitCompany,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteGovtReportDistributor]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [GovtReportDistributor]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_GovtReportDistributor_DistributorID
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetGovtReportDistributorByDISTRIBUTORID]
    @DistributorID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_GovtReportDistributor],
        [ID],
        [DistributorID],
        [ReportFullName],
        [ReportIdentityNo],
        [ReportBirthOrIncorporationDate],
        [lkpReportGender],
        [ReportTelephoneAreaCode],
        [ReportTelephonePhoneNumber],
        [ReportFaxOrEmail],
        [ReportAddress01Street],
        [ReportAddress01House],
        [ReportAddress01City],
        [ReportAddress01Zip],
        [ReportFirstName],
        [ReportSurnameOrCompanyname],
        [ReportCellPhoneAreaCode],
        [ReportCellPhoneNumber],
        [ReportStreetCode],
        [ReportCityCode],
        [ReportS01FullName],
        [ReportS01IdentityNo],
        [ReportS01BirthOrIncorporationDate],
        [lkpReportS01Gender_ReportGender],
        [ReportS01TelephoneAreaCode],
        [ReportS01TelephonePhoneNumber],
        [ReportS01FaxOrEmail],
        [ReportS01Address01Street],
        [ReportS01Address01House],
        [ReportS01Address01City],
        [ReportS01Address01Zip],
        [ReportS01FirstName],
        [ReportS01SurnameOrCompanyname],
        [ReportS01CellPhoneAreaCode],
        [ReportS01CellPhoneNumber],
        [ReportS01StreetCode],
        [ReportS01CityCode],
        [ReportS02FullName],
        [ReportS02IdentityNo],
        [ReportS02BirthOrIncorporationDate],
        [lkpReportS02Gender_ReportGender],
        [ReportS02TelephoneAreaCode],
        [ReportS02TelephonePhoneNumber],
        [ReportS02FaxOrEmail],
        [ReportS02Address01Street],
        [ReportS02Address01House],
        [ReportS02Address01City],
        [ReportS02Address01Zip],
        [ReportS02FirstName],
        [ReportS02SurnameOrCompanyname],
        [ReportS02CellPhoneAreaCode],
        [ReportS02CellPhoneNumber],
        [ReportS02StreetCode],
        [ReportS02CityCode],
        [enmReportS01EntityType_GovtReportEntityType],
        [enmReportS02EntityType_GovtReportEntityType],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [lkpIdentityNoType],
        [IsPublicBenefitCompany]
    FROM [GovtReportDistributor]
    WHERE [DistributorID] = @DistributorID
;
END

GO


-- =========================================
-- Stored Procedures for Table: GovtReportPayment
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllGovtReportPayments]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_GovtReportPayment],
            t.[ID],
            t.[GovtReport00ID],
            t.[PaymentDay],
            t.[EntityID],
            t.[enmEntityType_AccountOwner],
            t.[TotalAmount],
            t.[NumberOfTransactions],
            t.[clc_PaymentMonth],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            p1.[Text] AS [GovtReport00ID_Text]
        FROM [GovtReportPayment] t
        LEFT JOIN [ccvwComboList_GovtReport00] p1 ON t.[GovtReport00ID] = p1.[ID]
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_GovtReportPayment],
            [ID],
            [GovtReport00ID],
            [PaymentDay],
            [EntityID],
            [enmEntityType_AccountOwner],
            [TotalAmount],
            [NumberOfTransactions],
            [clc_PaymentMonth],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID]
        FROM [GovtReportPayment]
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredGovtReportPayments]
    @GovtReport00ID INT = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_GovtReportPayment],
            t.[ID],
            t.[GovtReport00ID],
            t.[PaymentDay],
            t.[EntityID],
            t.[enmEntityType_AccountOwner],
            t.[TotalAmount],
            t.[NumberOfTransactions],
            t.[clc_PaymentMonth],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            p1.[Text] AS [GovtReport00ID_Text]
        FROM [GovtReportPayment] t
        LEFT JOIN [ccvwComboList_GovtReport00] p1 ON t.[GovtReport00ID] = p1.[ID]
        WHERE 1=1
          AND (@GovtReport00ID IS NULL OR t.[GovtReport00ID] = @GovtReport00ID)
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_GovtReportPayment],
            [ID],
            [GovtReport00ID],
            [PaymentDay],
            [EntityID],
            [enmEntityType_AccountOwner],
            [TotalAmount],
            [NumberOfTransactions],
            [clc_PaymentMonth],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID]
        FROM [GovtReportPayment]
        WHERE 1=1
          AND (@GovtReport00ID IS NULL OR [GovtReport00ID] = @GovtReport00ID)
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetGovtReportPaymentByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_GovtReportPayment],
        [ID],
        [GovtReport00ID],
        [PaymentDay],
        [EntityID],
        [enmEntityType_AccountOwner],
        [TotalAmount],
        [NumberOfTransactions],
        [clc_PaymentMonth],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [GovtReportPayment]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddGovtReportPayment]
    @TableName_GovtReportPayment bit = NULL,
    @GovtReport00ID bigint = NULL,
    @PaymentDay datetime = NULL,
    @EntityID bigint = NULL,
    @enmEntityType_AccountOwner varchar(50) = NULL,
    @TotalAmount decimal(18,0) = NULL,
    @NumberOfTransactions int = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [GovtReportPayment] (
        [TableName_GovtReportPayment],
        [GovtReport00ID],
        [PaymentDay],
        [EntityID],
        [enmEntityType_AccountOwner],
        [TotalAmount],
        [NumberOfTransactions],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_GovtReportPayment,
        @GovtReport00ID,
        @PaymentDay,
        @EntityID,
        @enmEntityType_AccountOwner,
        @TotalAmount,
        @NumberOfTransactions,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateGovtReportPayment]
    @ID bigint,
    @TableName_GovtReportPayment bit = NULL,
    @GovtReport00ID bigint = NULL,
    @PaymentDay datetime = NULL,
    @EntityID bigint = NULL,
    @enmEntityType_AccountOwner varchar(50) = NULL,
    @TotalAmount decimal(18,0) = NULL,
    @NumberOfTransactions int = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [GovtReportPayment]
    SET
        [TableName_GovtReportPayment] = @TableName_GovtReportPayment,
        [GovtReport00ID] = @GovtReport00ID,
        [PaymentDay] = @PaymentDay,
        [EntityID] = @EntityID,
        [enmEntityType_AccountOwner] = @enmEntityType_AccountOwner,
        [TotalAmount] = @TotalAmount,
        [NumberOfTransactions] = @NumberOfTransactions,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteGovtReportPayment]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [GovtReportPayment]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_GovtReportPayment_GovtReport00ID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillGovtReportPaymentByGOVTREPORT00ID]
    @GovtReport00ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_GovtReportPayment],
        [ID],
        [GovtReport00ID],
        [PaymentDay],
        [EntityID],
        [enmEntityType_AccountOwner],
        [TotalAmount],
        [NumberOfTransactions],
        [clc_PaymentMonth],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [GovtReportPayment]
    WHERE [GovtReport00ID] = @GovtReport00ID
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: ImportTransactionLoad
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllImportTransactionLoads]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_ImportTransactionLoad],
            t.[ID],
            t.[DistributorID],
            t.[WhenInitialized],
            t.[InitiatedByUserID],
            t.[spt_WhenCompleted],
            t.[LoadsRequested],
            t.[LoadsApproved],
            t.[spt_Comments],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            p1.[Text] AS [DistributorID_Text],
            p2.[Text] AS [InitiatedByUserID_Text]
        FROM [ImportTransactionLoad] t
        LEFT JOIN [ccvwComboList_Distributor] p1 ON t.[DistributorID] = p1.[ID]
        LEFT JOIN [ccvwComboList_c_User] p2 ON t.[InitiatedByUserID] = p2.[ID]
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_ImportTransactionLoad],
            [ID],
            [DistributorID],
            [WhenInitialized],
            [InitiatedByUserID],
            [spt_WhenCompleted],
            [LoadsRequested],
            [LoadsApproved],
            [spt_Comments],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID]
        FROM [ImportTransactionLoad]
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredImportTransactionLoads]
    @DistributorID INT = NULL,
    @InitiatedByUserID INT = NULL,
    @spt_WhenCompleted DATETIME = NULL,
    @WhenInitialized DATETIME = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_ImportTransactionLoad],
            t.[ID],
            t.[DistributorID],
            t.[WhenInitialized],
            t.[InitiatedByUserID],
            t.[spt_WhenCompleted],
            t.[LoadsRequested],
            t.[LoadsApproved],
            t.[spt_Comments],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            p1.[Text] AS [DistributorID_Text],
            p2.[Text] AS [InitiatedByUserID_Text]
        FROM [ImportTransactionLoad] t
        LEFT JOIN [ccvwComboList_Distributor] p1 ON t.[DistributorID] = p1.[ID]
        LEFT JOIN [ccvwComboList_c_User] p2 ON t.[InitiatedByUserID] = p2.[ID]
        WHERE 1=1
          AND (@DistributorID IS NULL OR t.[DistributorID] = @DistributorID)
          AND (@InitiatedByUserID IS NULL OR t.[InitiatedByUserID] = @InitiatedByUserID)
          AND (@spt_WhenCompleted IS NULL OR t.[spt_WhenCompleted] = @spt_WhenCompleted)
          AND (@WhenInitialized IS NULL OR t.[WhenInitialized] = @WhenInitialized)
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_ImportTransactionLoad],
            [ID],
            [DistributorID],
            [WhenInitialized],
            [InitiatedByUserID],
            [spt_WhenCompleted],
            [LoadsRequested],
            [LoadsApproved],
            [spt_Comments],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID]
        FROM [ImportTransactionLoad]
        WHERE 1=1
          AND (@DistributorID IS NULL OR [DistributorID] = @DistributorID)
          AND (@InitiatedByUserID IS NULL OR [InitiatedByUserID] = @InitiatedByUserID)
          AND (@spt_WhenCompleted IS NULL OR [spt_WhenCompleted] = @spt_WhenCompleted)
          AND (@WhenInitialized IS NULL OR [WhenInitialized] = @WhenInitialized)
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetImportTransactionLoadByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_ImportTransactionLoad],
        [ID],
        [DistributorID],
        [WhenInitialized],
        [InitiatedByUserID],
        [spt_WhenCompleted],
        [LoadsRequested],
        [LoadsApproved],
        [spt_Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [ImportTransactionLoad]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddImportTransactionLoad]
    @TableName_ImportTransactionLoad bit = NULL,
    @DistributorID bigint,
    @WhenInitialized datetimeoffset,
    @InitiatedByUserID bigint = NULL,
    @spt_WhenCompleted datetimeoffset = NULL,
    @LoadsRequested int = NULL,
    @LoadsApproved int = NULL,
    @spt_Comments nvarchar(4000) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [ImportTransactionLoad] (
        [TableName_ImportTransactionLoad],
        [DistributorID],
        [WhenInitialized],
        [InitiatedByUserID],
        [spt_WhenCompleted],
        [LoadsRequested],
        [LoadsApproved],
        [spt_Comments],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_ImportTransactionLoad,
        @DistributorID,
        @WhenInitialized,
        @InitiatedByUserID,
        @spt_WhenCompleted,
        @LoadsRequested,
        @LoadsApproved,
        @spt_Comments,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateImportTransactionLoad]
    @ID bigint,
    @TableName_ImportTransactionLoad bit = NULL,
    @DistributorID bigint,
    @WhenInitialized datetimeoffset,
    @InitiatedByUserID bigint = NULL,
    @spt_WhenCompleted datetimeoffset = NULL,
    @LoadsRequested int = NULL,
    @LoadsApproved int = NULL,
    @spt_Comments nvarchar(4000) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [ImportTransactionLoad]
    SET
        [TableName_ImportTransactionLoad] = @TableName_ImportTransactionLoad,
        [DistributorID] = @DistributorID,
        [WhenInitialized] = @WhenInitialized,
        [InitiatedByUserID] = @InitiatedByUserID,
        [spt_WhenCompleted] = @spt_WhenCompleted,
        [LoadsRequested] = @LoadsRequested,
        [LoadsApproved] = @LoadsApproved,
        [spt_Comments] = @spt_Comments,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteImportTransactionLoad]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [ImportTransactionLoad]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_ImportTransactionLoad_Distributor
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillImportTransactionLoadByDISTRIBUTORID]
    @DistributorID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_ImportTransactionLoad],
        [ID],
        [DistributorID],
        [WhenInitialized],
        [InitiatedByUserID],
        [spt_WhenCompleted],
        [LoadsRequested],
        [LoadsApproved],
        [spt_Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [ImportTransactionLoad]
    WHERE [DistributorID] = @DistributorID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_ImportTransactionLoad_InitiatedByUser
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillImportTransactionLoadByINITIATEDBYUSERID]
    @InitiatedByUserID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_ImportTransactionLoad],
        [ID],
        [DistributorID],
        [WhenInitialized],
        [InitiatedByUserID],
        [spt_WhenCompleted],
        [LoadsRequested],
        [LoadsApproved],
        [spt_Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [ImportTransactionLoad]
    WHERE [InitiatedByUserID] = @InitiatedByUserID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_ImportTransactionLoad_WhenCompleted
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillImportTransactionLoadBySPTWHENCOMPLETED]
    @spt_WhenCompleted datetimeoffset
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_ImportTransactionLoad],
        [ID],
        [DistributorID],
        [WhenInitialized],
        [InitiatedByUserID],
        [spt_WhenCompleted],
        [LoadsRequested],
        [LoadsApproved],
        [spt_Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [ImportTransactionLoad]
    WHERE [spt_WhenCompleted] = @spt_WhenCompleted
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_ImportTransactionLoad_WhenInitialized
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillImportTransactionLoadByWHENINITIALIZED]
    @WhenInitialized datetimeoffset
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_ImportTransactionLoad],
        [ID],
        [DistributorID],
        [WhenInitialized],
        [InitiatedByUserID],
        [spt_WhenCompleted],
        [LoadsRequested],
        [LoadsApproved],
        [spt_Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [ImportTransactionLoad]
    WHERE [WhenInitialized] = @WhenInitialized
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: ImportTransactionLoadRow
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllImportTransactionLoadRows]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_ImportTransactionLoadRow],
            t.[ID],
            t.[ImportTransactionLoadID],
            t.[CustomerPhoneNumber],
            t.[enmCurrency],
            t.[Amount],
            t.[CardCid],
            t.[CardLast4Numbers],
            t.[LoadReference],
            t.[CustomerFirstName],
            t.[CustomerLastName],
            t.[CustomerIdentifier],
            t.[lgCustomerID],
            t.[lgCardID],
            t.[WhenInitialized],
            t.[TransactionLoadID],
            t.[spt_WhenCompleted],
            t.[IsSuccessful],
            t.[lgLoggedAlertID],
            t.[spt_Comments],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            p1.[Text] AS [ImportTransactionLoadID_Text],
            p2.[Text] AS [lgCustomerID_Text],
            p3.[Text] AS [lgCardID_Text],
            p4.[Text] AS [TransactionLoadID_Text],
            p5.[Text] AS [lgLoggedAlertID_Text]
        FROM [ImportTransactionLoadRow] t
        LEFT JOIN [ccvwComboList_ImportTransactionLoad] p1 ON t.[ImportTransactionLoadID] = p1.[ID]
        LEFT JOIN [ccvwComboList_Customer] p2 ON t.[lgCustomerID] = p2.[ID]
        LEFT JOIN [ccvwComboList_Card] p3 ON t.[lgCardID] = p3.[ID]
        LEFT JOIN [ccvwComboList_TransactionLoad] p4 ON t.[TransactionLoadID] = p4.[ID]
        LEFT JOIN [ccvwComboList_c_LoggedAlert] p5 ON t.[lgLoggedAlertID] = p5.[ID]
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_ImportTransactionLoadRow],
            [ID],
            [ImportTransactionLoadID],
            [CustomerPhoneNumber],
            [enmCurrency],
            [Amount],
            [CardCid],
            [CardLast4Numbers],
            [LoadReference],
            [CustomerFirstName],
            [CustomerLastName],
            [CustomerIdentifier],
            [lgCustomerID],
            [lgCardID],
            [WhenInitialized],
            [TransactionLoadID],
            [spt_WhenCompleted],
            [IsSuccessful],
            [lgLoggedAlertID],
            [spt_Comments],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID]
        FROM [ImportTransactionLoadRow]
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredImportTransactionLoadRows]
    @lgCardID INT = NULL,
    @lgCustomerID INT = NULL,
    @ImportTransactionLoadID INT = NULL,
    @lgLoggedAlertID INT = NULL,
    @TransactionLoadID INT = NULL,
    @spt_WhenCompleted DATETIME = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_ImportTransactionLoadRow],
            t.[ID],
            t.[ImportTransactionLoadID],
            t.[CustomerPhoneNumber],
            t.[enmCurrency],
            t.[Amount],
            t.[CardCid],
            t.[CardLast4Numbers],
            t.[LoadReference],
            t.[CustomerFirstName],
            t.[CustomerLastName],
            t.[CustomerIdentifier],
            t.[lgCustomerID],
            t.[lgCardID],
            t.[WhenInitialized],
            t.[TransactionLoadID],
            t.[spt_WhenCompleted],
            t.[IsSuccessful],
            t.[lgLoggedAlertID],
            t.[spt_Comments],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            p1.[Text] AS [ImportTransactionLoadID_Text],
            p2.[Text] AS [lgCustomerID_Text],
            p3.[Text] AS [lgCardID_Text],
            p4.[Text] AS [TransactionLoadID_Text],
            p5.[Text] AS [lgLoggedAlertID_Text]
        FROM [ImportTransactionLoadRow] t
        LEFT JOIN [ccvwComboList_ImportTransactionLoad] p1 ON t.[ImportTransactionLoadID] = p1.[ID]
        LEFT JOIN [ccvwComboList_Customer] p2 ON t.[lgCustomerID] = p2.[ID]
        LEFT JOIN [ccvwComboList_Card] p3 ON t.[lgCardID] = p3.[ID]
        LEFT JOIN [ccvwComboList_TransactionLoad] p4 ON t.[TransactionLoadID] = p4.[ID]
        LEFT JOIN [ccvwComboList_c_LoggedAlert] p5 ON t.[lgLoggedAlertID] = p5.[ID]
        WHERE 1=1
          AND (@lgCardID IS NULL OR t.[lgCardID] = @lgCardID)
          AND (@lgCustomerID IS NULL OR t.[lgCustomerID] = @lgCustomerID)
          AND (@ImportTransactionLoadID IS NULL OR t.[ImportTransactionLoadID] = @ImportTransactionLoadID)
          AND (@lgLoggedAlertID IS NULL OR t.[lgLoggedAlertID] = @lgLoggedAlertID)
          AND (@TransactionLoadID IS NULL OR t.[TransactionLoadID] = @TransactionLoadID)
          AND (@spt_WhenCompleted IS NULL OR t.[spt_WhenCompleted] = @spt_WhenCompleted)
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_ImportTransactionLoadRow],
            [ID],
            [ImportTransactionLoadID],
            [CustomerPhoneNumber],
            [enmCurrency],
            [Amount],
            [CardCid],
            [CardLast4Numbers],
            [LoadReference],
            [CustomerFirstName],
            [CustomerLastName],
            [CustomerIdentifier],
            [lgCustomerID],
            [lgCardID],
            [WhenInitialized],
            [TransactionLoadID],
            [spt_WhenCompleted],
            [IsSuccessful],
            [lgLoggedAlertID],
            [spt_Comments],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID]
        FROM [ImportTransactionLoadRow]
        WHERE 1=1
          AND (@lgCardID IS NULL OR [lgCardID] = @lgCardID)
          AND (@lgCustomerID IS NULL OR [lgCustomerID] = @lgCustomerID)
          AND (@ImportTransactionLoadID IS NULL OR [ImportTransactionLoadID] = @ImportTransactionLoadID)
          AND (@lgLoggedAlertID IS NULL OR [lgLoggedAlertID] = @lgLoggedAlertID)
          AND (@TransactionLoadID IS NULL OR [TransactionLoadID] = @TransactionLoadID)
          AND (@spt_WhenCompleted IS NULL OR [spt_WhenCompleted] = @spt_WhenCompleted)
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetImportTransactionLoadRowByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_ImportTransactionLoadRow],
        [ID],
        [ImportTransactionLoadID],
        [CustomerPhoneNumber],
        [enmCurrency],
        [Amount],
        [CardCid],
        [CardLast4Numbers],
        [LoadReference],
        [CustomerFirstName],
        [CustomerLastName],
        [CustomerIdentifier],
        [lgCustomerID],
        [lgCardID],
        [WhenInitialized],
        [TransactionLoadID],
        [spt_WhenCompleted],
        [IsSuccessful],
        [lgLoggedAlertID],
        [spt_Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [ImportTransactionLoadRow]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddImportTransactionLoadRow]
    @TableName_ImportTransactionLoadRow bit = NULL,
    @ImportTransactionLoadID bigint,
    @CustomerPhoneNumber varchar(50),
    @enmCurrency varchar(4),
    @Amount decimal(18,0),
    @CardCid varchar(50),
    @CardLast4Numbers varchar(4),
    @LoadReference nvarchar(100) = NULL,
    @CustomerFirstName nvarchar(100),
    @CustomerLastName nvarchar(100),
    @CustomerIdentifier varchar(104),
    @lgCustomerID bigint = NULL,
    @lgCardID bigint = NULL,
    @WhenInitialized datetimeoffset = NULL,
    @TransactionLoadID bigint = NULL,
    @spt_WhenCompleted datetimeoffset = NULL,
    @IsSuccessful bit = NULL,
    @lgLoggedAlertID bigint = NULL,
    @spt_Comments nvarchar(4000) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [ImportTransactionLoadRow] (
        [TableName_ImportTransactionLoadRow],
        [ImportTransactionLoadID],
        [CustomerPhoneNumber],
        [enmCurrency],
        [Amount],
        [CardCid],
        [CardLast4Numbers],
        [LoadReference],
        [CustomerFirstName],
        [CustomerLastName],
        [CustomerIdentifier],
        [lgCustomerID],
        [lgCardID],
        [WhenInitialized],
        [TransactionLoadID],
        [spt_WhenCompleted],
        [IsSuccessful],
        [lgLoggedAlertID],
        [spt_Comments],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_ImportTransactionLoadRow,
        @ImportTransactionLoadID,
        @CustomerPhoneNumber,
        @enmCurrency,
        @Amount,
        @CardCid,
        @CardLast4Numbers,
        @LoadReference,
        @CustomerFirstName,
        @CustomerLastName,
        @CustomerIdentifier,
        @lgCustomerID,
        @lgCardID,
        @WhenInitialized,
        @TransactionLoadID,
        @spt_WhenCompleted,
        @IsSuccessful,
        @lgLoggedAlertID,
        @spt_Comments,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateImportTransactionLoadRow]
    @ID bigint,
    @TableName_ImportTransactionLoadRow bit = NULL,
    @ImportTransactionLoadID bigint,
    @CustomerPhoneNumber varchar(50),
    @enmCurrency varchar(4),
    @Amount decimal(18,0),
    @CardCid varchar(50),
    @CardLast4Numbers varchar(4),
    @LoadReference nvarchar(100) = NULL,
    @CustomerFirstName nvarchar(100),
    @CustomerLastName nvarchar(100),
    @CustomerIdentifier varchar(104),
    @lgCustomerID bigint = NULL,
    @lgCardID bigint = NULL,
    @WhenInitialized datetimeoffset = NULL,
    @TransactionLoadID bigint = NULL,
    @spt_WhenCompleted datetimeoffset = NULL,
    @IsSuccessful bit = NULL,
    @lgLoggedAlertID bigint = NULL,
    @spt_Comments nvarchar(4000) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [ImportTransactionLoadRow]
    SET
        [TableName_ImportTransactionLoadRow] = @TableName_ImportTransactionLoadRow,
        [ImportTransactionLoadID] = @ImportTransactionLoadID,
        [CustomerPhoneNumber] = @CustomerPhoneNumber,
        [enmCurrency] = @enmCurrency,
        [Amount] = @Amount,
        [CardCid] = @CardCid,
        [CardLast4Numbers] = @CardLast4Numbers,
        [LoadReference] = @LoadReference,
        [CustomerFirstName] = @CustomerFirstName,
        [CustomerLastName] = @CustomerLastName,
        [CustomerIdentifier] = @CustomerIdentifier,
        [lgCustomerID] = @lgCustomerID,
        [lgCardID] = @lgCardID,
        [WhenInitialized] = @WhenInitialized,
        [TransactionLoadID] = @TransactionLoadID,
        [spt_WhenCompleted] = @spt_WhenCompleted,
        [IsSuccessful] = @IsSuccessful,
        [lgLoggedAlertID] = @lgLoggedAlertID,
        [spt_Comments] = @spt_Comments,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteImportTransactionLoadRow]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [ImportTransactionLoadRow]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_ImportTransactionLoadRow_Card
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillImportTransactionLoadRowByLGCARDID]
    @lgCardID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_ImportTransactionLoadRow],
        [ID],
        [ImportTransactionLoadID],
        [CustomerPhoneNumber],
        [enmCurrency],
        [Amount],
        [CardCid],
        [CardLast4Numbers],
        [LoadReference],
        [CustomerFirstName],
        [CustomerLastName],
        [CustomerIdentifier],
        [lgCustomerID],
        [lgCardID],
        [WhenInitialized],
        [TransactionLoadID],
        [spt_WhenCompleted],
        [IsSuccessful],
        [lgLoggedAlertID],
        [spt_Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [ImportTransactionLoadRow]
    WHERE [lgCardID] = @lgCardID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_ImportTransactionLoadRow_Customer
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillImportTransactionLoadRowByLGCUSTOMERID]
    @lgCustomerID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_ImportTransactionLoadRow],
        [ID],
        [ImportTransactionLoadID],
        [CustomerPhoneNumber],
        [enmCurrency],
        [Amount],
        [CardCid],
        [CardLast4Numbers],
        [LoadReference],
        [CustomerFirstName],
        [CustomerLastName],
        [CustomerIdentifier],
        [lgCustomerID],
        [lgCardID],
        [WhenInitialized],
        [TransactionLoadID],
        [spt_WhenCompleted],
        [IsSuccessful],
        [lgLoggedAlertID],
        [spt_Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [ImportTransactionLoadRow]
    WHERE [lgCustomerID] = @lgCustomerID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_ImportTransactionLoadRow_ImportTransactionLoad
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillImportTransactionLoadRowByIMPORTTRANSACTIONLOADID]
    @ImportTransactionLoadID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_ImportTransactionLoadRow],
        [ID],
        [ImportTransactionLoadID],
        [CustomerPhoneNumber],
        [enmCurrency],
        [Amount],
        [CardCid],
        [CardLast4Numbers],
        [LoadReference],
        [CustomerFirstName],
        [CustomerLastName],
        [CustomerIdentifier],
        [lgCustomerID],
        [lgCardID],
        [WhenInitialized],
        [TransactionLoadID],
        [spt_WhenCompleted],
        [IsSuccessful],
        [lgLoggedAlertID],
        [spt_Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [ImportTransactionLoadRow]
    WHERE [ImportTransactionLoadID] = @ImportTransactionLoadID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_ImportTransactionLoadRow_LoggedAlert
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillImportTransactionLoadRowByLGLOGGEDALERTID]
    @lgLoggedAlertID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_ImportTransactionLoadRow],
        [ID],
        [ImportTransactionLoadID],
        [CustomerPhoneNumber],
        [enmCurrency],
        [Amount],
        [CardCid],
        [CardLast4Numbers],
        [LoadReference],
        [CustomerFirstName],
        [CustomerLastName],
        [CustomerIdentifier],
        [lgCustomerID],
        [lgCardID],
        [WhenInitialized],
        [TransactionLoadID],
        [spt_WhenCompleted],
        [IsSuccessful],
        [lgLoggedAlertID],
        [spt_Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [ImportTransactionLoadRow]
    WHERE [lgLoggedAlertID] = @lgLoggedAlertID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_ImportTransactionLoadRow_TransactionLoadID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillImportTransactionLoadRowByTRANSACTIONLOADID]
    @TransactionLoadID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_ImportTransactionLoadRow],
        [ID],
        [ImportTransactionLoadID],
        [CustomerPhoneNumber],
        [enmCurrency],
        [Amount],
        [CardCid],
        [CardLast4Numbers],
        [LoadReference],
        [CustomerFirstName],
        [CustomerLastName],
        [CustomerIdentifier],
        [lgCustomerID],
        [lgCardID],
        [WhenInitialized],
        [TransactionLoadID],
        [spt_WhenCompleted],
        [IsSuccessful],
        [lgLoggedAlertID],
        [spt_Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [ImportTransactionLoadRow]
    WHERE [TransactionLoadID] = @TransactionLoadID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_ImportTransactionLoadRow_WhenCompleted
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillImportTransactionLoadRowBySPTWHENCOMPLETED]
    @spt_WhenCompleted datetimeoffset
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_ImportTransactionLoadRow],
        [ID],
        [ImportTransactionLoadID],
        [CustomerPhoneNumber],
        [enmCurrency],
        [Amount],
        [CardCid],
        [CardLast4Numbers],
        [LoadReference],
        [CustomerFirstName],
        [CustomerLastName],
        [CustomerIdentifier],
        [lgCustomerID],
        [lgCardID],
        [WhenInitialized],
        [TransactionLoadID],
        [spt_WhenCompleted],
        [IsSuccessful],
        [lgLoggedAlertID],
        [spt_Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [ImportTransactionLoadRow]
    WHERE [spt_WhenCompleted] = @spt_WhenCompleted
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: Invoice
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllInvoices]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[ID],
            t.[Month],
            t.[CustomerID],
            t.[DistributorID],
            t.[InvoiceCode],
            t.[URL],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[UpdatingLoginID],
            t.[TableName_Invoice],
            p1.[Text] AS [CustomerID_Text],
            p2.[Text] AS [DistributorID_Text]
        FROM [Invoice] t
        LEFT JOIN [ccvwComboList_Customer] p1 ON t.[CustomerID] = p1.[ID]
        LEFT JOIN [ccvwComboList_Distributor] p2 ON t.[DistributorID] = p2.[ID]
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [ID],
            [Month],
            [CustomerID],
            [DistributorID],
            [InvoiceCode],
            [URL],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [UpdatingLoginID],
            [TableName_Invoice]
        FROM [Invoice]
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredInvoices]
    @InvoiceCode NVARCHAR(200) = NULL,
    @CustomerID INT = NULL,
    @Month DATETIME = NULL,
    @DistributorID INT = NULL,
    @URL NVARCHAR(1000) = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[ID],
            t.[Month],
            t.[CustomerID],
            t.[DistributorID],
            t.[InvoiceCode],
            t.[URL],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[UpdatingLoginID],
            t.[TableName_Invoice],
            p1.[Text] AS [CustomerID_Text],
            p2.[Text] AS [DistributorID_Text]
        FROM [Invoice] t
        LEFT JOIN [ccvwComboList_Customer] p1 ON t.[CustomerID] = p1.[ID]
        LEFT JOIN [ccvwComboList_Distributor] p2 ON t.[DistributorID] = p2.[ID]
        WHERE 1=1
          AND (@InvoiceCode IS NULL OR t.[InvoiceCode] LIKE '%' + @InvoiceCode + '%')
          AND (@CustomerID IS NULL OR t.[CustomerID] = @CustomerID)
          AND (@CustomerID IS NULL OR t.[CustomerID] = @CustomerID)
          AND (@Month IS NULL OR t.[Month] = @Month)
          AND (@DistributorID IS NULL OR t.[DistributorID] = @DistributorID)
          AND (@DistributorID IS NULL OR t.[DistributorID] = @DistributorID)
          AND (@Month IS NULL OR t.[Month] = @Month)
          AND (@Month IS NULL OR t.[Month] = @Month)
          AND (@URL IS NULL OR t.[URL] LIKE '%' + @URL + '%')
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [ID],
            [Month],
            [CustomerID],
            [DistributorID],
            [InvoiceCode],
            [URL],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [UpdatingLoginID],
            [TableName_Invoice]
        FROM [Invoice]
        WHERE 1=1
          AND (@InvoiceCode IS NULL OR [InvoiceCode] LIKE '%' + @InvoiceCode + '%')
          AND (@CustomerID IS NULL OR [CustomerID] = @CustomerID)
          AND (@CustomerID IS NULL OR [CustomerID] = @CustomerID)
          AND (@Month IS NULL OR [Month] = @Month)
          AND (@DistributorID IS NULL OR [DistributorID] = @DistributorID)
          AND (@DistributorID IS NULL OR [DistributorID] = @DistributorID)
          AND (@Month IS NULL OR [Month] = @Month)
          AND (@Month IS NULL OR [Month] = @Month)
          AND (@URL IS NULL OR [URL] LIKE '%' + @URL + '%')
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetInvoiceByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [Month],
        [CustomerID],
        [DistributorID],
        [InvoiceCode],
        [URL],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [UpdatingLoginID],
        [TableName_Invoice]
    FROM [Invoice]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddInvoice]
    @Month datetime,
    @CustomerID bigint = NULL,
    @DistributorID bigint = NULL,
    @InvoiceCode nvarchar(200),
    @URL nvarchar(1000) = NULL,
    @UpdatingLoginID bigint = NULL,
    @TableName_Invoice bit = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [Invoice] (
        [Month],
        [CustomerID],
        [DistributorID],
        [InvoiceCode],
        [URL],
        [UpdatingLoginID],
        [TableName_Invoice],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @Month,
        @CustomerID,
        @DistributorID,
        @InvoiceCode,
        @URL,
        @UpdatingLoginID,
        @TableName_Invoice,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateInvoice]
    @ID bigint,
    @Month datetime,
    @CustomerID bigint = NULL,
    @DistributorID bigint = NULL,
    @InvoiceCode nvarchar(200),
    @URL nvarchar(1000) = NULL,
    @UpdatingLoginID bigint = NULL,
    @TableName_Invoice bit = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [Invoice]
    SET
        [Month] = @Month,
        [CustomerID] = @CustomerID,
        [DistributorID] = @DistributorID,
        [InvoiceCode] = @InvoiceCode,
        [URL] = @URL,
        [UpdatingLoginID] = @UpdatingLoginID,
        [TableName_Invoice] = @TableName_Invoice,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteInvoice]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [Invoice]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: UK_Invoice_InvoiceCode
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetInvoiceByINVOICECODE]
    @InvoiceCode nvarchar(200)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [Month],
        [CustomerID],
        [DistributorID],
        [InvoiceCode],
        [URL],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [UpdatingLoginID],
        [TableName_Invoice]
    FROM [Invoice]
    WHERE [InvoiceCode] = @InvoiceCode
;
END

GO

-- Procedure for Index: IX_Invoice_CustomerID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillInvoiceByCUSTOMERID]
    @CustomerID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [Month],
        [CustomerID],
        [DistributorID],
        [InvoiceCode],
        [URL],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [UpdatingLoginID],
        [TableName_Invoice]
    FROM [Invoice]
    WHERE [CustomerID] = @CustomerID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_Invoice_CustomerID_Month
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillInvoiceByCUSTOMERIDAndMONTH]
    @CustomerID bigint,
    @Month datetime
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [Month],
        [CustomerID],
        [DistributorID],
        [InvoiceCode],
        [URL],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [UpdatingLoginID],
        [TableName_Invoice]
    FROM [Invoice]
    WHERE [CustomerID] = @CustomerID AND [Month] = @Month
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_Invoice_DistributorID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillInvoiceByDISTRIBUTORID]
    @DistributorID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [Month],
        [CustomerID],
        [DistributorID],
        [InvoiceCode],
        [URL],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [UpdatingLoginID],
        [TableName_Invoice]
    FROM [Invoice]
    WHERE [DistributorID] = @DistributorID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_Invoice_DistributorID_Month
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillInvoiceByDISTRIBUTORIDAndMONTH]
    @DistributorID bigint,
    @Month datetime
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [Month],
        [CustomerID],
        [DistributorID],
        [InvoiceCode],
        [URL],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [UpdatingLoginID],
        [TableName_Invoice]
    FROM [Invoice]
    WHERE [DistributorID] = @DistributorID AND [Month] = @Month
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_Invoice_Month
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillInvoiceByMONTH]
    @Month datetime
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [Month],
        [CustomerID],
        [DistributorID],
        [InvoiceCode],
        [URL],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [UpdatingLoginID],
        [TableName_Invoice]
    FROM [Invoice]
    WHERE [Month] = @Month
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_Invoice_URL_Status
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillInvoiceByURL]
    @URL nvarchar(1000)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [Month],
        [CustomerID],
        [DistributorID],
        [InvoiceCode],
        [URL],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [UpdatingLoginID],
        [TableName_Invoice]
    FROM [Invoice]
    WHERE [URL] = @URL
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: Lead
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllLeads]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Lead],
        [ID],
        [lkpLeadOrigin],
        [FirstName],
        [LastName],
        [email],
        [CellPhone],
        [Subject],
        [Message],
        [spt_Comment],
        [WhenOpened],
        [enmStatus],
        [WhenStatusChanged],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [Lead]
    ORDER BY [ID]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredLeads]
    @lkpLeadOrigin VARCHAR(50) = NULL,
    @CellPhone VARCHAR(50) = NULL,
    @enmStatus VARCHAR(50) = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Lead],
        [ID],
        [lkpLeadOrigin],
        [FirstName],
        [LastName],
        [email],
        [CellPhone],
        [Subject],
        [Message],
        [spt_Comment],
        [WhenOpened],
        [enmStatus],
        [WhenStatusChanged],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [Lead]
    WHERE 1=1
      AND (@lkpLeadOrigin IS NULL OR [lkpLeadOrigin] LIKE '%' + @lkpLeadOrigin + '%')
      AND (@CellPhone IS NULL OR [CellPhone] LIKE '%' + @CellPhone + '%')
      AND (@lkpLeadOrigin IS NULL OR [lkpLeadOrigin] LIKE '%' + @lkpLeadOrigin + '%')
      AND (@enmStatus IS NULL OR [enmStatus] LIKE '%' + @enmStatus + '%')
      AND (@enmStatus IS NULL OR [enmStatus] LIKE '%' + @enmStatus + '%')
    ORDER BY [ID]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetLeadByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Lead],
        [ID],
        [lkpLeadOrigin],
        [FirstName],
        [LastName],
        [email],
        [CellPhone],
        [Subject],
        [Message],
        [spt_Comment],
        [WhenOpened],
        [enmStatus],
        [WhenStatusChanged],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [Lead]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddLead]
    @TableName_Lead bit = NULL,
    @lkpLeadOrigin varchar(50) = NULL,
    @FirstName nvarchar(100) = NULL,
    @LastName nvarchar(100) = NULL,
    @email varchar(50) = NULL,
    @CellPhone varchar(50) = NULL,
    @Subject nvarchar(100) = NULL,
    @Message nvarchar(MAX) = NULL,
    @spt_Comment nvarchar(MAX) = NULL,
    @WhenOpened datetimeoffset = NULL,
    @enmStatus varchar(50) = NULL,
    @WhenStatusChanged datetimeoffset = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [Lead] (
        [TableName_Lead],
        [lkpLeadOrigin],
        [FirstName],
        [LastName],
        [email],
        [CellPhone],
        [Subject],
        [Message],
        [spt_Comment],
        [WhenOpened],
        [enmStatus],
        [WhenStatusChanged],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_Lead,
        @lkpLeadOrigin,
        @FirstName,
        @LastName,
        @email,
        @CellPhone,
        @Subject,
        @Message,
        @spt_Comment,
        @WhenOpened,
        @enmStatus,
        @WhenStatusChanged,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateLead]
    @ID bigint,
    @TableName_Lead bit = NULL,
    @lkpLeadOrigin varchar(50) = NULL,
    @FirstName nvarchar(100) = NULL,
    @LastName nvarchar(100) = NULL,
    @email varchar(50) = NULL,
    @CellPhone varchar(50) = NULL,
    @Subject nvarchar(100) = NULL,
    @Message nvarchar(MAX) = NULL,
    @spt_Comment nvarchar(MAX) = NULL,
    @WhenOpened datetimeoffset = NULL,
    @enmStatus varchar(50) = NULL,
    @WhenStatusChanged datetimeoffset = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [Lead]
    SET
        [TableName_Lead] = @TableName_Lead,
        [lkpLeadOrigin] = @lkpLeadOrigin,
        [FirstName] = @FirstName,
        [LastName] = @LastName,
        [email] = @email,
        [CellPhone] = @CellPhone,
        [Subject] = @Subject,
        [Message] = @Message,
        [spt_Comment] = @spt_Comment,
        [WhenOpened] = @WhenOpened,
        [enmStatus] = @enmStatus,
        [WhenStatusChanged] = @WhenStatusChanged,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteLead]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [Lead]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IXLead_LeadOrigin_CellPhone
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillLeadByLKPLEADORIGINAndCELLPHONE]
    @lkpLeadOrigin varchar(50),
    @CellPhone varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Lead],
        [ID],
        [lkpLeadOrigin],
        [FirstName],
        [LastName],
        [email],
        [CellPhone],
        [Subject],
        [Message],
        [spt_Comment],
        [WhenOpened],
        [enmStatus],
        [WhenStatusChanged],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [Lead]
    WHERE [lkpLeadOrigin] = @lkpLeadOrigin AND [CellPhone] = @CellPhone
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXLead_LeadOrigin_Status
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillLeadByLKPLEADORIGINAndENMSTATUS]
    @lkpLeadOrigin varchar(50),
    @enmStatus varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Lead],
        [ID],
        [lkpLeadOrigin],
        [FirstName],
        [LastName],
        [email],
        [CellPhone],
        [Subject],
        [Message],
        [spt_Comment],
        [WhenOpened],
        [enmStatus],
        [WhenStatusChanged],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [Lead]
    WHERE [lkpLeadOrigin] = @lkpLeadOrigin AND [enmStatus] = @enmStatus
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXLead_Status
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillLeadByENMSTATUS]
    @enmStatus varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Lead],
        [ID],
        [lkpLeadOrigin],
        [FirstName],
        [LastName],
        [email],
        [CellPhone],
        [Subject],
        [Message],
        [spt_Comment],
        [WhenOpened],
        [enmStatus],
        [WhenStatusChanged],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [Lead]
    WHERE [enmStatus] = @enmStatus
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: Limitation
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllLimitations]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Limitation],
        [ID],
        [enmLimitation],
        [enmLimitedEntity_Entity],
        [Amount],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [Limitation]
    ORDER BY [ID]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredLimitations]
    @enmLimitation VARCHAR(50) = NULL,
    @enmLimitedEntity_Entity VARCHAR(50) = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Limitation],
        [ID],
        [enmLimitation],
        [enmLimitedEntity_Entity],
        [Amount],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [Limitation]
    WHERE 1=1
      AND (@enmLimitation IS NULL OR [enmLimitation] LIKE '%' + @enmLimitation + '%')
      AND (@enmLimitedEntity_Entity IS NULL OR [enmLimitedEntity_Entity] LIKE '%' + @enmLimitedEntity_Entity + '%')
      AND (@enmLimitedEntity_Entity IS NULL OR [enmLimitedEntity_Entity] LIKE '%' + @enmLimitedEntity_Entity + '%')
    ORDER BY [ID]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetLimitationByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Limitation],
        [ID],
        [enmLimitation],
        [enmLimitedEntity_Entity],
        [Amount],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [Limitation]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddLimitation]
    @TableName_Limitation bit = NULL,
    @enmLimitation varchar(50) = NULL,
    @enmLimitedEntity_Entity varchar(50) = NULL,
    @Amount decimal(18,0) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [Limitation] (
        [TableName_Limitation],
        [enmLimitation],
        [enmLimitedEntity_Entity],
        [Amount],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_Limitation,
        @enmLimitation,
        @enmLimitedEntity_Entity,
        @Amount,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateLimitation]
    @ID bigint,
    @TableName_Limitation bit = NULL,
    @enmLimitation varchar(50) = NULL,
    @enmLimitedEntity_Entity varchar(50) = NULL,
    @Amount decimal(18,0) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [Limitation]
    SET
        [TableName_Limitation] = @TableName_Limitation,
        [enmLimitation] = @enmLimitation,
        [enmLimitedEntity_Entity] = @enmLimitedEntity_Entity,
        [Amount] = @Amount,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteLimitation]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [Limitation]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_Limitation_enmLimitation_enmLimitedEntity
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetLimitationByENMLIMITATIONAndENMLIMITEDENTITYENTITY]
    @enmLimitation varchar(50),
    @enmLimitedEntity_Entity varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Limitation],
        [ID],
        [enmLimitation],
        [enmLimitedEntity_Entity],
        [Amount],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [Limitation]
    WHERE [enmLimitation] = @enmLimitation AND [enmLimitedEntity_Entity] = @enmLimitedEntity_Entity
;
END

GO

-- Procedure for Index: IX_Limitation_enmLimitedEntity
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillLimitationByENMLIMITEDENTITYENTITY]
    @enmLimitedEntity_Entity varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Limitation],
        [ID],
        [enmLimitation],
        [enmLimitedEntity_Entity],
        [Amount],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [Limitation]
    WHERE [enmLimitedEntity_Entity] = @enmLimitedEntity_Entity
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: LimitationOverride
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllLimitationOverrides]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_LimitationOverride],
            t.[ID],
            t.[LimitationID],
            t.[CardClubID],
            t.[DistributorID],
            t.[OverrideAmount],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            t.[CustomerClubID],
            p1.[Text] AS [LimitationID_Text],
            p2.[Text] AS [CardClubID_Text],
            p3.[Text] AS [DistributorID_Text],
            p4.[Text] AS [CustomerClubID_Text]
        FROM [LimitationOverride] t
        LEFT JOIN [ccvwComboList_Limitation] p1 ON t.[LimitationID] = p1.[ID]
        LEFT JOIN [ccvwComboList_CardClub] p2 ON t.[CardClubID] = p2.[ID]
        LEFT JOIN [ccvwComboList_Distributor] p3 ON t.[DistributorID] = p3.[ID]
        LEFT JOIN [ccvwComboList_CustomerClub] p4 ON t.[CustomerClubID] = p4.[ID]
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_LimitationOverride],
            [ID],
            [LimitationID],
            [CardClubID],
            [DistributorID],
            [OverrideAmount],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID],
            [CustomerClubID]
        FROM [LimitationOverride]
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredLimitationOverrides]
    @LimitationID INT = NULL,
    @CardClubID INT = NULL,
    @DistributorID INT = NULL,
    @CustomerClubID INT = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_LimitationOverride],
            t.[ID],
            t.[LimitationID],
            t.[CardClubID],
            t.[DistributorID],
            t.[OverrideAmount],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            t.[CustomerClubID],
            p1.[Text] AS [LimitationID_Text],
            p2.[Text] AS [CardClubID_Text],
            p3.[Text] AS [DistributorID_Text],
            p4.[Text] AS [CustomerClubID_Text]
        FROM [LimitationOverride] t
        LEFT JOIN [ccvwComboList_Limitation] p1 ON t.[LimitationID] = p1.[ID]
        LEFT JOIN [ccvwComboList_CardClub] p2 ON t.[CardClubID] = p2.[ID]
        LEFT JOIN [ccvwComboList_Distributor] p3 ON t.[DistributorID] = p3.[ID]
        LEFT JOIN [ccvwComboList_CustomerClub] p4 ON t.[CustomerClubID] = p4.[ID]
        WHERE 1=1
          AND (@LimitationID IS NULL OR t.[LimitationID] = @LimitationID)
          AND (@CardClubID IS NULL OR t.[CardClubID] = @CardClubID)
          AND (@DistributorID IS NULL OR t.[DistributorID] = @DistributorID)
          AND (@LimitationID IS NULL OR t.[LimitationID] = @LimitationID)
          AND (@CustomerClubID IS NULL OR t.[CustomerClubID] = @CustomerClubID)
          AND (@DistributorID IS NULL OR t.[DistributorID] = @DistributorID)
          AND (@CardClubID IS NULL OR t.[CardClubID] = @CardClubID)
          AND (@CustomerClubID IS NULL OR t.[CustomerClubID] = @CustomerClubID)
          AND (@DistributorID IS NULL OR t.[DistributorID] = @DistributorID)
          AND (@LimitationID IS NULL OR t.[LimitationID] = @LimitationID)
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_LimitationOverride],
            [ID],
            [LimitationID],
            [CardClubID],
            [DistributorID],
            [OverrideAmount],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID],
            [CustomerClubID]
        FROM [LimitationOverride]
        WHERE 1=1
          AND (@LimitationID IS NULL OR [LimitationID] = @LimitationID)
          AND (@CardClubID IS NULL OR [CardClubID] = @CardClubID)
          AND (@DistributorID IS NULL OR [DistributorID] = @DistributorID)
          AND (@LimitationID IS NULL OR [LimitationID] = @LimitationID)
          AND (@CustomerClubID IS NULL OR [CustomerClubID] = @CustomerClubID)
          AND (@DistributorID IS NULL OR [DistributorID] = @DistributorID)
          AND (@CardClubID IS NULL OR [CardClubID] = @CardClubID)
          AND (@CustomerClubID IS NULL OR [CustomerClubID] = @CustomerClubID)
          AND (@DistributorID IS NULL OR [DistributorID] = @DistributorID)
          AND (@LimitationID IS NULL OR [LimitationID] = @LimitationID)
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetLimitationOverrideByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_LimitationOverride],
        [ID],
        [LimitationID],
        [CardClubID],
        [DistributorID],
        [OverrideAmount],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [CustomerClubID]
    FROM [LimitationOverride]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddLimitationOverride]
    @TableName_LimitationOverride bit = NULL,
    @LimitationID bigint = NULL,
    @CardClubID bigint = NULL,
    @DistributorID bigint = NULL,
    @OverrideAmount decimal(18,0) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @CustomerClubID bigint = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [LimitationOverride] (
        [TableName_LimitationOverride],
        [LimitationID],
        [CardClubID],
        [DistributorID],
        [OverrideAmount],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [CustomerClubID],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_LimitationOverride,
        @LimitationID,
        @CardClubID,
        @DistributorID,
        @OverrideAmount,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        @CustomerClubID,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateLimitationOverride]
    @ID bigint,
    @TableName_LimitationOverride bit = NULL,
    @LimitationID bigint = NULL,
    @CardClubID bigint = NULL,
    @DistributorID bigint = NULL,
    @OverrideAmount decimal(18,0) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @CustomerClubID bigint = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [LimitationOverride]
    SET
        [TableName_LimitationOverride] = @TableName_LimitationOverride,
        [LimitationID] = @LimitationID,
        [CardClubID] = @CardClubID,
        [DistributorID] = @DistributorID,
        [OverrideAmount] = @OverrideAmount,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [CustomerClubID] = @CustomerClubID,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteLimitationOverride]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [LimitationOverride]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_LimitationOverrideLimitationID_CardClubID_DistributorID
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetLimitationOverrideByLIMITATIONIDAndCARDCLUBIDAndDISTRIBUTORID]
    @LimitationID bigint,
    @CardClubID bigint,
    @DistributorID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_LimitationOverride],
        [ID],
        [LimitationID],
        [CardClubID],
        [DistributorID],
        [OverrideAmount],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [CustomerClubID]
    FROM [LimitationOverride]
    WHERE [LimitationID] = @LimitationID AND [CardClubID] = @CardClubID AND [DistributorID] = @DistributorID
;
END

GO

-- Procedure for Index: IX_LimitationOverrideLimitationID_CustomerClubID_DistributorID
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetLimitationOverrideByLIMITATIONIDAndCUSTOMERCLUBIDAndDISTRIBUTORID]
    @LimitationID bigint,
    @CustomerClubID bigint,
    @DistributorID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_LimitationOverride],
        [ID],
        [LimitationID],
        [CardClubID],
        [DistributorID],
        [OverrideAmount],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [CustomerClubID]
    FROM [LimitationOverride]
    WHERE [LimitationID] = @LimitationID AND [CustomerClubID] = @CustomerClubID AND [DistributorID] = @DistributorID
;
END

GO

-- Procedure for Index: IX_LimitationOverride_CardClubID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillLimitationOverrideByCARDCLUBID]
    @CardClubID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_LimitationOverride],
        [ID],
        [LimitationID],
        [CardClubID],
        [DistributorID],
        [OverrideAmount],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [CustomerClubID]
    FROM [LimitationOverride]
    WHERE [CardClubID] = @CardClubID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_LimitationOverride_CustomerClubID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillLimitationOverrideByCUSTOMERCLUBID]
    @CustomerClubID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_LimitationOverride],
        [ID],
        [LimitationID],
        [CardClubID],
        [DistributorID],
        [OverrideAmount],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [CustomerClubID]
    FROM [LimitationOverride]
    WHERE [CustomerClubID] = @CustomerClubID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_LimitationOverride_DistributorID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillLimitationOverrideByDISTRIBUTORID]
    @DistributorID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_LimitationOverride],
        [ID],
        [LimitationID],
        [CardClubID],
        [DistributorID],
        [OverrideAmount],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [CustomerClubID]
    FROM [LimitationOverride]
    WHERE [DistributorID] = @DistributorID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_LimitationOverride_LimitationID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillLimitationOverrideByLIMITATIONID]
    @LimitationID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_LimitationOverride],
        [ID],
        [LimitationID],
        [CardClubID],
        [DistributorID],
        [OverrideAmount],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [CustomerClubID]
    FROM [LimitationOverride]
    WHERE [LimitationID] = @LimitationID
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: MCCBFPBankAccount
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllMCCBFPBankAccounts]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_MCCBFPBankAccount],
        [ID],
        [Region],
        [Country],
        [PayoutCurrency],
        [ReachOfChannel],
        [Corridors],
        [MinimumTransactionAmount],
        [MaximumTransactionAmount],
        [DeliveryTime],
        [CutoffTimeForDelivery],
        [SpecialNotes],
        [DocumentationRequirements],
        [DocumentationCollectionProcess],
        [ThresholdForDocumentationRequirements],
        [RegistrationRequirements],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [MCCBFPBankAccount]
    ORDER BY [ID]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredMCCBFPBankAccounts]
    @Country VARCHAR(50) = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_MCCBFPBankAccount],
        [ID],
        [Region],
        [Country],
        [PayoutCurrency],
        [ReachOfChannel],
        [Corridors],
        [MinimumTransactionAmount],
        [MaximumTransactionAmount],
        [DeliveryTime],
        [CutoffTimeForDelivery],
        [SpecialNotes],
        [DocumentationRequirements],
        [DocumentationCollectionProcess],
        [ThresholdForDocumentationRequirements],
        [RegistrationRequirements],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [MCCBFPBankAccount]
    WHERE 1=1
      AND (@Country IS NULL OR [Country] LIKE '%' + @Country + '%')
    ORDER BY [ID]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetMCCBFPBankAccountByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_MCCBFPBankAccount],
        [ID],
        [Region],
        [Country],
        [PayoutCurrency],
        [ReachOfChannel],
        [Corridors],
        [MinimumTransactionAmount],
        [MaximumTransactionAmount],
        [DeliveryTime],
        [CutoffTimeForDelivery],
        [SpecialNotes],
        [DocumentationRequirements],
        [DocumentationCollectionProcess],
        [ThresholdForDocumentationRequirements],
        [RegistrationRequirements],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [MCCBFPBankAccount]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddMCCBFPBankAccount]
    @TableName_MCCBFPBankAccount bit = NULL,
    @Region varchar(50) = NULL,
    @Country varchar(50) = NULL,
    @PayoutCurrency varchar(4) = NULL,
    @ReachOfChannel varchar(250) = NULL,
    @Corridors varchar(100) = NULL,
    @MinimumTransactionAmount varchar(250) = NULL,
    @MaximumTransactionAmount varchar(250) = NULL,
    @DeliveryTime varchar(250) = NULL,
    @CutoffTimeForDelivery varchar(250) = NULL,
    @SpecialNotes varchar(250) = NULL,
    @DocumentationRequirements varchar(50) = NULL,
    @DocumentationCollectionProcess varchar(250) = NULL,
    @ThresholdForDocumentationRequirements varchar(250) = NULL,
    @RegistrationRequirements varchar(250) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [MCCBFPBankAccount] (
        [TableName_MCCBFPBankAccount],
        [Region],
        [Country],
        [PayoutCurrency],
        [ReachOfChannel],
        [Corridors],
        [MinimumTransactionAmount],
        [MaximumTransactionAmount],
        [DeliveryTime],
        [CutoffTimeForDelivery],
        [SpecialNotes],
        [DocumentationRequirements],
        [DocumentationCollectionProcess],
        [ThresholdForDocumentationRequirements],
        [RegistrationRequirements],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_MCCBFPBankAccount,
        @Region,
        @Country,
        @PayoutCurrency,
        @ReachOfChannel,
        @Corridors,
        @MinimumTransactionAmount,
        @MaximumTransactionAmount,
        @DeliveryTime,
        @CutoffTimeForDelivery,
        @SpecialNotes,
        @DocumentationRequirements,
        @DocumentationCollectionProcess,
        @ThresholdForDocumentationRequirements,
        @RegistrationRequirements,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateMCCBFPBankAccount]
    @ID bigint,
    @TableName_MCCBFPBankAccount bit = NULL,
    @Region varchar(50) = NULL,
    @Country varchar(50) = NULL,
    @PayoutCurrency varchar(4) = NULL,
    @ReachOfChannel varchar(250) = NULL,
    @Corridors varchar(100) = NULL,
    @MinimumTransactionAmount varchar(250) = NULL,
    @MaximumTransactionAmount varchar(250) = NULL,
    @DeliveryTime varchar(250) = NULL,
    @CutoffTimeForDelivery varchar(250) = NULL,
    @SpecialNotes varchar(250) = NULL,
    @DocumentationRequirements varchar(50) = NULL,
    @DocumentationCollectionProcess varchar(250) = NULL,
    @ThresholdForDocumentationRequirements varchar(250) = NULL,
    @RegistrationRequirements varchar(250) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [MCCBFPBankAccount]
    SET
        [TableName_MCCBFPBankAccount] = @TableName_MCCBFPBankAccount,
        [Region] = @Region,
        [Country] = @Country,
        [PayoutCurrency] = @PayoutCurrency,
        [ReachOfChannel] = @ReachOfChannel,
        [Corridors] = @Corridors,
        [MinimumTransactionAmount] = @MinimumTransactionAmount,
        [MaximumTransactionAmount] = @MaximumTransactionAmount,
        [DeliveryTime] = @DeliveryTime,
        [CutoffTimeForDelivery] = @CutoffTimeForDelivery,
        [SpecialNotes] = @SpecialNotes,
        [DocumentationRequirements] = @DocumentationRequirements,
        [DocumentationCollectionProcess] = @DocumentationCollectionProcess,
        [ThresholdForDocumentationRequirements] = @ThresholdForDocumentationRequirements,
        [RegistrationRequirements] = @RegistrationRequirements,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteMCCBFPBankAccount]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [MCCBFPBankAccount]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_MCCBFPBankAccount_Country
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillMCCBFPBankAccountByCOUNTRY]
    @Country varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_MCCBFPBankAccount],
        [ID],
        [Region],
        [Country],
        [PayoutCurrency],
        [ReachOfChannel],
        [Corridors],
        [MinimumTransactionAmount],
        [MaximumTransactionAmount],
        [DeliveryTime],
        [CutoffTimeForDelivery],
        [SpecialNotes],
        [DocumentationRequirements],
        [DocumentationCollectionProcess],
        [ThresholdForDocumentationRequirements],
        [RegistrationRequirements],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [MCCBFPBankAccount]
    WHERE [Country] = @Country
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: MCCBFPCashOut
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllMCCBFPCashOuts]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_MCCBFPCashOut],
        [ID],
        [Region],
        [Country],
        [Brand],
        [PayoutCapability],
        [PayoutCurrency],
        [ReachOfChannel],
        [Corridors],
        [MinimumTransactionAmount],
        [MaximumTransactionAmount],
        [AvailabilityForCashPickup],
        [MaximumTimeAllowedForCashToBePickedUp],
        [OIPreapprovalRequired],
        [RequiredInformation],
        [AverageResponseTimeFromRSP],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [MCCBFPCashOut]
    ORDER BY [ID]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredMCCBFPCashOuts]
    @Country VARCHAR(50) = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_MCCBFPCashOut],
        [ID],
        [Region],
        [Country],
        [Brand],
        [PayoutCapability],
        [PayoutCurrency],
        [ReachOfChannel],
        [Corridors],
        [MinimumTransactionAmount],
        [MaximumTransactionAmount],
        [AvailabilityForCashPickup],
        [MaximumTimeAllowedForCashToBePickedUp],
        [OIPreapprovalRequired],
        [RequiredInformation],
        [AverageResponseTimeFromRSP],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [MCCBFPCashOut]
    WHERE 1=1
      AND (@Country IS NULL OR [Country] LIKE '%' + @Country + '%')
    ORDER BY [ID]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetMCCBFPCashOutByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_MCCBFPCashOut],
        [ID],
        [Region],
        [Country],
        [Brand],
        [PayoutCapability],
        [PayoutCurrency],
        [ReachOfChannel],
        [Corridors],
        [MinimumTransactionAmount],
        [MaximumTransactionAmount],
        [AvailabilityForCashPickup],
        [MaximumTimeAllowedForCashToBePickedUp],
        [OIPreapprovalRequired],
        [RequiredInformation],
        [AverageResponseTimeFromRSP],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [MCCBFPCashOut]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddMCCBFPCashOut]
    @TableName_MCCBFPCashOut bit = NULL,
    @Region varchar(50) = NULL,
    @Country varchar(50) = NULL,
    @Brand varchar(1000) = NULL,
    @PayoutCapability varchar(50) = NULL,
    @PayoutCurrency varchar(4) = NULL,
    @ReachOfChannel varchar(250) = NULL,
    @Corridors varchar(100) = NULL,
    @MinimumTransactionAmount varchar(250) = NULL,
    @MaximumTransactionAmount varchar(250) = NULL,
    @AvailabilityForCashPickup varchar(50) = NULL,
    @MaximumTimeAllowedForCashToBePickedUp varchar(50) = NULL,
    @OIPreapprovalRequired varchar(50) = NULL,
    @RequiredInformation varchar(50) = NULL,
    @AverageResponseTimeFromRSP varchar(50) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [MCCBFPCashOut] (
        [TableName_MCCBFPCashOut],
        [Region],
        [Country],
        [Brand],
        [PayoutCapability],
        [PayoutCurrency],
        [ReachOfChannel],
        [Corridors],
        [MinimumTransactionAmount],
        [MaximumTransactionAmount],
        [AvailabilityForCashPickup],
        [MaximumTimeAllowedForCashToBePickedUp],
        [OIPreapprovalRequired],
        [RequiredInformation],
        [AverageResponseTimeFromRSP],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_MCCBFPCashOut,
        @Region,
        @Country,
        @Brand,
        @PayoutCapability,
        @PayoutCurrency,
        @ReachOfChannel,
        @Corridors,
        @MinimumTransactionAmount,
        @MaximumTransactionAmount,
        @AvailabilityForCashPickup,
        @MaximumTimeAllowedForCashToBePickedUp,
        @OIPreapprovalRequired,
        @RequiredInformation,
        @AverageResponseTimeFromRSP,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateMCCBFPCashOut]
    @ID bigint,
    @TableName_MCCBFPCashOut bit = NULL,
    @Region varchar(50) = NULL,
    @Country varchar(50) = NULL,
    @Brand varchar(1000) = NULL,
    @PayoutCapability varchar(50) = NULL,
    @PayoutCurrency varchar(4) = NULL,
    @ReachOfChannel varchar(250) = NULL,
    @Corridors varchar(100) = NULL,
    @MinimumTransactionAmount varchar(250) = NULL,
    @MaximumTransactionAmount varchar(250) = NULL,
    @AvailabilityForCashPickup varchar(50) = NULL,
    @MaximumTimeAllowedForCashToBePickedUp varchar(50) = NULL,
    @OIPreapprovalRequired varchar(50) = NULL,
    @RequiredInformation varchar(50) = NULL,
    @AverageResponseTimeFromRSP varchar(50) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [MCCBFPCashOut]
    SET
        [TableName_MCCBFPCashOut] = @TableName_MCCBFPCashOut,
        [Region] = @Region,
        [Country] = @Country,
        [Brand] = @Brand,
        [PayoutCapability] = @PayoutCapability,
        [PayoutCurrency] = @PayoutCurrency,
        [ReachOfChannel] = @ReachOfChannel,
        [Corridors] = @Corridors,
        [MinimumTransactionAmount] = @MinimumTransactionAmount,
        [MaximumTransactionAmount] = @MaximumTransactionAmount,
        [AvailabilityForCashPickup] = @AvailabilityForCashPickup,
        [MaximumTimeAllowedForCashToBePickedUp] = @MaximumTimeAllowedForCashToBePickedUp,
        [OIPreapprovalRequired] = @OIPreapprovalRequired,
        [RequiredInformation] = @RequiredInformation,
        [AverageResponseTimeFromRSP] = @AverageResponseTimeFromRSP,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteMCCBFPCashOut]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [MCCBFPCashOut]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_MCCBFPCashOut_Country
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillMCCBFPCashOutByCOUNTRY]
    @Country varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_MCCBFPCashOut],
        [ID],
        [Region],
        [Country],
        [Brand],
        [PayoutCapability],
        [PayoutCurrency],
        [ReachOfChannel],
        [Corridors],
        [MinimumTransactionAmount],
        [MaximumTransactionAmount],
        [AvailabilityForCashPickup],
        [MaximumTimeAllowedForCashToBePickedUp],
        [OIPreapprovalRequired],
        [RequiredInformation],
        [AverageResponseTimeFromRSP],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [MCCBFPCashOut]
    WHERE [Country] = @Country
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: MCCBFPMobileWallet
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllMCCBFPMobileWallets]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_MCCBFPMobileWallet],
        [ID],
        [Region],
        [Country],
        [Brand],
        [PayoutCurrency],
        [Channel],
        [Corridors],
        [MinimumTransactionAmount],
        [MaximumTransactionAmount],
        [OnTheFlyWalletCreation],
        [DeliveryTime],
        [OIPreapprovalRequired],
        [RequiredInformation],
        [AverageResponseTimeFromRSP],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [MCCBFPMobileWallet]
    ORDER BY [ID]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredMCCBFPMobileWallets]
    @Country VARCHAR(50) = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_MCCBFPMobileWallet],
        [ID],
        [Region],
        [Country],
        [Brand],
        [PayoutCurrency],
        [Channel],
        [Corridors],
        [MinimumTransactionAmount],
        [MaximumTransactionAmount],
        [OnTheFlyWalletCreation],
        [DeliveryTime],
        [OIPreapprovalRequired],
        [RequiredInformation],
        [AverageResponseTimeFromRSP],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [MCCBFPMobileWallet]
    WHERE 1=1
      AND (@Country IS NULL OR [Country] LIKE '%' + @Country + '%')
    ORDER BY [ID]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetMCCBFPMobileWalletByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_MCCBFPMobileWallet],
        [ID],
        [Region],
        [Country],
        [Brand],
        [PayoutCurrency],
        [Channel],
        [Corridors],
        [MinimumTransactionAmount],
        [MaximumTransactionAmount],
        [OnTheFlyWalletCreation],
        [DeliveryTime],
        [OIPreapprovalRequired],
        [RequiredInformation],
        [AverageResponseTimeFromRSP],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [MCCBFPMobileWallet]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddMCCBFPMobileWallet]
    @TableName_MCCBFPMobileWallet bit = NULL,
    @Region varchar(50) = NULL,
    @Country varchar(50) = NULL,
    @Brand varchar(250) = NULL,
    @PayoutCurrency varchar(4) = NULL,
    @Channel varchar(50) = NULL,
    @Corridors varchar(100) = NULL,
    @MinimumTransactionAmount varchar(250) = NULL,
    @MaximumTransactionAmount varchar(1000) = NULL,
    @OnTheFlyWalletCreation varchar(50) = NULL,
    @DeliveryTime varchar(60) = NULL,
    @OIPreapprovalRequired varchar(50) = NULL,
    @RequiredInformation varchar(100) = NULL,
    @AverageResponseTimeFromRSP varchar(50) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [MCCBFPMobileWallet] (
        [TableName_MCCBFPMobileWallet],
        [Region],
        [Country],
        [Brand],
        [PayoutCurrency],
        [Channel],
        [Corridors],
        [MinimumTransactionAmount],
        [MaximumTransactionAmount],
        [OnTheFlyWalletCreation],
        [DeliveryTime],
        [OIPreapprovalRequired],
        [RequiredInformation],
        [AverageResponseTimeFromRSP],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_MCCBFPMobileWallet,
        @Region,
        @Country,
        @Brand,
        @PayoutCurrency,
        @Channel,
        @Corridors,
        @MinimumTransactionAmount,
        @MaximumTransactionAmount,
        @OnTheFlyWalletCreation,
        @DeliveryTime,
        @OIPreapprovalRequired,
        @RequiredInformation,
        @AverageResponseTimeFromRSP,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateMCCBFPMobileWallet]
    @ID bigint,
    @TableName_MCCBFPMobileWallet bit = NULL,
    @Region varchar(50) = NULL,
    @Country varchar(50) = NULL,
    @Brand varchar(250) = NULL,
    @PayoutCurrency varchar(4) = NULL,
    @Channel varchar(50) = NULL,
    @Corridors varchar(100) = NULL,
    @MinimumTransactionAmount varchar(250) = NULL,
    @MaximumTransactionAmount varchar(1000) = NULL,
    @OnTheFlyWalletCreation varchar(50) = NULL,
    @DeliveryTime varchar(60) = NULL,
    @OIPreapprovalRequired varchar(50) = NULL,
    @RequiredInformation varchar(100) = NULL,
    @AverageResponseTimeFromRSP varchar(50) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [MCCBFPMobileWallet]
    SET
        [TableName_MCCBFPMobileWallet] = @TableName_MCCBFPMobileWallet,
        [Region] = @Region,
        [Country] = @Country,
        [Brand] = @Brand,
        [PayoutCurrency] = @PayoutCurrency,
        [Channel] = @Channel,
        [Corridors] = @Corridors,
        [MinimumTransactionAmount] = @MinimumTransactionAmount,
        [MaximumTransactionAmount] = @MaximumTransactionAmount,
        [OnTheFlyWalletCreation] = @OnTheFlyWalletCreation,
        [DeliveryTime] = @DeliveryTime,
        [OIPreapprovalRequired] = @OIPreapprovalRequired,
        [RequiredInformation] = @RequiredInformation,
        [AverageResponseTimeFromRSP] = @AverageResponseTimeFromRSP,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteMCCBFPMobileWallet]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [MCCBFPMobileWallet]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_MCCBFPMobileWallet_Country
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillMCCBFPMobileWalletByCOUNTRY]
    @Country varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_MCCBFPMobileWallet],
        [ID],
        [Region],
        [Country],
        [Brand],
        [PayoutCurrency],
        [Channel],
        [Corridors],
        [MinimumTransactionAmount],
        [MaximumTransactionAmount],
        [OnTheFlyWalletCreation],
        [DeliveryTime],
        [OIPreapprovalRequired],
        [RequiredInformation],
        [AverageResponseTimeFromRSP],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [MCCBFPMobileWallet]
    WHERE [Country] = @Country
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: MCCBFPPaymentCard
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllMCCBFPPaymentCards]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_MCCBFPPaymentCard],
        [ID],
        [Region],
        [Country],
        [Brand],
        [PayoutCurrency],
        [Channel],
        [ReachOfChannel],
        [Corridors],
        [MinimumTransactionAmount],
        [MaximumTransactionAmount],
        [DeliveryTime],
        [SpecialNotes],
        [OIPreapprovalRequired],
        [RequiredInformation],
        [AverageResponseTimeFromRSP],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [MCCBFPPaymentCard]
    ORDER BY [ID]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredMCCBFPPaymentCards]
    @Country VARCHAR(50) = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_MCCBFPPaymentCard],
        [ID],
        [Region],
        [Country],
        [Brand],
        [PayoutCurrency],
        [Channel],
        [ReachOfChannel],
        [Corridors],
        [MinimumTransactionAmount],
        [MaximumTransactionAmount],
        [DeliveryTime],
        [SpecialNotes],
        [OIPreapprovalRequired],
        [RequiredInformation],
        [AverageResponseTimeFromRSP],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [MCCBFPPaymentCard]
    WHERE 1=1
      AND (@Country IS NULL OR [Country] LIKE '%' + @Country + '%')
    ORDER BY [ID]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetMCCBFPPaymentCardByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_MCCBFPPaymentCard],
        [ID],
        [Region],
        [Country],
        [Brand],
        [PayoutCurrency],
        [Channel],
        [ReachOfChannel],
        [Corridors],
        [MinimumTransactionAmount],
        [MaximumTransactionAmount],
        [DeliveryTime],
        [SpecialNotes],
        [OIPreapprovalRequired],
        [RequiredInformation],
        [AverageResponseTimeFromRSP],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [MCCBFPPaymentCard]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddMCCBFPPaymentCard]
    @TableName_MCCBFPPaymentCard bit = NULL,
    @Region varchar(50) = NULL,
    @Country varchar(50) = NULL,
    @Brand varchar(250) = NULL,
    @PayoutCurrency varchar(4) = NULL,
    @Channel varchar(50) = NULL,
    @ReachOfChannel varchar(250) = NULL,
    @Corridors varchar(100) = NULL,
    @MinimumTransactionAmount varchar(250) = NULL,
    @MaximumTransactionAmount varchar(250) = NULL,
    @DeliveryTime varchar(60) = NULL,
    @SpecialNotes varchar(250) = NULL,
    @OIPreapprovalRequired varchar(250) = NULL,
    @RequiredInformation varchar(250) = NULL,
    @AverageResponseTimeFromRSP varchar(50) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [MCCBFPPaymentCard] (
        [TableName_MCCBFPPaymentCard],
        [Region],
        [Country],
        [Brand],
        [PayoutCurrency],
        [Channel],
        [ReachOfChannel],
        [Corridors],
        [MinimumTransactionAmount],
        [MaximumTransactionAmount],
        [DeliveryTime],
        [SpecialNotes],
        [OIPreapprovalRequired],
        [RequiredInformation],
        [AverageResponseTimeFromRSP],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_MCCBFPPaymentCard,
        @Region,
        @Country,
        @Brand,
        @PayoutCurrency,
        @Channel,
        @ReachOfChannel,
        @Corridors,
        @MinimumTransactionAmount,
        @MaximumTransactionAmount,
        @DeliveryTime,
        @SpecialNotes,
        @OIPreapprovalRequired,
        @RequiredInformation,
        @AverageResponseTimeFromRSP,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateMCCBFPPaymentCard]
    @ID bigint,
    @TableName_MCCBFPPaymentCard bit = NULL,
    @Region varchar(50) = NULL,
    @Country varchar(50) = NULL,
    @Brand varchar(250) = NULL,
    @PayoutCurrency varchar(4) = NULL,
    @Channel varchar(50) = NULL,
    @ReachOfChannel varchar(250) = NULL,
    @Corridors varchar(100) = NULL,
    @MinimumTransactionAmount varchar(250) = NULL,
    @MaximumTransactionAmount varchar(250) = NULL,
    @DeliveryTime varchar(60) = NULL,
    @SpecialNotes varchar(250) = NULL,
    @OIPreapprovalRequired varchar(250) = NULL,
    @RequiredInformation varchar(250) = NULL,
    @AverageResponseTimeFromRSP varchar(50) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [MCCBFPPaymentCard]
    SET
        [TableName_MCCBFPPaymentCard] = @TableName_MCCBFPPaymentCard,
        [Region] = @Region,
        [Country] = @Country,
        [Brand] = @Brand,
        [PayoutCurrency] = @PayoutCurrency,
        [Channel] = @Channel,
        [ReachOfChannel] = @ReachOfChannel,
        [Corridors] = @Corridors,
        [MinimumTransactionAmount] = @MinimumTransactionAmount,
        [MaximumTransactionAmount] = @MaximumTransactionAmount,
        [DeliveryTime] = @DeliveryTime,
        [SpecialNotes] = @SpecialNotes,
        [OIPreapprovalRequired] = @OIPreapprovalRequired,
        [RequiredInformation] = @RequiredInformation,
        [AverageResponseTimeFromRSP] = @AverageResponseTimeFromRSP,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteMCCBFPPaymentCard]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [MCCBFPPaymentCard]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_MCCBFPPaymentCard_Country
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillMCCBFPPaymentCardByCOUNTRY]
    @Country varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_MCCBFPPaymentCard],
        [ID],
        [Region],
        [Country],
        [Brand],
        [PayoutCurrency],
        [Channel],
        [ReachOfChannel],
        [Corridors],
        [MinimumTransactionAmount],
        [MaximumTransactionAmount],
        [DeliveryTime],
        [SpecialNotes],
        [OIPreapprovalRequired],
        [RequiredInformation],
        [AverageResponseTimeFromRSP],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [MCCBFPPaymentCard]
    WHERE [Country] = @Country
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: MCCBParticipant
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllMCCBParticipants]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_MCCBParticipant],
            t.[ID],
            t.[enmCorridor],
            t.[CountryISO3166Alpha2],
            t.[PayoutCurrency],
            t.[enmPaymentMode],
            t.[enmSettlementCurrency_Currency],
            t.[Comments],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            t.[IsParticipant],
            t.[SortOrder],
            t.[FlatFee],
            t.[FeeBaseAmount],
            t.[FeePctOfTrigger],
            t.[FeeMax],
            t.[FeeMin],
            p1.[Text] AS [CountryISO3166Alpha2_Text]
        FROM [MCCBParticipant] t
        LEFT JOIN [ccvwComboList_Country] p1 ON t.[CountryISO3166Alpha2] = p1.[ID]
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_MCCBParticipant],
            [ID],
            [enmCorridor],
            [CountryISO3166Alpha2],
            [PayoutCurrency],
            [enmPaymentMode],
            [enmSettlementCurrency_Currency],
            [Comments],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID],
            [IsParticipant],
            [SortOrder],
            [FlatFee],
            [FeeBaseAmount],
            [FeePctOfTrigger],
            [FeeMax],
            [FeeMin]
        FROM [MCCBParticipant]
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredMCCBParticipants]
    @enmCorridor VARCHAR(50) = NULL,
    @CountryISO3166Alpha2 VARCHAR(2) = NULL,
    @PayoutCurrency VARCHAR(3) = NULL,
    @enmPaymentMode VARCHAR(50) = NULL,
    @IsParticipant BIT = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_MCCBParticipant],
            t.[ID],
            t.[enmCorridor],
            t.[CountryISO3166Alpha2],
            t.[PayoutCurrency],
            t.[enmPaymentMode],
            t.[enmSettlementCurrency_Currency],
            t.[Comments],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            t.[IsParticipant],
            t.[SortOrder],
            t.[FlatFee],
            t.[FeeBaseAmount],
            t.[FeePctOfTrigger],
            t.[FeeMax],
            t.[FeeMin],
            p1.[Text] AS [CountryISO3166Alpha2_Text]
        FROM [MCCBParticipant] t
        LEFT JOIN [ccvwComboList_Country] p1 ON t.[CountryISO3166Alpha2] = p1.[ID]
        WHERE 1=1
          AND (@enmCorridor IS NULL OR t.[enmCorridor] LIKE '%' + @enmCorridor + '%')
          AND (@CountryISO3166Alpha2 IS NULL OR t.[CountryISO3166Alpha2] LIKE '%' + @CountryISO3166Alpha2 + '%')
          AND (@PayoutCurrency IS NULL OR t.[PayoutCurrency] LIKE '%' + @PayoutCurrency + '%')
          AND (@enmPaymentMode IS NULL OR t.[enmPaymentMode] LIKE '%' + @enmPaymentMode + '%')
          AND (@enmCorridor IS NULL OR t.[enmCorridor] LIKE '%' + @enmCorridor + '%')
          AND (@enmPaymentMode IS NULL OR t.[enmPaymentMode] LIKE '%' + @enmPaymentMode + '%')
          AND (@CountryISO3166Alpha2 IS NULL OR t.[CountryISO3166Alpha2] LIKE '%' + @CountryISO3166Alpha2 + '%')
          AND (@enmCorridor IS NULL OR t.[enmCorridor] LIKE '%' + @enmCorridor + '%')
          AND (@enmPaymentMode IS NULL OR t.[enmPaymentMode] LIKE '%' + @enmPaymentMode + '%')
          AND (@CountryISO3166Alpha2 IS NULL OR t.[CountryISO3166Alpha2] LIKE '%' + @CountryISO3166Alpha2 + '%')
          AND (@IsParticipant IS NULL OR t.[IsParticipant] = @IsParticipant)
          AND (@CountryISO3166Alpha2 IS NULL OR t.[CountryISO3166Alpha2] LIKE '%' + @CountryISO3166Alpha2 + '%')
          AND (@enmPaymentMode IS NULL OR t.[enmPaymentMode] LIKE '%' + @enmPaymentMode + '%')
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_MCCBParticipant],
            [ID],
            [enmCorridor],
            [CountryISO3166Alpha2],
            [PayoutCurrency],
            [enmPaymentMode],
            [enmSettlementCurrency_Currency],
            [Comments],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID],
            [IsParticipant],
            [SortOrder],
            [FlatFee],
            [FeeBaseAmount],
            [FeePctOfTrigger],
            [FeeMax],
            [FeeMin]
        FROM [MCCBParticipant]
        WHERE 1=1
          AND (@enmCorridor IS NULL OR [enmCorridor] LIKE '%' + @enmCorridor + '%')
          AND (@CountryISO3166Alpha2 IS NULL OR [CountryISO3166Alpha2] LIKE '%' + @CountryISO3166Alpha2 + '%')
          AND (@PayoutCurrency IS NULL OR [PayoutCurrency] LIKE '%' + @PayoutCurrency + '%')
          AND (@enmPaymentMode IS NULL OR [enmPaymentMode] LIKE '%' + @enmPaymentMode + '%')
          AND (@enmCorridor IS NULL OR [enmCorridor] LIKE '%' + @enmCorridor + '%')
          AND (@enmPaymentMode IS NULL OR [enmPaymentMode] LIKE '%' + @enmPaymentMode + '%')
          AND (@CountryISO3166Alpha2 IS NULL OR [CountryISO3166Alpha2] LIKE '%' + @CountryISO3166Alpha2 + '%')
          AND (@enmCorridor IS NULL OR [enmCorridor] LIKE '%' + @enmCorridor + '%')
          AND (@enmPaymentMode IS NULL OR [enmPaymentMode] LIKE '%' + @enmPaymentMode + '%')
          AND (@CountryISO3166Alpha2 IS NULL OR [CountryISO3166Alpha2] LIKE '%' + @CountryISO3166Alpha2 + '%')
          AND (@IsParticipant IS NULL OR [IsParticipant] = @IsParticipant)
          AND (@CountryISO3166Alpha2 IS NULL OR [CountryISO3166Alpha2] LIKE '%' + @CountryISO3166Alpha2 + '%')
          AND (@enmPaymentMode IS NULL OR [enmPaymentMode] LIKE '%' + @enmPaymentMode + '%')
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetMCCBParticipantByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_MCCBParticipant],
        [ID],
        [enmCorridor],
        [CountryISO3166Alpha2],
        [PayoutCurrency],
        [enmPaymentMode],
        [enmSettlementCurrency_Currency],
        [Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [IsParticipant],
        [SortOrder],
        [FlatFee],
        [FeeBaseAmount],
        [FeePctOfTrigger],
        [FeeMax],
        [FeeMin]
    FROM [MCCBParticipant]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddMCCBParticipant]
    @TableName_MCCBParticipant bit = NULL,
    @enmCorridor varchar(50) = NULL,
    @CountryISO3166Alpha2 varchar(2) = NULL,
    @PayoutCurrency varchar(3) = NULL,
    @enmPaymentMode varchar(50) = NULL,
    @enmSettlementCurrency_Currency varchar(50) = NULL,
    @Comments nvarchar(510) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @IsParticipant bit = NULL,
    @SortOrder int = NULL,
    @FlatFee decimal(18,0) = NULL,
    @FeeBaseAmount decimal(18,0) = NULL,
    @FeePctOfTrigger decimal(18,0) = NULL,
    @FeeMax decimal(18,0) = NULL,
    @FeeMin decimal(18,0) = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [MCCBParticipant] (
        [TableName_MCCBParticipant],
        [enmCorridor],
        [CountryISO3166Alpha2],
        [PayoutCurrency],
        [enmPaymentMode],
        [enmSettlementCurrency_Currency],
        [Comments],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [IsParticipant],
        [SortOrder],
        [FlatFee],
        [FeeBaseAmount],
        [FeePctOfTrigger],
        [FeeMax],
        [FeeMin],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_MCCBParticipant,
        @enmCorridor,
        @CountryISO3166Alpha2,
        @PayoutCurrency,
        @enmPaymentMode,
        @enmSettlementCurrency_Currency,
        @Comments,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        @IsParticipant,
        @SortOrder,
        @FlatFee,
        @FeeBaseAmount,
        @FeePctOfTrigger,
        @FeeMax,
        @FeeMin,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateMCCBParticipant]
    @ID bigint,
    @TableName_MCCBParticipant bit = NULL,
    @enmCorridor varchar(50) = NULL,
    @CountryISO3166Alpha2 varchar(2) = NULL,
    @PayoutCurrency varchar(3) = NULL,
    @enmPaymentMode varchar(50) = NULL,
    @enmSettlementCurrency_Currency varchar(50) = NULL,
    @Comments nvarchar(510) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @IsParticipant bit = NULL,
    @SortOrder int = NULL,
    @FlatFee decimal(18,0) = NULL,
    @FeeBaseAmount decimal(18,0) = NULL,
    @FeePctOfTrigger decimal(18,0) = NULL,
    @FeeMax decimal(18,0) = NULL,
    @FeeMin decimal(18,0) = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [MCCBParticipant]
    SET
        [TableName_MCCBParticipant] = @TableName_MCCBParticipant,
        [enmCorridor] = @enmCorridor,
        [CountryISO3166Alpha2] = @CountryISO3166Alpha2,
        [PayoutCurrency] = @PayoutCurrency,
        [enmPaymentMode] = @enmPaymentMode,
        [enmSettlementCurrency_Currency] = @enmSettlementCurrency_Currency,
        [Comments] = @Comments,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [IsParticipant] = @IsParticipant,
        [SortOrder] = @SortOrder,
        [FlatFee] = @FlatFee,
        [FeeBaseAmount] = @FeeBaseAmount,
        [FeePctOfTrigger] = @FeePctOfTrigger,
        [FeeMax] = @FeeMax,
        [FeeMin] = @FeeMin,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteMCCBParticipant]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [MCCBParticipant]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_MCCBParticipant_Corridor_Country_PayoutCurrency_PaymentMode
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetMCCBParticipantByENMCORRIDORAndCOUNTRYISO3166ALPHA2AndPAYOUTCURRENCYAndENMPAYMENTMODE]
    @enmCorridor varchar(50),
    @CountryISO3166Alpha2 varchar(2),
    @PayoutCurrency varchar(3),
    @enmPaymentMode varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_MCCBParticipant],
        [ID],
        [enmCorridor],
        [CountryISO3166Alpha2],
        [PayoutCurrency],
        [enmPaymentMode],
        [enmSettlementCurrency_Currency],
        [Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [IsParticipant],
        [SortOrder],
        [FlatFee],
        [FeeBaseAmount],
        [FeePctOfTrigger],
        [FeeMax],
        [FeeMin]
    FROM [MCCBParticipant]
    WHERE [enmCorridor] = @enmCorridor AND [CountryISO3166Alpha2] = @CountryISO3166Alpha2 AND [PayoutCurrency] = @PayoutCurrency AND [enmPaymentMode] = @enmPaymentMode
;
END

GO

-- Procedure for Index: IX_MCCBParticipant_Corridor_PaymentMode_Country
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillMCCBParticipantByENMCORRIDORAndENMPAYMENTMODEAndCOUNTRYISO3166ALPHA2]
    @enmCorridor varchar(50),
    @enmPaymentMode varchar(50),
    @CountryISO3166Alpha2 varchar(2)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_MCCBParticipant],
        [ID],
        [enmCorridor],
        [CountryISO3166Alpha2],
        [PayoutCurrency],
        [enmPaymentMode],
        [enmSettlementCurrency_Currency],
        [Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [IsParticipant],
        [SortOrder],
        [FlatFee],
        [FeeBaseAmount],
        [FeePctOfTrigger],
        [FeeMax],
        [FeeMin]
    FROM [MCCBParticipant]
    WHERE [enmCorridor] = @enmCorridor AND [enmPaymentMode] = @enmPaymentMode AND [CountryISO3166Alpha2] = @CountryISO3166Alpha2
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_MCCBParticipant_Corridor_PaymentMode_Country_IsParticipant
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillMCCBParticipantByENMCORRIDORAndENMPAYMENTMODEAndCOUNTRYISO3166ALPHA2AndISPARTICIPANT]
    @enmCorridor varchar(50),
    @enmPaymentMode varchar(50),
    @CountryISO3166Alpha2 varchar(2),
    @IsParticipant bit
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_MCCBParticipant],
        [ID],
        [enmCorridor],
        [CountryISO3166Alpha2],
        [PayoutCurrency],
        [enmPaymentMode],
        [enmSettlementCurrency_Currency],
        [Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [IsParticipant],
        [SortOrder],
        [FlatFee],
        [FeeBaseAmount],
        [FeePctOfTrigger],
        [FeeMax],
        [FeeMin]
    FROM [MCCBParticipant]
    WHERE [enmCorridor] = @enmCorridor AND [enmPaymentMode] = @enmPaymentMode AND [CountryISO3166Alpha2] = @CountryISO3166Alpha2 AND [IsParticipant] = @IsParticipant
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_MCCBParticipant_Country
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillMCCBParticipantByCOUNTRYISO3166ALPHA2]
    @CountryISO3166Alpha2 varchar(2)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_MCCBParticipant],
        [ID],
        [enmCorridor],
        [CountryISO3166Alpha2],
        [PayoutCurrency],
        [enmPaymentMode],
        [enmSettlementCurrency_Currency],
        [Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [IsParticipant],
        [SortOrder],
        [FlatFee],
        [FeeBaseAmount],
        [FeePctOfTrigger],
        [FeeMax],
        [FeeMin]
    FROM [MCCBParticipant]
    WHERE [CountryISO3166Alpha2] = @CountryISO3166Alpha2
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_MCCBParticipant_PaymentMode
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillMCCBParticipantByENMPAYMENTMODE]
    @enmPaymentMode varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_MCCBParticipant],
        [ID],
        [enmCorridor],
        [CountryISO3166Alpha2],
        [PayoutCurrency],
        [enmPaymentMode],
        [enmSettlementCurrency_Currency],
        [Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [IsParticipant],
        [SortOrder],
        [FlatFee],
        [FeeBaseAmount],
        [FeePctOfTrigger],
        [FeeMax],
        [FeeMin]
    FROM [MCCBParticipant]
    WHERE [enmPaymentMode] = @enmPaymentMode
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: MCCBReceiver
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllMCCBReceivers]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_MCCBReceiver],
            t.[ID],
            t.[CustomerID],
            t.[FirstName],
            t.[LastName],
            t.[PhoneNumber],
            t.[BirthDate],
            t.[BirthCountryISO3166Alpha2],
            t.[CitizenshipCountryISO3166Alpha2],
            t.[ResidenceCountryISO3166Alpha2],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            t.[enmGender],
            t.[IsBusiness],
            t.[enmIdentificationMethod],
            t.[IdentificationNumber],
            t.[Expiration],
            p1.[Text] AS [CustomerID_Text],
            p2.[Text] AS [BirthCountryISO3166Alpha2_Text],
            p3.[Text] AS [CitizenshipCountryISO3166Alpha2_Text],
            p4.[Text] AS [ResidenceCountryISO3166Alpha2_Text]
        FROM [MCCBReceiver] t
        LEFT JOIN [ccvwComboList_Customer] p1 ON t.[CustomerID] = p1.[ID]
        LEFT JOIN [ccvwComboList_Country] p2 ON t.[BirthCountryISO3166Alpha2] = p2.[ID]
        LEFT JOIN [ccvwComboList_Country] p3 ON t.[CitizenshipCountryISO3166Alpha2] = p3.[ID]
        LEFT JOIN [ccvwComboList_Country] p4 ON t.[ResidenceCountryISO3166Alpha2] = p4.[ID]
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_MCCBReceiver],
            [ID],
            [CustomerID],
            [FirstName],
            [LastName],
            [PhoneNumber],
            [BirthDate],
            [BirthCountryISO3166Alpha2],
            [CitizenshipCountryISO3166Alpha2],
            [ResidenceCountryISO3166Alpha2],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID],
            [enmGender],
            [IsBusiness],
            [enmIdentificationMethod],
            [IdentificationNumber],
            [Expiration]
        FROM [MCCBReceiver]
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredMCCBReceivers]
    @CustomerID INT = NULL,
    @FirstName VARCHAR(50) = NULL,
    @LastName VARCHAR(50) = NULL,
    @PhoneNumber VARCHAR(50) = NULL,
    @BirthCountryISO3166Alpha2 VARCHAR(2) = NULL,
    @CitizenshipCountryISO3166Alpha2 VARCHAR(2) = NULL,
    @ResidenceCountryISO3166Alpha2 VARCHAR(2) = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_MCCBReceiver],
            t.[ID],
            t.[CustomerID],
            t.[FirstName],
            t.[LastName],
            t.[PhoneNumber],
            t.[BirthDate],
            t.[BirthCountryISO3166Alpha2],
            t.[CitizenshipCountryISO3166Alpha2],
            t.[ResidenceCountryISO3166Alpha2],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            t.[enmGender],
            t.[IsBusiness],
            t.[enmIdentificationMethod],
            t.[IdentificationNumber],
            t.[Expiration],
            p1.[Text] AS [CustomerID_Text],
            p2.[Text] AS [BirthCountryISO3166Alpha2_Text],
            p3.[Text] AS [CitizenshipCountryISO3166Alpha2_Text],
            p4.[Text] AS [ResidenceCountryISO3166Alpha2_Text]
        FROM [MCCBReceiver] t
        LEFT JOIN [ccvwComboList_Customer] p1 ON t.[CustomerID] = p1.[ID]
        LEFT JOIN [ccvwComboList_Country] p2 ON t.[BirthCountryISO3166Alpha2] = p2.[ID]
        LEFT JOIN [ccvwComboList_Country] p3 ON t.[CitizenshipCountryISO3166Alpha2] = p3.[ID]
        LEFT JOIN [ccvwComboList_Country] p4 ON t.[ResidenceCountryISO3166Alpha2] = p4.[ID]
        WHERE 1=1
          AND (@CustomerID IS NULL OR t.[CustomerID] = @CustomerID)
          AND (@FirstName IS NULL OR t.[FirstName] LIKE '%' + @FirstName + '%')
          AND (@LastName IS NULL OR t.[LastName] LIKE '%' + @LastName + '%')
          AND (@PhoneNumber IS NULL OR t.[PhoneNumber] LIKE '%' + @PhoneNumber + '%')
          AND (@BirthCountryISO3166Alpha2 IS NULL OR t.[BirthCountryISO3166Alpha2] LIKE '%' + @BirthCountryISO3166Alpha2 + '%')
          AND (@CitizenshipCountryISO3166Alpha2 IS NULL OR t.[CitizenshipCountryISO3166Alpha2] LIKE '%' + @CitizenshipCountryISO3166Alpha2 + '%')
          AND (@CustomerID IS NULL OR t.[CustomerID] = @CustomerID)
          AND (@ResidenceCountryISO3166Alpha2 IS NULL OR t.[ResidenceCountryISO3166Alpha2] LIKE '%' + @ResidenceCountryISO3166Alpha2 + '%')
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_MCCBReceiver],
            [ID],
            [CustomerID],
            [FirstName],
            [LastName],
            [PhoneNumber],
            [BirthDate],
            [BirthCountryISO3166Alpha2],
            [CitizenshipCountryISO3166Alpha2],
            [ResidenceCountryISO3166Alpha2],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID],
            [enmGender],
            [IsBusiness],
            [enmIdentificationMethod],
            [IdentificationNumber],
            [Expiration]
        FROM [MCCBReceiver]
        WHERE 1=1
          AND (@CustomerID IS NULL OR [CustomerID] = @CustomerID)
          AND (@FirstName IS NULL OR [FirstName] LIKE '%' + @FirstName + '%')
          AND (@LastName IS NULL OR [LastName] LIKE '%' + @LastName + '%')
          AND (@PhoneNumber IS NULL OR [PhoneNumber] LIKE '%' + @PhoneNumber + '%')
          AND (@BirthCountryISO3166Alpha2 IS NULL OR [BirthCountryISO3166Alpha2] LIKE '%' + @BirthCountryISO3166Alpha2 + '%')
          AND (@CitizenshipCountryISO3166Alpha2 IS NULL OR [CitizenshipCountryISO3166Alpha2] LIKE '%' + @CitizenshipCountryISO3166Alpha2 + '%')
          AND (@CustomerID IS NULL OR [CustomerID] = @CustomerID)
          AND (@ResidenceCountryISO3166Alpha2 IS NULL OR [ResidenceCountryISO3166Alpha2] LIKE '%' + @ResidenceCountryISO3166Alpha2 + '%')
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetMCCBReceiverByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_MCCBReceiver],
        [ID],
        [CustomerID],
        [FirstName],
        [LastName],
        [PhoneNumber],
        [BirthDate],
        [BirthCountryISO3166Alpha2],
        [CitizenshipCountryISO3166Alpha2],
        [ResidenceCountryISO3166Alpha2],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [enmGender],
        [IsBusiness],
        [enmIdentificationMethod],
        [IdentificationNumber],
        [Expiration]
    FROM [MCCBReceiver]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddMCCBReceiver]
    @TableName_MCCBReceiver bit = NULL,
    @CustomerID bigint,
    @FirstName varchar(50) = NULL,
    @LastName varchar(50) = NULL,
    @PhoneNumber varchar(50) = NULL,
    @BirthDate date = NULL,
    @BirthCountryISO3166Alpha2 varchar(2) = NULL,
    @CitizenshipCountryISO3166Alpha2 varchar(2) = NULL,
    @ResidenceCountryISO3166Alpha2 varchar(2) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @enmGender varchar(50) = NULL,
    @IsBusiness bit = NULL,
    @enmIdentificationMethod varchar(50) = NULL,
    @IdentificationNumber varchar(50) = NULL,
    @Expiration datetime = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [MCCBReceiver] (
        [TableName_MCCBReceiver],
        [CustomerID],
        [FirstName],
        [LastName],
        [PhoneNumber],
        [BirthDate],
        [BirthCountryISO3166Alpha2],
        [CitizenshipCountryISO3166Alpha2],
        [ResidenceCountryISO3166Alpha2],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [enmGender],
        [IsBusiness],
        [enmIdentificationMethod],
        [IdentificationNumber],
        [Expiration],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_MCCBReceiver,
        @CustomerID,
        @FirstName,
        @LastName,
        @PhoneNumber,
        @BirthDate,
        @BirthCountryISO3166Alpha2,
        @CitizenshipCountryISO3166Alpha2,
        @ResidenceCountryISO3166Alpha2,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        @enmGender,
        @IsBusiness,
        @enmIdentificationMethod,
        @IdentificationNumber,
        @Expiration,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateMCCBReceiver]
    @ID bigint,
    @TableName_MCCBReceiver bit = NULL,
    @CustomerID bigint,
    @FirstName varchar(50) = NULL,
    @LastName varchar(50) = NULL,
    @PhoneNumber varchar(50) = NULL,
    @BirthDate date = NULL,
    @BirthCountryISO3166Alpha2 varchar(2) = NULL,
    @CitizenshipCountryISO3166Alpha2 varchar(2) = NULL,
    @ResidenceCountryISO3166Alpha2 varchar(2) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @enmGender varchar(50) = NULL,
    @IsBusiness bit = NULL,
    @enmIdentificationMethod varchar(50) = NULL,
    @IdentificationNumber varchar(50) = NULL,
    @Expiration datetime = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [MCCBReceiver]
    SET
        [TableName_MCCBReceiver] = @TableName_MCCBReceiver,
        [CustomerID] = @CustomerID,
        [FirstName] = @FirstName,
        [LastName] = @LastName,
        [PhoneNumber] = @PhoneNumber,
        [BirthDate] = @BirthDate,
        [BirthCountryISO3166Alpha2] = @BirthCountryISO3166Alpha2,
        [CitizenshipCountryISO3166Alpha2] = @CitizenshipCountryISO3166Alpha2,
        [ResidenceCountryISO3166Alpha2] = @ResidenceCountryISO3166Alpha2,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [enmGender] = @enmGender,
        [IsBusiness] = @IsBusiness,
        [enmIdentificationMethod] = @enmIdentificationMethod,
        [IdentificationNumber] = @IdentificationNumber,
        [Expiration] = @Expiration,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteMCCBReceiver]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [MCCBReceiver]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_MCCBReceiver_Customer_FirstName_LastName_PhoneNumber
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetMCCBReceiverByCUSTOMERIDAndFIRSTNAMEAndLASTNAMEAndPHONENUMBER]
    @CustomerID bigint,
    @FirstName varchar(50),
    @LastName varchar(50),
    @PhoneNumber varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_MCCBReceiver],
        [ID],
        [CustomerID],
        [FirstName],
        [LastName],
        [PhoneNumber],
        [BirthDate],
        [BirthCountryISO3166Alpha2],
        [CitizenshipCountryISO3166Alpha2],
        [ResidenceCountryISO3166Alpha2],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [enmGender],
        [IsBusiness],
        [enmIdentificationMethod],
        [IdentificationNumber],
        [Expiration]
    FROM [MCCBReceiver]
    WHERE [CustomerID] = @CustomerID AND [FirstName] = @FirstName AND [LastName] = @LastName AND [PhoneNumber] = @PhoneNumber
;
END

GO

-- Procedure for Index: IX_MCCBReceiver_BirthCountry
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillMCCBReceiverByBIRTHCOUNTRYISO3166ALPHA2]
    @BirthCountryISO3166Alpha2 varchar(2)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_MCCBReceiver],
        [ID],
        [CustomerID],
        [FirstName],
        [LastName],
        [PhoneNumber],
        [BirthDate],
        [BirthCountryISO3166Alpha2],
        [CitizenshipCountryISO3166Alpha2],
        [ResidenceCountryISO3166Alpha2],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [enmGender],
        [IsBusiness],
        [enmIdentificationMethod],
        [IdentificationNumber],
        [Expiration]
    FROM [MCCBReceiver]
    WHERE [BirthCountryISO3166Alpha2] = @BirthCountryISO3166Alpha2
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_MCCBReceiver_CitizenshipCountry
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillMCCBReceiverByCITIZENSHIPCOUNTRYISO3166ALPHA2]
    @CitizenshipCountryISO3166Alpha2 varchar(2)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_MCCBReceiver],
        [ID],
        [CustomerID],
        [FirstName],
        [LastName],
        [PhoneNumber],
        [BirthDate],
        [BirthCountryISO3166Alpha2],
        [CitizenshipCountryISO3166Alpha2],
        [ResidenceCountryISO3166Alpha2],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [enmGender],
        [IsBusiness],
        [enmIdentificationMethod],
        [IdentificationNumber],
        [Expiration]
    FROM [MCCBReceiver]
    WHERE [CitizenshipCountryISO3166Alpha2] = @CitizenshipCountryISO3166Alpha2
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_MCCBReceiver_Customer
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillMCCBReceiverByCUSTOMERID]
    @CustomerID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_MCCBReceiver],
        [ID],
        [CustomerID],
        [FirstName],
        [LastName],
        [PhoneNumber],
        [BirthDate],
        [BirthCountryISO3166Alpha2],
        [CitizenshipCountryISO3166Alpha2],
        [ResidenceCountryISO3166Alpha2],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [enmGender],
        [IsBusiness],
        [enmIdentificationMethod],
        [IdentificationNumber],
        [Expiration]
    FROM [MCCBReceiver]
    WHERE [CustomerID] = @CustomerID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_MCCBReceiver_ResidenceCountry
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillMCCBReceiverByRESIDENCECOUNTRYISO3166ALPHA2]
    @ResidenceCountryISO3166Alpha2 varchar(2)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_MCCBReceiver],
        [ID],
        [CustomerID],
        [FirstName],
        [LastName],
        [PhoneNumber],
        [BirthDate],
        [BirthCountryISO3166Alpha2],
        [CitizenshipCountryISO3166Alpha2],
        [ResidenceCountryISO3166Alpha2],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [enmGender],
        [IsBusiness],
        [enmIdentificationMethod],
        [IdentificationNumber],
        [Expiration]
    FROM [MCCBReceiver]
    WHERE [ResidenceCountryISO3166Alpha2] = @ResidenceCountryISO3166Alpha2
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: MCCBReceiverAccount
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllMCCBReceiverAccounts]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_MCCBReceiverAccount],
            t.[ID],
            t.[ReceiverID],
            t.[enmPaymentMode],
            t.[AccountCountryISO3166Alpha2],
            t.[Swift],
            t.[Account],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            t.[Provider],
            t.[AccountType],
            p1.[Text] AS [ReceiverID_Text]
        FROM [MCCBReceiverAccount] t
        LEFT JOIN [ccvwComboList_MCCBReceiver] p1 ON t.[ReceiverID] = p1.[ID]
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_MCCBReceiverAccount],
            [ID],
            [ReceiverID],
            [enmPaymentMode],
            [AccountCountryISO3166Alpha2],
            [Swift],
            [Account],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID],
            [Provider],
            [AccountType]
        FROM [MCCBReceiverAccount]
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredMCCBReceiverAccounts]
    @ReceiverID INT = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_MCCBReceiverAccount],
            t.[ID],
            t.[ReceiverID],
            t.[enmPaymentMode],
            t.[AccountCountryISO3166Alpha2],
            t.[Swift],
            t.[Account],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            t.[Provider],
            t.[AccountType],
            p1.[Text] AS [ReceiverID_Text]
        FROM [MCCBReceiverAccount] t
        LEFT JOIN [ccvwComboList_MCCBReceiver] p1 ON t.[ReceiverID] = p1.[ID]
        WHERE 1=1
          AND (@ReceiverID IS NULL OR t.[ReceiverID] = @ReceiverID)
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_MCCBReceiverAccount],
            [ID],
            [ReceiverID],
            [enmPaymentMode],
            [AccountCountryISO3166Alpha2],
            [Swift],
            [Account],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID],
            [Provider],
            [AccountType]
        FROM [MCCBReceiverAccount]
        WHERE 1=1
          AND (@ReceiverID IS NULL OR [ReceiverID] = @ReceiverID)
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetMCCBReceiverAccountByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_MCCBReceiverAccount],
        [ID],
        [ReceiverID],
        [enmPaymentMode],
        [AccountCountryISO3166Alpha2],
        [Swift],
        [Account],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [Provider],
        [AccountType]
    FROM [MCCBReceiverAccount]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddMCCBReceiverAccount]
    @TableName_MCCBReceiverAccount bit = NULL,
    @ReceiverID bigint,
    @enmPaymentMode varchar(50) = NULL,
    @AccountCountryISO3166Alpha2 varchar(2) = NULL,
    @Swift varchar(50) = NULL,
    @Account varchar(50) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @Provider varchar(50) = NULL,
    @AccountType varchar(50) = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [MCCBReceiverAccount] (
        [TableName_MCCBReceiverAccount],
        [ReceiverID],
        [enmPaymentMode],
        [AccountCountryISO3166Alpha2],
        [Swift],
        [Account],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [Provider],
        [AccountType],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_MCCBReceiverAccount,
        @ReceiverID,
        @enmPaymentMode,
        @AccountCountryISO3166Alpha2,
        @Swift,
        @Account,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        @Provider,
        @AccountType,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateMCCBReceiverAccount]
    @ID bigint,
    @TableName_MCCBReceiverAccount bit = NULL,
    @ReceiverID bigint,
    @enmPaymentMode varchar(50) = NULL,
    @AccountCountryISO3166Alpha2 varchar(2) = NULL,
    @Swift varchar(50) = NULL,
    @Account varchar(50) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @Provider varchar(50) = NULL,
    @AccountType varchar(50) = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [MCCBReceiverAccount]
    SET
        [TableName_MCCBReceiverAccount] = @TableName_MCCBReceiverAccount,
        [ReceiverID] = @ReceiverID,
        [enmPaymentMode] = @enmPaymentMode,
        [AccountCountryISO3166Alpha2] = @AccountCountryISO3166Alpha2,
        [Swift] = @Swift,
        [Account] = @Account,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [Provider] = @Provider,
        [AccountType] = @AccountType,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteMCCBReceiverAccount]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [MCCBReceiverAccount]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_MCCBReceiverAccount_Receiver
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillMCCBReceiverAccountByRECEIVERID]
    @ReceiverID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_MCCBReceiverAccount],
        [ID],
        [ReceiverID],
        [enmPaymentMode],
        [AccountCountryISO3166Alpha2],
        [Swift],
        [Account],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [Provider],
        [AccountType]
    FROM [MCCBReceiverAccount]
    WHERE [ReceiverID] = @ReceiverID
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: MCCBSecurityCheck
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllMCCBSecurityChecks]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_MCCBSecurityCheck],
            t.[ID],
            t.[CustomerID],
            t.[MCCBReceiverID],
            t.[DestinationCountryISO3166Alpha2],
            t.[enmReceiverSecurityCleared_SecurityCleared],
            t.[ReceiverSecurityAllData],
            t.[enmPayerSecurityCleared_SecurityCleared],
            t.[PayerSecurityAllData],
            t.[WhenSecurityDataUpdated],
            t.[RequestedTransactionID],
            t.[MCCBTransactionID],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            p1.[Text] AS [CustomerID_Text],
            p2.[Text] AS [MCCBReceiverID_Text],
            p3.[Text] AS [DestinationCountryISO3166Alpha2_Text],
            p4.[Text] AS [RequestedTransactionID_Text],
            p5.[Text] AS [MCCBTransactionID_Text]
        FROM [MCCBSecurityCheck] t
        LEFT JOIN [ccvwComboList_Customer] p1 ON t.[CustomerID] = p1.[ID]
        LEFT JOIN [ccvwComboList_MCCBReceiver] p2 ON t.[MCCBReceiverID] = p2.[ID]
        LEFT JOIN [ccvwComboList_Country] p3 ON t.[DestinationCountryISO3166Alpha2] = p3.[ID]
        LEFT JOIN [ccvwComboList_RequestedTransaction] p4 ON t.[RequestedTransactionID] = p4.[ID]
        LEFT JOIN [ccvwComboList_MCCBTransaction] p5 ON t.[MCCBTransactionID] = p5.[ID]
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_MCCBSecurityCheck],
            [ID],
            [CustomerID],
            [MCCBReceiverID],
            [DestinationCountryISO3166Alpha2],
            [enmReceiverSecurityCleared_SecurityCleared],
            [ReceiverSecurityAllData],
            [enmPayerSecurityCleared_SecurityCleared],
            [PayerSecurityAllData],
            [WhenSecurityDataUpdated],
            [RequestedTransactionID],
            [MCCBTransactionID],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID]
        FROM [MCCBSecurityCheck]
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredMCCBSecurityChecks]
    @DestinationCountryISO3166Alpha2 VARCHAR(2) = NULL,
    @CustomerID INT = NULL,
    @MCCBReceiverID INT = NULL,
    @MCCBTransactionID INT = NULL,
    @RequestedTransactionID INT = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_MCCBSecurityCheck],
            t.[ID],
            t.[CustomerID],
            t.[MCCBReceiverID],
            t.[DestinationCountryISO3166Alpha2],
            t.[enmReceiverSecurityCleared_SecurityCleared],
            t.[ReceiverSecurityAllData],
            t.[enmPayerSecurityCleared_SecurityCleared],
            t.[PayerSecurityAllData],
            t.[WhenSecurityDataUpdated],
            t.[RequestedTransactionID],
            t.[MCCBTransactionID],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            p1.[Text] AS [CustomerID_Text],
            p2.[Text] AS [MCCBReceiverID_Text],
            p3.[Text] AS [DestinationCountryISO3166Alpha2_Text],
            p4.[Text] AS [RequestedTransactionID_Text],
            p5.[Text] AS [MCCBTransactionID_Text]
        FROM [MCCBSecurityCheck] t
        LEFT JOIN [ccvwComboList_Customer] p1 ON t.[CustomerID] = p1.[ID]
        LEFT JOIN [ccvwComboList_MCCBReceiver] p2 ON t.[MCCBReceiverID] = p2.[ID]
        LEFT JOIN [ccvwComboList_Country] p3 ON t.[DestinationCountryISO3166Alpha2] = p3.[ID]
        LEFT JOIN [ccvwComboList_RequestedTransaction] p4 ON t.[RequestedTransactionID] = p4.[ID]
        LEFT JOIN [ccvwComboList_MCCBTransaction] p5 ON t.[MCCBTransactionID] = p5.[ID]
        WHERE 1=1
          AND (@DestinationCountryISO3166Alpha2 IS NULL OR t.[DestinationCountryISO3166Alpha2] LIKE '%' + @DestinationCountryISO3166Alpha2 + '%')
          AND (@CustomerID IS NULL OR t.[CustomerID] = @CustomerID)
          AND (@MCCBReceiverID IS NULL OR t.[MCCBReceiverID] = @MCCBReceiverID)
          AND (@MCCBTransactionID IS NULL OR t.[MCCBTransactionID] = @MCCBTransactionID)
          AND (@RequestedTransactionID IS NULL OR t.[RequestedTransactionID] = @RequestedTransactionID)
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_MCCBSecurityCheck],
            [ID],
            [CustomerID],
            [MCCBReceiverID],
            [DestinationCountryISO3166Alpha2],
            [enmReceiverSecurityCleared_SecurityCleared],
            [ReceiverSecurityAllData],
            [enmPayerSecurityCleared_SecurityCleared],
            [PayerSecurityAllData],
            [WhenSecurityDataUpdated],
            [RequestedTransactionID],
            [MCCBTransactionID],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID]
        FROM [MCCBSecurityCheck]
        WHERE 1=1
          AND (@DestinationCountryISO3166Alpha2 IS NULL OR [DestinationCountryISO3166Alpha2] LIKE '%' + @DestinationCountryISO3166Alpha2 + '%')
          AND (@CustomerID IS NULL OR [CustomerID] = @CustomerID)
          AND (@MCCBReceiverID IS NULL OR [MCCBReceiverID] = @MCCBReceiverID)
          AND (@MCCBTransactionID IS NULL OR [MCCBTransactionID] = @MCCBTransactionID)
          AND (@RequestedTransactionID IS NULL OR [RequestedTransactionID] = @RequestedTransactionID)
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetMCCBSecurityCheckByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_MCCBSecurityCheck],
        [ID],
        [CustomerID],
        [MCCBReceiverID],
        [DestinationCountryISO3166Alpha2],
        [enmReceiverSecurityCleared_SecurityCleared],
        [ReceiverSecurityAllData],
        [enmPayerSecurityCleared_SecurityCleared],
        [PayerSecurityAllData],
        [WhenSecurityDataUpdated],
        [RequestedTransactionID],
        [MCCBTransactionID],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [MCCBSecurityCheck]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddMCCBSecurityCheck]
    @TableName_MCCBSecurityCheck bit = NULL,
    @CustomerID bigint,
    @MCCBReceiverID bigint,
    @DestinationCountryISO3166Alpha2 varchar(2) = NULL,
    @enmReceiverSecurityCleared_SecurityCleared varchar(50) = NULL,
    @ReceiverSecurityAllData nvarchar(MAX) = NULL,
    @enmPayerSecurityCleared_SecurityCleared varchar(50) = NULL,
    @PayerSecurityAllData nvarchar(MAX) = NULL,
    @WhenSecurityDataUpdated datetimeoffset = NULL,
    @RequestedTransactionID bigint = NULL,
    @MCCBTransactionID bigint = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [MCCBSecurityCheck] (
        [TableName_MCCBSecurityCheck],
        [CustomerID],
        [MCCBReceiverID],
        [DestinationCountryISO3166Alpha2],
        [enmReceiverSecurityCleared_SecurityCleared],
        [ReceiverSecurityAllData],
        [enmPayerSecurityCleared_SecurityCleared],
        [PayerSecurityAllData],
        [WhenSecurityDataUpdated],
        [RequestedTransactionID],
        [MCCBTransactionID],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_MCCBSecurityCheck,
        @CustomerID,
        @MCCBReceiverID,
        @DestinationCountryISO3166Alpha2,
        @enmReceiverSecurityCleared_SecurityCleared,
        @ReceiverSecurityAllData,
        @enmPayerSecurityCleared_SecurityCleared,
        @PayerSecurityAllData,
        @WhenSecurityDataUpdated,
        @RequestedTransactionID,
        @MCCBTransactionID,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateMCCBSecurityCheck]
    @ID bigint,
    @TableName_MCCBSecurityCheck bit = NULL,
    @CustomerID bigint,
    @MCCBReceiverID bigint,
    @DestinationCountryISO3166Alpha2 varchar(2) = NULL,
    @enmReceiverSecurityCleared_SecurityCleared varchar(50) = NULL,
    @ReceiverSecurityAllData nvarchar(MAX) = NULL,
    @enmPayerSecurityCleared_SecurityCleared varchar(50) = NULL,
    @PayerSecurityAllData nvarchar(MAX) = NULL,
    @WhenSecurityDataUpdated datetimeoffset = NULL,
    @RequestedTransactionID bigint = NULL,
    @MCCBTransactionID bigint = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [MCCBSecurityCheck]
    SET
        [TableName_MCCBSecurityCheck] = @TableName_MCCBSecurityCheck,
        [CustomerID] = @CustomerID,
        [MCCBReceiverID] = @MCCBReceiverID,
        [DestinationCountryISO3166Alpha2] = @DestinationCountryISO3166Alpha2,
        [enmReceiverSecurityCleared_SecurityCleared] = @enmReceiverSecurityCleared_SecurityCleared,
        [ReceiverSecurityAllData] = @ReceiverSecurityAllData,
        [enmPayerSecurityCleared_SecurityCleared] = @enmPayerSecurityCleared_SecurityCleared,
        [PayerSecurityAllData] = @PayerSecurityAllData,
        [WhenSecurityDataUpdated] = @WhenSecurityDataUpdated,
        [RequestedTransactionID] = @RequestedTransactionID,
        [MCCBTransactionID] = @MCCBTransactionID,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteMCCBSecurityCheck]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [MCCBSecurityCheck]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_MCCBSecurityCheck_Country
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillMCCBSecurityCheckByDESTINATIONCOUNTRYISO3166ALPHA2]
    @DestinationCountryISO3166Alpha2 varchar(2)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_MCCBSecurityCheck],
        [ID],
        [CustomerID],
        [MCCBReceiverID],
        [DestinationCountryISO3166Alpha2],
        [enmReceiverSecurityCleared_SecurityCleared],
        [ReceiverSecurityAllData],
        [enmPayerSecurityCleared_SecurityCleared],
        [PayerSecurityAllData],
        [WhenSecurityDataUpdated],
        [RequestedTransactionID],
        [MCCBTransactionID],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [MCCBSecurityCheck]
    WHERE [DestinationCountryISO3166Alpha2] = @DestinationCountryISO3166Alpha2
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_MCCBSecurityCheck_Customer
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillMCCBSecurityCheckByCUSTOMERID]
    @CustomerID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_MCCBSecurityCheck],
        [ID],
        [CustomerID],
        [MCCBReceiverID],
        [DestinationCountryISO3166Alpha2],
        [enmReceiverSecurityCleared_SecurityCleared],
        [ReceiverSecurityAllData],
        [enmPayerSecurityCleared_SecurityCleared],
        [PayerSecurityAllData],
        [WhenSecurityDataUpdated],
        [RequestedTransactionID],
        [MCCBTransactionID],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [MCCBSecurityCheck]
    WHERE [CustomerID] = @CustomerID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_MCCBSecurityCheck_MCCBReceiver
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillMCCBSecurityCheckByMCCBRECEIVERID]
    @MCCBReceiverID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_MCCBSecurityCheck],
        [ID],
        [CustomerID],
        [MCCBReceiverID],
        [DestinationCountryISO3166Alpha2],
        [enmReceiverSecurityCleared_SecurityCleared],
        [ReceiverSecurityAllData],
        [enmPayerSecurityCleared_SecurityCleared],
        [PayerSecurityAllData],
        [WhenSecurityDataUpdated],
        [RequestedTransactionID],
        [MCCBTransactionID],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [MCCBSecurityCheck]
    WHERE [MCCBReceiverID] = @MCCBReceiverID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_MCCBSecurityCheck_MCCBTransaction
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillMCCBSecurityCheckByMCCBTRANSACTIONID]
    @MCCBTransactionID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_MCCBSecurityCheck],
        [ID],
        [CustomerID],
        [MCCBReceiverID],
        [DestinationCountryISO3166Alpha2],
        [enmReceiverSecurityCleared_SecurityCleared],
        [ReceiverSecurityAllData],
        [enmPayerSecurityCleared_SecurityCleared],
        [PayerSecurityAllData],
        [WhenSecurityDataUpdated],
        [RequestedTransactionID],
        [MCCBTransactionID],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [MCCBSecurityCheck]
    WHERE [MCCBTransactionID] = @MCCBTransactionID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_MCCBSecurityCheck_RequestedTransaction
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillMCCBSecurityCheckByREQUESTEDTRANSACTIONID]
    @RequestedTransactionID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_MCCBSecurityCheck],
        [ID],
        [CustomerID],
        [MCCBReceiverID],
        [DestinationCountryISO3166Alpha2],
        [enmReceiverSecurityCleared_SecurityCleared],
        [ReceiverSecurityAllData],
        [enmPayerSecurityCleared_SecurityCleared],
        [PayerSecurityAllData],
        [WhenSecurityDataUpdated],
        [RequestedTransactionID],
        [MCCBTransactionID],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [MCCBSecurityCheck]
    WHERE [RequestedTransactionID] = @RequestedTransactionID
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: MCCBTransaction
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllMCCBTransactions]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_MCCBTransaction],
            t.[ID],
            t.[CustomerID],
            t.[enmPaymentMode],
            t.[AmountILSDisplayed],
            t.[AmountILSCalculated],
            t.[AmountILSAddedToFee],
            t.[PayoutAmount],
            t.[PayoutCurrency],
            t.[DisplayedFee],
            t.[DisplayedExchangeRate],
            t.[TransactionReference],
            t.[ICPTransactionFee],
            t.[enmSettlementCurrency_Currency],
            t.[ICPILSToSettlementER],
            t.[MCFeeInSettlementCurrency],
            t.[MCPayoutToSettlementER],
            t.[MCChargedAmount],
            t.[MCPrincipleAmount],
            t.[ProposalExpiry],
            t.[PaymentId],
            t.[PaymentPurpose],
            t.[PaymentStatus],
            t.[PaymentStatusTimestamp],
            t.[PaymentPendingStage],
            t.[PaymentPendingMaxCompletionDate],
            t.[RawDataPayment],
            t.[RawDataQuote],
            t.[Comments],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            t.[MCCBReceiverID],
            t.[RequestedTransactionID],
            t.[ProposalId],
            t.[MCCBReceiverAccountID],
            t.[RawDataStatus],
            t.[FundsTakenByICP],
            t.[FundsRefundedByICP],
            p1.[Text] AS [CustomerID_Text],
            p2.[Text] AS [MCCBReceiverID_Text],
            p3.[Text] AS [RequestedTransactionID_Text],
            p4.[Text] AS [MCCBReceiverAccountID_Text]
        FROM [MCCBTransaction] t
        LEFT JOIN [ccvwComboList_Customer] p1 ON t.[CustomerID] = p1.[ID]
        LEFT JOIN [ccvwComboList_MCCBReceiver] p2 ON t.[MCCBReceiverID] = p2.[ID]
        LEFT JOIN [ccvwComboList_RequestedTransaction] p3 ON t.[RequestedTransactionID] = p3.[ID]
        LEFT JOIN [ccvwComboList_MCCBReceiverAccount] p4 ON t.[MCCBReceiverAccountID] = p4.[ID]
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_MCCBTransaction],
            [ID],
            [CustomerID],
            [enmPaymentMode],
            [AmountILSDisplayed],
            [AmountILSCalculated],
            [AmountILSAddedToFee],
            [PayoutAmount],
            [PayoutCurrency],
            [DisplayedFee],
            [DisplayedExchangeRate],
            [TransactionReference],
            [ICPTransactionFee],
            [enmSettlementCurrency_Currency],
            [ICPILSToSettlementER],
            [MCFeeInSettlementCurrency],
            [MCPayoutToSettlementER],
            [MCChargedAmount],
            [MCPrincipleAmount],
            [ProposalExpiry],
            [PaymentId],
            [PaymentPurpose],
            [PaymentStatus],
            [PaymentStatusTimestamp],
            [PaymentPendingStage],
            [PaymentPendingMaxCompletionDate],
            [RawDataPayment],
            [RawDataQuote],
            [Comments],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID],
            [MCCBReceiverID],
            [RequestedTransactionID],
            [ProposalId],
            [MCCBReceiverAccountID],
            [RawDataStatus],
            [FundsTakenByICP],
            [FundsRefundedByICP]
        FROM [MCCBTransaction]
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredMCCBTransactions]
    @ProposalId VARCHAR(50) = NULL,
    @RequestedTransactionID INT = NULL,
    @TransactionReference VARCHAR(50) = NULL,
    @CustomerID INT = NULL,
    @MCCBReceiverID INT = NULL,
    @MCCBReceiverAccountID INT = NULL,
    @enmPaymentMode VARCHAR(50) = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_MCCBTransaction],
            t.[ID],
            t.[CustomerID],
            t.[enmPaymentMode],
            t.[AmountILSDisplayed],
            t.[AmountILSCalculated],
            t.[AmountILSAddedToFee],
            t.[PayoutAmount],
            t.[PayoutCurrency],
            t.[DisplayedFee],
            t.[DisplayedExchangeRate],
            t.[TransactionReference],
            t.[ICPTransactionFee],
            t.[enmSettlementCurrency_Currency],
            t.[ICPILSToSettlementER],
            t.[MCFeeInSettlementCurrency],
            t.[MCPayoutToSettlementER],
            t.[MCChargedAmount],
            t.[MCPrincipleAmount],
            t.[ProposalExpiry],
            t.[PaymentId],
            t.[PaymentPurpose],
            t.[PaymentStatus],
            t.[PaymentStatusTimestamp],
            t.[PaymentPendingStage],
            t.[PaymentPendingMaxCompletionDate],
            t.[RawDataPayment],
            t.[RawDataQuote],
            t.[Comments],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            t.[MCCBReceiverID],
            t.[RequestedTransactionID],
            t.[ProposalId],
            t.[MCCBReceiverAccountID],
            t.[RawDataStatus],
            t.[FundsTakenByICP],
            t.[FundsRefundedByICP],
            p1.[Text] AS [CustomerID_Text],
            p2.[Text] AS [MCCBReceiverID_Text],
            p3.[Text] AS [RequestedTransactionID_Text],
            p4.[Text] AS [MCCBReceiverAccountID_Text]
        FROM [MCCBTransaction] t
        LEFT JOIN [ccvwComboList_Customer] p1 ON t.[CustomerID] = p1.[ID]
        LEFT JOIN [ccvwComboList_MCCBReceiver] p2 ON t.[MCCBReceiverID] = p2.[ID]
        LEFT JOIN [ccvwComboList_RequestedTransaction] p3 ON t.[RequestedTransactionID] = p3.[ID]
        LEFT JOIN [ccvwComboList_MCCBReceiverAccount] p4 ON t.[MCCBReceiverAccountID] = p4.[ID]
        WHERE 1=1
          AND (@ProposalId IS NULL OR t.[ProposalId] LIKE '%' + @ProposalId + '%')
          AND (@RequestedTransactionID IS NULL OR t.[RequestedTransactionID] = @RequestedTransactionID)
          AND (@TransactionReference IS NULL OR t.[TransactionReference] LIKE '%' + @TransactionReference + '%')
          AND (@CustomerID IS NULL OR t.[CustomerID] = @CustomerID)
          AND (@MCCBReceiverID IS NULL OR t.[MCCBReceiverID] = @MCCBReceiverID)
          AND (@MCCBReceiverAccountID IS NULL OR t.[MCCBReceiverAccountID] = @MCCBReceiverAccountID)
          AND (@enmPaymentMode IS NULL OR t.[enmPaymentMode] LIKE '%' + @enmPaymentMode + '%')
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_MCCBTransaction],
            [ID],
            [CustomerID],
            [enmPaymentMode],
            [AmountILSDisplayed],
            [AmountILSCalculated],
            [AmountILSAddedToFee],
            [PayoutAmount],
            [PayoutCurrency],
            [DisplayedFee],
            [DisplayedExchangeRate],
            [TransactionReference],
            [ICPTransactionFee],
            [enmSettlementCurrency_Currency],
            [ICPILSToSettlementER],
            [MCFeeInSettlementCurrency],
            [MCPayoutToSettlementER],
            [MCChargedAmount],
            [MCPrincipleAmount],
            [ProposalExpiry],
            [PaymentId],
            [PaymentPurpose],
            [PaymentStatus],
            [PaymentStatusTimestamp],
            [PaymentPendingStage],
            [PaymentPendingMaxCompletionDate],
            [RawDataPayment],
            [RawDataQuote],
            [Comments],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID],
            [MCCBReceiverID],
            [RequestedTransactionID],
            [ProposalId],
            [MCCBReceiverAccountID],
            [RawDataStatus],
            [FundsTakenByICP],
            [FundsRefundedByICP]
        FROM [MCCBTransaction]
        WHERE 1=1
          AND (@ProposalId IS NULL OR [ProposalId] LIKE '%' + @ProposalId + '%')
          AND (@RequestedTransactionID IS NULL OR [RequestedTransactionID] = @RequestedTransactionID)
          AND (@TransactionReference IS NULL OR [TransactionReference] LIKE '%' + @TransactionReference + '%')
          AND (@CustomerID IS NULL OR [CustomerID] = @CustomerID)
          AND (@MCCBReceiverID IS NULL OR [MCCBReceiverID] = @MCCBReceiverID)
          AND (@MCCBReceiverAccountID IS NULL OR [MCCBReceiverAccountID] = @MCCBReceiverAccountID)
          AND (@enmPaymentMode IS NULL OR [enmPaymentMode] LIKE '%' + @enmPaymentMode + '%')
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetMCCBTransactionByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_MCCBTransaction],
        [ID],
        [CustomerID],
        [enmPaymentMode],
        [AmountILSDisplayed],
        [AmountILSCalculated],
        [AmountILSAddedToFee],
        [PayoutAmount],
        [PayoutCurrency],
        [DisplayedFee],
        [DisplayedExchangeRate],
        [TransactionReference],
        [ICPTransactionFee],
        [enmSettlementCurrency_Currency],
        [ICPILSToSettlementER],
        [MCFeeInSettlementCurrency],
        [MCPayoutToSettlementER],
        [MCChargedAmount],
        [MCPrincipleAmount],
        [ProposalExpiry],
        [PaymentId],
        [PaymentPurpose],
        [PaymentStatus],
        [PaymentStatusTimestamp],
        [PaymentPendingStage],
        [PaymentPendingMaxCompletionDate],
        [RawDataPayment],
        [RawDataQuote],
        [Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [MCCBReceiverID],
        [RequestedTransactionID],
        [ProposalId],
        [MCCBReceiverAccountID],
        [RawDataStatus],
        [FundsTakenByICP],
        [FundsRefundedByICP]
    FROM [MCCBTransaction]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddMCCBTransaction]
    @TableName_MCCBTransaction bit = NULL,
    @CustomerID bigint,
    @enmPaymentMode varchar(50) = NULL,
    @AmountILSDisplayed decimal(18,0) = NULL,
    @AmountILSCalculated decimal(18,0) = NULL,
    @AmountILSAddedToFee decimal(18,0) = NULL,
    @PayoutAmount decimal(18,0) = NULL,
    @PayoutCurrency varchar(3) = NULL,
    @DisplayedFee decimal(18,0) = NULL,
    @DisplayedExchangeRate decimal(18,0) = NULL,
    @TransactionReference varchar(50) = NULL,
    @ICPTransactionFee decimal(18,0) = NULL,
    @enmSettlementCurrency_Currency varchar(3) = NULL,
    @ICPILSToSettlementER decimal(18,0) = NULL,
    @MCFeeInSettlementCurrency decimal(18,0) = NULL,
    @MCPayoutToSettlementER decimal(18,0) = NULL,
    @MCChargedAmount decimal(18,0) = NULL,
    @MCPrincipleAmount decimal(18,0) = NULL,
    @ProposalExpiry datetimeoffset = NULL,
    @PaymentId varchar(50) = NULL,
    @PaymentPurpose nvarchar(200) = NULL,
    @PaymentStatus varchar(50) = NULL,
    @PaymentStatusTimestamp datetimeoffset = NULL,
    @PaymentPendingStage varchar(50) = NULL,
    @PaymentPendingMaxCompletionDate datetimeoffset = NULL,
    @RawDataPayment nvarchar(MAX) = NULL,
    @RawDataQuote nvarchar(MAX) = NULL,
    @Comments nvarchar(MAX) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @MCCBReceiverID bigint = NULL,
    @RequestedTransactionID bigint = NULL,
    @ProposalId varchar(50) = NULL,
    @MCCBReceiverAccountID bigint = NULL,
    @RawDataStatus nvarchar(MAX) = NULL,
    @FundsTakenByICP bit = NULL,
    @FundsRefundedByICP bit = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [MCCBTransaction] (
        [TableName_MCCBTransaction],
        [CustomerID],
        [enmPaymentMode],
        [AmountILSDisplayed],
        [AmountILSCalculated],
        [AmountILSAddedToFee],
        [PayoutAmount],
        [PayoutCurrency],
        [DisplayedFee],
        [DisplayedExchangeRate],
        [TransactionReference],
        [ICPTransactionFee],
        [enmSettlementCurrency_Currency],
        [ICPILSToSettlementER],
        [MCFeeInSettlementCurrency],
        [MCPayoutToSettlementER],
        [MCChargedAmount],
        [MCPrincipleAmount],
        [ProposalExpiry],
        [PaymentId],
        [PaymentPurpose],
        [PaymentStatus],
        [PaymentStatusTimestamp],
        [PaymentPendingStage],
        [PaymentPendingMaxCompletionDate],
        [RawDataPayment],
        [RawDataQuote],
        [Comments],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [MCCBReceiverID],
        [RequestedTransactionID],
        [ProposalId],
        [MCCBReceiverAccountID],
        [RawDataStatus],
        [FundsTakenByICP],
        [FundsRefundedByICP],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_MCCBTransaction,
        @CustomerID,
        @enmPaymentMode,
        @AmountILSDisplayed,
        @AmountILSCalculated,
        @AmountILSAddedToFee,
        @PayoutAmount,
        @PayoutCurrency,
        @DisplayedFee,
        @DisplayedExchangeRate,
        @TransactionReference,
        @ICPTransactionFee,
        @enmSettlementCurrency_Currency,
        @ICPILSToSettlementER,
        @MCFeeInSettlementCurrency,
        @MCPayoutToSettlementER,
        @MCChargedAmount,
        @MCPrincipleAmount,
        @ProposalExpiry,
        @PaymentId,
        @PaymentPurpose,
        @PaymentStatus,
        @PaymentStatusTimestamp,
        @PaymentPendingStage,
        @PaymentPendingMaxCompletionDate,
        @RawDataPayment,
        @RawDataQuote,
        @Comments,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        @MCCBReceiverID,
        @RequestedTransactionID,
        @ProposalId,
        @MCCBReceiverAccountID,
        @RawDataStatus,
        @FundsTakenByICP,
        @FundsRefundedByICP,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateMCCBTransaction]
    @ID bigint,
    @TableName_MCCBTransaction bit = NULL,
    @CustomerID bigint,
    @enmPaymentMode varchar(50) = NULL,
    @AmountILSDisplayed decimal(18,0) = NULL,
    @AmountILSCalculated decimal(18,0) = NULL,
    @AmountILSAddedToFee decimal(18,0) = NULL,
    @PayoutAmount decimal(18,0) = NULL,
    @PayoutCurrency varchar(3) = NULL,
    @DisplayedFee decimal(18,0) = NULL,
    @DisplayedExchangeRate decimal(18,0) = NULL,
    @TransactionReference varchar(50) = NULL,
    @ICPTransactionFee decimal(18,0) = NULL,
    @enmSettlementCurrency_Currency varchar(3) = NULL,
    @ICPILSToSettlementER decimal(18,0) = NULL,
    @MCFeeInSettlementCurrency decimal(18,0) = NULL,
    @MCPayoutToSettlementER decimal(18,0) = NULL,
    @MCChargedAmount decimal(18,0) = NULL,
    @MCPrincipleAmount decimal(18,0) = NULL,
    @ProposalExpiry datetimeoffset = NULL,
    @PaymentId varchar(50) = NULL,
    @PaymentPurpose nvarchar(200) = NULL,
    @PaymentStatus varchar(50) = NULL,
    @PaymentStatusTimestamp datetimeoffset = NULL,
    @PaymentPendingStage varchar(50) = NULL,
    @PaymentPendingMaxCompletionDate datetimeoffset = NULL,
    @RawDataPayment nvarchar(MAX) = NULL,
    @RawDataQuote nvarchar(MAX) = NULL,
    @Comments nvarchar(MAX) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @MCCBReceiverID bigint = NULL,
    @RequestedTransactionID bigint = NULL,
    @ProposalId varchar(50) = NULL,
    @MCCBReceiverAccountID bigint = NULL,
    @RawDataStatus nvarchar(MAX) = NULL,
    @FundsTakenByICP bit = NULL,
    @FundsRefundedByICP bit = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [MCCBTransaction]
    SET
        [TableName_MCCBTransaction] = @TableName_MCCBTransaction,
        [CustomerID] = @CustomerID,
        [enmPaymentMode] = @enmPaymentMode,
        [AmountILSDisplayed] = @AmountILSDisplayed,
        [AmountILSCalculated] = @AmountILSCalculated,
        [AmountILSAddedToFee] = @AmountILSAddedToFee,
        [PayoutAmount] = @PayoutAmount,
        [PayoutCurrency] = @PayoutCurrency,
        [DisplayedFee] = @DisplayedFee,
        [DisplayedExchangeRate] = @DisplayedExchangeRate,
        [TransactionReference] = @TransactionReference,
        [ICPTransactionFee] = @ICPTransactionFee,
        [enmSettlementCurrency_Currency] = @enmSettlementCurrency_Currency,
        [ICPILSToSettlementER] = @ICPILSToSettlementER,
        [MCFeeInSettlementCurrency] = @MCFeeInSettlementCurrency,
        [MCPayoutToSettlementER] = @MCPayoutToSettlementER,
        [MCChargedAmount] = @MCChargedAmount,
        [MCPrincipleAmount] = @MCPrincipleAmount,
        [ProposalExpiry] = @ProposalExpiry,
        [PaymentId] = @PaymentId,
        [PaymentPurpose] = @PaymentPurpose,
        [PaymentStatus] = @PaymentStatus,
        [PaymentStatusTimestamp] = @PaymentStatusTimestamp,
        [PaymentPendingStage] = @PaymentPendingStage,
        [PaymentPendingMaxCompletionDate] = @PaymentPendingMaxCompletionDate,
        [RawDataPayment] = @RawDataPayment,
        [RawDataQuote] = @RawDataQuote,
        [Comments] = @Comments,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [MCCBReceiverID] = @MCCBReceiverID,
        [RequestedTransactionID] = @RequestedTransactionID,
        [ProposalId] = @ProposalId,
        [MCCBReceiverAccountID] = @MCCBReceiverAccountID,
        [RawDataStatus] = @RawDataStatus,
        [FundsTakenByICP] = @FundsTakenByICP,
        [FundsRefundedByICP] = @FundsRefundedByICP,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteMCCBTransaction]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [MCCBTransaction]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_MCCBTransaction_ProposalId
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetMCCBTransactionByPROPOSALID]
    @ProposalId varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_MCCBTransaction],
        [ID],
        [CustomerID],
        [enmPaymentMode],
        [AmountILSDisplayed],
        [AmountILSCalculated],
        [AmountILSAddedToFee],
        [PayoutAmount],
        [PayoutCurrency],
        [DisplayedFee],
        [DisplayedExchangeRate],
        [TransactionReference],
        [ICPTransactionFee],
        [enmSettlementCurrency_Currency],
        [ICPILSToSettlementER],
        [MCFeeInSettlementCurrency],
        [MCPayoutToSettlementER],
        [MCChargedAmount],
        [MCPrincipleAmount],
        [ProposalExpiry],
        [PaymentId],
        [PaymentPurpose],
        [PaymentStatus],
        [PaymentStatusTimestamp],
        [PaymentPendingStage],
        [PaymentPendingMaxCompletionDate],
        [RawDataPayment],
        [RawDataQuote],
        [Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [MCCBReceiverID],
        [RequestedTransactionID],
        [ProposalId],
        [MCCBReceiverAccountID],
        [RawDataStatus],
        [FundsTakenByICP],
        [FundsRefundedByICP]
    FROM [MCCBTransaction]
    WHERE [ProposalId] = @ProposalId
;
END

GO

-- Procedure for Index: IX_MCCBTransaction_RequestedTransaction
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetMCCBTransactionByREQUESTEDTRANSACTIONID]
    @RequestedTransactionID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_MCCBTransaction],
        [ID],
        [CustomerID],
        [enmPaymentMode],
        [AmountILSDisplayed],
        [AmountILSCalculated],
        [AmountILSAddedToFee],
        [PayoutAmount],
        [PayoutCurrency],
        [DisplayedFee],
        [DisplayedExchangeRate],
        [TransactionReference],
        [ICPTransactionFee],
        [enmSettlementCurrency_Currency],
        [ICPILSToSettlementER],
        [MCFeeInSettlementCurrency],
        [MCPayoutToSettlementER],
        [MCChargedAmount],
        [MCPrincipleAmount],
        [ProposalExpiry],
        [PaymentId],
        [PaymentPurpose],
        [PaymentStatus],
        [PaymentStatusTimestamp],
        [PaymentPendingStage],
        [PaymentPendingMaxCompletionDate],
        [RawDataPayment],
        [RawDataQuote],
        [Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [MCCBReceiverID],
        [RequestedTransactionID],
        [ProposalId],
        [MCCBReceiverAccountID],
        [RawDataStatus],
        [FundsTakenByICP],
        [FundsRefundedByICP]
    FROM [MCCBTransaction]
    WHERE [RequestedTransactionID] = @RequestedTransactionID
;
END

GO

-- Procedure for Index: IX_MCCBTransaction_TransactionReference
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetMCCBTransactionByTRANSACTIONREFERENCE]
    @TransactionReference varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_MCCBTransaction],
        [ID],
        [CustomerID],
        [enmPaymentMode],
        [AmountILSDisplayed],
        [AmountILSCalculated],
        [AmountILSAddedToFee],
        [PayoutAmount],
        [PayoutCurrency],
        [DisplayedFee],
        [DisplayedExchangeRate],
        [TransactionReference],
        [ICPTransactionFee],
        [enmSettlementCurrency_Currency],
        [ICPILSToSettlementER],
        [MCFeeInSettlementCurrency],
        [MCPayoutToSettlementER],
        [MCChargedAmount],
        [MCPrincipleAmount],
        [ProposalExpiry],
        [PaymentId],
        [PaymentPurpose],
        [PaymentStatus],
        [PaymentStatusTimestamp],
        [PaymentPendingStage],
        [PaymentPendingMaxCompletionDate],
        [RawDataPayment],
        [RawDataQuote],
        [Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [MCCBReceiverID],
        [RequestedTransactionID],
        [ProposalId],
        [MCCBReceiverAccountID],
        [RawDataStatus],
        [FundsTakenByICP],
        [FundsRefundedByICP]
    FROM [MCCBTransaction]
    WHERE [TransactionReference] = @TransactionReference
;
END

GO

-- Procedure for Index: IX_MCCBTransaction_Customer
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillMCCBTransactionByCUSTOMERID]
    @CustomerID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_MCCBTransaction],
        [ID],
        [CustomerID],
        [enmPaymentMode],
        [AmountILSDisplayed],
        [AmountILSCalculated],
        [AmountILSAddedToFee],
        [PayoutAmount],
        [PayoutCurrency],
        [DisplayedFee],
        [DisplayedExchangeRate],
        [TransactionReference],
        [ICPTransactionFee],
        [enmSettlementCurrency_Currency],
        [ICPILSToSettlementER],
        [MCFeeInSettlementCurrency],
        [MCPayoutToSettlementER],
        [MCChargedAmount],
        [MCPrincipleAmount],
        [ProposalExpiry],
        [PaymentId],
        [PaymentPurpose],
        [PaymentStatus],
        [PaymentStatusTimestamp],
        [PaymentPendingStage],
        [PaymentPendingMaxCompletionDate],
        [RawDataPayment],
        [RawDataQuote],
        [Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [MCCBReceiverID],
        [RequestedTransactionID],
        [ProposalId],
        [MCCBReceiverAccountID],
        [RawDataStatus],
        [FundsTakenByICP],
        [FundsRefundedByICP]
    FROM [MCCBTransaction]
    WHERE [CustomerID] = @CustomerID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_MCCBTransaction_MCCBReceiver
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillMCCBTransactionByMCCBRECEIVERID]
    @MCCBReceiverID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_MCCBTransaction],
        [ID],
        [CustomerID],
        [enmPaymentMode],
        [AmountILSDisplayed],
        [AmountILSCalculated],
        [AmountILSAddedToFee],
        [PayoutAmount],
        [PayoutCurrency],
        [DisplayedFee],
        [DisplayedExchangeRate],
        [TransactionReference],
        [ICPTransactionFee],
        [enmSettlementCurrency_Currency],
        [ICPILSToSettlementER],
        [MCFeeInSettlementCurrency],
        [MCPayoutToSettlementER],
        [MCChargedAmount],
        [MCPrincipleAmount],
        [ProposalExpiry],
        [PaymentId],
        [PaymentPurpose],
        [PaymentStatus],
        [PaymentStatusTimestamp],
        [PaymentPendingStage],
        [PaymentPendingMaxCompletionDate],
        [RawDataPayment],
        [RawDataQuote],
        [Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [MCCBReceiverID],
        [RequestedTransactionID],
        [ProposalId],
        [MCCBReceiverAccountID],
        [RawDataStatus],
        [FundsTakenByICP],
        [FundsRefundedByICP]
    FROM [MCCBTransaction]
    WHERE [MCCBReceiverID] = @MCCBReceiverID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_MCCBTransaction_MCCBReceiverAccount
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillMCCBTransactionByMCCBRECEIVERACCOUNTID]
    @MCCBReceiverAccountID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_MCCBTransaction],
        [ID],
        [CustomerID],
        [enmPaymentMode],
        [AmountILSDisplayed],
        [AmountILSCalculated],
        [AmountILSAddedToFee],
        [PayoutAmount],
        [PayoutCurrency],
        [DisplayedFee],
        [DisplayedExchangeRate],
        [TransactionReference],
        [ICPTransactionFee],
        [enmSettlementCurrency_Currency],
        [ICPILSToSettlementER],
        [MCFeeInSettlementCurrency],
        [MCPayoutToSettlementER],
        [MCChargedAmount],
        [MCPrincipleAmount],
        [ProposalExpiry],
        [PaymentId],
        [PaymentPurpose],
        [PaymentStatus],
        [PaymentStatusTimestamp],
        [PaymentPendingStage],
        [PaymentPendingMaxCompletionDate],
        [RawDataPayment],
        [RawDataQuote],
        [Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [MCCBReceiverID],
        [RequestedTransactionID],
        [ProposalId],
        [MCCBReceiverAccountID],
        [RawDataStatus],
        [FundsTakenByICP],
        [FundsRefundedByICP]
    FROM [MCCBTransaction]
    WHERE [MCCBReceiverAccountID] = @MCCBReceiverAccountID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_MCCBTransaction_TransactionType
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillMCCBTransactionByENMPAYMENTMODE]
    @enmPaymentMode varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_MCCBTransaction],
        [ID],
        [CustomerID],
        [enmPaymentMode],
        [AmountILSDisplayed],
        [AmountILSCalculated],
        [AmountILSAddedToFee],
        [PayoutAmount],
        [PayoutCurrency],
        [DisplayedFee],
        [DisplayedExchangeRate],
        [TransactionReference],
        [ICPTransactionFee],
        [enmSettlementCurrency_Currency],
        [ICPILSToSettlementER],
        [MCFeeInSettlementCurrency],
        [MCPayoutToSettlementER],
        [MCChargedAmount],
        [MCPrincipleAmount],
        [ProposalExpiry],
        [PaymentId],
        [PaymentPurpose],
        [PaymentStatus],
        [PaymentStatusTimestamp],
        [PaymentPendingStage],
        [PaymentPendingMaxCompletionDate],
        [RawDataPayment],
        [RawDataQuote],
        [Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [MCCBReceiverID],
        [RequestedTransactionID],
        [ProposalId],
        [MCCBReceiverAccountID],
        [RawDataStatus],
        [FundsTakenByICP],
        [FundsRefundedByICP]
    FROM [MCCBTransaction]
    WHERE [enmPaymentMode] = @enmPaymentMode
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: mnvwComboList_CustomerWithPhoneAndIdentifier
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllMnvwComboListCustomerWithPhoneAndIdentifiers]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [TextNS],
        [Text]
    FROM [mnvwComboList_CustomerWithPhoneAndIdentifier]
;
END

GO



-- =========================================
-- Stored Procedures for Table: NewCardRequest
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllNewCardRequests]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_NewCardRequest],
            t.[ID],
            t.[enmCurrency],
            t.[enmReceiptMethod],
            t.[InitialLoad],
            t.[enmInitialLoadMethod_LoadMethod],
            t.[CustomerID],
            t.[FirstName],
            t.[LastName],
            t.[BirthDate],
            t.[IsraelIDNumber],
            t.[lkpPassportCountry_Country],
            t.[PassportNumber],
            t.[enmGender],
            t.[ActualAddressNumber],
            t.[ActualAddressStreet],
            t.[ActualAddressCity],
            t.[ActualZipCode],
            t.[CellphoneNumber],
            t.[email],
            t.[spt_Comment],
            t.[WhenOpened],
            t.[spt_enmCardRequestStatus],
            t.[clc_WhenStatusChanged],
            t.[IsCustomerDefined],
            t.[IsKYCDefined],
            t.[DeliveryFeeAdjustment],
            t.[DistributorSentToID],
            t.[spt_InterviewedByUser],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            t.[enmLastStatusBeforeCancel_CardRequestStatus],
            t.[NameOnCard],
            t.[clc_HasNameOnCard],
            t.[enmPendingLoadMethod_LoadMethod],
            t.[PendingLoadAmount],
            t.[PendingLoadReference],
            t.[PendingLoadUserResponsible],
            t.[CardActivationID],
            t.[InitialLoadComplete],
            t.[CustomerWalletID],
            t.[InitialLoadNumberOfPayments],
            t.[IntendedClubID],
            t.[CommittedLoadAmount],
            t.[CommittedPurchaseExchangeRateToILS],
            t.[CommittedLoadFee],
            t.[CommittedDeliveryFee],
            t.[CommittedNewCardFee],
            t.[enmCustomerType],
            t.[blg_NewCardRequestAPIID],
            t.[clc_NewCardRequestAPILoggedAlertID],
            p1.[Text] AS [CustomerID_Text],
            p2.[Text] AS [DistributorSentToID_Text],
            p3.[Text] AS [IntendedClubID_Text],
            p4.[Text] AS [blg_NewCardRequestAPIID_Text],
            p5.[Text] AS [clc_NewCardRequestAPILoggedAlertID_Text]
        FROM [NewCardRequest] t
        LEFT JOIN [ccvwComboList_Customer] p1 ON t.[CustomerID] = p1.[ID]
        LEFT JOIN [ccvwComboList_Distributor] p2 ON t.[DistributorSentToID] = p2.[ID]
        LEFT JOIN [ccvwComboList_CardClub] p3 ON t.[IntendedClubID] = p3.[ID]
        LEFT JOIN [ccvwComboList_NewCardRequestAPI] p4 ON t.[blg_NewCardRequestAPIID] = p4.[ID]
        LEFT JOIN [ccvwComboList_c_LoggedAlert] p5 ON t.[clc_NewCardRequestAPILoggedAlertID] = p5.[ID]
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_NewCardRequest],
            [ID],
            [enmCurrency],
            [enmReceiptMethod],
            [InitialLoad],
            [enmInitialLoadMethod_LoadMethod],
            [CustomerID],
            [FirstName],
            [LastName],
            [BirthDate],
            [IsraelIDNumber],
            [lkpPassportCountry_Country],
            [PassportNumber],
            [enmGender],
            [ActualAddressNumber],
            [ActualAddressStreet],
            [ActualAddressCity],
            [ActualZipCode],
            [CellphoneNumber],
            [email],
            [spt_Comment],
            [WhenOpened],
            [spt_enmCardRequestStatus],
            [clc_WhenStatusChanged],
            [IsCustomerDefined],
            [IsKYCDefined],
            [DeliveryFeeAdjustment],
            [DistributorSentToID],
            [spt_InterviewedByUser],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID],
            [enmLastStatusBeforeCancel_CardRequestStatus],
            [NameOnCard],
            [clc_HasNameOnCard],
            [enmPendingLoadMethod_LoadMethod],
            [PendingLoadAmount],
            [PendingLoadReference],
            [PendingLoadUserResponsible],
            [CardActivationID],
            [InitialLoadComplete],
            [CustomerWalletID],
            [InitialLoadNumberOfPayments],
            [IntendedClubID],
            [CommittedLoadAmount],
            [CommittedPurchaseExchangeRateToILS],
            [CommittedLoadFee],
            [CommittedDeliveryFee],
            [CommittedNewCardFee],
            [enmCustomerType],
            [blg_NewCardRequestAPIID],
            [clc_NewCardRequestAPILoggedAlertID]
        FROM [NewCardRequest]
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredNewCardRequests]
    @blg_NewCardRequestAPIID INT = NULL,
    @CardActivationID INT = NULL,
    @IntendedClubID INT = NULL,
    @clc_NewCardRequestAPILoggedAlertID INT = NULL,
    @CustomerID INT = NULL,
    @DistributorSentToID INT = NULL,
    @FirstName NVARCHAR(100) = NULL,
    @IsraelIDNumber VARCHAR(50) = NULL,
    @lkpPassportCountry_Country VARCHAR(50) = NULL,
    @PassportNumber VARCHAR(50) = NULL,
    @LastName NVARCHAR(100) = NULL,
    @enmLastStatusBeforeCancel_CardRequestStatus VARCHAR(50) = NULL,
    @enmReceiptMethod VARCHAR(50) = NULL,
    @spt_enmCardRequestStatus VARCHAR(50) = NULL,
    @clc_WhenStatusChanged DATETIME = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_NewCardRequest],
            t.[ID],
            t.[enmCurrency],
            t.[enmReceiptMethod],
            t.[InitialLoad],
            t.[enmInitialLoadMethod_LoadMethod],
            t.[CustomerID],
            t.[FirstName],
            t.[LastName],
            t.[BirthDate],
            t.[IsraelIDNumber],
            t.[lkpPassportCountry_Country],
            t.[PassportNumber],
            t.[enmGender],
            t.[ActualAddressNumber],
            t.[ActualAddressStreet],
            t.[ActualAddressCity],
            t.[ActualZipCode],
            t.[CellphoneNumber],
            t.[email],
            t.[spt_Comment],
            t.[WhenOpened],
            t.[spt_enmCardRequestStatus],
            t.[clc_WhenStatusChanged],
            t.[IsCustomerDefined],
            t.[IsKYCDefined],
            t.[DeliveryFeeAdjustment],
            t.[DistributorSentToID],
            t.[spt_InterviewedByUser],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            t.[enmLastStatusBeforeCancel_CardRequestStatus],
            t.[NameOnCard],
            t.[clc_HasNameOnCard],
            t.[enmPendingLoadMethod_LoadMethod],
            t.[PendingLoadAmount],
            t.[PendingLoadReference],
            t.[PendingLoadUserResponsible],
            t.[CardActivationID],
            t.[InitialLoadComplete],
            t.[CustomerWalletID],
            t.[InitialLoadNumberOfPayments],
            t.[IntendedClubID],
            t.[CommittedLoadAmount],
            t.[CommittedPurchaseExchangeRateToILS],
            t.[CommittedLoadFee],
            t.[CommittedDeliveryFee],
            t.[CommittedNewCardFee],
            t.[enmCustomerType],
            t.[blg_NewCardRequestAPIID],
            t.[clc_NewCardRequestAPILoggedAlertID],
            p1.[Text] AS [CustomerID_Text],
            p2.[Text] AS [DistributorSentToID_Text],
            p3.[Text] AS [IntendedClubID_Text],
            p4.[Text] AS [blg_NewCardRequestAPIID_Text],
            p5.[Text] AS [clc_NewCardRequestAPILoggedAlertID_Text]
        FROM [NewCardRequest] t
        LEFT JOIN [ccvwComboList_Customer] p1 ON t.[CustomerID] = p1.[ID]
        LEFT JOIN [ccvwComboList_Distributor] p2 ON t.[DistributorSentToID] = p2.[ID]
        LEFT JOIN [ccvwComboList_CardClub] p3 ON t.[IntendedClubID] = p3.[ID]
        LEFT JOIN [ccvwComboList_NewCardRequestAPI] p4 ON t.[blg_NewCardRequestAPIID] = p4.[ID]
        LEFT JOIN [ccvwComboList_c_LoggedAlert] p5 ON t.[clc_NewCardRequestAPILoggedAlertID] = p5.[ID]
        WHERE 1=1
          AND (@blg_NewCardRequestAPIID IS NULL OR t.[blg_NewCardRequestAPIID] = @blg_NewCardRequestAPIID)
          AND (@CardActivationID IS NULL OR t.[CardActivationID] = @CardActivationID)
          AND (@IntendedClubID IS NULL OR t.[IntendedClubID] = @IntendedClubID)
          AND (@clc_NewCardRequestAPILoggedAlertID IS NULL OR t.[clc_NewCardRequestAPILoggedAlertID] = @clc_NewCardRequestAPILoggedAlertID)
          AND (@CustomerID IS NULL OR t.[CustomerID] = @CustomerID)
          AND (@DistributorSentToID IS NULL OR t.[DistributorSentToID] = @DistributorSentToID)
          AND (@FirstName IS NULL OR t.[FirstName] LIKE '%' + @FirstName + '%')
          AND (@IsraelIDNumber IS NULL OR t.[IsraelIDNumber] LIKE '%' + @IsraelIDNumber + '%')
          AND (@lkpPassportCountry_Country IS NULL OR t.[lkpPassportCountry_Country] LIKE '%' + @lkpPassportCountry_Country + '%')
          AND (@PassportNumber IS NULL OR t.[PassportNumber] LIKE '%' + @PassportNumber + '%')
          AND (@LastName IS NULL OR t.[LastName] LIKE '%' + @LastName + '%')
          AND (@enmLastStatusBeforeCancel_CardRequestStatus IS NULL OR t.[enmLastStatusBeforeCancel_CardRequestStatus] LIKE '%' + @enmLastStatusBeforeCancel_CardRequestStatus + '%')
          AND (@enmReceiptMethod IS NULL OR t.[enmReceiptMethod] LIKE '%' + @enmReceiptMethod + '%')
          AND (@spt_enmCardRequestStatus IS NULL OR t.[spt_enmCardRequestStatus] LIKE '%' + @spt_enmCardRequestStatus + '%')
          AND (@spt_enmCardRequestStatus IS NULL OR t.[spt_enmCardRequestStatus] LIKE '%' + @spt_enmCardRequestStatus + '%')
          AND (@clc_WhenStatusChanged IS NULL OR t.[clc_WhenStatusChanged] = @clc_WhenStatusChanged)
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_NewCardRequest],
            [ID],
            [enmCurrency],
            [enmReceiptMethod],
            [InitialLoad],
            [enmInitialLoadMethod_LoadMethod],
            [CustomerID],
            [FirstName],
            [LastName],
            [BirthDate],
            [IsraelIDNumber],
            [lkpPassportCountry_Country],
            [PassportNumber],
            [enmGender],
            [ActualAddressNumber],
            [ActualAddressStreet],
            [ActualAddressCity],
            [ActualZipCode],
            [CellphoneNumber],
            [email],
            [spt_Comment],
            [WhenOpened],
            [spt_enmCardRequestStatus],
            [clc_WhenStatusChanged],
            [IsCustomerDefined],
            [IsKYCDefined],
            [DeliveryFeeAdjustment],
            [DistributorSentToID],
            [spt_InterviewedByUser],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID],
            [enmLastStatusBeforeCancel_CardRequestStatus],
            [NameOnCard],
            [clc_HasNameOnCard],
            [enmPendingLoadMethod_LoadMethod],
            [PendingLoadAmount],
            [PendingLoadReference],
            [PendingLoadUserResponsible],
            [CardActivationID],
            [InitialLoadComplete],
            [CustomerWalletID],
            [InitialLoadNumberOfPayments],
            [IntendedClubID],
            [CommittedLoadAmount],
            [CommittedPurchaseExchangeRateToILS],
            [CommittedLoadFee],
            [CommittedDeliveryFee],
            [CommittedNewCardFee],
            [enmCustomerType],
            [blg_NewCardRequestAPIID],
            [clc_NewCardRequestAPILoggedAlertID]
        FROM [NewCardRequest]
        WHERE 1=1
          AND (@blg_NewCardRequestAPIID IS NULL OR [blg_NewCardRequestAPIID] = @blg_NewCardRequestAPIID)
          AND (@CardActivationID IS NULL OR [CardActivationID] = @CardActivationID)
          AND (@IntendedClubID IS NULL OR [IntendedClubID] = @IntendedClubID)
          AND (@clc_NewCardRequestAPILoggedAlertID IS NULL OR [clc_NewCardRequestAPILoggedAlertID] = @clc_NewCardRequestAPILoggedAlertID)
          AND (@CustomerID IS NULL OR [CustomerID] = @CustomerID)
          AND (@DistributorSentToID IS NULL OR [DistributorSentToID] = @DistributorSentToID)
          AND (@FirstName IS NULL OR [FirstName] LIKE '%' + @FirstName + '%')
          AND (@IsraelIDNumber IS NULL OR [IsraelIDNumber] LIKE '%' + @IsraelIDNumber + '%')
          AND (@lkpPassportCountry_Country IS NULL OR [lkpPassportCountry_Country] LIKE '%' + @lkpPassportCountry_Country + '%')
          AND (@PassportNumber IS NULL OR [PassportNumber] LIKE '%' + @PassportNumber + '%')
          AND (@LastName IS NULL OR [LastName] LIKE '%' + @LastName + '%')
          AND (@enmLastStatusBeforeCancel_CardRequestStatus IS NULL OR [enmLastStatusBeforeCancel_CardRequestStatus] LIKE '%' + @enmLastStatusBeforeCancel_CardRequestStatus + '%')
          AND (@enmReceiptMethod IS NULL OR [enmReceiptMethod] LIKE '%' + @enmReceiptMethod + '%')
          AND (@spt_enmCardRequestStatus IS NULL OR [spt_enmCardRequestStatus] LIKE '%' + @spt_enmCardRequestStatus + '%')
          AND (@spt_enmCardRequestStatus IS NULL OR [spt_enmCardRequestStatus] LIKE '%' + @spt_enmCardRequestStatus + '%')
          AND (@clc_WhenStatusChanged IS NULL OR [clc_WhenStatusChanged] = @clc_WhenStatusChanged)
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetNewCardRequestByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_NewCardRequest],
        [ID],
        [enmCurrency],
        [enmReceiptMethod],
        [InitialLoad],
        [enmInitialLoadMethod_LoadMethod],
        [CustomerID],
        [FirstName],
        [LastName],
        [BirthDate],
        [IsraelIDNumber],
        [lkpPassportCountry_Country],
        [PassportNumber],
        [enmGender],
        [ActualAddressNumber],
        [ActualAddressStreet],
        [ActualAddressCity],
        [ActualZipCode],
        [CellphoneNumber],
        [email],
        [spt_Comment],
        [WhenOpened],
        [spt_enmCardRequestStatus],
        [clc_WhenStatusChanged],
        [IsCustomerDefined],
        [IsKYCDefined],
        [DeliveryFeeAdjustment],
        [DistributorSentToID],
        [spt_InterviewedByUser],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [enmLastStatusBeforeCancel_CardRequestStatus],
        [NameOnCard],
        [clc_HasNameOnCard],
        [enmPendingLoadMethod_LoadMethod],
        [PendingLoadAmount],
        [PendingLoadReference],
        [PendingLoadUserResponsible],
        [CardActivationID],
        [InitialLoadComplete],
        [CustomerWalletID],
        [InitialLoadNumberOfPayments],
        [IntendedClubID],
        [CommittedLoadAmount],
        [CommittedPurchaseExchangeRateToILS],
        [CommittedLoadFee],
        [CommittedDeliveryFee],
        [CommittedNewCardFee],
        [enmCustomerType],
        [blg_NewCardRequestAPIID],
        [clc_NewCardRequestAPILoggedAlertID]
    FROM [NewCardRequest]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddNewCardRequest]
    @TableName_NewCardRequest bit = NULL,
    @enmCurrency varchar(50) = NULL,
    @enmReceiptMethod varchar(50) = NULL,
    @InitialLoad decimal(18,0) = NULL,
    @enmInitialLoadMethod_LoadMethod varchar(50) = NULL,
    @CustomerID bigint = NULL,
    @FirstName nvarchar(100) = NULL,
    @LastName nvarchar(100) = NULL,
    @BirthDate date = NULL,
    @IsraelIDNumber varchar(50) = NULL,
    @lkpPassportCountry_Country varchar(50) = NULL,
    @PassportNumber varchar(50) = NULL,
    @enmGender varchar(50) = NULL,
    @ActualAddressNumber nvarchar(100) = NULL,
    @ActualAddressStreet nvarchar(100) = NULL,
    @ActualAddressCity nvarchar(100) = NULL,
    @ActualZipCode varchar(50) = NULL,
    @CellphoneNumber varchar(50) = NULL,
    @email varchar(50) = NULL,
    @spt_Comment nvarchar(MAX) = NULL,
    @WhenOpened datetimeoffset = NULL,
    @spt_enmCardRequestStatus varchar(50) = NULL,
    @IsCustomerDefined bit = NULL,
    @IsKYCDefined bit = NULL,
    @DeliveryFeeAdjustment decimal(18,0) = NULL,
    @DistributorSentToID bigint = NULL,
    @spt_InterviewedByUser nvarchar(100) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @enmLastStatusBeforeCancel_CardRequestStatus varchar(50) = NULL,
    @NameOnCard nvarchar(100),
    @enmPendingLoadMethod_LoadMethod varchar(50) = NULL,
    @PendingLoadAmount decimal(18,0) = NULL,
    @PendingLoadReference nvarchar(100) = NULL,
    @PendingLoadUserResponsible nvarchar(100) = NULL,
    @CardActivationID bigint = NULL,
    @InitialLoadComplete bit = NULL,
    @CustomerWalletID bigint = NULL,
    @InitialLoadNumberOfPayments int = NULL,
    @IntendedClubID bigint = NULL,
    @CommittedLoadAmount decimal(18,0) = NULL,
    @CommittedPurchaseExchangeRateToILS decimal(18,0) = NULL,
    @CommittedLoadFee decimal(18,0) = NULL,
    @CommittedDeliveryFee decimal(18,0) = NULL,
    @CommittedNewCardFee decimal(18,0) = NULL,
    @enmCustomerType varchar(50),
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [NewCardRequest] (
        [TableName_NewCardRequest],
        [enmCurrency],
        [enmReceiptMethod],
        [InitialLoad],
        [enmInitialLoadMethod_LoadMethod],
        [CustomerID],
        [FirstName],
        [LastName],
        [BirthDate],
        [IsraelIDNumber],
        [lkpPassportCountry_Country],
        [PassportNumber],
        [enmGender],
        [ActualAddressNumber],
        [ActualAddressStreet],
        [ActualAddressCity],
        [ActualZipCode],
        [CellphoneNumber],
        [email],
        [spt_Comment],
        [WhenOpened],
        [spt_enmCardRequestStatus],
        [IsCustomerDefined],
        [IsKYCDefined],
        [DeliveryFeeAdjustment],
        [DistributorSentToID],
        [spt_InterviewedByUser],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [enmLastStatusBeforeCancel_CardRequestStatus],
        [NameOnCard],
        [enmPendingLoadMethod_LoadMethod],
        [PendingLoadAmount],
        [PendingLoadReference],
        [PendingLoadUserResponsible],
        [CardActivationID],
        [InitialLoadComplete],
        [CustomerWalletID],
        [InitialLoadNumberOfPayments],
        [IntendedClubID],
        [CommittedLoadAmount],
        [CommittedPurchaseExchangeRateToILS],
        [CommittedLoadFee],
        [CommittedDeliveryFee],
        [CommittedNewCardFee],
        [enmCustomerType],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_NewCardRequest,
        @enmCurrency,
        @enmReceiptMethod,
        @InitialLoad,
        @enmInitialLoadMethod_LoadMethod,
        @CustomerID,
        @FirstName,
        @LastName,
        @BirthDate,
        @IsraelIDNumber,
        @lkpPassportCountry_Country,
        @PassportNumber,
        @enmGender,
        @ActualAddressNumber,
        @ActualAddressStreet,
        @ActualAddressCity,
        @ActualZipCode,
        @CellphoneNumber,
        @email,
        @spt_Comment,
        @WhenOpened,
        @spt_enmCardRequestStatus,
        @IsCustomerDefined,
        @IsKYCDefined,
        @DeliveryFeeAdjustment,
        @DistributorSentToID,
        @spt_InterviewedByUser,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        @enmLastStatusBeforeCancel_CardRequestStatus,
        @NameOnCard,
        @enmPendingLoadMethod_LoadMethod,
        @PendingLoadAmount,
        @PendingLoadReference,
        @PendingLoadUserResponsible,
        @CardActivationID,
        @InitialLoadComplete,
        @CustomerWalletID,
        @InitialLoadNumberOfPayments,
        @IntendedClubID,
        @CommittedLoadAmount,
        @CommittedPurchaseExchangeRateToILS,
        @CommittedLoadFee,
        @CommittedDeliveryFee,
        @CommittedNewCardFee,
        @enmCustomerType,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateNewCardRequest]
    @ID bigint,
    @TableName_NewCardRequest bit = NULL,
    @enmCurrency varchar(50) = NULL,
    @enmReceiptMethod varchar(50) = NULL,
    @InitialLoad decimal(18,0) = NULL,
    @enmInitialLoadMethod_LoadMethod varchar(50) = NULL,
    @CustomerID bigint = NULL,
    @FirstName nvarchar(100) = NULL,
    @LastName nvarchar(100) = NULL,
    @BirthDate date = NULL,
    @IsraelIDNumber varchar(50) = NULL,
    @lkpPassportCountry_Country varchar(50) = NULL,
    @PassportNumber varchar(50) = NULL,
    @enmGender varchar(50) = NULL,
    @ActualAddressNumber nvarchar(100) = NULL,
    @ActualAddressStreet nvarchar(100) = NULL,
    @ActualAddressCity nvarchar(100) = NULL,
    @ActualZipCode varchar(50) = NULL,
    @CellphoneNumber varchar(50) = NULL,
    @email varchar(50) = NULL,
    @spt_Comment nvarchar(MAX) = NULL,
    @WhenOpened datetimeoffset = NULL,
    @spt_enmCardRequestStatus varchar(50) = NULL,
    @IsCustomerDefined bit = NULL,
    @IsKYCDefined bit = NULL,
    @DeliveryFeeAdjustment decimal(18,0) = NULL,
    @DistributorSentToID bigint = NULL,
    @spt_InterviewedByUser nvarchar(100) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @enmLastStatusBeforeCancel_CardRequestStatus varchar(50) = NULL,
    @NameOnCard nvarchar(100),
    @enmPendingLoadMethod_LoadMethod varchar(50) = NULL,
    @PendingLoadAmount decimal(18,0) = NULL,
    @PendingLoadReference nvarchar(100) = NULL,
    @PendingLoadUserResponsible nvarchar(100) = NULL,
    @CardActivationID bigint = NULL,
    @InitialLoadComplete bit = NULL,
    @CustomerWalletID bigint = NULL,
    @InitialLoadNumberOfPayments int = NULL,
    @IntendedClubID bigint = NULL,
    @CommittedLoadAmount decimal(18,0) = NULL,
    @CommittedPurchaseExchangeRateToILS decimal(18,0) = NULL,
    @CommittedLoadFee decimal(18,0) = NULL,
    @CommittedDeliveryFee decimal(18,0) = NULL,
    @CommittedNewCardFee decimal(18,0) = NULL,
    @enmCustomerType varchar(50),
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [NewCardRequest]
    SET
        [TableName_NewCardRequest] = @TableName_NewCardRequest,
        [enmCurrency] = @enmCurrency,
        [enmReceiptMethod] = @enmReceiptMethod,
        [InitialLoad] = @InitialLoad,
        [enmInitialLoadMethod_LoadMethod] = @enmInitialLoadMethod_LoadMethod,
        [CustomerID] = @CustomerID,
        [FirstName] = @FirstName,
        [LastName] = @LastName,
        [BirthDate] = @BirthDate,
        [IsraelIDNumber] = @IsraelIDNumber,
        [lkpPassportCountry_Country] = @lkpPassportCountry_Country,
        [PassportNumber] = @PassportNumber,
        [enmGender] = @enmGender,
        [ActualAddressNumber] = @ActualAddressNumber,
        [ActualAddressStreet] = @ActualAddressStreet,
        [ActualAddressCity] = @ActualAddressCity,
        [ActualZipCode] = @ActualZipCode,
        [CellphoneNumber] = @CellphoneNumber,
        [email] = @email,
        [spt_Comment] = @spt_Comment,
        [WhenOpened] = @WhenOpened,
        [spt_enmCardRequestStatus] = @spt_enmCardRequestStatus,
        [IsCustomerDefined] = @IsCustomerDefined,
        [IsKYCDefined] = @IsKYCDefined,
        [DeliveryFeeAdjustment] = @DeliveryFeeAdjustment,
        [DistributorSentToID] = @DistributorSentToID,
        [spt_InterviewedByUser] = @spt_InterviewedByUser,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [enmLastStatusBeforeCancel_CardRequestStatus] = @enmLastStatusBeforeCancel_CardRequestStatus,
        [NameOnCard] = @NameOnCard,
        [enmPendingLoadMethod_LoadMethod] = @enmPendingLoadMethod_LoadMethod,
        [PendingLoadAmount] = @PendingLoadAmount,
        [PendingLoadReference] = @PendingLoadReference,
        [PendingLoadUserResponsible] = @PendingLoadUserResponsible,
        [CardActivationID] = @CardActivationID,
        [InitialLoadComplete] = @InitialLoadComplete,
        [CustomerWalletID] = @CustomerWalletID,
        [InitialLoadNumberOfPayments] = @InitialLoadNumberOfPayments,
        [IntendedClubID] = @IntendedClubID,
        [CommittedLoadAmount] = @CommittedLoadAmount,
        [CommittedPurchaseExchangeRateToILS] = @CommittedPurchaseExchangeRateToILS,
        [CommittedLoadFee] = @CommittedLoadFee,
        [CommittedDeliveryFee] = @CommittedDeliveryFee,
        [CommittedNewCardFee] = @CommittedNewCardFee,
        [enmCustomerType] = @enmCustomerType,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteNewCardRequest]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [NewCardRequest]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_NewCardRequest_NewCardRequestAPIID
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetNewCardRequestByBLGNEWCARDREQUESTAPIID]
    @blg_NewCardRequestAPIID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_NewCardRequest],
        [ID],
        [enmCurrency],
        [enmReceiptMethod],
        [InitialLoad],
        [enmInitialLoadMethod_LoadMethod],
        [CustomerID],
        [FirstName],
        [LastName],
        [BirthDate],
        [IsraelIDNumber],
        [lkpPassportCountry_Country],
        [PassportNumber],
        [enmGender],
        [ActualAddressNumber],
        [ActualAddressStreet],
        [ActualAddressCity],
        [ActualZipCode],
        [CellphoneNumber],
        [email],
        [spt_Comment],
        [WhenOpened],
        [spt_enmCardRequestStatus],
        [clc_WhenStatusChanged],
        [IsCustomerDefined],
        [IsKYCDefined],
        [DeliveryFeeAdjustment],
        [DistributorSentToID],
        [spt_InterviewedByUser],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [enmLastStatusBeforeCancel_CardRequestStatus],
        [NameOnCard],
        [clc_HasNameOnCard],
        [enmPendingLoadMethod_LoadMethod],
        [PendingLoadAmount],
        [PendingLoadReference],
        [PendingLoadUserResponsible],
        [CardActivationID],
        [InitialLoadComplete],
        [CustomerWalletID],
        [InitialLoadNumberOfPayments],
        [IntendedClubID],
        [CommittedLoadAmount],
        [CommittedPurchaseExchangeRateToILS],
        [CommittedLoadFee],
        [CommittedDeliveryFee],
        [CommittedNewCardFee],
        [enmCustomerType],
        [blg_NewCardRequestAPIID],
        [clc_NewCardRequestAPILoggedAlertID]
    FROM [NewCardRequest]
    WHERE [blg_NewCardRequestAPIID] = @blg_NewCardRequestAPIID
;
END

GO

-- Procedure for Index: IXNewCardRequest_CardActivationID
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetNewCardRequestByCARDACTIVATIONID]
    @CardActivationID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_NewCardRequest],
        [ID],
        [enmCurrency],
        [enmReceiptMethod],
        [InitialLoad],
        [enmInitialLoadMethod_LoadMethod],
        [CustomerID],
        [FirstName],
        [LastName],
        [BirthDate],
        [IsraelIDNumber],
        [lkpPassportCountry_Country],
        [PassportNumber],
        [enmGender],
        [ActualAddressNumber],
        [ActualAddressStreet],
        [ActualAddressCity],
        [ActualZipCode],
        [CellphoneNumber],
        [email],
        [spt_Comment],
        [WhenOpened],
        [spt_enmCardRequestStatus],
        [clc_WhenStatusChanged],
        [IsCustomerDefined],
        [IsKYCDefined],
        [DeliveryFeeAdjustment],
        [DistributorSentToID],
        [spt_InterviewedByUser],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [enmLastStatusBeforeCancel_CardRequestStatus],
        [NameOnCard],
        [clc_HasNameOnCard],
        [enmPendingLoadMethod_LoadMethod],
        [PendingLoadAmount],
        [PendingLoadReference],
        [PendingLoadUserResponsible],
        [CardActivationID],
        [InitialLoadComplete],
        [CustomerWalletID],
        [InitialLoadNumberOfPayments],
        [IntendedClubID],
        [CommittedLoadAmount],
        [CommittedPurchaseExchangeRateToILS],
        [CommittedLoadFee],
        [CommittedDeliveryFee],
        [CommittedNewCardFee],
        [enmCustomerType],
        [blg_NewCardRequestAPIID],
        [clc_NewCardRequestAPILoggedAlertID]
    FROM [NewCardRequest]
    WHERE [CardActivationID] = @CardActivationID
;
END

GO

-- Procedure for Index: IX_NewCardRequest_IntendedClubID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillNewCardRequestByINTENDEDCLUBID]
    @IntendedClubID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_NewCardRequest],
        [ID],
        [enmCurrency],
        [enmReceiptMethod],
        [InitialLoad],
        [enmInitialLoadMethod_LoadMethod],
        [CustomerID],
        [FirstName],
        [LastName],
        [BirthDate],
        [IsraelIDNumber],
        [lkpPassportCountry_Country],
        [PassportNumber],
        [enmGender],
        [ActualAddressNumber],
        [ActualAddressStreet],
        [ActualAddressCity],
        [ActualZipCode],
        [CellphoneNumber],
        [email],
        [spt_Comment],
        [WhenOpened],
        [spt_enmCardRequestStatus],
        [clc_WhenStatusChanged],
        [IsCustomerDefined],
        [IsKYCDefined],
        [DeliveryFeeAdjustment],
        [DistributorSentToID],
        [spt_InterviewedByUser],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [enmLastStatusBeforeCancel_CardRequestStatus],
        [NameOnCard],
        [clc_HasNameOnCard],
        [enmPendingLoadMethod_LoadMethod],
        [PendingLoadAmount],
        [PendingLoadReference],
        [PendingLoadUserResponsible],
        [CardActivationID],
        [InitialLoadComplete],
        [CustomerWalletID],
        [InitialLoadNumberOfPayments],
        [IntendedClubID],
        [CommittedLoadAmount],
        [CommittedPurchaseExchangeRateToILS],
        [CommittedLoadFee],
        [CommittedDeliveryFee],
        [CommittedNewCardFee],
        [enmCustomerType],
        [blg_NewCardRequestAPIID],
        [clc_NewCardRequestAPILoggedAlertID]
    FROM [NewCardRequest]
    WHERE [IntendedClubID] = @IntendedClubID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_NewCardRequest_NewCardRequestAPILoggedAlertID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillNewCardRequestByCLCNEWCARDREQUESTAPILOGGEDALERTID]
    @clc_NewCardRequestAPILoggedAlertID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_NewCardRequest],
        [ID],
        [enmCurrency],
        [enmReceiptMethod],
        [InitialLoad],
        [enmInitialLoadMethod_LoadMethod],
        [CustomerID],
        [FirstName],
        [LastName],
        [BirthDate],
        [IsraelIDNumber],
        [lkpPassportCountry_Country],
        [PassportNumber],
        [enmGender],
        [ActualAddressNumber],
        [ActualAddressStreet],
        [ActualAddressCity],
        [ActualZipCode],
        [CellphoneNumber],
        [email],
        [spt_Comment],
        [WhenOpened],
        [spt_enmCardRequestStatus],
        [clc_WhenStatusChanged],
        [IsCustomerDefined],
        [IsKYCDefined],
        [DeliveryFeeAdjustment],
        [DistributorSentToID],
        [spt_InterviewedByUser],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [enmLastStatusBeforeCancel_CardRequestStatus],
        [NameOnCard],
        [clc_HasNameOnCard],
        [enmPendingLoadMethod_LoadMethod],
        [PendingLoadAmount],
        [PendingLoadReference],
        [PendingLoadUserResponsible],
        [CardActivationID],
        [InitialLoadComplete],
        [CustomerWalletID],
        [InitialLoadNumberOfPayments],
        [IntendedClubID],
        [CommittedLoadAmount],
        [CommittedPurchaseExchangeRateToILS],
        [CommittedLoadFee],
        [CommittedDeliveryFee],
        [CommittedNewCardFee],
        [enmCustomerType],
        [blg_NewCardRequestAPIID],
        [clc_NewCardRequestAPILoggedAlertID]
    FROM [NewCardRequest]
    WHERE [clc_NewCardRequestAPILoggedAlertID] = @clc_NewCardRequestAPILoggedAlertID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXNewCardRequest_CustomerID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillNewCardRequestByCUSTOMERID]
    @CustomerID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_NewCardRequest],
        [ID],
        [enmCurrency],
        [enmReceiptMethod],
        [InitialLoad],
        [enmInitialLoadMethod_LoadMethod],
        [CustomerID],
        [FirstName],
        [LastName],
        [BirthDate],
        [IsraelIDNumber],
        [lkpPassportCountry_Country],
        [PassportNumber],
        [enmGender],
        [ActualAddressNumber],
        [ActualAddressStreet],
        [ActualAddressCity],
        [ActualZipCode],
        [CellphoneNumber],
        [email],
        [spt_Comment],
        [WhenOpened],
        [spt_enmCardRequestStatus],
        [clc_WhenStatusChanged],
        [IsCustomerDefined],
        [IsKYCDefined],
        [DeliveryFeeAdjustment],
        [DistributorSentToID],
        [spt_InterviewedByUser],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [enmLastStatusBeforeCancel_CardRequestStatus],
        [NameOnCard],
        [clc_HasNameOnCard],
        [enmPendingLoadMethod_LoadMethod],
        [PendingLoadAmount],
        [PendingLoadReference],
        [PendingLoadUserResponsible],
        [CardActivationID],
        [InitialLoadComplete],
        [CustomerWalletID],
        [InitialLoadNumberOfPayments],
        [IntendedClubID],
        [CommittedLoadAmount],
        [CommittedPurchaseExchangeRateToILS],
        [CommittedLoadFee],
        [CommittedDeliveryFee],
        [CommittedNewCardFee],
        [enmCustomerType],
        [blg_NewCardRequestAPIID],
        [clc_NewCardRequestAPILoggedAlertID]
    FROM [NewCardRequest]
    WHERE [CustomerID] = @CustomerID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXNewCardRequest_DistributorSentTo
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillNewCardRequestByDISTRIBUTORSENTTOID]
    @DistributorSentToID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_NewCardRequest],
        [ID],
        [enmCurrency],
        [enmReceiptMethod],
        [InitialLoad],
        [enmInitialLoadMethod_LoadMethod],
        [CustomerID],
        [FirstName],
        [LastName],
        [BirthDate],
        [IsraelIDNumber],
        [lkpPassportCountry_Country],
        [PassportNumber],
        [enmGender],
        [ActualAddressNumber],
        [ActualAddressStreet],
        [ActualAddressCity],
        [ActualZipCode],
        [CellphoneNumber],
        [email],
        [spt_Comment],
        [WhenOpened],
        [spt_enmCardRequestStatus],
        [clc_WhenStatusChanged],
        [IsCustomerDefined],
        [IsKYCDefined],
        [DeliveryFeeAdjustment],
        [DistributorSentToID],
        [spt_InterviewedByUser],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [enmLastStatusBeforeCancel_CardRequestStatus],
        [NameOnCard],
        [clc_HasNameOnCard],
        [enmPendingLoadMethod_LoadMethod],
        [PendingLoadAmount],
        [PendingLoadReference],
        [PendingLoadUserResponsible],
        [CardActivationID],
        [InitialLoadComplete],
        [CustomerWalletID],
        [InitialLoadNumberOfPayments],
        [IntendedClubID],
        [CommittedLoadAmount],
        [CommittedPurchaseExchangeRateToILS],
        [CommittedLoadFee],
        [CommittedDeliveryFee],
        [CommittedNewCardFee],
        [enmCustomerType],
        [blg_NewCardRequestAPIID],
        [clc_NewCardRequestAPILoggedAlertID]
    FROM [NewCardRequest]
    WHERE [DistributorSentToID] = @DistributorSentToID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXNewCardRequest_FirstName
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillNewCardRequestByFIRSTNAME]
    @FirstName nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_NewCardRequest],
        [ID],
        [enmCurrency],
        [enmReceiptMethod],
        [InitialLoad],
        [enmInitialLoadMethod_LoadMethod],
        [CustomerID],
        [FirstName],
        [LastName],
        [BirthDate],
        [IsraelIDNumber],
        [lkpPassportCountry_Country],
        [PassportNumber],
        [enmGender],
        [ActualAddressNumber],
        [ActualAddressStreet],
        [ActualAddressCity],
        [ActualZipCode],
        [CellphoneNumber],
        [email],
        [spt_Comment],
        [WhenOpened],
        [spt_enmCardRequestStatus],
        [clc_WhenStatusChanged],
        [IsCustomerDefined],
        [IsKYCDefined],
        [DeliveryFeeAdjustment],
        [DistributorSentToID],
        [spt_InterviewedByUser],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [enmLastStatusBeforeCancel_CardRequestStatus],
        [NameOnCard],
        [clc_HasNameOnCard],
        [enmPendingLoadMethod_LoadMethod],
        [PendingLoadAmount],
        [PendingLoadReference],
        [PendingLoadUserResponsible],
        [CardActivationID],
        [InitialLoadComplete],
        [CustomerWalletID],
        [InitialLoadNumberOfPayments],
        [IntendedClubID],
        [CommittedLoadAmount],
        [CommittedPurchaseExchangeRateToILS],
        [CommittedLoadFee],
        [CommittedDeliveryFee],
        [CommittedNewCardFee],
        [enmCustomerType],
        [blg_NewCardRequestAPIID],
        [clc_NewCardRequestAPILoggedAlertID]
    FROM [NewCardRequest]
    WHERE [FirstName] = @FirstName
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXNewCardRequest_IsraelIDNumber_PassportCountry_PassportNumber
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillNewCardRequestByISRAELIDNUMBERAndLKPPASSPORTCOUNTRYCOUNTRYAndPASSPORTNUMBER]
    @IsraelIDNumber varchar(50),
    @lkpPassportCountry_Country varchar(50),
    @PassportNumber varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_NewCardRequest],
        [ID],
        [enmCurrency],
        [enmReceiptMethod],
        [InitialLoad],
        [enmInitialLoadMethod_LoadMethod],
        [CustomerID],
        [FirstName],
        [LastName],
        [BirthDate],
        [IsraelIDNumber],
        [lkpPassportCountry_Country],
        [PassportNumber],
        [enmGender],
        [ActualAddressNumber],
        [ActualAddressStreet],
        [ActualAddressCity],
        [ActualZipCode],
        [CellphoneNumber],
        [email],
        [spt_Comment],
        [WhenOpened],
        [spt_enmCardRequestStatus],
        [clc_WhenStatusChanged],
        [IsCustomerDefined],
        [IsKYCDefined],
        [DeliveryFeeAdjustment],
        [DistributorSentToID],
        [spt_InterviewedByUser],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [enmLastStatusBeforeCancel_CardRequestStatus],
        [NameOnCard],
        [clc_HasNameOnCard],
        [enmPendingLoadMethod_LoadMethod],
        [PendingLoadAmount],
        [PendingLoadReference],
        [PendingLoadUserResponsible],
        [CardActivationID],
        [InitialLoadComplete],
        [CustomerWalletID],
        [InitialLoadNumberOfPayments],
        [IntendedClubID],
        [CommittedLoadAmount],
        [CommittedPurchaseExchangeRateToILS],
        [CommittedLoadFee],
        [CommittedDeliveryFee],
        [CommittedNewCardFee],
        [enmCustomerType],
        [blg_NewCardRequestAPIID],
        [clc_NewCardRequestAPILoggedAlertID]
    FROM [NewCardRequest]
    WHERE [IsraelIDNumber] = @IsraelIDNumber AND [lkpPassportCountry_Country] = @lkpPassportCountry_Country AND [PassportNumber] = @PassportNumber
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXNewCardRequest_LastName
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillNewCardRequestByLASTNAME]
    @LastName nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_NewCardRequest],
        [ID],
        [enmCurrency],
        [enmReceiptMethod],
        [InitialLoad],
        [enmInitialLoadMethod_LoadMethod],
        [CustomerID],
        [FirstName],
        [LastName],
        [BirthDate],
        [IsraelIDNumber],
        [lkpPassportCountry_Country],
        [PassportNumber],
        [enmGender],
        [ActualAddressNumber],
        [ActualAddressStreet],
        [ActualAddressCity],
        [ActualZipCode],
        [CellphoneNumber],
        [email],
        [spt_Comment],
        [WhenOpened],
        [spt_enmCardRequestStatus],
        [clc_WhenStatusChanged],
        [IsCustomerDefined],
        [IsKYCDefined],
        [DeliveryFeeAdjustment],
        [DistributorSentToID],
        [spt_InterviewedByUser],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [enmLastStatusBeforeCancel_CardRequestStatus],
        [NameOnCard],
        [clc_HasNameOnCard],
        [enmPendingLoadMethod_LoadMethod],
        [PendingLoadAmount],
        [PendingLoadReference],
        [PendingLoadUserResponsible],
        [CardActivationID],
        [InitialLoadComplete],
        [CustomerWalletID],
        [InitialLoadNumberOfPayments],
        [IntendedClubID],
        [CommittedLoadAmount],
        [CommittedPurchaseExchangeRateToILS],
        [CommittedLoadFee],
        [CommittedDeliveryFee],
        [CommittedNewCardFee],
        [enmCustomerType],
        [blg_NewCardRequestAPIID],
        [clc_NewCardRequestAPILoggedAlertID]
    FROM [NewCardRequest]
    WHERE [LastName] = @LastName
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXNewCardRequest_LastStatusBeforeCancel
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillNewCardRequestByENMLASTSTATUSBEFORECANCELCARDREQUESTSTATUS]
    @enmLastStatusBeforeCancel_CardRequestStatus varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_NewCardRequest],
        [ID],
        [enmCurrency],
        [enmReceiptMethod],
        [InitialLoad],
        [enmInitialLoadMethod_LoadMethod],
        [CustomerID],
        [FirstName],
        [LastName],
        [BirthDate],
        [IsraelIDNumber],
        [lkpPassportCountry_Country],
        [PassportNumber],
        [enmGender],
        [ActualAddressNumber],
        [ActualAddressStreet],
        [ActualAddressCity],
        [ActualZipCode],
        [CellphoneNumber],
        [email],
        [spt_Comment],
        [WhenOpened],
        [spt_enmCardRequestStatus],
        [clc_WhenStatusChanged],
        [IsCustomerDefined],
        [IsKYCDefined],
        [DeliveryFeeAdjustment],
        [DistributorSentToID],
        [spt_InterviewedByUser],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [enmLastStatusBeforeCancel_CardRequestStatus],
        [NameOnCard],
        [clc_HasNameOnCard],
        [enmPendingLoadMethod_LoadMethod],
        [PendingLoadAmount],
        [PendingLoadReference],
        [PendingLoadUserResponsible],
        [CardActivationID],
        [InitialLoadComplete],
        [CustomerWalletID],
        [InitialLoadNumberOfPayments],
        [IntendedClubID],
        [CommittedLoadAmount],
        [CommittedPurchaseExchangeRateToILS],
        [CommittedLoadFee],
        [CommittedDeliveryFee],
        [CommittedNewCardFee],
        [enmCustomerType],
        [blg_NewCardRequestAPIID],
        [clc_NewCardRequestAPILoggedAlertID]
    FROM [NewCardRequest]
    WHERE [enmLastStatusBeforeCancel_CardRequestStatus] = @enmLastStatusBeforeCancel_CardRequestStatus
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXNewCardRequest_ReceiptMethod_CardRequestStatus
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillNewCardRequestByENMRECEIPTMETHODAndSPTENMCARDREQUESTSTATUS]
    @enmReceiptMethod varchar(50),
    @spt_enmCardRequestStatus varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_NewCardRequest],
        [ID],
        [enmCurrency],
        [enmReceiptMethod],
        [InitialLoad],
        [enmInitialLoadMethod_LoadMethod],
        [CustomerID],
        [FirstName],
        [LastName],
        [BirthDate],
        [IsraelIDNumber],
        [lkpPassportCountry_Country],
        [PassportNumber],
        [enmGender],
        [ActualAddressNumber],
        [ActualAddressStreet],
        [ActualAddressCity],
        [ActualZipCode],
        [CellphoneNumber],
        [email],
        [spt_Comment],
        [WhenOpened],
        [spt_enmCardRequestStatus],
        [clc_WhenStatusChanged],
        [IsCustomerDefined],
        [IsKYCDefined],
        [DeliveryFeeAdjustment],
        [DistributorSentToID],
        [spt_InterviewedByUser],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [enmLastStatusBeforeCancel_CardRequestStatus],
        [NameOnCard],
        [clc_HasNameOnCard],
        [enmPendingLoadMethod_LoadMethod],
        [PendingLoadAmount],
        [PendingLoadReference],
        [PendingLoadUserResponsible],
        [CardActivationID],
        [InitialLoadComplete],
        [CustomerWalletID],
        [InitialLoadNumberOfPayments],
        [IntendedClubID],
        [CommittedLoadAmount],
        [CommittedPurchaseExchangeRateToILS],
        [CommittedLoadFee],
        [CommittedDeliveryFee],
        [CommittedNewCardFee],
        [enmCustomerType],
        [blg_NewCardRequestAPIID],
        [clc_NewCardRequestAPILoggedAlertID]
    FROM [NewCardRequest]
    WHERE [enmReceiptMethod] = @enmReceiptMethod AND [spt_enmCardRequestStatus] = @spt_enmCardRequestStatus
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXNewCardRequest_Status
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillNewCardRequestBySPTENMCARDREQUESTSTATUS]
    @spt_enmCardRequestStatus varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_NewCardRequest],
        [ID],
        [enmCurrency],
        [enmReceiptMethod],
        [InitialLoad],
        [enmInitialLoadMethod_LoadMethod],
        [CustomerID],
        [FirstName],
        [LastName],
        [BirthDate],
        [IsraelIDNumber],
        [lkpPassportCountry_Country],
        [PassportNumber],
        [enmGender],
        [ActualAddressNumber],
        [ActualAddressStreet],
        [ActualAddressCity],
        [ActualZipCode],
        [CellphoneNumber],
        [email],
        [spt_Comment],
        [WhenOpened],
        [spt_enmCardRequestStatus],
        [clc_WhenStatusChanged],
        [IsCustomerDefined],
        [IsKYCDefined],
        [DeliveryFeeAdjustment],
        [DistributorSentToID],
        [spt_InterviewedByUser],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [enmLastStatusBeforeCancel_CardRequestStatus],
        [NameOnCard],
        [clc_HasNameOnCard],
        [enmPendingLoadMethod_LoadMethod],
        [PendingLoadAmount],
        [PendingLoadReference],
        [PendingLoadUserResponsible],
        [CardActivationID],
        [InitialLoadComplete],
        [CustomerWalletID],
        [InitialLoadNumberOfPayments],
        [IntendedClubID],
        [CommittedLoadAmount],
        [CommittedPurchaseExchangeRateToILS],
        [CommittedLoadFee],
        [CommittedDeliveryFee],
        [CommittedNewCardFee],
        [enmCustomerType],
        [blg_NewCardRequestAPIID],
        [clc_NewCardRequestAPILoggedAlertID]
    FROM [NewCardRequest]
    WHERE [spt_enmCardRequestStatus] = @spt_enmCardRequestStatus
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXNewCardRequest_WhenStatusChanged
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillNewCardRequestByCLCWHENSTATUSCHANGED]
    @clc_WhenStatusChanged datetimeoffset
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_NewCardRequest],
        [ID],
        [enmCurrency],
        [enmReceiptMethod],
        [InitialLoad],
        [enmInitialLoadMethod_LoadMethod],
        [CustomerID],
        [FirstName],
        [LastName],
        [BirthDate],
        [IsraelIDNumber],
        [lkpPassportCountry_Country],
        [PassportNumber],
        [enmGender],
        [ActualAddressNumber],
        [ActualAddressStreet],
        [ActualAddressCity],
        [ActualZipCode],
        [CellphoneNumber],
        [email],
        [spt_Comment],
        [WhenOpened],
        [spt_enmCardRequestStatus],
        [clc_WhenStatusChanged],
        [IsCustomerDefined],
        [IsKYCDefined],
        [DeliveryFeeAdjustment],
        [DistributorSentToID],
        [spt_InterviewedByUser],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [enmLastStatusBeforeCancel_CardRequestStatus],
        [NameOnCard],
        [clc_HasNameOnCard],
        [enmPendingLoadMethod_LoadMethod],
        [PendingLoadAmount],
        [PendingLoadReference],
        [PendingLoadUserResponsible],
        [CardActivationID],
        [InitialLoadComplete],
        [CustomerWalletID],
        [InitialLoadNumberOfPayments],
        [IntendedClubID],
        [CommittedLoadAmount],
        [CommittedPurchaseExchangeRateToILS],
        [CommittedLoadFee],
        [CommittedDeliveryFee],
        [CommittedNewCardFee],
        [enmCustomerType],
        [blg_NewCardRequestAPIID],
        [clc_NewCardRequestAPILoggedAlertID]
    FROM [NewCardRequest]
    WHERE [clc_WhenStatusChanged] = @clc_WhenStatusChanged
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: NewCardRequestAPI
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllNewCardRequestAPIs]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_NewCardRequestAPI],
            t.[ID],
            t.[enmRequestedCurrency_Currency],
            t.[FirstName],
            t.[LastName],
            t.[FirstNameLatin],
            t.[LastNameLatin],
            t.[email],
            t.[BirthDate],
            t.[IsraelIDNumber],
            t.[lkpPassportCountry_Country],
            t.[PassportNumber],
            t.[DateIssued],
            t.[ExpiryDate],
            t.[CellphoneNumber],
            t.[HomePhoneNumber],
            t.[ActualAddressNumber],
            t.[ActualAddressStreet],
            t.[ActualAddressCity],
            t.[ActualZipCode],
            t.[MailAddressNumber],
            t.[MailAddressStreet],
            t.[MailAddressCity],
            t.[MailZipCode],
            t.[enmGender],
            t.[enmLanguage],
            t.[enmMessagingMode],
            t.[Profession],
            t.[lkpEmploymentStatus],
            t.[Employer],
            t.[lkpCardUse],
            t.[PublicPosition],
            t.[ConnectionWithPublicPerson],
            t.[lkpAdditionalCitizenship_Country],
            t.[lkpConnectionWithIsrael],
            t.[ConnectionWithIsraelDetails],
            t.[lkpMainUseOfCard_CardUsage],
            t.[IsExpectedToReceiveDeposits],
            t.[IsExpectedToReceiveDepositsDetails],
            t.[WasPreviouslyDeniedBankService],
            t.[WitnessFirstName],
            t.[WitnessLastName],
            t.[WitnessIsraelID],
            t.[enmIdentificationMethod],
            t.[InitialLoad],
            t.[enmInitialLoadMethod_LoadMethod],
            t.[CustomerReference],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[UpdatingLoginID],
            t.[AmountIncludesLoadFee],
            t.[CardAllocationFee],
            t.[MessageIdentifier],
            t.[IDFrontURL],
            t.[IDBackURL],
            t.[IDAppendixURL],
            t.[PassportURL],
            t.[blg_DistributorID],
            t.[clc_NewCardRequestID],
            t.[clc_LoggedAlertID],
            t.[clc_enmStatus_NewCardRequestAPIStatus],
            t.[spt_Comments],
            t.[blg_UserName],
            t.[upl_TZFront],
            t.[upl_TZBack],
            t.[upl_Passport],
            t.[clc_WhenAdded],
            p1.[Text] AS [blg_DistributorID_Text],
            p2.[Text] AS [clc_LoggedAlertID_Text]
        FROM [NewCardRequestAPI] t
        LEFT JOIN [ccvwComboList_Distributor] p1 ON t.[blg_DistributorID] = p1.[ID]
        LEFT JOIN [ccvwComboList_c_LoggedAlert] p2 ON t.[clc_LoggedAlertID] = p2.[ID]
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_NewCardRequestAPI],
            [ID],
            [enmRequestedCurrency_Currency],
            [FirstName],
            [LastName],
            [FirstNameLatin],
            [LastNameLatin],
            [email],
            [BirthDate],
            [IsraelIDNumber],
            [lkpPassportCountry_Country],
            [PassportNumber],
            [DateIssued],
            [ExpiryDate],
            [CellphoneNumber],
            [HomePhoneNumber],
            [ActualAddressNumber],
            [ActualAddressStreet],
            [ActualAddressCity],
            [ActualZipCode],
            [MailAddressNumber],
            [MailAddressStreet],
            [MailAddressCity],
            [MailZipCode],
            [enmGender],
            [enmLanguage],
            [enmMessagingMode],
            [Profession],
            [lkpEmploymentStatus],
            [Employer],
            [lkpCardUse],
            [PublicPosition],
            [ConnectionWithPublicPerson],
            [lkpAdditionalCitizenship_Country],
            [lkpConnectionWithIsrael],
            [ConnectionWithIsraelDetails],
            [lkpMainUseOfCard_CardUsage],
            [IsExpectedToReceiveDeposits],
            [IsExpectedToReceiveDepositsDetails],
            [WasPreviouslyDeniedBankService],
            [WitnessFirstName],
            [WitnessLastName],
            [WitnessIsraelID],
            [enmIdentificationMethod],
            [InitialLoad],
            [enmInitialLoadMethod_LoadMethod],
            [CustomerReference],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [UpdatingLoginID],
            [AmountIncludesLoadFee],
            [CardAllocationFee],
            [MessageIdentifier],
            [IDFrontURL],
            [IDBackURL],
            [IDAppendixURL],
            [PassportURL],
            [blg_DistributorID],
            [clc_NewCardRequestID],
            [clc_LoggedAlertID],
            [clc_enmStatus_NewCardRequestAPIStatus],
            [spt_Comments],
            [blg_UserName],
            [upl_TZFront],
            [upl_TZBack],
            [upl_Passport],
            [clc_WhenAdded]
        FROM [NewCardRequestAPI]
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredNewCardRequestAPIs]
    @clc_NewCardRequestID INT = NULL,
    @blg_DistributorID INT = NULL,
    @clc_LoggedAlertID INT = NULL,
    @clc_enmStatus_NewCardRequestAPIStatus VARCHAR(50) = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_NewCardRequestAPI],
            t.[ID],
            t.[enmRequestedCurrency_Currency],
            t.[FirstName],
            t.[LastName],
            t.[FirstNameLatin],
            t.[LastNameLatin],
            t.[email],
            t.[BirthDate],
            t.[IsraelIDNumber],
            t.[lkpPassportCountry_Country],
            t.[PassportNumber],
            t.[DateIssued],
            t.[ExpiryDate],
            t.[CellphoneNumber],
            t.[HomePhoneNumber],
            t.[ActualAddressNumber],
            t.[ActualAddressStreet],
            t.[ActualAddressCity],
            t.[ActualZipCode],
            t.[MailAddressNumber],
            t.[MailAddressStreet],
            t.[MailAddressCity],
            t.[MailZipCode],
            t.[enmGender],
            t.[enmLanguage],
            t.[enmMessagingMode],
            t.[Profession],
            t.[lkpEmploymentStatus],
            t.[Employer],
            t.[lkpCardUse],
            t.[PublicPosition],
            t.[ConnectionWithPublicPerson],
            t.[lkpAdditionalCitizenship_Country],
            t.[lkpConnectionWithIsrael],
            t.[ConnectionWithIsraelDetails],
            t.[lkpMainUseOfCard_CardUsage],
            t.[IsExpectedToReceiveDeposits],
            t.[IsExpectedToReceiveDepositsDetails],
            t.[WasPreviouslyDeniedBankService],
            t.[WitnessFirstName],
            t.[WitnessLastName],
            t.[WitnessIsraelID],
            t.[enmIdentificationMethod],
            t.[InitialLoad],
            t.[enmInitialLoadMethod_LoadMethod],
            t.[CustomerReference],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[UpdatingLoginID],
            t.[AmountIncludesLoadFee],
            t.[CardAllocationFee],
            t.[MessageIdentifier],
            t.[IDFrontURL],
            t.[IDBackURL],
            t.[IDAppendixURL],
            t.[PassportURL],
            t.[blg_DistributorID],
            t.[clc_NewCardRequestID],
            t.[clc_LoggedAlertID],
            t.[clc_enmStatus_NewCardRequestAPIStatus],
            t.[spt_Comments],
            t.[blg_UserName],
            t.[upl_TZFront],
            t.[upl_TZBack],
            t.[upl_Passport],
            t.[clc_WhenAdded],
            p1.[Text] AS [blg_DistributorID_Text],
            p2.[Text] AS [clc_LoggedAlertID_Text]
        FROM [NewCardRequestAPI] t
        LEFT JOIN [ccvwComboList_Distributor] p1 ON t.[blg_DistributorID] = p1.[ID]
        LEFT JOIN [ccvwComboList_c_LoggedAlert] p2 ON t.[clc_LoggedAlertID] = p2.[ID]
        WHERE 1=1
          AND (@clc_NewCardRequestID IS NULL OR t.[clc_NewCardRequestID] = @clc_NewCardRequestID)
          AND (@blg_DistributorID IS NULL OR t.[blg_DistributorID] = @blg_DistributorID)
          AND (@clc_LoggedAlertID IS NULL OR t.[clc_LoggedAlertID] = @clc_LoggedAlertID)
          AND (@clc_enmStatus_NewCardRequestAPIStatus IS NULL OR t.[clc_enmStatus_NewCardRequestAPIStatus] LIKE '%' + @clc_enmStatus_NewCardRequestAPIStatus + '%')
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_NewCardRequestAPI],
            [ID],
            [enmRequestedCurrency_Currency],
            [FirstName],
            [LastName],
            [FirstNameLatin],
            [LastNameLatin],
            [email],
            [BirthDate],
            [IsraelIDNumber],
            [lkpPassportCountry_Country],
            [PassportNumber],
            [DateIssued],
            [ExpiryDate],
            [CellphoneNumber],
            [HomePhoneNumber],
            [ActualAddressNumber],
            [ActualAddressStreet],
            [ActualAddressCity],
            [ActualZipCode],
            [MailAddressNumber],
            [MailAddressStreet],
            [MailAddressCity],
            [MailZipCode],
            [enmGender],
            [enmLanguage],
            [enmMessagingMode],
            [Profession],
            [lkpEmploymentStatus],
            [Employer],
            [lkpCardUse],
            [PublicPosition],
            [ConnectionWithPublicPerson],
            [lkpAdditionalCitizenship_Country],
            [lkpConnectionWithIsrael],
            [ConnectionWithIsraelDetails],
            [lkpMainUseOfCard_CardUsage],
            [IsExpectedToReceiveDeposits],
            [IsExpectedToReceiveDepositsDetails],
            [WasPreviouslyDeniedBankService],
            [WitnessFirstName],
            [WitnessLastName],
            [WitnessIsraelID],
            [enmIdentificationMethod],
            [InitialLoad],
            [enmInitialLoadMethod_LoadMethod],
            [CustomerReference],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [UpdatingLoginID],
            [AmountIncludesLoadFee],
            [CardAllocationFee],
            [MessageIdentifier],
            [IDFrontURL],
            [IDBackURL],
            [IDAppendixURL],
            [PassportURL],
            [blg_DistributorID],
            [clc_NewCardRequestID],
            [clc_LoggedAlertID],
            [clc_enmStatus_NewCardRequestAPIStatus],
            [spt_Comments],
            [blg_UserName],
            [upl_TZFront],
            [upl_TZBack],
            [upl_Passport],
            [clc_WhenAdded]
        FROM [NewCardRequestAPI]
        WHERE 1=1
          AND (@clc_NewCardRequestID IS NULL OR [clc_NewCardRequestID] = @clc_NewCardRequestID)
          AND (@blg_DistributorID IS NULL OR [blg_DistributorID] = @blg_DistributorID)
          AND (@clc_LoggedAlertID IS NULL OR [clc_LoggedAlertID] = @clc_LoggedAlertID)
          AND (@clc_enmStatus_NewCardRequestAPIStatus IS NULL OR [clc_enmStatus_NewCardRequestAPIStatus] LIKE '%' + @clc_enmStatus_NewCardRequestAPIStatus + '%')
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetNewCardRequestAPIByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_NewCardRequestAPI],
        [ID],
        [enmRequestedCurrency_Currency],
        [FirstName],
        [LastName],
        [FirstNameLatin],
        [LastNameLatin],
        [email],
        [BirthDate],
        [IsraelIDNumber],
        [lkpPassportCountry_Country],
        [PassportNumber],
        [DateIssued],
        [ExpiryDate],
        [CellphoneNumber],
        [HomePhoneNumber],
        [ActualAddressNumber],
        [ActualAddressStreet],
        [ActualAddressCity],
        [ActualZipCode],
        [MailAddressNumber],
        [MailAddressStreet],
        [MailAddressCity],
        [MailZipCode],
        [enmGender],
        [enmLanguage],
        [enmMessagingMode],
        [Profession],
        [lkpEmploymentStatus],
        [Employer],
        [lkpCardUse],
        [PublicPosition],
        [ConnectionWithPublicPerson],
        [lkpAdditionalCitizenship_Country],
        [lkpConnectionWithIsrael],
        [ConnectionWithIsraelDetails],
        [lkpMainUseOfCard_CardUsage],
        [IsExpectedToReceiveDeposits],
        [IsExpectedToReceiveDepositsDetails],
        [WasPreviouslyDeniedBankService],
        [WitnessFirstName],
        [WitnessLastName],
        [WitnessIsraelID],
        [enmIdentificationMethod],
        [InitialLoad],
        [enmInitialLoadMethod_LoadMethod],
        [CustomerReference],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [UpdatingLoginID],
        [AmountIncludesLoadFee],
        [CardAllocationFee],
        [MessageIdentifier],
        [IDFrontURL],
        [IDBackURL],
        [IDAppendixURL],
        [PassportURL],
        [blg_DistributorID],
        [clc_NewCardRequestID],
        [clc_LoggedAlertID],
        [clc_enmStatus_NewCardRequestAPIStatus],
        [spt_Comments],
        [blg_UserName],
        [upl_TZFront],
        [upl_TZBack],
        [upl_Passport],
        [clc_WhenAdded]
    FROM [NewCardRequestAPI]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddNewCardRequestAPI]
    @TableName_NewCardRequestAPI bit = NULL,
    @enmRequestedCurrency_Currency varchar(50) = NULL,
    @FirstName nvarchar(100),
    @LastName nvarchar(100),
    @FirstNameLatin varchar(50),
    @LastNameLatin varchar(50),
    @email varchar(50) = NULL,
    @BirthDate date = NULL,
    @IsraelIDNumber varchar(50) = NULL,
    @lkpPassportCountry_Country varchar(3) = NULL,
    @PassportNumber varchar(50) = NULL,
    @DateIssued date = NULL,
    @ExpiryDate date = NULL,
    @CellphoneNumber varchar(50) = NULL,
    @HomePhoneNumber varchar(50) = NULL,
    @ActualAddressNumber nvarchar(100) = NULL,
    @ActualAddressStreet nvarchar(100) = NULL,
    @ActualAddressCity nvarchar(100) = NULL,
    @ActualZipCode varchar(50) = NULL,
    @MailAddressNumber nvarchar(100) = NULL,
    @MailAddressStreet nvarchar(100) = NULL,
    @MailAddressCity nvarchar(100) = NULL,
    @MailZipCode varchar(50) = NULL,
    @enmGender varchar(10),
    @enmLanguage varchar(2),
    @enmMessagingMode varchar(50) = NULL,
    @Profession nvarchar(100) = NULL,
    @lkpEmploymentStatus varchar(50) = NULL,
    @Employer nvarchar(100) = NULL,
    @lkpCardUse varchar(50) = NULL,
    @PublicPosition nvarchar(100) = NULL,
    @ConnectionWithPublicPerson nvarchar(100) = NULL,
    @lkpAdditionalCitizenship_Country nvarchar(100) = NULL,
    @lkpConnectionWithIsrael varchar(50) = NULL,
    @ConnectionWithIsraelDetails nvarchar(100) = NULL,
    @lkpMainUseOfCard_CardUsage varchar(50) = NULL,
    @IsExpectedToReceiveDeposits bit = NULL,
    @IsExpectedToReceiveDepositsDetails nvarchar(100) = NULL,
    @WasPreviouslyDeniedBankService bit = NULL,
    @WitnessFirstName nvarchar(100) = NULL,
    @WitnessLastName nvarchar(100) = NULL,
    @WitnessIsraelID nvarchar(100) = NULL,
    @enmIdentificationMethod varchar(50) = NULL,
    @InitialLoad decimal(18,0) = NULL,
    @enmInitialLoadMethod_LoadMethod varchar(50) = NULL,
    @CustomerReference nvarchar(100) = NULL,
    @UpdatingLoginID bigint = NULL,
    @AmountIncludesLoadFee bit = NULL,
    @CardAllocationFee decimal(18,0) = NULL,
    @MessageIdentifier nvarchar(100) = NULL,
    @IDFrontURL nvarchar(MAX) = NULL,
    @IDBackURL nvarchar(MAX) = NULL,
    @IDAppendixURL nvarchar(MAX) = NULL,
    @PassportURL nvarchar(MAX) = NULL,
    @spt_Comments nvarchar(MAX) = NULL,
    @upl_TZFront varchar(69) = NULL,
    @upl_TZBack varchar(69) = NULL,
    @upl_Passport varchar(69) = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [NewCardRequestAPI] (
        [TableName_NewCardRequestAPI],
        [enmRequestedCurrency_Currency],
        [FirstName],
        [LastName],
        [FirstNameLatin],
        [LastNameLatin],
        [email],
        [BirthDate],
        [IsraelIDNumber],
        [lkpPassportCountry_Country],
        [PassportNumber],
        [DateIssued],
        [ExpiryDate],
        [CellphoneNumber],
        [HomePhoneNumber],
        [ActualAddressNumber],
        [ActualAddressStreet],
        [ActualAddressCity],
        [ActualZipCode],
        [MailAddressNumber],
        [MailAddressStreet],
        [MailAddressCity],
        [MailZipCode],
        [enmGender],
        [enmLanguage],
        [enmMessagingMode],
        [Profession],
        [lkpEmploymentStatus],
        [Employer],
        [lkpCardUse],
        [PublicPosition],
        [ConnectionWithPublicPerson],
        [lkpAdditionalCitizenship_Country],
        [lkpConnectionWithIsrael],
        [ConnectionWithIsraelDetails],
        [lkpMainUseOfCard_CardUsage],
        [IsExpectedToReceiveDeposits],
        [IsExpectedToReceiveDepositsDetails],
        [WasPreviouslyDeniedBankService],
        [WitnessFirstName],
        [WitnessLastName],
        [WitnessIsraelID],
        [enmIdentificationMethod],
        [InitialLoad],
        [enmInitialLoadMethod_LoadMethod],
        [CustomerReference],
        [UpdatingLoginID],
        [AmountIncludesLoadFee],
        [CardAllocationFee],
        [MessageIdentifier],
        [IDFrontURL],
        [IDBackURL],
        [IDAppendixURL],
        [PassportURL],
        [spt_Comments],
        [upl_TZFront],
        [upl_TZBack],
        [upl_Passport],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_NewCardRequestAPI,
        @enmRequestedCurrency_Currency,
        @FirstName,
        @LastName,
        @FirstNameLatin,
        @LastNameLatin,
        @email,
        @BirthDate,
        @IsraelIDNumber,
        @lkpPassportCountry_Country,
        @PassportNumber,
        @DateIssued,
        @ExpiryDate,
        @CellphoneNumber,
        @HomePhoneNumber,
        @ActualAddressNumber,
        @ActualAddressStreet,
        @ActualAddressCity,
        @ActualZipCode,
        @MailAddressNumber,
        @MailAddressStreet,
        @MailAddressCity,
        @MailZipCode,
        @enmGender,
        @enmLanguage,
        @enmMessagingMode,
        @Profession,
        @lkpEmploymentStatus,
        @Employer,
        @lkpCardUse,
        @PublicPosition,
        @ConnectionWithPublicPerson,
        @lkpAdditionalCitizenship_Country,
        @lkpConnectionWithIsrael,
        @ConnectionWithIsraelDetails,
        @lkpMainUseOfCard_CardUsage,
        @IsExpectedToReceiveDeposits,
        @IsExpectedToReceiveDepositsDetails,
        @WasPreviouslyDeniedBankService,
        @WitnessFirstName,
        @WitnessLastName,
        @WitnessIsraelID,
        @enmIdentificationMethod,
        @InitialLoad,
        @enmInitialLoadMethod_LoadMethod,
        @CustomerReference,
        @UpdatingLoginID,
        @AmountIncludesLoadFee,
        @CardAllocationFee,
        @MessageIdentifier,
        @IDFrontURL,
        @IDBackURL,
        @IDAppendixURL,
        @PassportURL,
        @spt_Comments,
        @upl_TZFront,
        @upl_TZBack,
        @upl_Passport,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateNewCardRequestAPI]
    @ID bigint,
    @TableName_NewCardRequestAPI bit = NULL,
    @enmRequestedCurrency_Currency varchar(50) = NULL,
    @FirstName nvarchar(100),
    @LastName nvarchar(100),
    @FirstNameLatin varchar(50),
    @LastNameLatin varchar(50),
    @email varchar(50) = NULL,
    @BirthDate date = NULL,
    @IsraelIDNumber varchar(50) = NULL,
    @lkpPassportCountry_Country varchar(3) = NULL,
    @PassportNumber varchar(50) = NULL,
    @DateIssued date = NULL,
    @ExpiryDate date = NULL,
    @CellphoneNumber varchar(50) = NULL,
    @HomePhoneNumber varchar(50) = NULL,
    @ActualAddressNumber nvarchar(100) = NULL,
    @ActualAddressStreet nvarchar(100) = NULL,
    @ActualAddressCity nvarchar(100) = NULL,
    @ActualZipCode varchar(50) = NULL,
    @MailAddressNumber nvarchar(100) = NULL,
    @MailAddressStreet nvarchar(100) = NULL,
    @MailAddressCity nvarchar(100) = NULL,
    @MailZipCode varchar(50) = NULL,
    @enmGender varchar(10),
    @enmLanguage varchar(2),
    @enmMessagingMode varchar(50) = NULL,
    @Profession nvarchar(100) = NULL,
    @lkpEmploymentStatus varchar(50) = NULL,
    @Employer nvarchar(100) = NULL,
    @lkpCardUse varchar(50) = NULL,
    @PublicPosition nvarchar(100) = NULL,
    @ConnectionWithPublicPerson nvarchar(100) = NULL,
    @lkpAdditionalCitizenship_Country nvarchar(100) = NULL,
    @lkpConnectionWithIsrael varchar(50) = NULL,
    @ConnectionWithIsraelDetails nvarchar(100) = NULL,
    @lkpMainUseOfCard_CardUsage varchar(50) = NULL,
    @IsExpectedToReceiveDeposits bit = NULL,
    @IsExpectedToReceiveDepositsDetails nvarchar(100) = NULL,
    @WasPreviouslyDeniedBankService bit = NULL,
    @WitnessFirstName nvarchar(100) = NULL,
    @WitnessLastName nvarchar(100) = NULL,
    @WitnessIsraelID nvarchar(100) = NULL,
    @enmIdentificationMethod varchar(50) = NULL,
    @InitialLoad decimal(18,0) = NULL,
    @enmInitialLoadMethod_LoadMethod varchar(50) = NULL,
    @CustomerReference nvarchar(100) = NULL,
    @UpdatingLoginID bigint = NULL,
    @AmountIncludesLoadFee bit = NULL,
    @CardAllocationFee decimal(18,0) = NULL,
    @MessageIdentifier nvarchar(100) = NULL,
    @IDFrontURL nvarchar(MAX) = NULL,
    @IDBackURL nvarchar(MAX) = NULL,
    @IDAppendixURL nvarchar(MAX) = NULL,
    @PassportURL nvarchar(MAX) = NULL,
    @spt_Comments nvarchar(MAX) = NULL,
    @upl_TZFront varchar(69) = NULL,
    @upl_TZBack varchar(69) = NULL,
    @upl_Passport varchar(69) = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [NewCardRequestAPI]
    SET
        [TableName_NewCardRequestAPI] = @TableName_NewCardRequestAPI,
        [enmRequestedCurrency_Currency] = @enmRequestedCurrency_Currency,
        [FirstName] = @FirstName,
        [LastName] = @LastName,
        [FirstNameLatin] = @FirstNameLatin,
        [LastNameLatin] = @LastNameLatin,
        [email] = @email,
        [BirthDate] = @BirthDate,
        [IsraelIDNumber] = @IsraelIDNumber,
        [lkpPassportCountry_Country] = @lkpPassportCountry_Country,
        [PassportNumber] = @PassportNumber,
        [DateIssued] = @DateIssued,
        [ExpiryDate] = @ExpiryDate,
        [CellphoneNumber] = @CellphoneNumber,
        [HomePhoneNumber] = @HomePhoneNumber,
        [ActualAddressNumber] = @ActualAddressNumber,
        [ActualAddressStreet] = @ActualAddressStreet,
        [ActualAddressCity] = @ActualAddressCity,
        [ActualZipCode] = @ActualZipCode,
        [MailAddressNumber] = @MailAddressNumber,
        [MailAddressStreet] = @MailAddressStreet,
        [MailAddressCity] = @MailAddressCity,
        [MailZipCode] = @MailZipCode,
        [enmGender] = @enmGender,
        [enmLanguage] = @enmLanguage,
        [enmMessagingMode] = @enmMessagingMode,
        [Profession] = @Profession,
        [lkpEmploymentStatus] = @lkpEmploymentStatus,
        [Employer] = @Employer,
        [lkpCardUse] = @lkpCardUse,
        [PublicPosition] = @PublicPosition,
        [ConnectionWithPublicPerson] = @ConnectionWithPublicPerson,
        [lkpAdditionalCitizenship_Country] = @lkpAdditionalCitizenship_Country,
        [lkpConnectionWithIsrael] = @lkpConnectionWithIsrael,
        [ConnectionWithIsraelDetails] = @ConnectionWithIsraelDetails,
        [lkpMainUseOfCard_CardUsage] = @lkpMainUseOfCard_CardUsage,
        [IsExpectedToReceiveDeposits] = @IsExpectedToReceiveDeposits,
        [IsExpectedToReceiveDepositsDetails] = @IsExpectedToReceiveDepositsDetails,
        [WasPreviouslyDeniedBankService] = @WasPreviouslyDeniedBankService,
        [WitnessFirstName] = @WitnessFirstName,
        [WitnessLastName] = @WitnessLastName,
        [WitnessIsraelID] = @WitnessIsraelID,
        [enmIdentificationMethod] = @enmIdentificationMethod,
        [InitialLoad] = @InitialLoad,
        [enmInitialLoadMethod_LoadMethod] = @enmInitialLoadMethod_LoadMethod,
        [CustomerReference] = @CustomerReference,
        [UpdatingLoginID] = @UpdatingLoginID,
        [AmountIncludesLoadFee] = @AmountIncludesLoadFee,
        [CardAllocationFee] = @CardAllocationFee,
        [MessageIdentifier] = @MessageIdentifier,
        [IDFrontURL] = @IDFrontURL,
        [IDBackURL] = @IDBackURL,
        [IDAppendixURL] = @IDAppendixURL,
        [PassportURL] = @PassportURL,
        [spt_Comments] = @spt_Comments,
        [upl_TZFront] = @upl_TZFront,
        [upl_TZBack] = @upl_TZBack,
        [upl_Passport] = @upl_Passport,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteNewCardRequestAPI]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [NewCardRequestAPI]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_NewCardRequestAPI_NewCardRequestID
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetNewCardRequestAPIByCLCNEWCARDREQUESTID]
    @clc_NewCardRequestID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_NewCardRequestAPI],
        [ID],
        [enmRequestedCurrency_Currency],
        [FirstName],
        [LastName],
        [FirstNameLatin],
        [LastNameLatin],
        [email],
        [BirthDate],
        [IsraelIDNumber],
        [lkpPassportCountry_Country],
        [PassportNumber],
        [DateIssued],
        [ExpiryDate],
        [CellphoneNumber],
        [HomePhoneNumber],
        [ActualAddressNumber],
        [ActualAddressStreet],
        [ActualAddressCity],
        [ActualZipCode],
        [MailAddressNumber],
        [MailAddressStreet],
        [MailAddressCity],
        [MailZipCode],
        [enmGender],
        [enmLanguage],
        [enmMessagingMode],
        [Profession],
        [lkpEmploymentStatus],
        [Employer],
        [lkpCardUse],
        [PublicPosition],
        [ConnectionWithPublicPerson],
        [lkpAdditionalCitizenship_Country],
        [lkpConnectionWithIsrael],
        [ConnectionWithIsraelDetails],
        [lkpMainUseOfCard_CardUsage],
        [IsExpectedToReceiveDeposits],
        [IsExpectedToReceiveDepositsDetails],
        [WasPreviouslyDeniedBankService],
        [WitnessFirstName],
        [WitnessLastName],
        [WitnessIsraelID],
        [enmIdentificationMethod],
        [InitialLoad],
        [enmInitialLoadMethod_LoadMethod],
        [CustomerReference],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [UpdatingLoginID],
        [AmountIncludesLoadFee],
        [CardAllocationFee],
        [MessageIdentifier],
        [IDFrontURL],
        [IDBackURL],
        [IDAppendixURL],
        [PassportURL],
        [blg_DistributorID],
        [clc_NewCardRequestID],
        [clc_LoggedAlertID],
        [clc_enmStatus_NewCardRequestAPIStatus],
        [spt_Comments],
        [blg_UserName],
        [upl_TZFront],
        [upl_TZBack],
        [upl_Passport],
        [clc_WhenAdded]
    FROM [NewCardRequestAPI]
    WHERE [clc_NewCardRequestID] = @clc_NewCardRequestID
;
END

GO

-- Procedure for Index: IX_NewCardRequestAPI_DistributorID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillNewCardRequestAPIByBLGDISTRIBUTORID]
    @blg_DistributorID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_NewCardRequestAPI],
        [ID],
        [enmRequestedCurrency_Currency],
        [FirstName],
        [LastName],
        [FirstNameLatin],
        [LastNameLatin],
        [email],
        [BirthDate],
        [IsraelIDNumber],
        [lkpPassportCountry_Country],
        [PassportNumber],
        [DateIssued],
        [ExpiryDate],
        [CellphoneNumber],
        [HomePhoneNumber],
        [ActualAddressNumber],
        [ActualAddressStreet],
        [ActualAddressCity],
        [ActualZipCode],
        [MailAddressNumber],
        [MailAddressStreet],
        [MailAddressCity],
        [MailZipCode],
        [enmGender],
        [enmLanguage],
        [enmMessagingMode],
        [Profession],
        [lkpEmploymentStatus],
        [Employer],
        [lkpCardUse],
        [PublicPosition],
        [ConnectionWithPublicPerson],
        [lkpAdditionalCitizenship_Country],
        [lkpConnectionWithIsrael],
        [ConnectionWithIsraelDetails],
        [lkpMainUseOfCard_CardUsage],
        [IsExpectedToReceiveDeposits],
        [IsExpectedToReceiveDepositsDetails],
        [WasPreviouslyDeniedBankService],
        [WitnessFirstName],
        [WitnessLastName],
        [WitnessIsraelID],
        [enmIdentificationMethod],
        [InitialLoad],
        [enmInitialLoadMethod_LoadMethod],
        [CustomerReference],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [UpdatingLoginID],
        [AmountIncludesLoadFee],
        [CardAllocationFee],
        [MessageIdentifier],
        [IDFrontURL],
        [IDBackURL],
        [IDAppendixURL],
        [PassportURL],
        [blg_DistributorID],
        [clc_NewCardRequestID],
        [clc_LoggedAlertID],
        [clc_enmStatus_NewCardRequestAPIStatus],
        [spt_Comments],
        [blg_UserName],
        [upl_TZFront],
        [upl_TZBack],
        [upl_Passport],
        [clc_WhenAdded]
    FROM [NewCardRequestAPI]
    WHERE [blg_DistributorID] = @blg_DistributorID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_NewCardRequestAPI_LoggedAlertID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillNewCardRequestAPIByCLCLOGGEDALERTID]
    @clc_LoggedAlertID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_NewCardRequestAPI],
        [ID],
        [enmRequestedCurrency_Currency],
        [FirstName],
        [LastName],
        [FirstNameLatin],
        [LastNameLatin],
        [email],
        [BirthDate],
        [IsraelIDNumber],
        [lkpPassportCountry_Country],
        [PassportNumber],
        [DateIssued],
        [ExpiryDate],
        [CellphoneNumber],
        [HomePhoneNumber],
        [ActualAddressNumber],
        [ActualAddressStreet],
        [ActualAddressCity],
        [ActualZipCode],
        [MailAddressNumber],
        [MailAddressStreet],
        [MailAddressCity],
        [MailZipCode],
        [enmGender],
        [enmLanguage],
        [enmMessagingMode],
        [Profession],
        [lkpEmploymentStatus],
        [Employer],
        [lkpCardUse],
        [PublicPosition],
        [ConnectionWithPublicPerson],
        [lkpAdditionalCitizenship_Country],
        [lkpConnectionWithIsrael],
        [ConnectionWithIsraelDetails],
        [lkpMainUseOfCard_CardUsage],
        [IsExpectedToReceiveDeposits],
        [IsExpectedToReceiveDepositsDetails],
        [WasPreviouslyDeniedBankService],
        [WitnessFirstName],
        [WitnessLastName],
        [WitnessIsraelID],
        [enmIdentificationMethod],
        [InitialLoad],
        [enmInitialLoadMethod_LoadMethod],
        [CustomerReference],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [UpdatingLoginID],
        [AmountIncludesLoadFee],
        [CardAllocationFee],
        [MessageIdentifier],
        [IDFrontURL],
        [IDBackURL],
        [IDAppendixURL],
        [PassportURL],
        [blg_DistributorID],
        [clc_NewCardRequestID],
        [clc_LoggedAlertID],
        [clc_enmStatus_NewCardRequestAPIStatus],
        [spt_Comments],
        [blg_UserName],
        [upl_TZFront],
        [upl_TZBack],
        [upl_Passport],
        [clc_WhenAdded]
    FROM [NewCardRequestAPI]
    WHERE [clc_LoggedAlertID] = @clc_LoggedAlertID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_NewCardRequestAPI_Status
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillNewCardRequestAPIByCLCENMSTATUSNEWCARDREQUESTAPISTATUS]
    @clc_enmStatus_NewCardRequestAPIStatus varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_NewCardRequestAPI],
        [ID],
        [enmRequestedCurrency_Currency],
        [FirstName],
        [LastName],
        [FirstNameLatin],
        [LastNameLatin],
        [email],
        [BirthDate],
        [IsraelIDNumber],
        [lkpPassportCountry_Country],
        [PassportNumber],
        [DateIssued],
        [ExpiryDate],
        [CellphoneNumber],
        [HomePhoneNumber],
        [ActualAddressNumber],
        [ActualAddressStreet],
        [ActualAddressCity],
        [ActualZipCode],
        [MailAddressNumber],
        [MailAddressStreet],
        [MailAddressCity],
        [MailZipCode],
        [enmGender],
        [enmLanguage],
        [enmMessagingMode],
        [Profession],
        [lkpEmploymentStatus],
        [Employer],
        [lkpCardUse],
        [PublicPosition],
        [ConnectionWithPublicPerson],
        [lkpAdditionalCitizenship_Country],
        [lkpConnectionWithIsrael],
        [ConnectionWithIsraelDetails],
        [lkpMainUseOfCard_CardUsage],
        [IsExpectedToReceiveDeposits],
        [IsExpectedToReceiveDepositsDetails],
        [WasPreviouslyDeniedBankService],
        [WitnessFirstName],
        [WitnessLastName],
        [WitnessIsraelID],
        [enmIdentificationMethod],
        [InitialLoad],
        [enmInitialLoadMethod_LoadMethod],
        [CustomerReference],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [UpdatingLoginID],
        [AmountIncludesLoadFee],
        [CardAllocationFee],
        [MessageIdentifier],
        [IDFrontURL],
        [IDBackURL],
        [IDAppendixURL],
        [PassportURL],
        [blg_DistributorID],
        [clc_NewCardRequestID],
        [clc_LoggedAlertID],
        [clc_enmStatus_NewCardRequestAPIStatus],
        [spt_Comments],
        [blg_UserName],
        [upl_TZFront],
        [upl_TZBack],
        [upl_Passport],
        [clc_WhenAdded]
    FROM [NewCardRequestAPI]
    WHERE [clc_enmStatus_NewCardRequestAPIStatus] = @clc_enmStatus_NewCardRequestAPIStatus
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: NonCustomer
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllNonCustomers]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_NonCustomer],
        [ID],
        [FirstName],
        [LastName],
        [CellphoneNumber],
        [IdentityNumber],
        [WhenLastReceivedPaymentDemand],
        [WhenLastSentFunds],
        [SentTodayAmount],
        [SentTodayCount],
        [SentLast7DaysAmount],
        [SentLast7DaysCount],
        [SentLast30DaysAmount],
        [SentLast30DaysCount],
        [SentTotalAmount],
        [spt_IsBlocked],
        [spt_Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [clc_Heading]
    FROM [NonCustomer]
    ORDER BY [ID]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredNonCustomers]
    @CellphoneNumber VARCHAR(50) = NULL,
    @clc_Heading NVARCHAR(308) = NULL,
    @FirstName NVARCHAR(100) = NULL,
    @LastName NVARCHAR(100) = NULL,
    @IdentityNumber VARCHAR(50) = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_NonCustomer],
        [ID],
        [FirstName],
        [LastName],
        [CellphoneNumber],
        [IdentityNumber],
        [WhenLastReceivedPaymentDemand],
        [WhenLastSentFunds],
        [SentTodayAmount],
        [SentTodayCount],
        [SentLast7DaysAmount],
        [SentLast7DaysCount],
        [SentLast30DaysAmount],
        [SentLast30DaysCount],
        [SentTotalAmount],
        [spt_IsBlocked],
        [spt_Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [clc_Heading]
    FROM [NonCustomer]
    WHERE 1=1
      AND (@CellphoneNumber IS NULL OR [CellphoneNumber] LIKE '%' + @CellphoneNumber + '%')
      AND (@clc_Heading IS NULL OR [clc_Heading] LIKE '%' + @clc_Heading + '%')
      AND (@FirstName IS NULL OR [FirstName] LIKE '%' + @FirstName + '%')
      AND (@LastName IS NULL OR [LastName] LIKE '%' + @LastName + '%')
      AND (@IdentityNumber IS NULL OR [IdentityNumber] LIKE '%' + @IdentityNumber + '%')
    ORDER BY [ID]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetNonCustomerByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_NonCustomer],
        [ID],
        [FirstName],
        [LastName],
        [CellphoneNumber],
        [IdentityNumber],
        [WhenLastReceivedPaymentDemand],
        [WhenLastSentFunds],
        [SentTodayAmount],
        [SentTodayCount],
        [SentLast7DaysAmount],
        [SentLast7DaysCount],
        [SentLast30DaysAmount],
        [SentLast30DaysCount],
        [SentTotalAmount],
        [spt_IsBlocked],
        [spt_Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [clc_Heading]
    FROM [NonCustomer]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddNonCustomer]
    @TableName_NonCustomer bit = NULL,
    @FirstName nvarchar(100) = NULL,
    @LastName nvarchar(100) = NULL,
    @CellphoneNumber varchar(50) = NULL,
    @IdentityNumber varchar(50) = NULL,
    @WhenLastReceivedPaymentDemand datetime = NULL,
    @WhenLastSentFunds datetime = NULL,
    @SentTodayAmount int = NULL,
    @SentTodayCount int = NULL,
    @SentLast7DaysAmount int = NULL,
    @SentLast7DaysCount int = NULL,
    @SentLast30DaysAmount int = NULL,
    @SentLast30DaysCount int = NULL,
    @SentTotalAmount int = NULL,
    @spt_IsBlocked bit = NULL,
    @spt_Comments nvarchar(4000) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [NonCustomer] (
        [TableName_NonCustomer],
        [FirstName],
        [LastName],
        [CellphoneNumber],
        [IdentityNumber],
        [WhenLastReceivedPaymentDemand],
        [WhenLastSentFunds],
        [SentTodayAmount],
        [SentTodayCount],
        [SentLast7DaysAmount],
        [SentLast7DaysCount],
        [SentLast30DaysAmount],
        [SentLast30DaysCount],
        [SentTotalAmount],
        [spt_IsBlocked],
        [spt_Comments],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_NonCustomer,
        @FirstName,
        @LastName,
        @CellphoneNumber,
        @IdentityNumber,
        @WhenLastReceivedPaymentDemand,
        @WhenLastSentFunds,
        @SentTodayAmount,
        @SentTodayCount,
        @SentLast7DaysAmount,
        @SentLast7DaysCount,
        @SentLast30DaysAmount,
        @SentLast30DaysCount,
        @SentTotalAmount,
        @spt_IsBlocked,
        @spt_Comments,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateNonCustomer]
    @ID bigint,
    @TableName_NonCustomer bit = NULL,
    @FirstName nvarchar(100) = NULL,
    @LastName nvarchar(100) = NULL,
    @CellphoneNumber varchar(50) = NULL,
    @IdentityNumber varchar(50) = NULL,
    @WhenLastReceivedPaymentDemand datetime = NULL,
    @WhenLastSentFunds datetime = NULL,
    @SentTodayAmount int = NULL,
    @SentTodayCount int = NULL,
    @SentLast7DaysAmount int = NULL,
    @SentLast7DaysCount int = NULL,
    @SentLast30DaysAmount int = NULL,
    @SentLast30DaysCount int = NULL,
    @SentTotalAmount int = NULL,
    @spt_IsBlocked bit = NULL,
    @spt_Comments nvarchar(4000) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [NonCustomer]
    SET
        [TableName_NonCustomer] = @TableName_NonCustomer,
        [FirstName] = @FirstName,
        [LastName] = @LastName,
        [CellphoneNumber] = @CellphoneNumber,
        [IdentityNumber] = @IdentityNumber,
        [WhenLastReceivedPaymentDemand] = @WhenLastReceivedPaymentDemand,
        [WhenLastSentFunds] = @WhenLastSentFunds,
        [SentTodayAmount] = @SentTodayAmount,
        [SentTodayCount] = @SentTodayCount,
        [SentLast7DaysAmount] = @SentLast7DaysAmount,
        [SentLast7DaysCount] = @SentLast7DaysCount,
        [SentLast30DaysAmount] = @SentLast30DaysAmount,
        [SentLast30DaysCount] = @SentLast30DaysCount,
        [SentTotalAmount] = @SentTotalAmount,
        [spt_IsBlocked] = @spt_IsBlocked,
        [spt_Comments] = @spt_Comments,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteNonCustomer]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [NonCustomer]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_NonCustomer_CellphoneNumber
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetNonCustomerByCELLPHONENUMBER]
    @CellphoneNumber varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_NonCustomer],
        [ID],
        [FirstName],
        [LastName],
        [CellphoneNumber],
        [IdentityNumber],
        [WhenLastReceivedPaymentDemand],
        [WhenLastSentFunds],
        [SentTodayAmount],
        [SentTodayCount],
        [SentLast7DaysAmount],
        [SentLast7DaysCount],
        [SentLast30DaysAmount],
        [SentLast30DaysCount],
        [SentTotalAmount],
        [spt_IsBlocked],
        [spt_Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [clc_Heading]
    FROM [NonCustomer]
    WHERE [CellphoneNumber] = @CellphoneNumber
;
END

GO

-- Procedure for Index: IX_NonCustomer_Heading
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetNonCustomerByCLCHEADING]
    @clc_Heading nvarchar(308)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_NonCustomer],
        [ID],
        [FirstName],
        [LastName],
        [CellphoneNumber],
        [IdentityNumber],
        [WhenLastReceivedPaymentDemand],
        [WhenLastSentFunds],
        [SentTodayAmount],
        [SentTodayCount],
        [SentLast7DaysAmount],
        [SentLast7DaysCount],
        [SentLast30DaysAmount],
        [SentLast30DaysCount],
        [SentTotalAmount],
        [spt_IsBlocked],
        [spt_Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [clc_Heading]
    FROM [NonCustomer]
    WHERE [clc_Heading] = @clc_Heading
;
END

GO

-- Procedure for Index: IX_NonCustomer_FirstName_LastName
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillNonCustomerByFIRSTNAMEAndLASTNAME]
    @FirstName nvarchar(100),
    @LastName nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_NonCustomer],
        [ID],
        [FirstName],
        [LastName],
        [CellphoneNumber],
        [IdentityNumber],
        [WhenLastReceivedPaymentDemand],
        [WhenLastSentFunds],
        [SentTodayAmount],
        [SentTodayCount],
        [SentLast7DaysAmount],
        [SentLast7DaysCount],
        [SentLast30DaysAmount],
        [SentLast30DaysCount],
        [SentTotalAmount],
        [spt_IsBlocked],
        [spt_Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [clc_Heading]
    FROM [NonCustomer]
    WHERE [FirstName] = @FirstName AND [LastName] = @LastName
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_NonCustomer_IdentityNumber
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillNonCustomerByIDENTITYNUMBER]
    @IdentityNumber varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_NonCustomer],
        [ID],
        [FirstName],
        [LastName],
        [CellphoneNumber],
        [IdentityNumber],
        [WhenLastReceivedPaymentDemand],
        [WhenLastSentFunds],
        [SentTodayAmount],
        [SentTodayCount],
        [SentLast7DaysAmount],
        [SentLast7DaysCount],
        [SentLast30DaysAmount],
        [SentLast30DaysCount],
        [SentTotalAmount],
        [spt_IsBlocked],
        [spt_Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [clc_Heading]
    FROM [NonCustomer]
    WHERE [IdentityNumber] = @IdentityNumber
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: OneTimeLink
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllOneTimeLinks]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_OneTimeLink],
        [ID],
        [CustomerID],
        [enmLanguage],
        [enmLinkType],
        [entData],
        [WhenCreated],
        [WhenExpires],
        [WhenAccessed],
        [AccessingIP],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [OneTimeLink]
    ORDER BY [ID]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetOneTimeLinkByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_OneTimeLink],
        [ID],
        [CustomerID],
        [enmLanguage],
        [enmLinkType],
        [entData],
        [WhenCreated],
        [WhenExpires],
        [WhenAccessed],
        [AccessingIP],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [OneTimeLink]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddOneTimeLink]
    @TableName_OneTimeLink bit = NULL,
    @CustomerID bigint,
    @enmLanguage varchar(3),
    @enmLinkType varchar(50),
    @entData varchar(MAX) = NULL,
    @WhenCreated datetimeoffset,
    @WhenExpires datetimeoffset,
    @WhenAccessed datetimeoffset = NULL,
    @AccessingIP varchar(50) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [OneTimeLink] (
        [TableName_OneTimeLink],
        [CustomerID],
        [enmLanguage],
        [enmLinkType],
        [entData],
        [WhenCreated],
        [WhenExpires],
        [WhenAccessed],
        [AccessingIP],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_OneTimeLink,
        @CustomerID,
        @enmLanguage,
        @enmLinkType,
        @entData,
        @WhenCreated,
        @WhenExpires,
        @WhenAccessed,
        @AccessingIP,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateOneTimeLink]
    @ID bigint,
    @TableName_OneTimeLink bit = NULL,
    @CustomerID bigint,
    @enmLanguage varchar(3),
    @enmLinkType varchar(50),
    @entData varchar(MAX) = NULL,
    @WhenCreated datetimeoffset,
    @WhenExpires datetimeoffset,
    @WhenAccessed datetimeoffset = NULL,
    @AccessingIP varchar(50) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [OneTimeLink]
    SET
        [TableName_OneTimeLink] = @TableName_OneTimeLink,
        [CustomerID] = @CustomerID,
        [enmLanguage] = @enmLanguage,
        [enmLinkType] = @enmLinkType,
        [entData] = @entData,
        [WhenCreated] = @WhenCreated,
        [WhenExpires] = @WhenExpires,
        [WhenAccessed] = @WhenAccessed,
        [AccessingIP] = @AccessingIP,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteOneTimeLink]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [OneTimeLink]
    WHERE [ID] = @ID;
END

GO



-- =========================================
-- Stored Procedures for Table: OnlineApproval
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllOnlineApprovals]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[ID],
            t.[Cid],
            t.[OrgCode],
            t.[CardID],
            t.[CustomerID],
            t.[CurrencyType],
            t.[AuthCode],
            t.[ApproveDatetime],
            t.[ApproveDatetimeGmt],
            t.[DepositDate],
            t.[IndSmartTran],
            t.[OrigCurrencyCode],
            t.[OrigAmount],
            t.[ChargeAmount],
            t.[ExchangeRate],
            t.[MerchantNumber],
            t.[MerchantName],
            t.[MCC4],
            t.[MerchantCity],
            t.[AuthScore],
            t.[AuthRule],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            p1.[Text] AS [CardID_Text],
            p2.[Text] AS [CustomerID_Text]
        FROM [OnlineApproval] t
        LEFT JOIN [ccvwComboList_Card] p1 ON t.[CardID] = p1.[ID]
        LEFT JOIN [ccvwComboList_Customer] p2 ON t.[CustomerID] = p2.[ID]
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [ID],
            [Cid],
            [OrgCode],
            [CardID],
            [CustomerID],
            [CurrencyType],
            [AuthCode],
            [ApproveDatetime],
            [ApproveDatetimeGmt],
            [DepositDate],
            [IndSmartTran],
            [OrigCurrencyCode],
            [OrigAmount],
            [ChargeAmount],
            [ExchangeRate],
            [MerchantNumber],
            [MerchantName],
            [MCC4],
            [MerchantCity],
            [AuthScore],
            [AuthRule],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID]
        FROM [OnlineApproval]
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredOnlineApprovals]
    @CardID INT = NULL,
    @CustomerID INT = NULL,
    @OrgCode VARCHAR(5) = NULL,
    @Cid VARCHAR(50) = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[ID],
            t.[Cid],
            t.[OrgCode],
            t.[CardID],
            t.[CustomerID],
            t.[CurrencyType],
            t.[AuthCode],
            t.[ApproveDatetime],
            t.[ApproveDatetimeGmt],
            t.[DepositDate],
            t.[IndSmartTran],
            t.[OrigCurrencyCode],
            t.[OrigAmount],
            t.[ChargeAmount],
            t.[ExchangeRate],
            t.[MerchantNumber],
            t.[MerchantName],
            t.[MCC4],
            t.[MerchantCity],
            t.[AuthScore],
            t.[AuthRule],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            p1.[Text] AS [CardID_Text],
            p2.[Text] AS [CustomerID_Text]
        FROM [OnlineApproval] t
        LEFT JOIN [ccvwComboList_Card] p1 ON t.[CardID] = p1.[ID]
        LEFT JOIN [ccvwComboList_Customer] p2 ON t.[CustomerID] = p2.[ID]
        WHERE 1=1
          AND (@CardID IS NULL OR t.[CardID] = @CardID)
          AND (@CustomerID IS NULL OR t.[CustomerID] = @CustomerID)
          AND (@OrgCode IS NULL OR t.[OrgCode] LIKE '%' + @OrgCode + '%')
          AND (@Cid IS NULL OR t.[Cid] LIKE '%' + @Cid + '%')
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [ID],
            [Cid],
            [OrgCode],
            [CardID],
            [CustomerID],
            [CurrencyType],
            [AuthCode],
            [ApproveDatetime],
            [ApproveDatetimeGmt],
            [DepositDate],
            [IndSmartTran],
            [OrigCurrencyCode],
            [OrigAmount],
            [ChargeAmount],
            [ExchangeRate],
            [MerchantNumber],
            [MerchantName],
            [MCC4],
            [MerchantCity],
            [AuthScore],
            [AuthRule],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID]
        FROM [OnlineApproval]
        WHERE 1=1
          AND (@CardID IS NULL OR [CardID] = @CardID)
          AND (@CustomerID IS NULL OR [CustomerID] = @CustomerID)
          AND (@OrgCode IS NULL OR [OrgCode] LIKE '%' + @OrgCode + '%')
          AND (@Cid IS NULL OR [Cid] LIKE '%' + @Cid + '%')
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetOnlineApprovalByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [Cid],
        [OrgCode],
        [CardID],
        [CustomerID],
        [CurrencyType],
        [AuthCode],
        [ApproveDatetime],
        [ApproveDatetimeGmt],
        [DepositDate],
        [IndSmartTran],
        [OrigCurrencyCode],
        [OrigAmount],
        [ChargeAmount],
        [ExchangeRate],
        [MerchantNumber],
        [MerchantName],
        [MCC4],
        [MerchantCity],
        [AuthScore],
        [AuthRule],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [OnlineApproval]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddOnlineApproval]
    @Cid varchar(50),
    @OrgCode varchar(5),
    @CardID bigint = NULL,
    @CustomerID bigint = NULL,
    @CurrencyType varchar(3) = NULL,
    @AuthCode int = NULL,
    @ApproveDatetime datetime = NULL,
    @ApproveDatetimeGmt datetime = NULL,
    @DepositDate datetime = NULL,
    @IndSmartTran varchar(1) = NULL,
    @OrigCurrencyCode varchar(3) = NULL,
    @OrigAmount decimal(18,0) = NULL,
    @ChargeAmount decimal(18,0) = NULL,
    @ExchangeRate decimal(18,0) = NULL,
    @MerchantNumber varchar(15) = NULL,
    @MerchantName varchar(100) = NULL,
    @MCC4 int = NULL,
    @MerchantCity varchar(50) = NULL,
    @AuthScore varchar(4) = NULL,
    @AuthRule varchar(1) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [OnlineApproval] (
        [Cid],
        [OrgCode],
        [CardID],
        [CustomerID],
        [CurrencyType],
        [AuthCode],
        [ApproveDatetime],
        [ApproveDatetimeGmt],
        [DepositDate],
        [IndSmartTran],
        [OrigCurrencyCode],
        [OrigAmount],
        [ChargeAmount],
        [ExchangeRate],
        [MerchantNumber],
        [MerchantName],
        [MCC4],
        [MerchantCity],
        [AuthScore],
        [AuthRule],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @Cid,
        @OrgCode,
        @CardID,
        @CustomerID,
        @CurrencyType,
        @AuthCode,
        @ApproveDatetime,
        @ApproveDatetimeGmt,
        @DepositDate,
        @IndSmartTran,
        @OrigCurrencyCode,
        @OrigAmount,
        @ChargeAmount,
        @ExchangeRate,
        @MerchantNumber,
        @MerchantName,
        @MCC4,
        @MerchantCity,
        @AuthScore,
        @AuthRule,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateOnlineApproval]
    @ID bigint,
    @Cid varchar(50),
    @OrgCode varchar(5),
    @CardID bigint = NULL,
    @CustomerID bigint = NULL,
    @CurrencyType varchar(3) = NULL,
    @AuthCode int = NULL,
    @ApproveDatetime datetime = NULL,
    @ApproveDatetimeGmt datetime = NULL,
    @DepositDate datetime = NULL,
    @IndSmartTran varchar(1) = NULL,
    @OrigCurrencyCode varchar(3) = NULL,
    @OrigAmount decimal(18,0) = NULL,
    @ChargeAmount decimal(18,0) = NULL,
    @ExchangeRate decimal(18,0) = NULL,
    @MerchantNumber varchar(15) = NULL,
    @MerchantName varchar(100) = NULL,
    @MCC4 int = NULL,
    @MerchantCity varchar(50) = NULL,
    @AuthScore varchar(4) = NULL,
    @AuthRule varchar(1) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [OnlineApproval]
    SET
        [Cid] = @Cid,
        [OrgCode] = @OrgCode,
        [CardID] = @CardID,
        [CustomerID] = @CustomerID,
        [CurrencyType] = @CurrencyType,
        [AuthCode] = @AuthCode,
        [ApproveDatetime] = @ApproveDatetime,
        [ApproveDatetimeGmt] = @ApproveDatetimeGmt,
        [DepositDate] = @DepositDate,
        [IndSmartTran] = @IndSmartTran,
        [OrigCurrencyCode] = @OrigCurrencyCode,
        [OrigAmount] = @OrigAmount,
        [ChargeAmount] = @ChargeAmount,
        [ExchangeRate] = @ExchangeRate,
        [MerchantNumber] = @MerchantNumber,
        [MerchantName] = @MerchantName,
        [MCC4] = @MCC4,
        [MerchantCity] = @MerchantCity,
        [AuthScore] = @AuthScore,
        [AuthRule] = @AuthRule,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteOnlineApproval]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [OnlineApproval]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IXOnlineApproval_CardID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillOnlineApprovalByCARDID]
    @CardID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [Cid],
        [OrgCode],
        [CardID],
        [CustomerID],
        [CurrencyType],
        [AuthCode],
        [ApproveDatetime],
        [ApproveDatetimeGmt],
        [DepositDate],
        [IndSmartTran],
        [OrigCurrencyCode],
        [OrigAmount],
        [ChargeAmount],
        [ExchangeRate],
        [MerchantNumber],
        [MerchantName],
        [MCC4],
        [MerchantCity],
        [AuthScore],
        [AuthRule],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [OnlineApproval]
    WHERE [CardID] = @CardID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXOnlineApproval_CustomerID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillOnlineApprovalByCUSTOMERID]
    @CustomerID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [Cid],
        [OrgCode],
        [CardID],
        [CustomerID],
        [CurrencyType],
        [AuthCode],
        [ApproveDatetime],
        [ApproveDatetimeGmt],
        [DepositDate],
        [IndSmartTran],
        [OrigCurrencyCode],
        [OrigAmount],
        [ChargeAmount],
        [ExchangeRate],
        [MerchantNumber],
        [MerchantName],
        [MCC4],
        [MerchantCity],
        [AuthScore],
        [AuthRule],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [OnlineApproval]
    WHERE [CustomerID] = @CustomerID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXOnlineApproval_OrgCodeCid
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillOnlineApprovalByORGCODEAndCID]
    @OrgCode varchar(5),
    @Cid varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [Cid],
        [OrgCode],
        [CardID],
        [CustomerID],
        [CurrencyType],
        [AuthCode],
        [ApproveDatetime],
        [ApproveDatetimeGmt],
        [DepositDate],
        [IndSmartTran],
        [OrigCurrencyCode],
        [OrigAmount],
        [ChargeAmount],
        [ExchangeRate],
        [MerchantNumber],
        [MerchantName],
        [MCC4],
        [MerchantCity],
        [AuthScore],
        [AuthRule],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [OnlineApproval]
    WHERE [OrgCode] = @OrgCode AND [Cid] = @Cid
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: RequestedTransaction
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllRequestedTransactions]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_RequestedTransaction],
            t.[ID],
            t.[InitiatingCustomerID],
            t.[TargetCustomerID],
            t.[TargetCustomerEmailOrPhone],
            t.[TargetCustomerName],
            t.[CustomerTransactionDescription],
            t.[enmDirection_TransactionDirection],
            t.[enmType_RequestedTransactionType],
            t.[enmFeePayer_Payer],
            t.[DefiningAmount],
            t.[CreditCardID],
            t.[AmountPaidByCreditCard],
            t.[NumberOfPaymentsByCreditCard],
            t.[FirstPaymentAmountByCreditCard],
            t.[OtherPaymentsAmountByCreditCard],
            t.[AmountPaidByBit],
            t.[AmountPaidByWallet],
            t.[TotalAmountPaidByPayer],
            t.[AmountReceivedByReceiver],
            t.[lkpDefiningAmountCurrency_Currency],
            t.[PrepaidCardID],
            t.[DistributorID],
            t.[enmDepositLocation],
            t.[CodeToGiveChanger],
            t.[spt_enmStatus_RequestedTransactionStatus],
            t.[LoggedAlertID],
            t.[ErrorText],
            t.[spt_Comments],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            t.[SecurityCodeApproved],
            t.[clc_WhenStatusChanged],
            t.[InitiatingCustomerEmailOrPhone],
            t.[InitiatingCustomerName],
            t.[ExchangeRateToILSUsed],
            t.[TargetNonCustomerID],
            t.[clc_DateRequested],
            t.[clc_MonthRequested],
            t.[GroupRequestedTransactionID],
            t.[ReceivingCustomerID],
            t.[PayingCustomerID],
            t.[RepExchangeRateToILS],
            t.[DefiningAmountILS],
            p1.[Text] AS [InitiatingCustomerID_Text],
            p2.[Text] AS [TargetCustomerID_Text],
            p3.[Text] AS [CreditCardID_Text],
            p4.[Text] AS [PrepaidCardID_Text],
            p5.[Text] AS [DistributorID_Text],
            p6.[Text] AS [LoggedAlertID_Text],
            p7.[Text] AS [TargetNonCustomerID_Text],
            p8.[Text] AS [ReceivingCustomerID_Text],
            p9.[Text] AS [PayingCustomerID_Text]
        FROM [RequestedTransaction] t
        LEFT JOIN [ccvwComboList_Customer] p1 ON t.[InitiatingCustomerID] = p1.[ID]
        LEFT JOIN [ccvwComboList_Customer] p2 ON t.[TargetCustomerID] = p2.[ID]
        LEFT JOIN [ccvwComboList_CustomerCreditCard] p3 ON t.[CreditCardID] = p3.[ID]
        LEFT JOIN [ccvwComboList_Card] p4 ON t.[PrepaidCardID] = p4.[ID]
        LEFT JOIN [ccvwComboList_Distributor] p5 ON t.[DistributorID] = p5.[ID]
        LEFT JOIN [ccvwComboList_c_LoggedAlert] p6 ON t.[LoggedAlertID] = p6.[ID]
        LEFT JOIN [ccvwComboList_NonCustomer] p7 ON t.[TargetNonCustomerID] = p7.[ID]
        LEFT JOIN [ccvwComboList_Customer] p8 ON t.[ReceivingCustomerID] = p8.[ID]
        LEFT JOIN [ccvwComboList_Customer] p9 ON t.[PayingCustomerID] = p9.[ID]
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_RequestedTransaction],
            [ID],
            [InitiatingCustomerID],
            [TargetCustomerID],
            [TargetCustomerEmailOrPhone],
            [TargetCustomerName],
            [CustomerTransactionDescription],
            [enmDirection_TransactionDirection],
            [enmType_RequestedTransactionType],
            [enmFeePayer_Payer],
            [DefiningAmount],
            [CreditCardID],
            [AmountPaidByCreditCard],
            [NumberOfPaymentsByCreditCard],
            [FirstPaymentAmountByCreditCard],
            [OtherPaymentsAmountByCreditCard],
            [AmountPaidByBit],
            [AmountPaidByWallet],
            [TotalAmountPaidByPayer],
            [AmountReceivedByReceiver],
            [lkpDefiningAmountCurrency_Currency],
            [PrepaidCardID],
            [DistributorID],
            [enmDepositLocation],
            [CodeToGiveChanger],
            [spt_enmStatus_RequestedTransactionStatus],
            [LoggedAlertID],
            [ErrorText],
            [spt_Comments],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID],
            [SecurityCodeApproved],
            [clc_WhenStatusChanged],
            [InitiatingCustomerEmailOrPhone],
            [InitiatingCustomerName],
            [ExchangeRateToILSUsed],
            [TargetNonCustomerID],
            [clc_DateRequested],
            [clc_MonthRequested],
            [GroupRequestedTransactionID],
            [ReceivingCustomerID],
            [PayingCustomerID],
            [RepExchangeRateToILS],
            [DefiningAmountILS]
        FROM [RequestedTransaction]
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredRequestedTransactions]
    @CodeToGiveChanger VARCHAR(50) = NULL,
    @CreditCardID INT = NULL,
    @clc_DateRequested DATETIME = NULL,
    @enmDepositLocation VARCHAR(50) = NULL,
    @DistributorID INT = NULL,
    @GroupRequestedTransactionID INT = NULL,
    @InitiatingCustomerID INT = NULL,
    @spt_enmStatus_RequestedTransactionStatus VARCHAR(50) = NULL,
    @clc_WhenStatusChanged DATETIME = NULL,
    @enmType_RequestedTransactionType VARCHAR(50) = NULL,
    @LoggedAlertID INT = NULL,
    @clc_MonthRequested DATETIME = NULL,
    @TargetNonCustomerID INT = NULL,
    @PayingCustomerID INT = NULL,
    @PrepaidCardID INT = NULL,
    @ReceivingCustomerID INT = NULL,
    @TargetCustomerID INT = NULL,
    @enmDirection_TransactionDirection VARCHAR(50) = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_RequestedTransaction],
            t.[ID],
            t.[InitiatingCustomerID],
            t.[TargetCustomerID],
            t.[TargetCustomerEmailOrPhone],
            t.[TargetCustomerName],
            t.[CustomerTransactionDescription],
            t.[enmDirection_TransactionDirection],
            t.[enmType_RequestedTransactionType],
            t.[enmFeePayer_Payer],
            t.[DefiningAmount],
            t.[CreditCardID],
            t.[AmountPaidByCreditCard],
            t.[NumberOfPaymentsByCreditCard],
            t.[FirstPaymentAmountByCreditCard],
            t.[OtherPaymentsAmountByCreditCard],
            t.[AmountPaidByBit],
            t.[AmountPaidByWallet],
            t.[TotalAmountPaidByPayer],
            t.[AmountReceivedByReceiver],
            t.[lkpDefiningAmountCurrency_Currency],
            t.[PrepaidCardID],
            t.[DistributorID],
            t.[enmDepositLocation],
            t.[CodeToGiveChanger],
            t.[spt_enmStatus_RequestedTransactionStatus],
            t.[LoggedAlertID],
            t.[ErrorText],
            t.[spt_Comments],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            t.[SecurityCodeApproved],
            t.[clc_WhenStatusChanged],
            t.[InitiatingCustomerEmailOrPhone],
            t.[InitiatingCustomerName],
            t.[ExchangeRateToILSUsed],
            t.[TargetNonCustomerID],
            t.[clc_DateRequested],
            t.[clc_MonthRequested],
            t.[GroupRequestedTransactionID],
            t.[ReceivingCustomerID],
            t.[PayingCustomerID],
            t.[RepExchangeRateToILS],
            t.[DefiningAmountILS],
            p1.[Text] AS [InitiatingCustomerID_Text],
            p2.[Text] AS [TargetCustomerID_Text],
            p3.[Text] AS [CreditCardID_Text],
            p4.[Text] AS [PrepaidCardID_Text],
            p5.[Text] AS [DistributorID_Text],
            p6.[Text] AS [LoggedAlertID_Text],
            p7.[Text] AS [TargetNonCustomerID_Text],
            p8.[Text] AS [ReceivingCustomerID_Text],
            p9.[Text] AS [PayingCustomerID_Text]
        FROM [RequestedTransaction] t
        LEFT JOIN [ccvwComboList_Customer] p1 ON t.[InitiatingCustomerID] = p1.[ID]
        LEFT JOIN [ccvwComboList_Customer] p2 ON t.[TargetCustomerID] = p2.[ID]
        LEFT JOIN [ccvwComboList_CustomerCreditCard] p3 ON t.[CreditCardID] = p3.[ID]
        LEFT JOIN [ccvwComboList_Card] p4 ON t.[PrepaidCardID] = p4.[ID]
        LEFT JOIN [ccvwComboList_Distributor] p5 ON t.[DistributorID] = p5.[ID]
        LEFT JOIN [ccvwComboList_c_LoggedAlert] p6 ON t.[LoggedAlertID] = p6.[ID]
        LEFT JOIN [ccvwComboList_NonCustomer] p7 ON t.[TargetNonCustomerID] = p7.[ID]
        LEFT JOIN [ccvwComboList_Customer] p8 ON t.[ReceivingCustomerID] = p8.[ID]
        LEFT JOIN [ccvwComboList_Customer] p9 ON t.[PayingCustomerID] = p9.[ID]
        WHERE 1=1
          AND (@CodeToGiveChanger IS NULL OR t.[CodeToGiveChanger] LIKE '%' + @CodeToGiveChanger + '%')
          AND (@CreditCardID IS NULL OR t.[CreditCardID] = @CreditCardID)
          AND (@clc_DateRequested IS NULL OR t.[clc_DateRequested] = @clc_DateRequested)
          AND (@enmDepositLocation IS NULL OR t.[enmDepositLocation] LIKE '%' + @enmDepositLocation + '%')
          AND (@DistributorID IS NULL OR t.[DistributorID] = @DistributorID)
          AND (@GroupRequestedTransactionID IS NULL OR t.[GroupRequestedTransactionID] = @GroupRequestedTransactionID)
          AND (@InitiatingCustomerID IS NULL OR t.[InitiatingCustomerID] = @InitiatingCustomerID)
          AND (@InitiatingCustomerID IS NULL OR t.[InitiatingCustomerID] = @InitiatingCustomerID)
          AND (@spt_enmStatus_RequestedTransactionStatus IS NULL OR t.[spt_enmStatus_RequestedTransactionStatus] LIKE '%' + @spt_enmStatus_RequestedTransactionStatus + '%')
          AND (@InitiatingCustomerID IS NULL OR t.[InitiatingCustomerID] = @InitiatingCustomerID)
          AND (@spt_enmStatus_RequestedTransactionStatus IS NULL OR t.[spt_enmStatus_RequestedTransactionStatus] LIKE '%' + @spt_enmStatus_RequestedTransactionStatus + '%')
          AND (@clc_WhenStatusChanged IS NULL OR t.[clc_WhenStatusChanged] = @clc_WhenStatusChanged)
          AND (@InitiatingCustomerID IS NULL OR t.[InitiatingCustomerID] = @InitiatingCustomerID)
          AND (@enmType_RequestedTransactionType IS NULL OR t.[enmType_RequestedTransactionType] LIKE '%' + @enmType_RequestedTransactionType + '%')
          AND (@InitiatingCustomerID IS NULL OR t.[InitiatingCustomerID] = @InitiatingCustomerID)
          AND (@clc_WhenStatusChanged IS NULL OR t.[clc_WhenStatusChanged] = @clc_WhenStatusChanged)
          AND (@LoggedAlertID IS NULL OR t.[LoggedAlertID] = @LoggedAlertID)
          AND (@clc_MonthRequested IS NULL OR t.[clc_MonthRequested] = @clc_MonthRequested)
          AND (@TargetNonCustomerID IS NULL OR t.[TargetNonCustomerID] = @TargetNonCustomerID)
          AND (@PayingCustomerID IS NULL OR t.[PayingCustomerID] = @PayingCustomerID)
          AND (@PrepaidCardID IS NULL OR t.[PrepaidCardID] = @PrepaidCardID)
          AND (@ReceivingCustomerID IS NULL OR t.[ReceivingCustomerID] = @ReceivingCustomerID)
          AND (@spt_enmStatus_RequestedTransactionStatus IS NULL OR t.[spt_enmStatus_RequestedTransactionStatus] LIKE '%' + @spt_enmStatus_RequestedTransactionStatus + '%')
          AND (@TargetCustomerID IS NULL OR t.[TargetCustomerID] = @TargetCustomerID)
          AND (@TargetCustomerID IS NULL OR t.[TargetCustomerID] = @TargetCustomerID)
          AND (@spt_enmStatus_RequestedTransactionStatus IS NULL OR t.[spt_enmStatus_RequestedTransactionStatus] LIKE '%' + @spt_enmStatus_RequestedTransactionStatus + '%')
          AND (@TargetCustomerID IS NULL OR t.[TargetCustomerID] = @TargetCustomerID)
          AND (@spt_enmStatus_RequestedTransactionStatus IS NULL OR t.[spt_enmStatus_RequestedTransactionStatus] LIKE '%' + @spt_enmStatus_RequestedTransactionStatus + '%')
          AND (@clc_WhenStatusChanged IS NULL OR t.[clc_WhenStatusChanged] = @clc_WhenStatusChanged)
          AND (@TargetCustomerID IS NULL OR t.[TargetCustomerID] = @TargetCustomerID)
          AND (@clc_WhenStatusChanged IS NULL OR t.[clc_WhenStatusChanged] = @clc_WhenStatusChanged)
          AND (@enmDirection_TransactionDirection IS NULL OR t.[enmDirection_TransactionDirection] LIKE '%' + @enmDirection_TransactionDirection + '%')
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_RequestedTransaction],
            [ID],
            [InitiatingCustomerID],
            [TargetCustomerID],
            [TargetCustomerEmailOrPhone],
            [TargetCustomerName],
            [CustomerTransactionDescription],
            [enmDirection_TransactionDirection],
            [enmType_RequestedTransactionType],
            [enmFeePayer_Payer],
            [DefiningAmount],
            [CreditCardID],
            [AmountPaidByCreditCard],
            [NumberOfPaymentsByCreditCard],
            [FirstPaymentAmountByCreditCard],
            [OtherPaymentsAmountByCreditCard],
            [AmountPaidByBit],
            [AmountPaidByWallet],
            [TotalAmountPaidByPayer],
            [AmountReceivedByReceiver],
            [lkpDefiningAmountCurrency_Currency],
            [PrepaidCardID],
            [DistributorID],
            [enmDepositLocation],
            [CodeToGiveChanger],
            [spt_enmStatus_RequestedTransactionStatus],
            [LoggedAlertID],
            [ErrorText],
            [spt_Comments],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID],
            [SecurityCodeApproved],
            [clc_WhenStatusChanged],
            [InitiatingCustomerEmailOrPhone],
            [InitiatingCustomerName],
            [ExchangeRateToILSUsed],
            [TargetNonCustomerID],
            [clc_DateRequested],
            [clc_MonthRequested],
            [GroupRequestedTransactionID],
            [ReceivingCustomerID],
            [PayingCustomerID],
            [RepExchangeRateToILS],
            [DefiningAmountILS]
        FROM [RequestedTransaction]
        WHERE 1=1
          AND (@CodeToGiveChanger IS NULL OR [CodeToGiveChanger] LIKE '%' + @CodeToGiveChanger + '%')
          AND (@CreditCardID IS NULL OR [CreditCardID] = @CreditCardID)
          AND (@clc_DateRequested IS NULL OR [clc_DateRequested] = @clc_DateRequested)
          AND (@enmDepositLocation IS NULL OR [enmDepositLocation] LIKE '%' + @enmDepositLocation + '%')
          AND (@DistributorID IS NULL OR [DistributorID] = @DistributorID)
          AND (@GroupRequestedTransactionID IS NULL OR [GroupRequestedTransactionID] = @GroupRequestedTransactionID)
          AND (@InitiatingCustomerID IS NULL OR [InitiatingCustomerID] = @InitiatingCustomerID)
          AND (@InitiatingCustomerID IS NULL OR [InitiatingCustomerID] = @InitiatingCustomerID)
          AND (@spt_enmStatus_RequestedTransactionStatus IS NULL OR [spt_enmStatus_RequestedTransactionStatus] LIKE '%' + @spt_enmStatus_RequestedTransactionStatus + '%')
          AND (@InitiatingCustomerID IS NULL OR [InitiatingCustomerID] = @InitiatingCustomerID)
          AND (@spt_enmStatus_RequestedTransactionStatus IS NULL OR [spt_enmStatus_RequestedTransactionStatus] LIKE '%' + @spt_enmStatus_RequestedTransactionStatus + '%')
          AND (@clc_WhenStatusChanged IS NULL OR [clc_WhenStatusChanged] = @clc_WhenStatusChanged)
          AND (@InitiatingCustomerID IS NULL OR [InitiatingCustomerID] = @InitiatingCustomerID)
          AND (@enmType_RequestedTransactionType IS NULL OR [enmType_RequestedTransactionType] LIKE '%' + @enmType_RequestedTransactionType + '%')
          AND (@InitiatingCustomerID IS NULL OR [InitiatingCustomerID] = @InitiatingCustomerID)
          AND (@clc_WhenStatusChanged IS NULL OR [clc_WhenStatusChanged] = @clc_WhenStatusChanged)
          AND (@LoggedAlertID IS NULL OR [LoggedAlertID] = @LoggedAlertID)
          AND (@clc_MonthRequested IS NULL OR [clc_MonthRequested] = @clc_MonthRequested)
          AND (@TargetNonCustomerID IS NULL OR [TargetNonCustomerID] = @TargetNonCustomerID)
          AND (@PayingCustomerID IS NULL OR [PayingCustomerID] = @PayingCustomerID)
          AND (@PrepaidCardID IS NULL OR [PrepaidCardID] = @PrepaidCardID)
          AND (@ReceivingCustomerID IS NULL OR [ReceivingCustomerID] = @ReceivingCustomerID)
          AND (@spt_enmStatus_RequestedTransactionStatus IS NULL OR [spt_enmStatus_RequestedTransactionStatus] LIKE '%' + @spt_enmStatus_RequestedTransactionStatus + '%')
          AND (@TargetCustomerID IS NULL OR [TargetCustomerID] = @TargetCustomerID)
          AND (@TargetCustomerID IS NULL OR [TargetCustomerID] = @TargetCustomerID)
          AND (@spt_enmStatus_RequestedTransactionStatus IS NULL OR [spt_enmStatus_RequestedTransactionStatus] LIKE '%' + @spt_enmStatus_RequestedTransactionStatus + '%')
          AND (@TargetCustomerID IS NULL OR [TargetCustomerID] = @TargetCustomerID)
          AND (@spt_enmStatus_RequestedTransactionStatus IS NULL OR [spt_enmStatus_RequestedTransactionStatus] LIKE '%' + @spt_enmStatus_RequestedTransactionStatus + '%')
          AND (@clc_WhenStatusChanged IS NULL OR [clc_WhenStatusChanged] = @clc_WhenStatusChanged)
          AND (@TargetCustomerID IS NULL OR [TargetCustomerID] = @TargetCustomerID)
          AND (@clc_WhenStatusChanged IS NULL OR [clc_WhenStatusChanged] = @clc_WhenStatusChanged)
          AND (@enmDirection_TransactionDirection IS NULL OR [enmDirection_TransactionDirection] LIKE '%' + @enmDirection_TransactionDirection + '%')
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetRequestedTransactionByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_RequestedTransaction],
        [ID],
        [InitiatingCustomerID],
        [TargetCustomerID],
        [TargetCustomerEmailOrPhone],
        [TargetCustomerName],
        [CustomerTransactionDescription],
        [enmDirection_TransactionDirection],
        [enmType_RequestedTransactionType],
        [enmFeePayer_Payer],
        [DefiningAmount],
        [CreditCardID],
        [AmountPaidByCreditCard],
        [NumberOfPaymentsByCreditCard],
        [FirstPaymentAmountByCreditCard],
        [OtherPaymentsAmountByCreditCard],
        [AmountPaidByBit],
        [AmountPaidByWallet],
        [TotalAmountPaidByPayer],
        [AmountReceivedByReceiver],
        [lkpDefiningAmountCurrency_Currency],
        [PrepaidCardID],
        [DistributorID],
        [enmDepositLocation],
        [CodeToGiveChanger],
        [spt_enmStatus_RequestedTransactionStatus],
        [LoggedAlertID],
        [ErrorText],
        [spt_Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [SecurityCodeApproved],
        [clc_WhenStatusChanged],
        [InitiatingCustomerEmailOrPhone],
        [InitiatingCustomerName],
        [ExchangeRateToILSUsed],
        [TargetNonCustomerID],
        [clc_DateRequested],
        [clc_MonthRequested],
        [GroupRequestedTransactionID],
        [ReceivingCustomerID],
        [PayingCustomerID],
        [RepExchangeRateToILS],
        [DefiningAmountILS]
    FROM [RequestedTransaction]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddRequestedTransaction]
    @TableName_RequestedTransaction bit = NULL,
    @InitiatingCustomerID bigint = NULL,
    @TargetCustomerID bigint = NULL,
    @TargetCustomerEmailOrPhone varchar(50) = NULL,
    @TargetCustomerName nvarchar(100) = NULL,
    @CustomerTransactionDescription nvarchar(200) = NULL,
    @enmDirection_TransactionDirection varchar(50) = NULL,
    @enmType_RequestedTransactionType varchar(50) = NULL,
    @enmFeePayer_Payer varchar(50) = NULL,
    @DefiningAmount decimal(18,0) = NULL,
    @CreditCardID bigint = NULL,
    @AmountPaidByCreditCard decimal(18,0) = NULL,
    @NumberOfPaymentsByCreditCard int = NULL,
    @FirstPaymentAmountByCreditCard decimal(18,0) = NULL,
    @OtherPaymentsAmountByCreditCard decimal(18,0) = NULL,
    @AmountPaidByBit decimal(18,0) = NULL,
    @AmountPaidByWallet decimal(18,0) = NULL,
    @TotalAmountPaidByPayer decimal(18,0) = NULL,
    @AmountReceivedByReceiver decimal(18,0) = NULL,
    @lkpDefiningAmountCurrency_Currency varchar(50) = NULL,
    @PrepaidCardID bigint = NULL,
    @DistributorID bigint = NULL,
    @enmDepositLocation varchar(50) = NULL,
    @CodeToGiveChanger varchar(50) = NULL,
    @spt_enmStatus_RequestedTransactionStatus varchar(50) = NULL,
    @LoggedAlertID bigint = NULL,
    @ErrorText nvarchar(240) = NULL,
    @spt_Comments nvarchar(1024) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @SecurityCodeApproved datetimeoffset = NULL,
    @InitiatingCustomerEmailOrPhone varchar(50) = NULL,
    @InitiatingCustomerName nvarchar(100) = NULL,
    @ExchangeRateToILSUsed decimal(18,0),
    @TargetNonCustomerID bigint = NULL,
    @GroupRequestedTransactionID bigint = NULL,
    @ReceivingCustomerID bigint = NULL,
    @PayingCustomerID bigint = NULL,
    @RepExchangeRateToILS decimal(18,0) = NULL,
    @DefiningAmountILS decimal(18,0) = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [RequestedTransaction] (
        [TableName_RequestedTransaction],
        [InitiatingCustomerID],
        [TargetCustomerID],
        [TargetCustomerEmailOrPhone],
        [TargetCustomerName],
        [CustomerTransactionDescription],
        [enmDirection_TransactionDirection],
        [enmType_RequestedTransactionType],
        [enmFeePayer_Payer],
        [DefiningAmount],
        [CreditCardID],
        [AmountPaidByCreditCard],
        [NumberOfPaymentsByCreditCard],
        [FirstPaymentAmountByCreditCard],
        [OtherPaymentsAmountByCreditCard],
        [AmountPaidByBit],
        [AmountPaidByWallet],
        [TotalAmountPaidByPayer],
        [AmountReceivedByReceiver],
        [lkpDefiningAmountCurrency_Currency],
        [PrepaidCardID],
        [DistributorID],
        [enmDepositLocation],
        [CodeToGiveChanger],
        [spt_enmStatus_RequestedTransactionStatus],
        [LoggedAlertID],
        [ErrorText],
        [spt_Comments],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [SecurityCodeApproved],
        [InitiatingCustomerEmailOrPhone],
        [InitiatingCustomerName],
        [ExchangeRateToILSUsed],
        [TargetNonCustomerID],
        [GroupRequestedTransactionID],
        [ReceivingCustomerID],
        [PayingCustomerID],
        [RepExchangeRateToILS],
        [DefiningAmountILS],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_RequestedTransaction,
        @InitiatingCustomerID,
        @TargetCustomerID,
        @TargetCustomerEmailOrPhone,
        @TargetCustomerName,
        @CustomerTransactionDescription,
        @enmDirection_TransactionDirection,
        @enmType_RequestedTransactionType,
        @enmFeePayer_Payer,
        @DefiningAmount,
        @CreditCardID,
        @AmountPaidByCreditCard,
        @NumberOfPaymentsByCreditCard,
        @FirstPaymentAmountByCreditCard,
        @OtherPaymentsAmountByCreditCard,
        @AmountPaidByBit,
        @AmountPaidByWallet,
        @TotalAmountPaidByPayer,
        @AmountReceivedByReceiver,
        @lkpDefiningAmountCurrency_Currency,
        @PrepaidCardID,
        @DistributorID,
        @enmDepositLocation,
        @CodeToGiveChanger,
        @spt_enmStatus_RequestedTransactionStatus,
        @LoggedAlertID,
        @ErrorText,
        @spt_Comments,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        @SecurityCodeApproved,
        @InitiatingCustomerEmailOrPhone,
        @InitiatingCustomerName,
        @ExchangeRateToILSUsed,
        @TargetNonCustomerID,
        @GroupRequestedTransactionID,
        @ReceivingCustomerID,
        @PayingCustomerID,
        @RepExchangeRateToILS,
        @DefiningAmountILS,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateRequestedTransaction]
    @ID bigint,
    @TableName_RequestedTransaction bit = NULL,
    @InitiatingCustomerID bigint = NULL,
    @TargetCustomerID bigint = NULL,
    @TargetCustomerEmailOrPhone varchar(50) = NULL,
    @TargetCustomerName nvarchar(100) = NULL,
    @CustomerTransactionDescription nvarchar(200) = NULL,
    @enmDirection_TransactionDirection varchar(50) = NULL,
    @enmType_RequestedTransactionType varchar(50) = NULL,
    @enmFeePayer_Payer varchar(50) = NULL,
    @DefiningAmount decimal(18,0) = NULL,
    @CreditCardID bigint = NULL,
    @AmountPaidByCreditCard decimal(18,0) = NULL,
    @NumberOfPaymentsByCreditCard int = NULL,
    @FirstPaymentAmountByCreditCard decimal(18,0) = NULL,
    @OtherPaymentsAmountByCreditCard decimal(18,0) = NULL,
    @AmountPaidByBit decimal(18,0) = NULL,
    @AmountPaidByWallet decimal(18,0) = NULL,
    @TotalAmountPaidByPayer decimal(18,0) = NULL,
    @AmountReceivedByReceiver decimal(18,0) = NULL,
    @lkpDefiningAmountCurrency_Currency varchar(50) = NULL,
    @PrepaidCardID bigint = NULL,
    @DistributorID bigint = NULL,
    @enmDepositLocation varchar(50) = NULL,
    @CodeToGiveChanger varchar(50) = NULL,
    @spt_enmStatus_RequestedTransactionStatus varchar(50) = NULL,
    @LoggedAlertID bigint = NULL,
    @ErrorText nvarchar(240) = NULL,
    @spt_Comments nvarchar(1024) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @SecurityCodeApproved datetimeoffset = NULL,
    @InitiatingCustomerEmailOrPhone varchar(50) = NULL,
    @InitiatingCustomerName nvarchar(100) = NULL,
    @ExchangeRateToILSUsed decimal(18,0),
    @TargetNonCustomerID bigint = NULL,
    @GroupRequestedTransactionID bigint = NULL,
    @ReceivingCustomerID bigint = NULL,
    @PayingCustomerID bigint = NULL,
    @RepExchangeRateToILS decimal(18,0) = NULL,
    @DefiningAmountILS decimal(18,0) = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [RequestedTransaction]
    SET
        [TableName_RequestedTransaction] = @TableName_RequestedTransaction,
        [InitiatingCustomerID] = @InitiatingCustomerID,
        [TargetCustomerID] = @TargetCustomerID,
        [TargetCustomerEmailOrPhone] = @TargetCustomerEmailOrPhone,
        [TargetCustomerName] = @TargetCustomerName,
        [CustomerTransactionDescription] = @CustomerTransactionDescription,
        [enmDirection_TransactionDirection] = @enmDirection_TransactionDirection,
        [enmType_RequestedTransactionType] = @enmType_RequestedTransactionType,
        [enmFeePayer_Payer] = @enmFeePayer_Payer,
        [DefiningAmount] = @DefiningAmount,
        [CreditCardID] = @CreditCardID,
        [AmountPaidByCreditCard] = @AmountPaidByCreditCard,
        [NumberOfPaymentsByCreditCard] = @NumberOfPaymentsByCreditCard,
        [FirstPaymentAmountByCreditCard] = @FirstPaymentAmountByCreditCard,
        [OtherPaymentsAmountByCreditCard] = @OtherPaymentsAmountByCreditCard,
        [AmountPaidByBit] = @AmountPaidByBit,
        [AmountPaidByWallet] = @AmountPaidByWallet,
        [TotalAmountPaidByPayer] = @TotalAmountPaidByPayer,
        [AmountReceivedByReceiver] = @AmountReceivedByReceiver,
        [lkpDefiningAmountCurrency_Currency] = @lkpDefiningAmountCurrency_Currency,
        [PrepaidCardID] = @PrepaidCardID,
        [DistributorID] = @DistributorID,
        [enmDepositLocation] = @enmDepositLocation,
        [CodeToGiveChanger] = @CodeToGiveChanger,
        [spt_enmStatus_RequestedTransactionStatus] = @spt_enmStatus_RequestedTransactionStatus,
        [LoggedAlertID] = @LoggedAlertID,
        [ErrorText] = @ErrorText,
        [spt_Comments] = @spt_Comments,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [SecurityCodeApproved] = @SecurityCodeApproved,
        [InitiatingCustomerEmailOrPhone] = @InitiatingCustomerEmailOrPhone,
        [InitiatingCustomerName] = @InitiatingCustomerName,
        [ExchangeRateToILSUsed] = @ExchangeRateToILSUsed,
        [TargetNonCustomerID] = @TargetNonCustomerID,
        [GroupRequestedTransactionID] = @GroupRequestedTransactionID,
        [ReceivingCustomerID] = @ReceivingCustomerID,
        [PayingCustomerID] = @PayingCustomerID,
        [RepExchangeRateToILS] = @RepExchangeRateToILS,
        [DefiningAmountILS] = @DefiningAmountILS,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteRequestedTransaction]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [RequestedTransaction]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_RequestedTransaction_CodeToGiveChanger
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillRequestedTransactionByCODETOGIVECHANGER]
    @CodeToGiveChanger varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_RequestedTransaction],
        [ID],
        [InitiatingCustomerID],
        [TargetCustomerID],
        [TargetCustomerEmailOrPhone],
        [TargetCustomerName],
        [CustomerTransactionDescription],
        [enmDirection_TransactionDirection],
        [enmType_RequestedTransactionType],
        [enmFeePayer_Payer],
        [DefiningAmount],
        [CreditCardID],
        [AmountPaidByCreditCard],
        [NumberOfPaymentsByCreditCard],
        [FirstPaymentAmountByCreditCard],
        [OtherPaymentsAmountByCreditCard],
        [AmountPaidByBit],
        [AmountPaidByWallet],
        [TotalAmountPaidByPayer],
        [AmountReceivedByReceiver],
        [lkpDefiningAmountCurrency_Currency],
        [PrepaidCardID],
        [DistributorID],
        [enmDepositLocation],
        [CodeToGiveChanger],
        [spt_enmStatus_RequestedTransactionStatus],
        [LoggedAlertID],
        [ErrorText],
        [spt_Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [SecurityCodeApproved],
        [clc_WhenStatusChanged],
        [InitiatingCustomerEmailOrPhone],
        [InitiatingCustomerName],
        [ExchangeRateToILSUsed],
        [TargetNonCustomerID],
        [clc_DateRequested],
        [clc_MonthRequested],
        [GroupRequestedTransactionID],
        [ReceivingCustomerID],
        [PayingCustomerID],
        [RepExchangeRateToILS],
        [DefiningAmountILS]
    FROM [RequestedTransaction]
    WHERE [CodeToGiveChanger] = @CodeToGiveChanger
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_RequestedTransaction_CreditCard
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillRequestedTransactionByCREDITCARDID]
    @CreditCardID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_RequestedTransaction],
        [ID],
        [InitiatingCustomerID],
        [TargetCustomerID],
        [TargetCustomerEmailOrPhone],
        [TargetCustomerName],
        [CustomerTransactionDescription],
        [enmDirection_TransactionDirection],
        [enmType_RequestedTransactionType],
        [enmFeePayer_Payer],
        [DefiningAmount],
        [CreditCardID],
        [AmountPaidByCreditCard],
        [NumberOfPaymentsByCreditCard],
        [FirstPaymentAmountByCreditCard],
        [OtherPaymentsAmountByCreditCard],
        [AmountPaidByBit],
        [AmountPaidByWallet],
        [TotalAmountPaidByPayer],
        [AmountReceivedByReceiver],
        [lkpDefiningAmountCurrency_Currency],
        [PrepaidCardID],
        [DistributorID],
        [enmDepositLocation],
        [CodeToGiveChanger],
        [spt_enmStatus_RequestedTransactionStatus],
        [LoggedAlertID],
        [ErrorText],
        [spt_Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [SecurityCodeApproved],
        [clc_WhenStatusChanged],
        [InitiatingCustomerEmailOrPhone],
        [InitiatingCustomerName],
        [ExchangeRateToILSUsed],
        [TargetNonCustomerID],
        [clc_DateRequested],
        [clc_MonthRequested],
        [GroupRequestedTransactionID],
        [ReceivingCustomerID],
        [PayingCustomerID],
        [RepExchangeRateToILS],
        [DefiningAmountILS]
    FROM [RequestedTransaction]
    WHERE [CreditCardID] = @CreditCardID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_RequestedTransaction_DateRequested
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillRequestedTransactionByCLCDATEREQUESTED]
    @clc_DateRequested date
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_RequestedTransaction],
        [ID],
        [InitiatingCustomerID],
        [TargetCustomerID],
        [TargetCustomerEmailOrPhone],
        [TargetCustomerName],
        [CustomerTransactionDescription],
        [enmDirection_TransactionDirection],
        [enmType_RequestedTransactionType],
        [enmFeePayer_Payer],
        [DefiningAmount],
        [CreditCardID],
        [AmountPaidByCreditCard],
        [NumberOfPaymentsByCreditCard],
        [FirstPaymentAmountByCreditCard],
        [OtherPaymentsAmountByCreditCard],
        [AmountPaidByBit],
        [AmountPaidByWallet],
        [TotalAmountPaidByPayer],
        [AmountReceivedByReceiver],
        [lkpDefiningAmountCurrency_Currency],
        [PrepaidCardID],
        [DistributorID],
        [enmDepositLocation],
        [CodeToGiveChanger],
        [spt_enmStatus_RequestedTransactionStatus],
        [LoggedAlertID],
        [ErrorText],
        [spt_Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [SecurityCodeApproved],
        [clc_WhenStatusChanged],
        [InitiatingCustomerEmailOrPhone],
        [InitiatingCustomerName],
        [ExchangeRateToILSUsed],
        [TargetNonCustomerID],
        [clc_DateRequested],
        [clc_MonthRequested],
        [GroupRequestedTransactionID],
        [ReceivingCustomerID],
        [PayingCustomerID],
        [RepExchangeRateToILS],
        [DefiningAmountILS]
    FROM [RequestedTransaction]
    WHERE [clc_DateRequested] = @clc_DateRequested
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_RequestedTransaction_DepositLocation
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillRequestedTransactionByENMDEPOSITLOCATION]
    @enmDepositLocation varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_RequestedTransaction],
        [ID],
        [InitiatingCustomerID],
        [TargetCustomerID],
        [TargetCustomerEmailOrPhone],
        [TargetCustomerName],
        [CustomerTransactionDescription],
        [enmDirection_TransactionDirection],
        [enmType_RequestedTransactionType],
        [enmFeePayer_Payer],
        [DefiningAmount],
        [CreditCardID],
        [AmountPaidByCreditCard],
        [NumberOfPaymentsByCreditCard],
        [FirstPaymentAmountByCreditCard],
        [OtherPaymentsAmountByCreditCard],
        [AmountPaidByBit],
        [AmountPaidByWallet],
        [TotalAmountPaidByPayer],
        [AmountReceivedByReceiver],
        [lkpDefiningAmountCurrency_Currency],
        [PrepaidCardID],
        [DistributorID],
        [enmDepositLocation],
        [CodeToGiveChanger],
        [spt_enmStatus_RequestedTransactionStatus],
        [LoggedAlertID],
        [ErrorText],
        [spt_Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [SecurityCodeApproved],
        [clc_WhenStatusChanged],
        [InitiatingCustomerEmailOrPhone],
        [InitiatingCustomerName],
        [ExchangeRateToILSUsed],
        [TargetNonCustomerID],
        [clc_DateRequested],
        [clc_MonthRequested],
        [GroupRequestedTransactionID],
        [ReceivingCustomerID],
        [PayingCustomerID],
        [RepExchangeRateToILS],
        [DefiningAmountILS]
    FROM [RequestedTransaction]
    WHERE [enmDepositLocation] = @enmDepositLocation
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_RequestedTransaction_Distributor
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillRequestedTransactionByDISTRIBUTORID]
    @DistributorID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_RequestedTransaction],
        [ID],
        [InitiatingCustomerID],
        [TargetCustomerID],
        [TargetCustomerEmailOrPhone],
        [TargetCustomerName],
        [CustomerTransactionDescription],
        [enmDirection_TransactionDirection],
        [enmType_RequestedTransactionType],
        [enmFeePayer_Payer],
        [DefiningAmount],
        [CreditCardID],
        [AmountPaidByCreditCard],
        [NumberOfPaymentsByCreditCard],
        [FirstPaymentAmountByCreditCard],
        [OtherPaymentsAmountByCreditCard],
        [AmountPaidByBit],
        [AmountPaidByWallet],
        [TotalAmountPaidByPayer],
        [AmountReceivedByReceiver],
        [lkpDefiningAmountCurrency_Currency],
        [PrepaidCardID],
        [DistributorID],
        [enmDepositLocation],
        [CodeToGiveChanger],
        [spt_enmStatus_RequestedTransactionStatus],
        [LoggedAlertID],
        [ErrorText],
        [spt_Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [SecurityCodeApproved],
        [clc_WhenStatusChanged],
        [InitiatingCustomerEmailOrPhone],
        [InitiatingCustomerName],
        [ExchangeRateToILSUsed],
        [TargetNonCustomerID],
        [clc_DateRequested],
        [clc_MonthRequested],
        [GroupRequestedTransactionID],
        [ReceivingCustomerID],
        [PayingCustomerID],
        [RepExchangeRateToILS],
        [DefiningAmountILS]
    FROM [RequestedTransaction]
    WHERE [DistributorID] = @DistributorID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_RequestedTransaction_GroupRequestedTransactionID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillRequestedTransactionByGROUPREQUESTEDTRANSACTIONID]
    @GroupRequestedTransactionID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_RequestedTransaction],
        [ID],
        [InitiatingCustomerID],
        [TargetCustomerID],
        [TargetCustomerEmailOrPhone],
        [TargetCustomerName],
        [CustomerTransactionDescription],
        [enmDirection_TransactionDirection],
        [enmType_RequestedTransactionType],
        [enmFeePayer_Payer],
        [DefiningAmount],
        [CreditCardID],
        [AmountPaidByCreditCard],
        [NumberOfPaymentsByCreditCard],
        [FirstPaymentAmountByCreditCard],
        [OtherPaymentsAmountByCreditCard],
        [AmountPaidByBit],
        [AmountPaidByWallet],
        [TotalAmountPaidByPayer],
        [AmountReceivedByReceiver],
        [lkpDefiningAmountCurrency_Currency],
        [PrepaidCardID],
        [DistributorID],
        [enmDepositLocation],
        [CodeToGiveChanger],
        [spt_enmStatus_RequestedTransactionStatus],
        [LoggedAlertID],
        [ErrorText],
        [spt_Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [SecurityCodeApproved],
        [clc_WhenStatusChanged],
        [InitiatingCustomerEmailOrPhone],
        [InitiatingCustomerName],
        [ExchangeRateToILSUsed],
        [TargetNonCustomerID],
        [clc_DateRequested],
        [clc_MonthRequested],
        [GroupRequestedTransactionID],
        [ReceivingCustomerID],
        [PayingCustomerID],
        [RepExchangeRateToILS],
        [DefiningAmountILS]
    FROM [RequestedTransaction]
    WHERE [GroupRequestedTransactionID] = @GroupRequestedTransactionID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_RequestedTransaction_InitiatingCustomer
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillRequestedTransactionByINITIATINGCUSTOMERID]
    @InitiatingCustomerID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_RequestedTransaction],
        [ID],
        [InitiatingCustomerID],
        [TargetCustomerID],
        [TargetCustomerEmailOrPhone],
        [TargetCustomerName],
        [CustomerTransactionDescription],
        [enmDirection_TransactionDirection],
        [enmType_RequestedTransactionType],
        [enmFeePayer_Payer],
        [DefiningAmount],
        [CreditCardID],
        [AmountPaidByCreditCard],
        [NumberOfPaymentsByCreditCard],
        [FirstPaymentAmountByCreditCard],
        [OtherPaymentsAmountByCreditCard],
        [AmountPaidByBit],
        [AmountPaidByWallet],
        [TotalAmountPaidByPayer],
        [AmountReceivedByReceiver],
        [lkpDefiningAmountCurrency_Currency],
        [PrepaidCardID],
        [DistributorID],
        [enmDepositLocation],
        [CodeToGiveChanger],
        [spt_enmStatus_RequestedTransactionStatus],
        [LoggedAlertID],
        [ErrorText],
        [spt_Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [SecurityCodeApproved],
        [clc_WhenStatusChanged],
        [InitiatingCustomerEmailOrPhone],
        [InitiatingCustomerName],
        [ExchangeRateToILSUsed],
        [TargetNonCustomerID],
        [clc_DateRequested],
        [clc_MonthRequested],
        [GroupRequestedTransactionID],
        [ReceivingCustomerID],
        [PayingCustomerID],
        [RepExchangeRateToILS],
        [DefiningAmountILS]
    FROM [RequestedTransaction]
    WHERE [InitiatingCustomerID] = @InitiatingCustomerID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_RequestedTransaction_InitiatingCustomer_Status
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillRequestedTransactionByINITIATINGCUSTOMERIDAndSPTENMSTATUSREQUESTEDTRANSACTIONSTATUS]
    @InitiatingCustomerID bigint,
    @spt_enmStatus_RequestedTransactionStatus varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_RequestedTransaction],
        [ID],
        [InitiatingCustomerID],
        [TargetCustomerID],
        [TargetCustomerEmailOrPhone],
        [TargetCustomerName],
        [CustomerTransactionDescription],
        [enmDirection_TransactionDirection],
        [enmType_RequestedTransactionType],
        [enmFeePayer_Payer],
        [DefiningAmount],
        [CreditCardID],
        [AmountPaidByCreditCard],
        [NumberOfPaymentsByCreditCard],
        [FirstPaymentAmountByCreditCard],
        [OtherPaymentsAmountByCreditCard],
        [AmountPaidByBit],
        [AmountPaidByWallet],
        [TotalAmountPaidByPayer],
        [AmountReceivedByReceiver],
        [lkpDefiningAmountCurrency_Currency],
        [PrepaidCardID],
        [DistributorID],
        [enmDepositLocation],
        [CodeToGiveChanger],
        [spt_enmStatus_RequestedTransactionStatus],
        [LoggedAlertID],
        [ErrorText],
        [spt_Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [SecurityCodeApproved],
        [clc_WhenStatusChanged],
        [InitiatingCustomerEmailOrPhone],
        [InitiatingCustomerName],
        [ExchangeRateToILSUsed],
        [TargetNonCustomerID],
        [clc_DateRequested],
        [clc_MonthRequested],
        [GroupRequestedTransactionID],
        [ReceivingCustomerID],
        [PayingCustomerID],
        [RepExchangeRateToILS],
        [DefiningAmountILS]
    FROM [RequestedTransaction]
    WHERE [InitiatingCustomerID] = @InitiatingCustomerID AND [spt_enmStatus_RequestedTransactionStatus] = @spt_enmStatus_RequestedTransactionStatus
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_RequestedTransaction_InitiatingCustomer_Status_WhenStatusChanged
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillRequestedTransactionByINITIATINGCUSTOMERIDAndSPTENMSTATUSREQUESTEDTRANSACTIONSTATUSAndCLCWHENSTATUSCHANGED]
    @InitiatingCustomerID bigint,
    @spt_enmStatus_RequestedTransactionStatus varchar(50),
    @clc_WhenStatusChanged datetimeoffset
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_RequestedTransaction],
        [ID],
        [InitiatingCustomerID],
        [TargetCustomerID],
        [TargetCustomerEmailOrPhone],
        [TargetCustomerName],
        [CustomerTransactionDescription],
        [enmDirection_TransactionDirection],
        [enmType_RequestedTransactionType],
        [enmFeePayer_Payer],
        [DefiningAmount],
        [CreditCardID],
        [AmountPaidByCreditCard],
        [NumberOfPaymentsByCreditCard],
        [FirstPaymentAmountByCreditCard],
        [OtherPaymentsAmountByCreditCard],
        [AmountPaidByBit],
        [AmountPaidByWallet],
        [TotalAmountPaidByPayer],
        [AmountReceivedByReceiver],
        [lkpDefiningAmountCurrency_Currency],
        [PrepaidCardID],
        [DistributorID],
        [enmDepositLocation],
        [CodeToGiveChanger],
        [spt_enmStatus_RequestedTransactionStatus],
        [LoggedAlertID],
        [ErrorText],
        [spt_Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [SecurityCodeApproved],
        [clc_WhenStatusChanged],
        [InitiatingCustomerEmailOrPhone],
        [InitiatingCustomerName],
        [ExchangeRateToILSUsed],
        [TargetNonCustomerID],
        [clc_DateRequested],
        [clc_MonthRequested],
        [GroupRequestedTransactionID],
        [ReceivingCustomerID],
        [PayingCustomerID],
        [RepExchangeRateToILS],
        [DefiningAmountILS]
    FROM [RequestedTransaction]
    WHERE [InitiatingCustomerID] = @InitiatingCustomerID AND [spt_enmStatus_RequestedTransactionStatus] = @spt_enmStatus_RequestedTransactionStatus AND [clc_WhenStatusChanged] = @clc_WhenStatusChanged
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_RequestedTransaction_InitiatingCustomer_Type
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillRequestedTransactionByINITIATINGCUSTOMERIDAndENMTYPEREQUESTEDTRANSACTIONTYPE]
    @InitiatingCustomerID bigint,
    @enmType_RequestedTransactionType varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_RequestedTransaction],
        [ID],
        [InitiatingCustomerID],
        [TargetCustomerID],
        [TargetCustomerEmailOrPhone],
        [TargetCustomerName],
        [CustomerTransactionDescription],
        [enmDirection_TransactionDirection],
        [enmType_RequestedTransactionType],
        [enmFeePayer_Payer],
        [DefiningAmount],
        [CreditCardID],
        [AmountPaidByCreditCard],
        [NumberOfPaymentsByCreditCard],
        [FirstPaymentAmountByCreditCard],
        [OtherPaymentsAmountByCreditCard],
        [AmountPaidByBit],
        [AmountPaidByWallet],
        [TotalAmountPaidByPayer],
        [AmountReceivedByReceiver],
        [lkpDefiningAmountCurrency_Currency],
        [PrepaidCardID],
        [DistributorID],
        [enmDepositLocation],
        [CodeToGiveChanger],
        [spt_enmStatus_RequestedTransactionStatus],
        [LoggedAlertID],
        [ErrorText],
        [spt_Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [SecurityCodeApproved],
        [clc_WhenStatusChanged],
        [InitiatingCustomerEmailOrPhone],
        [InitiatingCustomerName],
        [ExchangeRateToILSUsed],
        [TargetNonCustomerID],
        [clc_DateRequested],
        [clc_MonthRequested],
        [GroupRequestedTransactionID],
        [ReceivingCustomerID],
        [PayingCustomerID],
        [RepExchangeRateToILS],
        [DefiningAmountILS]
    FROM [RequestedTransaction]
    WHERE [InitiatingCustomerID] = @InitiatingCustomerID AND [enmType_RequestedTransactionType] = @enmType_RequestedTransactionType
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_RequestedTransaction_InitiatingCustomer_WhenStatusChanged
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillRequestedTransactionByINITIATINGCUSTOMERIDAndCLCWHENSTATUSCHANGED]
    @InitiatingCustomerID bigint,
    @clc_WhenStatusChanged datetimeoffset
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_RequestedTransaction],
        [ID],
        [InitiatingCustomerID],
        [TargetCustomerID],
        [TargetCustomerEmailOrPhone],
        [TargetCustomerName],
        [CustomerTransactionDescription],
        [enmDirection_TransactionDirection],
        [enmType_RequestedTransactionType],
        [enmFeePayer_Payer],
        [DefiningAmount],
        [CreditCardID],
        [AmountPaidByCreditCard],
        [NumberOfPaymentsByCreditCard],
        [FirstPaymentAmountByCreditCard],
        [OtherPaymentsAmountByCreditCard],
        [AmountPaidByBit],
        [AmountPaidByWallet],
        [TotalAmountPaidByPayer],
        [AmountReceivedByReceiver],
        [lkpDefiningAmountCurrency_Currency],
        [PrepaidCardID],
        [DistributorID],
        [enmDepositLocation],
        [CodeToGiveChanger],
        [spt_enmStatus_RequestedTransactionStatus],
        [LoggedAlertID],
        [ErrorText],
        [spt_Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [SecurityCodeApproved],
        [clc_WhenStatusChanged],
        [InitiatingCustomerEmailOrPhone],
        [InitiatingCustomerName],
        [ExchangeRateToILSUsed],
        [TargetNonCustomerID],
        [clc_DateRequested],
        [clc_MonthRequested],
        [GroupRequestedTransactionID],
        [ReceivingCustomerID],
        [PayingCustomerID],
        [RepExchangeRateToILS],
        [DefiningAmountILS]
    FROM [RequestedTransaction]
    WHERE [InitiatingCustomerID] = @InitiatingCustomerID AND [clc_WhenStatusChanged] = @clc_WhenStatusChanged
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_RequestedTransaction_LoggedAlert
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillRequestedTransactionByLOGGEDALERTID]
    @LoggedAlertID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_RequestedTransaction],
        [ID],
        [InitiatingCustomerID],
        [TargetCustomerID],
        [TargetCustomerEmailOrPhone],
        [TargetCustomerName],
        [CustomerTransactionDescription],
        [enmDirection_TransactionDirection],
        [enmType_RequestedTransactionType],
        [enmFeePayer_Payer],
        [DefiningAmount],
        [CreditCardID],
        [AmountPaidByCreditCard],
        [NumberOfPaymentsByCreditCard],
        [FirstPaymentAmountByCreditCard],
        [OtherPaymentsAmountByCreditCard],
        [AmountPaidByBit],
        [AmountPaidByWallet],
        [TotalAmountPaidByPayer],
        [AmountReceivedByReceiver],
        [lkpDefiningAmountCurrency_Currency],
        [PrepaidCardID],
        [DistributorID],
        [enmDepositLocation],
        [CodeToGiveChanger],
        [spt_enmStatus_RequestedTransactionStatus],
        [LoggedAlertID],
        [ErrorText],
        [spt_Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [SecurityCodeApproved],
        [clc_WhenStatusChanged],
        [InitiatingCustomerEmailOrPhone],
        [InitiatingCustomerName],
        [ExchangeRateToILSUsed],
        [TargetNonCustomerID],
        [clc_DateRequested],
        [clc_MonthRequested],
        [GroupRequestedTransactionID],
        [ReceivingCustomerID],
        [PayingCustomerID],
        [RepExchangeRateToILS],
        [DefiningAmountILS]
    FROM [RequestedTransaction]
    WHERE [LoggedAlertID] = @LoggedAlertID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_RequestedTransaction_MonthRequested
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillRequestedTransactionByCLCMONTHREQUESTED]
    @clc_MonthRequested date
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_RequestedTransaction],
        [ID],
        [InitiatingCustomerID],
        [TargetCustomerID],
        [TargetCustomerEmailOrPhone],
        [TargetCustomerName],
        [CustomerTransactionDescription],
        [enmDirection_TransactionDirection],
        [enmType_RequestedTransactionType],
        [enmFeePayer_Payer],
        [DefiningAmount],
        [CreditCardID],
        [AmountPaidByCreditCard],
        [NumberOfPaymentsByCreditCard],
        [FirstPaymentAmountByCreditCard],
        [OtherPaymentsAmountByCreditCard],
        [AmountPaidByBit],
        [AmountPaidByWallet],
        [TotalAmountPaidByPayer],
        [AmountReceivedByReceiver],
        [lkpDefiningAmountCurrency_Currency],
        [PrepaidCardID],
        [DistributorID],
        [enmDepositLocation],
        [CodeToGiveChanger],
        [spt_enmStatus_RequestedTransactionStatus],
        [LoggedAlertID],
        [ErrorText],
        [spt_Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [SecurityCodeApproved],
        [clc_WhenStatusChanged],
        [InitiatingCustomerEmailOrPhone],
        [InitiatingCustomerName],
        [ExchangeRateToILSUsed],
        [TargetNonCustomerID],
        [clc_DateRequested],
        [clc_MonthRequested],
        [GroupRequestedTransactionID],
        [ReceivingCustomerID],
        [PayingCustomerID],
        [RepExchangeRateToILS],
        [DefiningAmountILS]
    FROM [RequestedTransaction]
    WHERE [clc_MonthRequested] = @clc_MonthRequested
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_RequestedTransaction_NonCustomer
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillRequestedTransactionByTARGETNONCUSTOMERID]
    @TargetNonCustomerID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_RequestedTransaction],
        [ID],
        [InitiatingCustomerID],
        [TargetCustomerID],
        [TargetCustomerEmailOrPhone],
        [TargetCustomerName],
        [CustomerTransactionDescription],
        [enmDirection_TransactionDirection],
        [enmType_RequestedTransactionType],
        [enmFeePayer_Payer],
        [DefiningAmount],
        [CreditCardID],
        [AmountPaidByCreditCard],
        [NumberOfPaymentsByCreditCard],
        [FirstPaymentAmountByCreditCard],
        [OtherPaymentsAmountByCreditCard],
        [AmountPaidByBit],
        [AmountPaidByWallet],
        [TotalAmountPaidByPayer],
        [AmountReceivedByReceiver],
        [lkpDefiningAmountCurrency_Currency],
        [PrepaidCardID],
        [DistributorID],
        [enmDepositLocation],
        [CodeToGiveChanger],
        [spt_enmStatus_RequestedTransactionStatus],
        [LoggedAlertID],
        [ErrorText],
        [spt_Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [SecurityCodeApproved],
        [clc_WhenStatusChanged],
        [InitiatingCustomerEmailOrPhone],
        [InitiatingCustomerName],
        [ExchangeRateToILSUsed],
        [TargetNonCustomerID],
        [clc_DateRequested],
        [clc_MonthRequested],
        [GroupRequestedTransactionID],
        [ReceivingCustomerID],
        [PayingCustomerID],
        [RepExchangeRateToILS],
        [DefiningAmountILS]
    FROM [RequestedTransaction]
    WHERE [TargetNonCustomerID] = @TargetNonCustomerID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_RequestedTransaction_PayingCustomer
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillRequestedTransactionByPAYINGCUSTOMERID]
    @PayingCustomerID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_RequestedTransaction],
        [ID],
        [InitiatingCustomerID],
        [TargetCustomerID],
        [TargetCustomerEmailOrPhone],
        [TargetCustomerName],
        [CustomerTransactionDescription],
        [enmDirection_TransactionDirection],
        [enmType_RequestedTransactionType],
        [enmFeePayer_Payer],
        [DefiningAmount],
        [CreditCardID],
        [AmountPaidByCreditCard],
        [NumberOfPaymentsByCreditCard],
        [FirstPaymentAmountByCreditCard],
        [OtherPaymentsAmountByCreditCard],
        [AmountPaidByBit],
        [AmountPaidByWallet],
        [TotalAmountPaidByPayer],
        [AmountReceivedByReceiver],
        [lkpDefiningAmountCurrency_Currency],
        [PrepaidCardID],
        [DistributorID],
        [enmDepositLocation],
        [CodeToGiveChanger],
        [spt_enmStatus_RequestedTransactionStatus],
        [LoggedAlertID],
        [ErrorText],
        [spt_Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [SecurityCodeApproved],
        [clc_WhenStatusChanged],
        [InitiatingCustomerEmailOrPhone],
        [InitiatingCustomerName],
        [ExchangeRateToILSUsed],
        [TargetNonCustomerID],
        [clc_DateRequested],
        [clc_MonthRequested],
        [GroupRequestedTransactionID],
        [ReceivingCustomerID],
        [PayingCustomerID],
        [RepExchangeRateToILS],
        [DefiningAmountILS]
    FROM [RequestedTransaction]
    WHERE [PayingCustomerID] = @PayingCustomerID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_RequestedTransaction_PrepaidCard
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillRequestedTransactionByPREPAIDCARDID]
    @PrepaidCardID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_RequestedTransaction],
        [ID],
        [InitiatingCustomerID],
        [TargetCustomerID],
        [TargetCustomerEmailOrPhone],
        [TargetCustomerName],
        [CustomerTransactionDescription],
        [enmDirection_TransactionDirection],
        [enmType_RequestedTransactionType],
        [enmFeePayer_Payer],
        [DefiningAmount],
        [CreditCardID],
        [AmountPaidByCreditCard],
        [NumberOfPaymentsByCreditCard],
        [FirstPaymentAmountByCreditCard],
        [OtherPaymentsAmountByCreditCard],
        [AmountPaidByBit],
        [AmountPaidByWallet],
        [TotalAmountPaidByPayer],
        [AmountReceivedByReceiver],
        [lkpDefiningAmountCurrency_Currency],
        [PrepaidCardID],
        [DistributorID],
        [enmDepositLocation],
        [CodeToGiveChanger],
        [spt_enmStatus_RequestedTransactionStatus],
        [LoggedAlertID],
        [ErrorText],
        [spt_Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [SecurityCodeApproved],
        [clc_WhenStatusChanged],
        [InitiatingCustomerEmailOrPhone],
        [InitiatingCustomerName],
        [ExchangeRateToILSUsed],
        [TargetNonCustomerID],
        [clc_DateRequested],
        [clc_MonthRequested],
        [GroupRequestedTransactionID],
        [ReceivingCustomerID],
        [PayingCustomerID],
        [RepExchangeRateToILS],
        [DefiningAmountILS]
    FROM [RequestedTransaction]
    WHERE [PrepaidCardID] = @PrepaidCardID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_RequestedTransaction_ReceivingCustomer
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillRequestedTransactionByRECEIVINGCUSTOMERID]
    @ReceivingCustomerID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_RequestedTransaction],
        [ID],
        [InitiatingCustomerID],
        [TargetCustomerID],
        [TargetCustomerEmailOrPhone],
        [TargetCustomerName],
        [CustomerTransactionDescription],
        [enmDirection_TransactionDirection],
        [enmType_RequestedTransactionType],
        [enmFeePayer_Payer],
        [DefiningAmount],
        [CreditCardID],
        [AmountPaidByCreditCard],
        [NumberOfPaymentsByCreditCard],
        [FirstPaymentAmountByCreditCard],
        [OtherPaymentsAmountByCreditCard],
        [AmountPaidByBit],
        [AmountPaidByWallet],
        [TotalAmountPaidByPayer],
        [AmountReceivedByReceiver],
        [lkpDefiningAmountCurrency_Currency],
        [PrepaidCardID],
        [DistributorID],
        [enmDepositLocation],
        [CodeToGiveChanger],
        [spt_enmStatus_RequestedTransactionStatus],
        [LoggedAlertID],
        [ErrorText],
        [spt_Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [SecurityCodeApproved],
        [clc_WhenStatusChanged],
        [InitiatingCustomerEmailOrPhone],
        [InitiatingCustomerName],
        [ExchangeRateToILSUsed],
        [TargetNonCustomerID],
        [clc_DateRequested],
        [clc_MonthRequested],
        [GroupRequestedTransactionID],
        [ReceivingCustomerID],
        [PayingCustomerID],
        [RepExchangeRateToILS],
        [DefiningAmountILS]
    FROM [RequestedTransaction]
    WHERE [ReceivingCustomerID] = @ReceivingCustomerID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_RequestedTransaction_Status
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillRequestedTransactionBySPTENMSTATUSREQUESTEDTRANSACTIONSTATUS]
    @spt_enmStatus_RequestedTransactionStatus varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_RequestedTransaction],
        [ID],
        [InitiatingCustomerID],
        [TargetCustomerID],
        [TargetCustomerEmailOrPhone],
        [TargetCustomerName],
        [CustomerTransactionDescription],
        [enmDirection_TransactionDirection],
        [enmType_RequestedTransactionType],
        [enmFeePayer_Payer],
        [DefiningAmount],
        [CreditCardID],
        [AmountPaidByCreditCard],
        [NumberOfPaymentsByCreditCard],
        [FirstPaymentAmountByCreditCard],
        [OtherPaymentsAmountByCreditCard],
        [AmountPaidByBit],
        [AmountPaidByWallet],
        [TotalAmountPaidByPayer],
        [AmountReceivedByReceiver],
        [lkpDefiningAmountCurrency_Currency],
        [PrepaidCardID],
        [DistributorID],
        [enmDepositLocation],
        [CodeToGiveChanger],
        [spt_enmStatus_RequestedTransactionStatus],
        [LoggedAlertID],
        [ErrorText],
        [spt_Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [SecurityCodeApproved],
        [clc_WhenStatusChanged],
        [InitiatingCustomerEmailOrPhone],
        [InitiatingCustomerName],
        [ExchangeRateToILSUsed],
        [TargetNonCustomerID],
        [clc_DateRequested],
        [clc_MonthRequested],
        [GroupRequestedTransactionID],
        [ReceivingCustomerID],
        [PayingCustomerID],
        [RepExchangeRateToILS],
        [DefiningAmountILS]
    FROM [RequestedTransaction]
    WHERE [spt_enmStatus_RequestedTransactionStatus] = @spt_enmStatus_RequestedTransactionStatus
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_RequestedTransaction_TargetCustomer
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillRequestedTransactionByTARGETCUSTOMERID]
    @TargetCustomerID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_RequestedTransaction],
        [ID],
        [InitiatingCustomerID],
        [TargetCustomerID],
        [TargetCustomerEmailOrPhone],
        [TargetCustomerName],
        [CustomerTransactionDescription],
        [enmDirection_TransactionDirection],
        [enmType_RequestedTransactionType],
        [enmFeePayer_Payer],
        [DefiningAmount],
        [CreditCardID],
        [AmountPaidByCreditCard],
        [NumberOfPaymentsByCreditCard],
        [FirstPaymentAmountByCreditCard],
        [OtherPaymentsAmountByCreditCard],
        [AmountPaidByBit],
        [AmountPaidByWallet],
        [TotalAmountPaidByPayer],
        [AmountReceivedByReceiver],
        [lkpDefiningAmountCurrency_Currency],
        [PrepaidCardID],
        [DistributorID],
        [enmDepositLocation],
        [CodeToGiveChanger],
        [spt_enmStatus_RequestedTransactionStatus],
        [LoggedAlertID],
        [ErrorText],
        [spt_Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [SecurityCodeApproved],
        [clc_WhenStatusChanged],
        [InitiatingCustomerEmailOrPhone],
        [InitiatingCustomerName],
        [ExchangeRateToILSUsed],
        [TargetNonCustomerID],
        [clc_DateRequested],
        [clc_MonthRequested],
        [GroupRequestedTransactionID],
        [ReceivingCustomerID],
        [PayingCustomerID],
        [RepExchangeRateToILS],
        [DefiningAmountILS]
    FROM [RequestedTransaction]
    WHERE [TargetCustomerID] = @TargetCustomerID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_RequestedTransaction_TargetCustomer_Status
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillRequestedTransactionByTARGETCUSTOMERIDAndSPTENMSTATUSREQUESTEDTRANSACTIONSTATUS]
    @TargetCustomerID bigint,
    @spt_enmStatus_RequestedTransactionStatus varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_RequestedTransaction],
        [ID],
        [InitiatingCustomerID],
        [TargetCustomerID],
        [TargetCustomerEmailOrPhone],
        [TargetCustomerName],
        [CustomerTransactionDescription],
        [enmDirection_TransactionDirection],
        [enmType_RequestedTransactionType],
        [enmFeePayer_Payer],
        [DefiningAmount],
        [CreditCardID],
        [AmountPaidByCreditCard],
        [NumberOfPaymentsByCreditCard],
        [FirstPaymentAmountByCreditCard],
        [OtherPaymentsAmountByCreditCard],
        [AmountPaidByBit],
        [AmountPaidByWallet],
        [TotalAmountPaidByPayer],
        [AmountReceivedByReceiver],
        [lkpDefiningAmountCurrency_Currency],
        [PrepaidCardID],
        [DistributorID],
        [enmDepositLocation],
        [CodeToGiveChanger],
        [spt_enmStatus_RequestedTransactionStatus],
        [LoggedAlertID],
        [ErrorText],
        [spt_Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [SecurityCodeApproved],
        [clc_WhenStatusChanged],
        [InitiatingCustomerEmailOrPhone],
        [InitiatingCustomerName],
        [ExchangeRateToILSUsed],
        [TargetNonCustomerID],
        [clc_DateRequested],
        [clc_MonthRequested],
        [GroupRequestedTransactionID],
        [ReceivingCustomerID],
        [PayingCustomerID],
        [RepExchangeRateToILS],
        [DefiningAmountILS]
    FROM [RequestedTransaction]
    WHERE [TargetCustomerID] = @TargetCustomerID AND [spt_enmStatus_RequestedTransactionStatus] = @spt_enmStatus_RequestedTransactionStatus
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_RequestedTransaction_TargetCustomer_Status_WhenStatusChanged
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillRequestedTransactionByTARGETCUSTOMERIDAndSPTENMSTATUSREQUESTEDTRANSACTIONSTATUSAndCLCWHENSTATUSCHANGED]
    @TargetCustomerID bigint,
    @spt_enmStatus_RequestedTransactionStatus varchar(50),
    @clc_WhenStatusChanged datetimeoffset
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_RequestedTransaction],
        [ID],
        [InitiatingCustomerID],
        [TargetCustomerID],
        [TargetCustomerEmailOrPhone],
        [TargetCustomerName],
        [CustomerTransactionDescription],
        [enmDirection_TransactionDirection],
        [enmType_RequestedTransactionType],
        [enmFeePayer_Payer],
        [DefiningAmount],
        [CreditCardID],
        [AmountPaidByCreditCard],
        [NumberOfPaymentsByCreditCard],
        [FirstPaymentAmountByCreditCard],
        [OtherPaymentsAmountByCreditCard],
        [AmountPaidByBit],
        [AmountPaidByWallet],
        [TotalAmountPaidByPayer],
        [AmountReceivedByReceiver],
        [lkpDefiningAmountCurrency_Currency],
        [PrepaidCardID],
        [DistributorID],
        [enmDepositLocation],
        [CodeToGiveChanger],
        [spt_enmStatus_RequestedTransactionStatus],
        [LoggedAlertID],
        [ErrorText],
        [spt_Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [SecurityCodeApproved],
        [clc_WhenStatusChanged],
        [InitiatingCustomerEmailOrPhone],
        [InitiatingCustomerName],
        [ExchangeRateToILSUsed],
        [TargetNonCustomerID],
        [clc_DateRequested],
        [clc_MonthRequested],
        [GroupRequestedTransactionID],
        [ReceivingCustomerID],
        [PayingCustomerID],
        [RepExchangeRateToILS],
        [DefiningAmountILS]
    FROM [RequestedTransaction]
    WHERE [TargetCustomerID] = @TargetCustomerID AND [spt_enmStatus_RequestedTransactionStatus] = @spt_enmStatus_RequestedTransactionStatus AND [clc_WhenStatusChanged] = @clc_WhenStatusChanged
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_RequestedTransaction_TargetCustomer_WhenStatusChanged
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillRequestedTransactionByTARGETCUSTOMERIDAndCLCWHENSTATUSCHANGED]
    @TargetCustomerID bigint,
    @clc_WhenStatusChanged datetimeoffset
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_RequestedTransaction],
        [ID],
        [InitiatingCustomerID],
        [TargetCustomerID],
        [TargetCustomerEmailOrPhone],
        [TargetCustomerName],
        [CustomerTransactionDescription],
        [enmDirection_TransactionDirection],
        [enmType_RequestedTransactionType],
        [enmFeePayer_Payer],
        [DefiningAmount],
        [CreditCardID],
        [AmountPaidByCreditCard],
        [NumberOfPaymentsByCreditCard],
        [FirstPaymentAmountByCreditCard],
        [OtherPaymentsAmountByCreditCard],
        [AmountPaidByBit],
        [AmountPaidByWallet],
        [TotalAmountPaidByPayer],
        [AmountReceivedByReceiver],
        [lkpDefiningAmountCurrency_Currency],
        [PrepaidCardID],
        [DistributorID],
        [enmDepositLocation],
        [CodeToGiveChanger],
        [spt_enmStatus_RequestedTransactionStatus],
        [LoggedAlertID],
        [ErrorText],
        [spt_Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [SecurityCodeApproved],
        [clc_WhenStatusChanged],
        [InitiatingCustomerEmailOrPhone],
        [InitiatingCustomerName],
        [ExchangeRateToILSUsed],
        [TargetNonCustomerID],
        [clc_DateRequested],
        [clc_MonthRequested],
        [GroupRequestedTransactionID],
        [ReceivingCustomerID],
        [PayingCustomerID],
        [RepExchangeRateToILS],
        [DefiningAmountILS]
    FROM [RequestedTransaction]
    WHERE [TargetCustomerID] = @TargetCustomerID AND [clc_WhenStatusChanged] = @clc_WhenStatusChanged
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_RequestedTransaction_TransactionDirection
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillRequestedTransactionByENMDIRECTIONTRANSACTIONDIRECTION]
    @enmDirection_TransactionDirection varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_RequestedTransaction],
        [ID],
        [InitiatingCustomerID],
        [TargetCustomerID],
        [TargetCustomerEmailOrPhone],
        [TargetCustomerName],
        [CustomerTransactionDescription],
        [enmDirection_TransactionDirection],
        [enmType_RequestedTransactionType],
        [enmFeePayer_Payer],
        [DefiningAmount],
        [CreditCardID],
        [AmountPaidByCreditCard],
        [NumberOfPaymentsByCreditCard],
        [FirstPaymentAmountByCreditCard],
        [OtherPaymentsAmountByCreditCard],
        [AmountPaidByBit],
        [AmountPaidByWallet],
        [TotalAmountPaidByPayer],
        [AmountReceivedByReceiver],
        [lkpDefiningAmountCurrency_Currency],
        [PrepaidCardID],
        [DistributorID],
        [enmDepositLocation],
        [CodeToGiveChanger],
        [spt_enmStatus_RequestedTransactionStatus],
        [LoggedAlertID],
        [ErrorText],
        [spt_Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [SecurityCodeApproved],
        [clc_WhenStatusChanged],
        [InitiatingCustomerEmailOrPhone],
        [InitiatingCustomerName],
        [ExchangeRateToILSUsed],
        [TargetNonCustomerID],
        [clc_DateRequested],
        [clc_MonthRequested],
        [GroupRequestedTransactionID],
        [ReceivingCustomerID],
        [PayingCustomerID],
        [RepExchangeRateToILS],
        [DefiningAmountILS]
    FROM [RequestedTransaction]
    WHERE [enmDirection_TransactionDirection] = @enmDirection_TransactionDirection
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: RequestedTransactionFee
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllRequestedTransactionFees]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_RequestedTransactionFee],
            t.[ID],
            t.[RequestedTransactionID],
            t.[enmType_FeeType],
            t.[enmPayer],
            t.[AmountToBaseFeeOn],
            t.[FeeDefinitionAmt],
            t.[FeeDefinitionPct],
            t.[FeeDefinitionMax],
            t.[TotalFee],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            t.[CustomerWalletID],
            t.[FeeDefinitionMin],
            p1.[Text] AS [RequestedTransactionID_Text],
            p2.[Text] AS [CustomerWalletID_Text]
        FROM [RequestedTransactionFee] t
        LEFT JOIN [ccvwComboList_RequestedTransaction] p1 ON t.[RequestedTransactionID] = p1.[ID]
        LEFT JOIN [ccvwComboList_CustomerWallet] p2 ON t.[CustomerWalletID] = p2.[ID]
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_RequestedTransactionFee],
            [ID],
            [RequestedTransactionID],
            [enmType_FeeType],
            [enmPayer],
            [AmountToBaseFeeOn],
            [FeeDefinitionAmt],
            [FeeDefinitionPct],
            [FeeDefinitionMax],
            [TotalFee],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID],
            [CustomerWalletID],
            [FeeDefinitionMin]
        FROM [RequestedTransactionFee]
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredRequestedTransactionFees]
    @RequestedTransactionID INT = NULL,
    @enmType_FeeType VARCHAR(50) = NULL,
    @enmPayer VARCHAR(50) = NULL,
    @CustomerWalletID INT = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_RequestedTransactionFee],
            t.[ID],
            t.[RequestedTransactionID],
            t.[enmType_FeeType],
            t.[enmPayer],
            t.[AmountToBaseFeeOn],
            t.[FeeDefinitionAmt],
            t.[FeeDefinitionPct],
            t.[FeeDefinitionMax],
            t.[TotalFee],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            t.[CustomerWalletID],
            t.[FeeDefinitionMin],
            p1.[Text] AS [RequestedTransactionID_Text],
            p2.[Text] AS [CustomerWalletID_Text]
        FROM [RequestedTransactionFee] t
        LEFT JOIN [ccvwComboList_RequestedTransaction] p1 ON t.[RequestedTransactionID] = p1.[ID]
        LEFT JOIN [ccvwComboList_CustomerWallet] p2 ON t.[CustomerWalletID] = p2.[ID]
        WHERE 1=1
          AND (@RequestedTransactionID IS NULL OR t.[RequestedTransactionID] = @RequestedTransactionID)
          AND (@enmType_FeeType IS NULL OR t.[enmType_FeeType] LIKE '%' + @enmType_FeeType + '%')
          AND (@enmPayer IS NULL OR t.[enmPayer] LIKE '%' + @enmPayer + '%')
          AND (@CustomerWalletID IS NULL OR t.[CustomerWalletID] = @CustomerWalletID)
          AND (@RequestedTransactionID IS NULL OR t.[RequestedTransactionID] = @RequestedTransactionID)
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_RequestedTransactionFee],
            [ID],
            [RequestedTransactionID],
            [enmType_FeeType],
            [enmPayer],
            [AmountToBaseFeeOn],
            [FeeDefinitionAmt],
            [FeeDefinitionPct],
            [FeeDefinitionMax],
            [TotalFee],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID],
            [CustomerWalletID],
            [FeeDefinitionMin]
        FROM [RequestedTransactionFee]
        WHERE 1=1
          AND (@RequestedTransactionID IS NULL OR [RequestedTransactionID] = @RequestedTransactionID)
          AND (@enmType_FeeType IS NULL OR [enmType_FeeType] LIKE '%' + @enmType_FeeType + '%')
          AND (@enmPayer IS NULL OR [enmPayer] LIKE '%' + @enmPayer + '%')
          AND (@CustomerWalletID IS NULL OR [CustomerWalletID] = @CustomerWalletID)
          AND (@RequestedTransactionID IS NULL OR [RequestedTransactionID] = @RequestedTransactionID)
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetRequestedTransactionFeeByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_RequestedTransactionFee],
        [ID],
        [RequestedTransactionID],
        [enmType_FeeType],
        [enmPayer],
        [AmountToBaseFeeOn],
        [FeeDefinitionAmt],
        [FeeDefinitionPct],
        [FeeDefinitionMax],
        [TotalFee],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [CustomerWalletID],
        [FeeDefinitionMin]
    FROM [RequestedTransactionFee]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddRequestedTransactionFee]
    @TableName_RequestedTransactionFee bit = NULL,
    @RequestedTransactionID bigint = NULL,
    @enmType_FeeType varchar(50) = NULL,
    @enmPayer varchar(50) = NULL,
    @AmountToBaseFeeOn decimal(18,0) = NULL,
    @FeeDefinitionAmt decimal(18,0) = NULL,
    @FeeDefinitionPct decimal(18,0) = NULL,
    @FeeDefinitionMax decimal(18,0) = NULL,
    @TotalFee decimal(18,0) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @CustomerWalletID bigint = NULL,
    @FeeDefinitionMin decimal(18,0) = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [RequestedTransactionFee] (
        [TableName_RequestedTransactionFee],
        [RequestedTransactionID],
        [enmType_FeeType],
        [enmPayer],
        [AmountToBaseFeeOn],
        [FeeDefinitionAmt],
        [FeeDefinitionPct],
        [FeeDefinitionMax],
        [TotalFee],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [CustomerWalletID],
        [FeeDefinitionMin],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_RequestedTransactionFee,
        @RequestedTransactionID,
        @enmType_FeeType,
        @enmPayer,
        @AmountToBaseFeeOn,
        @FeeDefinitionAmt,
        @FeeDefinitionPct,
        @FeeDefinitionMax,
        @TotalFee,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        @CustomerWalletID,
        @FeeDefinitionMin,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateRequestedTransactionFee]
    @ID bigint,
    @TableName_RequestedTransactionFee bit = NULL,
    @RequestedTransactionID bigint = NULL,
    @enmType_FeeType varchar(50) = NULL,
    @enmPayer varchar(50) = NULL,
    @AmountToBaseFeeOn decimal(18,0) = NULL,
    @FeeDefinitionAmt decimal(18,0) = NULL,
    @FeeDefinitionPct decimal(18,0) = NULL,
    @FeeDefinitionMax decimal(18,0) = NULL,
    @TotalFee decimal(18,0) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @CustomerWalletID bigint = NULL,
    @FeeDefinitionMin decimal(18,0) = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [RequestedTransactionFee]
    SET
        [TableName_RequestedTransactionFee] = @TableName_RequestedTransactionFee,
        [RequestedTransactionID] = @RequestedTransactionID,
        [enmType_FeeType] = @enmType_FeeType,
        [enmPayer] = @enmPayer,
        [AmountToBaseFeeOn] = @AmountToBaseFeeOn,
        [FeeDefinitionAmt] = @FeeDefinitionAmt,
        [FeeDefinitionPct] = @FeeDefinitionPct,
        [FeeDefinitionMax] = @FeeDefinitionMax,
        [TotalFee] = @TotalFee,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [CustomerWalletID] = @CustomerWalletID,
        [FeeDefinitionMin] = @FeeDefinitionMin,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteRequestedTransactionFee]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [RequestedTransactionFee]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_RequestedTransactionFee_RequestedTransaction_Type_Payer
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetRequestedTransactionFeeByREQUESTEDTRANSACTIONIDAndENMTYPEFEETYPEAndENMPAYER]
    @RequestedTransactionID bigint,
    @enmType_FeeType varchar(50),
    @enmPayer varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_RequestedTransactionFee],
        [ID],
        [RequestedTransactionID],
        [enmType_FeeType],
        [enmPayer],
        [AmountToBaseFeeOn],
        [FeeDefinitionAmt],
        [FeeDefinitionPct],
        [FeeDefinitionMax],
        [TotalFee],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [CustomerWalletID],
        [FeeDefinitionMin]
    FROM [RequestedTransactionFee]
    WHERE [RequestedTransactionID] = @RequestedTransactionID AND [enmType_FeeType] = @enmType_FeeType AND [enmPayer] = @enmPayer
;
END

GO

-- Procedure for Index: IX_RequestedTransactionFee_CustomerWallet
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillRequestedTransactionFeeByCUSTOMERWALLETID]
    @CustomerWalletID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_RequestedTransactionFee],
        [ID],
        [RequestedTransactionID],
        [enmType_FeeType],
        [enmPayer],
        [AmountToBaseFeeOn],
        [FeeDefinitionAmt],
        [FeeDefinitionPct],
        [FeeDefinitionMax],
        [TotalFee],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [CustomerWalletID],
        [FeeDefinitionMin]
    FROM [RequestedTransactionFee]
    WHERE [CustomerWalletID] = @CustomerWalletID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_RequestedTransactionFee_RequestedTransaction
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillRequestedTransactionFeeByREQUESTEDTRANSACTIONID]
    @RequestedTransactionID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_RequestedTransactionFee],
        [ID],
        [RequestedTransactionID],
        [enmType_FeeType],
        [enmPayer],
        [AmountToBaseFeeOn],
        [FeeDefinitionAmt],
        [FeeDefinitionPct],
        [FeeDefinitionMax],
        [TotalFee],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [CustomerWalletID],
        [FeeDefinitionMin]
    FROM [RequestedTransactionFee]
    WHERE [RequestedTransactionID] = @RequestedTransactionID
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: RiskEvent
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllRiskEvents]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[ID],
            t.[TableName_RiskEvent],
            t.[RiskRuleID],
            t.[enmEntityType],
            t.[EntityID],
            t.[DetectedOn],
            t.[ActivatedOn],
            t.[ValidUntil],
            t.[enmActionTaken],
            t.[enmStatus],
            t.[c_LoggedAlertID],
            t.[TaskID],
            t.[TriggerData],
            t.[SystemNotes],
            t.[ManuallyOverriddenOn],
            t.[ManuallyOverriddenByUserID],
            t.[ManualNotes],
            t.[AddedOn],
            t.[AddedBy],
            t.[ChangedOn],
            t.[ChangedBy],
            t.[UpdatingLoginID],
            p1.[Text] AS [RiskRuleID_Text]
        FROM [RiskEvent] t
        LEFT JOIN [ccvwComboList_RiskRule] p1 ON t.[RiskRuleID] = p1.[ID]
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [ID],
            [TableName_RiskEvent],
            [RiskRuleID],
            [enmEntityType],
            [EntityID],
            [DetectedOn],
            [ActivatedOn],
            [ValidUntil],
            [enmActionTaken],
            [enmStatus],
            [c_LoggedAlertID],
            [TaskID],
            [TriggerData],
            [SystemNotes],
            [ManuallyOverriddenOn],
            [ManuallyOverriddenByUserID],
            [ManualNotes],
            [AddedOn],
            [AddedBy],
            [ChangedOn],
            [ChangedBy],
            [UpdatingLoginID]
        FROM [RiskEvent]
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredRiskEvents]
    @enmEntityType VARCHAR(50) = NULL,
    @EntityID INT = NULL,
    @DetectedOn DATETIME = NULL,
    @RiskRuleID INT = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[ID],
            t.[TableName_RiskEvent],
            t.[RiskRuleID],
            t.[enmEntityType],
            t.[EntityID],
            t.[DetectedOn],
            t.[ActivatedOn],
            t.[ValidUntil],
            t.[enmActionTaken],
            t.[enmStatus],
            t.[c_LoggedAlertID],
            t.[TaskID],
            t.[TriggerData],
            t.[SystemNotes],
            t.[ManuallyOverriddenOn],
            t.[ManuallyOverriddenByUserID],
            t.[ManualNotes],
            t.[AddedOn],
            t.[AddedBy],
            t.[ChangedOn],
            t.[ChangedBy],
            t.[UpdatingLoginID],
            p1.[Text] AS [RiskRuleID_Text]
        FROM [RiskEvent] t
        LEFT JOIN [ccvwComboList_RiskRule] p1 ON t.[RiskRuleID] = p1.[ID]
        WHERE 1=1
          AND (@enmEntityType IS NULL OR t.[enmEntityType] LIKE '%' + @enmEntityType + '%')
          AND (@EntityID IS NULL OR t.[EntityID] = @EntityID)
          AND (@DetectedOn IS NULL OR t.[DetectedOn] = @DetectedOn)
          AND (@RiskRuleID IS NULL OR t.[RiskRuleID] = @RiskRuleID)
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [ID],
            [TableName_RiskEvent],
            [RiskRuleID],
            [enmEntityType],
            [EntityID],
            [DetectedOn],
            [ActivatedOn],
            [ValidUntil],
            [enmActionTaken],
            [enmStatus],
            [c_LoggedAlertID],
            [TaskID],
            [TriggerData],
            [SystemNotes],
            [ManuallyOverriddenOn],
            [ManuallyOverriddenByUserID],
            [ManualNotes],
            [AddedOn],
            [AddedBy],
            [ChangedOn],
            [ChangedBy],
            [UpdatingLoginID]
        FROM [RiskEvent]
        WHERE 1=1
          AND (@enmEntityType IS NULL OR [enmEntityType] LIKE '%' + @enmEntityType + '%')
          AND (@EntityID IS NULL OR [EntityID] = @EntityID)
          AND (@DetectedOn IS NULL OR [DetectedOn] = @DetectedOn)
          AND (@RiskRuleID IS NULL OR [RiskRuleID] = @RiskRuleID)
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetRiskEventByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [TableName_RiskEvent],
        [RiskRuleID],
        [enmEntityType],
        [EntityID],
        [DetectedOn],
        [ActivatedOn],
        [ValidUntil],
        [enmActionTaken],
        [enmStatus],
        [c_LoggedAlertID],
        [TaskID],
        [TriggerData],
        [SystemNotes],
        [ManuallyOverriddenOn],
        [ManuallyOverriddenByUserID],
        [ManualNotes],
        [AddedOn],
        [AddedBy],
        [ChangedOn],
        [ChangedBy],
        [UpdatingLoginID]
    FROM [RiskEvent]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddRiskEvent]
    @TableName_RiskEvent bit = NULL,
    @RiskRuleID bigint,
    @enmEntityType varchar(50),
    @EntityID bigint,
    @DetectedOn datetime,
    @ActivatedOn datetime = NULL,
    @ValidUntil datetime = NULL,
    @enmActionTaken varchar(50),
    @enmStatus varchar(50),
    @c_LoggedAlertID bigint = NULL,
    @TaskID bigint = NULL,
    @TriggerData nvarchar(MAX) = NULL,
    @SystemNotes nvarchar(MAX) = NULL,
    @ManuallyOverriddenOn datetime = NULL,
    @ManuallyOverriddenByUserID bigint = NULL,
    @ManualNotes nvarchar(MAX) = NULL,
    @UpdatingLoginID bigint = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [RiskEvent] (
        [TableName_RiskEvent],
        [RiskRuleID],
        [enmEntityType],
        [EntityID],
        [DetectedOn],
        [ActivatedOn],
        [ValidUntil],
        [enmActionTaken],
        [enmStatus],
        [c_LoggedAlertID],
        [TaskID],
        [TriggerData],
        [SystemNotes],
        [ManuallyOverriddenOn],
        [ManuallyOverriddenByUserID],
        [ManualNotes],
        [UpdatingLoginID],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_RiskEvent,
        @RiskRuleID,
        @enmEntityType,
        @EntityID,
        @DetectedOn,
        @ActivatedOn,
        @ValidUntil,
        @enmActionTaken,
        @enmStatus,
        @c_LoggedAlertID,
        @TaskID,
        @TriggerData,
        @SystemNotes,
        @ManuallyOverriddenOn,
        @ManuallyOverriddenByUserID,
        @ManualNotes,
        @UpdatingLoginID,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateRiskEvent]
    @ID bigint,
    @TableName_RiskEvent bit = NULL,
    @RiskRuleID bigint,
    @enmEntityType varchar(50),
    @EntityID bigint,
    @DetectedOn datetime,
    @ActivatedOn datetime = NULL,
    @ValidUntil datetime = NULL,
    @enmActionTaken varchar(50),
    @enmStatus varchar(50),
    @c_LoggedAlertID bigint = NULL,
    @TaskID bigint = NULL,
    @TriggerData nvarchar(MAX) = NULL,
    @SystemNotes nvarchar(MAX) = NULL,
    @ManuallyOverriddenOn datetime = NULL,
    @ManuallyOverriddenByUserID bigint = NULL,
    @ManualNotes nvarchar(MAX) = NULL,
    @UpdatingLoginID bigint = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [RiskEvent]
    SET
        [TableName_RiskEvent] = @TableName_RiskEvent,
        [RiskRuleID] = @RiskRuleID,
        [enmEntityType] = @enmEntityType,
        [EntityID] = @EntityID,
        [DetectedOn] = @DetectedOn,
        [ActivatedOn] = @ActivatedOn,
        [ValidUntil] = @ValidUntil,
        [enmActionTaken] = @enmActionTaken,
        [enmStatus] = @enmStatus,
        [c_LoggedAlertID] = @c_LoggedAlertID,
        [TaskID] = @TaskID,
        [TriggerData] = @TriggerData,
        [SystemNotes] = @SystemNotes,
        [ManuallyOverriddenOn] = @ManuallyOverriddenOn,
        [ManuallyOverriddenByUserID] = @ManuallyOverriddenByUserID,
        [ManualNotes] = @ManualNotes,
        [UpdatingLoginID] = @UpdatingLoginID,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteRiskEvent]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [RiskEvent]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_RiskEvent_Entity
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillRiskEventByENMENTITYTYPEAndENTITYIDAndDETECTEDON]
    @enmEntityType varchar(50),
    @EntityID bigint,
    @DetectedOn datetime
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [TableName_RiskEvent],
        [RiskRuleID],
        [enmEntityType],
        [EntityID],
        [DetectedOn],
        [ActivatedOn],
        [ValidUntil],
        [enmActionTaken],
        [enmStatus],
        [c_LoggedAlertID],
        [TaskID],
        [TriggerData],
        [SystemNotes],
        [ManuallyOverriddenOn],
        [ManuallyOverriddenByUserID],
        [ManualNotes],
        [AddedOn],
        [AddedBy],
        [ChangedOn],
        [ChangedBy],
        [UpdatingLoginID]
    FROM [RiskEvent]
    WHERE [enmEntityType] = @enmEntityType AND [EntityID] = @EntityID AND [DetectedOn] = @DetectedOn
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_RiskEvent_RiskRuleID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillRiskEventByRISKRULEID]
    @RiskRuleID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [TableName_RiskEvent],
        [RiskRuleID],
        [enmEntityType],
        [EntityID],
        [DetectedOn],
        [ActivatedOn],
        [ValidUntil],
        [enmActionTaken],
        [enmStatus],
        [c_LoggedAlertID],
        [TaskID],
        [TriggerData],
        [SystemNotes],
        [ManuallyOverriddenOn],
        [ManuallyOverriddenByUserID],
        [ManualNotes],
        [AddedOn],
        [AddedBy],
        [ChangedOn],
        [ChangedBy],
        [UpdatingLoginID]
    FROM [RiskEvent]
    WHERE [RiskRuleID] = @RiskRuleID
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: RiskRule
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllRiskRules]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [TableName_RiskRule],
        [RuleName],
        [RuleDescription],
        [enmMonitoredEntity],
        [ReferenceTable],
        [ReferenceTransactionType],
        [enmThresholdType],
        [ThresholdValue],
        [MinimumTransactionAmount],
        [MaximumTransactionAmount],
        [enmBaselineScope],
        [BaselineReferenceTable],
        [MinimumBaselineCount],
        [enmTimePeriod],
        [enmAction],
        [ActionDurationDays],
        [enmBlockedActionType],
        [ActionColorID],
        [ActionMaxAllowedAmount],
        [AlertEmailAddresses],
        [AlertSMSNumbers],
        [CreateTaskForUserID],
        [enmSeverity],
        [IsActive],
        [AddedOn],
        [AddedBy],
        [ChangedOn],
        [ChangedBy],
        [DeletedOn],
        [DeletedBy],
        [UpdatingLoginID]
    FROM [RiskRule]
    ORDER BY [ID]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredRiskRules]
    @IsActive BIT = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [TableName_RiskRule],
        [RuleName],
        [RuleDescription],
        [enmMonitoredEntity],
        [ReferenceTable],
        [ReferenceTransactionType],
        [enmThresholdType],
        [ThresholdValue],
        [MinimumTransactionAmount],
        [MaximumTransactionAmount],
        [enmBaselineScope],
        [BaselineReferenceTable],
        [MinimumBaselineCount],
        [enmTimePeriod],
        [enmAction],
        [ActionDurationDays],
        [enmBlockedActionType],
        [ActionColorID],
        [ActionMaxAllowedAmount],
        [AlertEmailAddresses],
        [AlertSMSNumbers],
        [CreateTaskForUserID],
        [enmSeverity],
        [IsActive],
        [AddedOn],
        [AddedBy],
        [ChangedOn],
        [ChangedBy],
        [DeletedOn],
        [DeletedBy],
        [UpdatingLoginID]
    FROM [RiskRule]
    WHERE 1=1
      AND (@IsActive IS NULL OR [IsActive] = @IsActive)
    ORDER BY [ID]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetRiskRuleByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [TableName_RiskRule],
        [RuleName],
        [RuleDescription],
        [enmMonitoredEntity],
        [ReferenceTable],
        [ReferenceTransactionType],
        [enmThresholdType],
        [ThresholdValue],
        [MinimumTransactionAmount],
        [MaximumTransactionAmount],
        [enmBaselineScope],
        [BaselineReferenceTable],
        [MinimumBaselineCount],
        [enmTimePeriod],
        [enmAction],
        [ActionDurationDays],
        [enmBlockedActionType],
        [ActionColorID],
        [ActionMaxAllowedAmount],
        [AlertEmailAddresses],
        [AlertSMSNumbers],
        [CreateTaskForUserID],
        [enmSeverity],
        [IsActive],
        [AddedOn],
        [AddedBy],
        [ChangedOn],
        [ChangedBy],
        [DeletedOn],
        [DeletedBy],
        [UpdatingLoginID]
    FROM [RiskRule]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddRiskRule]
    @TableName_RiskRule bit = NULL,
    @RuleName nvarchar(400),
    @RuleDescription nvarchar(2000) = NULL,
    @enmMonitoredEntity varchar(50),
    @ReferenceTable nvarchar(200) = NULL,
    @ReferenceTransactionType nvarchar(200) = NULL,
    @enmThresholdType varchar(50),
    @ThresholdValue decimal(18,0) = NULL,
    @MinimumTransactionAmount decimal(18,0) = NULL,
    @MaximumTransactionAmount decimal(18,0) = NULL,
    @enmBaselineScope varchar(50) = NULL,
    @BaselineReferenceTable nvarchar(200) = NULL,
    @MinimumBaselineCount int = NULL,
    @enmTimePeriod varchar(50),
    @enmAction varchar(50),
    @ActionDurationDays int = NULL,
    @enmBlockedActionType varchar(50) = NULL,
    @ActionColorID varchar(50) = NULL,
    @ActionMaxAllowedAmount decimal(18,0) = NULL,
    @AlertEmailAddresses nvarchar(1000) = NULL,
    @AlertSMSNumbers nvarchar(1000) = NULL,
    @CreateTaskForUserID bigint = NULL,
    @enmSeverity varchar(50) = NULL,
    @IsActive bit,
    @DeletedOn datetime = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @UpdatingLoginID bigint = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [RiskRule] (
        [TableName_RiskRule],
        [RuleName],
        [RuleDescription],
        [enmMonitoredEntity],
        [ReferenceTable],
        [ReferenceTransactionType],
        [enmThresholdType],
        [ThresholdValue],
        [MinimumTransactionAmount],
        [MaximumTransactionAmount],
        [enmBaselineScope],
        [BaselineReferenceTable],
        [MinimumBaselineCount],
        [enmTimePeriod],
        [enmAction],
        [ActionDurationDays],
        [enmBlockedActionType],
        [ActionColorID],
        [ActionMaxAllowedAmount],
        [AlertEmailAddresses],
        [AlertSMSNumbers],
        [CreateTaskForUserID],
        [enmSeverity],
        [IsActive],
        [DeletedOn],
        [DeletedBy],
        [UpdatingLoginID],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_RiskRule,
        @RuleName,
        @RuleDescription,
        @enmMonitoredEntity,
        @ReferenceTable,
        @ReferenceTransactionType,
        @enmThresholdType,
        @ThresholdValue,
        @MinimumTransactionAmount,
        @MaximumTransactionAmount,
        @enmBaselineScope,
        @BaselineReferenceTable,
        @MinimumBaselineCount,
        @enmTimePeriod,
        @enmAction,
        @ActionDurationDays,
        @enmBlockedActionType,
        @ActionColorID,
        @ActionMaxAllowedAmount,
        @AlertEmailAddresses,
        @AlertSMSNumbers,
        @CreateTaskForUserID,
        @enmSeverity,
        @IsActive,
        @DeletedOn,
        @DeletedBy,
        @UpdatingLoginID,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateRiskRule]
    @ID bigint,
    @TableName_RiskRule bit = NULL,
    @RuleName nvarchar(400),
    @RuleDescription nvarchar(2000) = NULL,
    @enmMonitoredEntity varchar(50),
    @ReferenceTable nvarchar(200) = NULL,
    @ReferenceTransactionType nvarchar(200) = NULL,
    @enmThresholdType varchar(50),
    @ThresholdValue decimal(18,0) = NULL,
    @MinimumTransactionAmount decimal(18,0) = NULL,
    @MaximumTransactionAmount decimal(18,0) = NULL,
    @enmBaselineScope varchar(50) = NULL,
    @BaselineReferenceTable nvarchar(200) = NULL,
    @MinimumBaselineCount int = NULL,
    @enmTimePeriod varchar(50),
    @enmAction varchar(50),
    @ActionDurationDays int = NULL,
    @enmBlockedActionType varchar(50) = NULL,
    @ActionColorID varchar(50) = NULL,
    @ActionMaxAllowedAmount decimal(18,0) = NULL,
    @AlertEmailAddresses nvarchar(1000) = NULL,
    @AlertSMSNumbers nvarchar(1000) = NULL,
    @CreateTaskForUserID bigint = NULL,
    @enmSeverity varchar(50) = NULL,
    @IsActive bit,
    @DeletedOn datetime = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @UpdatingLoginID bigint = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [RiskRule]
    SET
        [TableName_RiskRule] = @TableName_RiskRule,
        [RuleName] = @RuleName,
        [RuleDescription] = @RuleDescription,
        [enmMonitoredEntity] = @enmMonitoredEntity,
        [ReferenceTable] = @ReferenceTable,
        [ReferenceTransactionType] = @ReferenceTransactionType,
        [enmThresholdType] = @enmThresholdType,
        [ThresholdValue] = @ThresholdValue,
        [MinimumTransactionAmount] = @MinimumTransactionAmount,
        [MaximumTransactionAmount] = @MaximumTransactionAmount,
        [enmBaselineScope] = @enmBaselineScope,
        [BaselineReferenceTable] = @BaselineReferenceTable,
        [MinimumBaselineCount] = @MinimumBaselineCount,
        [enmTimePeriod] = @enmTimePeriod,
        [enmAction] = @enmAction,
        [ActionDurationDays] = @ActionDurationDays,
        [enmBlockedActionType] = @enmBlockedActionType,
        [ActionColorID] = @ActionColorID,
        [ActionMaxAllowedAmount] = @ActionMaxAllowedAmount,
        [AlertEmailAddresses] = @AlertEmailAddresses,
        [AlertSMSNumbers] = @AlertSMSNumbers,
        [CreateTaskForUserID] = @CreateTaskForUserID,
        [enmSeverity] = @enmSeverity,
        [IsActive] = @IsActive,
        [DeletedOn] = @DeletedOn,
        [DeletedBy] = @DeletedBy,
        [UpdatingLoginID] = @UpdatingLoginID,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteRiskRule]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [RiskRule]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_RiskRule_Active
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillRiskRuleByISACTIVE]
    @IsActive bit
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [TableName_RiskRule],
        [RuleName],
        [RuleDescription],
        [enmMonitoredEntity],
        [ReferenceTable],
        [ReferenceTransactionType],
        [enmThresholdType],
        [ThresholdValue],
        [MinimumTransactionAmount],
        [MaximumTransactionAmount],
        [enmBaselineScope],
        [BaselineReferenceTable],
        [MinimumBaselineCount],
        [enmTimePeriod],
        [enmAction],
        [ActionDurationDays],
        [enmBlockedActionType],
        [ActionColorID],
        [ActionMaxAllowedAmount],
        [AlertEmailAddresses],
        [AlertSMSNumbers],
        [CreateTaskForUserID],
        [enmSeverity],
        [IsActive],
        [AddedOn],
        [AddedBy],
        [ChangedOn],
        [ChangedBy],
        [DeletedOn],
        [DeletedBy],
        [UpdatingLoginID]
    FROM [RiskRule]
    WHERE [IsActive] = @IsActive
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: RiskRuleLog
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllRiskRuleLogs]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[ID],
            t.[TableName_RiskRuleLog],
            t.[RiskRuleID],
            t.[ChangeType],
            t.[FieldName],
            t.[OldValue],
            t.[NewValue],
            t.[ChangeReason],
            t.[AddedOn],
            t.[AddedBy],
            t.[ChangedOn],
            t.[ChangedBy],
            t.[UpdatingLoginID],
            p1.[Text] AS [RiskRuleID_Text]
        FROM [RiskRuleLog] t
        LEFT JOIN [ccvwComboList_RiskRule] p1 ON t.[RiskRuleID] = p1.[ID]
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [ID],
            [TableName_RiskRuleLog],
            [RiskRuleID],
            [ChangeType],
            [FieldName],
            [OldValue],
            [NewValue],
            [ChangeReason],
            [AddedOn],
            [AddedBy],
            [ChangedOn],
            [ChangedBy],
            [UpdatingLoginID]
        FROM [RiskRuleLog]
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredRiskRuleLogs]
    @RiskRuleID INT = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[ID],
            t.[TableName_RiskRuleLog],
            t.[RiskRuleID],
            t.[ChangeType],
            t.[FieldName],
            t.[OldValue],
            t.[NewValue],
            t.[ChangeReason],
            t.[AddedOn],
            t.[AddedBy],
            t.[ChangedOn],
            t.[ChangedBy],
            t.[UpdatingLoginID],
            p1.[Text] AS [RiskRuleID_Text]
        FROM [RiskRuleLog] t
        LEFT JOIN [ccvwComboList_RiskRule] p1 ON t.[RiskRuleID] = p1.[ID]
        WHERE 1=1
          AND (@RiskRuleID IS NULL OR t.[RiskRuleID] = @RiskRuleID)
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [ID],
            [TableName_RiskRuleLog],
            [RiskRuleID],
            [ChangeType],
            [FieldName],
            [OldValue],
            [NewValue],
            [ChangeReason],
            [AddedOn],
            [AddedBy],
            [ChangedOn],
            [ChangedBy],
            [UpdatingLoginID]
        FROM [RiskRuleLog]
        WHERE 1=1
          AND (@RiskRuleID IS NULL OR [RiskRuleID] = @RiskRuleID)
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetRiskRuleLogByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [TableName_RiskRuleLog],
        [RiskRuleID],
        [ChangeType],
        [FieldName],
        [OldValue],
        [NewValue],
        [ChangeReason],
        [AddedOn],
        [AddedBy],
        [ChangedOn],
        [ChangedBy],
        [UpdatingLoginID]
    FROM [RiskRuleLog]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddRiskRuleLog]
    @TableName_RiskRuleLog bit = NULL,
    @RiskRuleID bigint,
    @ChangeType nvarchar(100),
    @FieldName nvarchar(200) = NULL,
    @OldValue nvarchar(MAX) = NULL,
    @NewValue nvarchar(MAX) = NULL,
    @ChangeReason nvarchar(1000) = NULL,
    @UpdatingLoginID bigint = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [RiskRuleLog] (
        [TableName_RiskRuleLog],
        [RiskRuleID],
        [ChangeType],
        [FieldName],
        [OldValue],
        [NewValue],
        [ChangeReason],
        [UpdatingLoginID],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_RiskRuleLog,
        @RiskRuleID,
        @ChangeType,
        @FieldName,
        @OldValue,
        @NewValue,
        @ChangeReason,
        @UpdatingLoginID,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateRiskRuleLog]
    @ID bigint,
    @TableName_RiskRuleLog bit = NULL,
    @RiskRuleID bigint,
    @ChangeType nvarchar(100),
    @FieldName nvarchar(200) = NULL,
    @OldValue nvarchar(MAX) = NULL,
    @NewValue nvarchar(MAX) = NULL,
    @ChangeReason nvarchar(1000) = NULL,
    @UpdatingLoginID bigint = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [RiskRuleLog]
    SET
        [TableName_RiskRuleLog] = @TableName_RiskRuleLog,
        [RiskRuleID] = @RiskRuleID,
        [ChangeType] = @ChangeType,
        [FieldName] = @FieldName,
        [OldValue] = @OldValue,
        [NewValue] = @NewValue,
        [ChangeReason] = @ChangeReason,
        [UpdatingLoginID] = @UpdatingLoginID,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteRiskRuleLog]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [RiskRuleLog]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_RiskRuleLog_RuleID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillRiskRuleLogByRISKRULEID]
    @RiskRuleID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [TableName_RiskRuleLog],
        [RiskRuleID],
        [ChangeType],
        [FieldName],
        [OldValue],
        [NewValue],
        [ChangeReason],
        [AddedOn],
        [AddedBy],
        [ChangedOn],
        [ChangedBy],
        [UpdatingLoginID]
    FROM [RiskRuleLog]
    WHERE [RiskRuleID] = @RiskRuleID
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: RiskRuleOverride
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllRiskRuleOverrides]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[ID],
            t.[TableName_RiskRuleOverride],
            t.[RiskRuleID],
            t.[enmEntityType],
            t.[EntityID],
            t.[OverrideThresholdValue],
            t.[OverrideMinAmount],
            t.[OverrideMaxAmount],
            t.[OverrideDurationDays],
            t.[ValidFrom],
            t.[ValidUntil],
            t.[IsActive],
            t.[Reason],
            t.[AddedOn],
            t.[AddedBy],
            t.[ChangedOn],
            t.[ChangedBy],
            t.[DeletedOn],
            t.[DeletedBy],
            t.[UpdatingLoginID],
            p1.[Text] AS [RiskRuleID_Text]
        FROM [RiskRuleOverride] t
        LEFT JOIN [ccvwComboList_RiskRule] p1 ON t.[RiskRuleID] = p1.[ID]
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [ID],
            [TableName_RiskRuleOverride],
            [RiskRuleID],
            [enmEntityType],
            [EntityID],
            [OverrideThresholdValue],
            [OverrideMinAmount],
            [OverrideMaxAmount],
            [OverrideDurationDays],
            [ValidFrom],
            [ValidUntil],
            [IsActive],
            [Reason],
            [AddedOn],
            [AddedBy],
            [ChangedOn],
            [ChangedBy],
            [DeletedOn],
            [DeletedBy],
            [UpdatingLoginID]
        FROM [RiskRuleOverride]
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredRiskRuleOverrides]
    @RiskRuleID INT = NULL,
    @enmEntityType VARCHAR(50) = NULL,
    @EntityID INT = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[ID],
            t.[TableName_RiskRuleOverride],
            t.[RiskRuleID],
            t.[enmEntityType],
            t.[EntityID],
            t.[OverrideThresholdValue],
            t.[OverrideMinAmount],
            t.[OverrideMaxAmount],
            t.[OverrideDurationDays],
            t.[ValidFrom],
            t.[ValidUntil],
            t.[IsActive],
            t.[Reason],
            t.[AddedOn],
            t.[AddedBy],
            t.[ChangedOn],
            t.[ChangedBy],
            t.[DeletedOn],
            t.[DeletedBy],
            t.[UpdatingLoginID],
            p1.[Text] AS [RiskRuleID_Text]
        FROM [RiskRuleOverride] t
        LEFT JOIN [ccvwComboList_RiskRule] p1 ON t.[RiskRuleID] = p1.[ID]
        WHERE 1=1
          AND (@RiskRuleID IS NULL OR t.[RiskRuleID] = @RiskRuleID)
          AND (@enmEntityType IS NULL OR t.[enmEntityType] LIKE '%' + @enmEntityType + '%')
          AND (@EntityID IS NULL OR t.[EntityID] = @EntityID)
          AND (@RiskRuleID IS NULL OR t.[RiskRuleID] = @RiskRuleID)
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [ID],
            [TableName_RiskRuleOverride],
            [RiskRuleID],
            [enmEntityType],
            [EntityID],
            [OverrideThresholdValue],
            [OverrideMinAmount],
            [OverrideMaxAmount],
            [OverrideDurationDays],
            [ValidFrom],
            [ValidUntil],
            [IsActive],
            [Reason],
            [AddedOn],
            [AddedBy],
            [ChangedOn],
            [ChangedBy],
            [DeletedOn],
            [DeletedBy],
            [UpdatingLoginID]
        FROM [RiskRuleOverride]
        WHERE 1=1
          AND (@RiskRuleID IS NULL OR [RiskRuleID] = @RiskRuleID)
          AND (@enmEntityType IS NULL OR [enmEntityType] LIKE '%' + @enmEntityType + '%')
          AND (@EntityID IS NULL OR [EntityID] = @EntityID)
          AND (@RiskRuleID IS NULL OR [RiskRuleID] = @RiskRuleID)
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetRiskRuleOverrideByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [TableName_RiskRuleOverride],
        [RiskRuleID],
        [enmEntityType],
        [EntityID],
        [OverrideThresholdValue],
        [OverrideMinAmount],
        [OverrideMaxAmount],
        [OverrideDurationDays],
        [ValidFrom],
        [ValidUntil],
        [IsActive],
        [Reason],
        [AddedOn],
        [AddedBy],
        [ChangedOn],
        [ChangedBy],
        [DeletedOn],
        [DeletedBy],
        [UpdatingLoginID]
    FROM [RiskRuleOverride]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddRiskRuleOverride]
    @TableName_RiskRuleOverride bit = NULL,
    @RiskRuleID bigint,
    @enmEntityType varchar(50),
    @EntityID bigint,
    @OverrideThresholdValue decimal(18,0) = NULL,
    @OverrideMinAmount decimal(18,0) = NULL,
    @OverrideMaxAmount decimal(18,0) = NULL,
    @OverrideDurationDays int = NULL,
    @ValidFrom datetime = NULL,
    @ValidUntil datetime = NULL,
    @IsActive bit,
    @Reason nvarchar(1000) = NULL,
    @DeletedOn datetime = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @UpdatingLoginID bigint = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [RiskRuleOverride] (
        [TableName_RiskRuleOverride],
        [RiskRuleID],
        [enmEntityType],
        [EntityID],
        [OverrideThresholdValue],
        [OverrideMinAmount],
        [OverrideMaxAmount],
        [OverrideDurationDays],
        [ValidFrom],
        [ValidUntil],
        [IsActive],
        [Reason],
        [DeletedOn],
        [DeletedBy],
        [UpdatingLoginID],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_RiskRuleOverride,
        @RiskRuleID,
        @enmEntityType,
        @EntityID,
        @OverrideThresholdValue,
        @OverrideMinAmount,
        @OverrideMaxAmount,
        @OverrideDurationDays,
        @ValidFrom,
        @ValidUntil,
        @IsActive,
        @Reason,
        @DeletedOn,
        @DeletedBy,
        @UpdatingLoginID,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateRiskRuleOverride]
    @ID bigint,
    @TableName_RiskRuleOverride bit = NULL,
    @RiskRuleID bigint,
    @enmEntityType varchar(50),
    @EntityID bigint,
    @OverrideThresholdValue decimal(18,0) = NULL,
    @OverrideMinAmount decimal(18,0) = NULL,
    @OverrideMaxAmount decimal(18,0) = NULL,
    @OverrideDurationDays int = NULL,
    @ValidFrom datetime = NULL,
    @ValidUntil datetime = NULL,
    @IsActive bit,
    @Reason nvarchar(1000) = NULL,
    @DeletedOn datetime = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @UpdatingLoginID bigint = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [RiskRuleOverride]
    SET
        [TableName_RiskRuleOverride] = @TableName_RiskRuleOverride,
        [RiskRuleID] = @RiskRuleID,
        [enmEntityType] = @enmEntityType,
        [EntityID] = @EntityID,
        [OverrideThresholdValue] = @OverrideThresholdValue,
        [OverrideMinAmount] = @OverrideMinAmount,
        [OverrideMaxAmount] = @OverrideMaxAmount,
        [OverrideDurationDays] = @OverrideDurationDays,
        [ValidFrom] = @ValidFrom,
        [ValidUntil] = @ValidUntil,
        [IsActive] = @IsActive,
        [Reason] = @Reason,
        [DeletedOn] = @DeletedOn,
        [DeletedBy] = @DeletedBy,
        [UpdatingLoginID] = @UpdatingLoginID,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteRiskRuleOverride]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [RiskRuleOverride]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: UQ_RiskRuleOverride_Entity
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetRiskRuleOverrideByRISKRULEIDAndENMENTITYTYPEAndENTITYID]
    @RiskRuleID bigint,
    @enmEntityType varchar(50),
    @EntityID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [TableName_RiskRuleOverride],
        [RiskRuleID],
        [enmEntityType],
        [EntityID],
        [OverrideThresholdValue],
        [OverrideMinAmount],
        [OverrideMaxAmount],
        [OverrideDurationDays],
        [ValidFrom],
        [ValidUntil],
        [IsActive],
        [Reason],
        [AddedOn],
        [AddedBy],
        [ChangedOn],
        [ChangedBy],
        [DeletedOn],
        [DeletedBy],
        [UpdatingLoginID]
    FROM [RiskRuleOverride]
    WHERE [RiskRuleID] = @RiskRuleID AND [enmEntityType] = @enmEntityType AND [EntityID] = @EntityID
;
END

GO

-- Procedure for Index: IX_RiskRuleOverride_RuleID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillRiskRuleOverrideByRISKRULEID]
    @RiskRuleID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [TableName_RiskRuleOverride],
        [RiskRuleID],
        [enmEntityType],
        [EntityID],
        [OverrideThresholdValue],
        [OverrideMinAmount],
        [OverrideMaxAmount],
        [OverrideDurationDays],
        [ValidFrom],
        [ValidUntil],
        [IsActive],
        [Reason],
        [AddedOn],
        [AddedBy],
        [ChangedOn],
        [ChangedBy],
        [DeletedOn],
        [DeletedBy],
        [UpdatingLoginID]
    FROM [RiskRuleOverride]
    WHERE [RiskRuleID] = @RiskRuleID
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: SAP
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllSaps]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_SAP],
        [CustomerAccountPrefix],
        [CardFileLocation],
        [DistributorCCCreditAccountPrefix],
        [DistributorCCCreditCommissionAccountPrefix],
        [DistributorCCDeditAccountPrefix],
        [ClientCardMonthlyFeeAccount],
        [ClientCHBFeeAccount],
        [ClientCreditCardDebitFeeAccount],
        [ClientDeliveryFeeAccount],
        [ClientDocumentionRequestFeeAccount],
        [ClientLoadFeeAccount],
        [ClientNewCardFeeAccount],
        [ClientPurchaseFromChangeFeeAccount],
        [ClientReplacementCardFeeAccount],
        [InvoiceReceiptFileLocation],
        [TransactionFileLocation],
        [TransactionSwitchoverHour],
        [ChangedBy],
        [ChangedOn],
        [UpdatingLoginID],
        [BankBusinessSAPAccount],
        [ClientCreditCardPaymentsInterestAccount],
        [ClientBankWithdrawalFeeAccount],
        [ClientInterWalletTransferFeeAccount],
        [ClientBitDebitFeeAccount],
        [ClientBankDepositFeeAccount],
        [ClientCreditCardCreditFeeAccount],
        [DistributorCashCreditToChangerAccountPrefix],
        [DistributorCashCreditCommissionAccountPrefix],
        [DistributorCashDeditFromChangerAccountPrefix],
        [BankPrivateSAPAccount],
        [SAPICPAccountForLeumiCashWithdrawalFee],
        [DistributorOrderCardsFee],
        [DistributorCCDebitAccountPrefix]
    FROM [SAP]
    ORDER BY [TableName_SAP]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetSapByID]
    @TableName_SAP bit
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_SAP],
        [CustomerAccountPrefix],
        [CardFileLocation],
        [DistributorCCCreditAccountPrefix],
        [DistributorCCCreditCommissionAccountPrefix],
        [DistributorCCDeditAccountPrefix],
        [ClientCardMonthlyFeeAccount],
        [ClientCHBFeeAccount],
        [ClientCreditCardDebitFeeAccount],
        [ClientDeliveryFeeAccount],
        [ClientDocumentionRequestFeeAccount],
        [ClientLoadFeeAccount],
        [ClientNewCardFeeAccount],
        [ClientPurchaseFromChangeFeeAccount],
        [ClientReplacementCardFeeAccount],
        [InvoiceReceiptFileLocation],
        [TransactionFileLocation],
        [TransactionSwitchoverHour],
        [ChangedBy],
        [ChangedOn],
        [UpdatingLoginID],
        [BankBusinessSAPAccount],
        [ClientCreditCardPaymentsInterestAccount],
        [ClientBankWithdrawalFeeAccount],
        [ClientInterWalletTransferFeeAccount],
        [ClientBitDebitFeeAccount],
        [ClientBankDepositFeeAccount],
        [ClientCreditCardCreditFeeAccount],
        [DistributorCashCreditToChangerAccountPrefix],
        [DistributorCashCreditCommissionAccountPrefix],
        [DistributorCashDeditFromChangerAccountPrefix],
        [BankPrivateSAPAccount],
        [SAPICPAccountForLeumiCashWithdrawalFee],
        [DistributorOrderCardsFee],
        [DistributorCCDebitAccountPrefix]
    FROM [SAP]
    WHERE [TableName_SAP] = @TableName_SAP;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddSap]
    @CustomerAccountPrefix varchar(50) = NULL,
    @CardFileLocation varchar(50) = NULL,
    @DistributorCCCreditAccountPrefix varchar(50) = NULL,
    @DistributorCCCreditCommissionAccountPrefix varchar(50) = NULL,
    @DistributorCCDeditAccountPrefix varchar(50) = NULL,
    @ClientCardMonthlyFeeAccount varchar(50) = NULL,
    @ClientCHBFeeAccount varchar(50) = NULL,
    @ClientCreditCardDebitFeeAccount varchar(50) = NULL,
    @ClientDeliveryFeeAccount varchar(50) = NULL,
    @ClientDocumentionRequestFeeAccount varchar(50) = NULL,
    @ClientLoadFeeAccount varchar(50) = NULL,
    @ClientNewCardFeeAccount varchar(50) = NULL,
    @ClientPurchaseFromChangeFeeAccount varchar(50) = NULL,
    @ClientReplacementCardFeeAccount varchar(50) = NULL,
    @InvoiceReceiptFileLocation varchar(250) = NULL,
    @TransactionFileLocation varchar(250) = NULL,
    @TransactionSwitchoverHour int = NULL,
    @UpdatingLoginID bigint = NULL,
    @BankBusinessSAPAccount varchar(50) = NULL,
    @ClientCreditCardPaymentsInterestAccount varchar(50) = NULL,
    @ClientBankWithdrawalFeeAccount varchar(50) = NULL,
    @ClientInterWalletTransferFeeAccount varchar(50) = NULL,
    @ClientBitDebitFeeAccount varchar(50) = NULL,
    @ClientBankDepositFeeAccount varchar(50) = NULL,
    @ClientCreditCardCreditFeeAccount varchar(50) = NULL,
    @DistributorCashCreditToChangerAccountPrefix varchar(50) = NULL,
    @DistributorCashCreditCommissionAccountPrefix varchar(50) = NULL,
    @DistributorCashDeditFromChangerAccountPrefix varchar(50) = NULL,
    @BankPrivateSAPAccount varchar(50) = NULL,
    @SAPICPAccountForLeumiCashWithdrawalFee varchar(50) = NULL,
    @DistributorOrderCardsFee varchar(50) = NULL,
    @DistributorCCDebitAccountPrefix varchar(50) = NULL
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [SAP] (
        [CustomerAccountPrefix],
        [CardFileLocation],
        [DistributorCCCreditAccountPrefix],
        [DistributorCCCreditCommissionAccountPrefix],
        [DistributorCCDeditAccountPrefix],
        [ClientCardMonthlyFeeAccount],
        [ClientCHBFeeAccount],
        [ClientCreditCardDebitFeeAccount],
        [ClientDeliveryFeeAccount],
        [ClientDocumentionRequestFeeAccount],
        [ClientLoadFeeAccount],
        [ClientNewCardFeeAccount],
        [ClientPurchaseFromChangeFeeAccount],
        [ClientReplacementCardFeeAccount],
        [InvoiceReceiptFileLocation],
        [TransactionFileLocation],
        [TransactionSwitchoverHour],
        [UpdatingLoginID],
        [BankBusinessSAPAccount],
        [ClientCreditCardPaymentsInterestAccount],
        [ClientBankWithdrawalFeeAccount],
        [ClientInterWalletTransferFeeAccount],
        [ClientBitDebitFeeAccount],
        [ClientBankDepositFeeAccount],
        [ClientCreditCardCreditFeeAccount],
        [DistributorCashCreditToChangerAccountPrefix],
        [DistributorCashCreditCommissionAccountPrefix],
        [DistributorCashDeditFromChangerAccountPrefix],
        [BankPrivateSAPAccount],
        [SAPICPAccountForLeumiCashWithdrawalFee],
        [DistributorOrderCardsFee],
        [DistributorCCDebitAccountPrefix]
    )
    VALUES (
        @CustomerAccountPrefix,
        @CardFileLocation,
        @DistributorCCCreditAccountPrefix,
        @DistributorCCCreditCommissionAccountPrefix,
        @DistributorCCDeditAccountPrefix,
        @ClientCardMonthlyFeeAccount,
        @ClientCHBFeeAccount,
        @ClientCreditCardDebitFeeAccount,
        @ClientDeliveryFeeAccount,
        @ClientDocumentionRequestFeeAccount,
        @ClientLoadFeeAccount,
        @ClientNewCardFeeAccount,
        @ClientPurchaseFromChangeFeeAccount,
        @ClientReplacementCardFeeAccount,
        @InvoiceReceiptFileLocation,
        @TransactionFileLocation,
        @TransactionSwitchoverHour,
        @UpdatingLoginID,
        @BankBusinessSAPAccount,
        @ClientCreditCardPaymentsInterestAccount,
        @ClientBankWithdrawalFeeAccount,
        @ClientInterWalletTransferFeeAccount,
        @ClientBitDebitFeeAccount,
        @ClientBankDepositFeeAccount,
        @ClientCreditCardCreditFeeAccount,
        @DistributorCashCreditToChangerAccountPrefix,
        @DistributorCashCreditCommissionAccountPrefix,
        @DistributorCashDeditFromChangerAccountPrefix,
        @BankPrivateSAPAccount,
        @SAPICPAccountForLeumiCashWithdrawalFee,
        @DistributorOrderCardsFee,
        @DistributorCCDebitAccountPrefix
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateSap]
    @TableName_SAP bit,
    @CustomerAccountPrefix varchar(50) = NULL,
    @CardFileLocation varchar(50) = NULL,
    @DistributorCCCreditAccountPrefix varchar(50) = NULL,
    @DistributorCCCreditCommissionAccountPrefix varchar(50) = NULL,
    @DistributorCCDeditAccountPrefix varchar(50) = NULL,
    @ClientCardMonthlyFeeAccount varchar(50) = NULL,
    @ClientCHBFeeAccount varchar(50) = NULL,
    @ClientCreditCardDebitFeeAccount varchar(50) = NULL,
    @ClientDeliveryFeeAccount varchar(50) = NULL,
    @ClientDocumentionRequestFeeAccount varchar(50) = NULL,
    @ClientLoadFeeAccount varchar(50) = NULL,
    @ClientNewCardFeeAccount varchar(50) = NULL,
    @ClientPurchaseFromChangeFeeAccount varchar(50) = NULL,
    @ClientReplacementCardFeeAccount varchar(50) = NULL,
    @InvoiceReceiptFileLocation varchar(250) = NULL,
    @TransactionFileLocation varchar(250) = NULL,
    @TransactionSwitchoverHour int = NULL,
    @UpdatingLoginID bigint = NULL,
    @BankBusinessSAPAccount varchar(50) = NULL,
    @ClientCreditCardPaymentsInterestAccount varchar(50) = NULL,
    @ClientBankWithdrawalFeeAccount varchar(50) = NULL,
    @ClientInterWalletTransferFeeAccount varchar(50) = NULL,
    @ClientBitDebitFeeAccount varchar(50) = NULL,
    @ClientBankDepositFeeAccount varchar(50) = NULL,
    @ClientCreditCardCreditFeeAccount varchar(50) = NULL,
    @DistributorCashCreditToChangerAccountPrefix varchar(50) = NULL,
    @DistributorCashCreditCommissionAccountPrefix varchar(50) = NULL,
    @DistributorCashDeditFromChangerAccountPrefix varchar(50) = NULL,
    @BankPrivateSAPAccount varchar(50) = NULL,
    @SAPICPAccountForLeumiCashWithdrawalFee varchar(50) = NULL,
    @DistributorOrderCardsFee varchar(50) = NULL,
    @DistributorCCDebitAccountPrefix varchar(50) = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [SAP]
    SET
        [CustomerAccountPrefix] = @CustomerAccountPrefix,
        [CardFileLocation] = @CardFileLocation,
        [DistributorCCCreditAccountPrefix] = @DistributorCCCreditAccountPrefix,
        [DistributorCCCreditCommissionAccountPrefix] = @DistributorCCCreditCommissionAccountPrefix,
        [DistributorCCDeditAccountPrefix] = @DistributorCCDeditAccountPrefix,
        [ClientCardMonthlyFeeAccount] = @ClientCardMonthlyFeeAccount,
        [ClientCHBFeeAccount] = @ClientCHBFeeAccount,
        [ClientCreditCardDebitFeeAccount] = @ClientCreditCardDebitFeeAccount,
        [ClientDeliveryFeeAccount] = @ClientDeliveryFeeAccount,
        [ClientDocumentionRequestFeeAccount] = @ClientDocumentionRequestFeeAccount,
        [ClientLoadFeeAccount] = @ClientLoadFeeAccount,
        [ClientNewCardFeeAccount] = @ClientNewCardFeeAccount,
        [ClientPurchaseFromChangeFeeAccount] = @ClientPurchaseFromChangeFeeAccount,
        [ClientReplacementCardFeeAccount] = @ClientReplacementCardFeeAccount,
        [InvoiceReceiptFileLocation] = @InvoiceReceiptFileLocation,
        [TransactionFileLocation] = @TransactionFileLocation,
        [TransactionSwitchoverHour] = @TransactionSwitchoverHour,
        [UpdatingLoginID] = @UpdatingLoginID,
        [BankBusinessSAPAccount] = @BankBusinessSAPAccount,
        [ClientCreditCardPaymentsInterestAccount] = @ClientCreditCardPaymentsInterestAccount,
        [ClientBankWithdrawalFeeAccount] = @ClientBankWithdrawalFeeAccount,
        [ClientInterWalletTransferFeeAccount] = @ClientInterWalletTransferFeeAccount,
        [ClientBitDebitFeeAccount] = @ClientBitDebitFeeAccount,
        [ClientBankDepositFeeAccount] = @ClientBankDepositFeeAccount,
        [ClientCreditCardCreditFeeAccount] = @ClientCreditCardCreditFeeAccount,
        [DistributorCashCreditToChangerAccountPrefix] = @DistributorCashCreditToChangerAccountPrefix,
        [DistributorCashCreditCommissionAccountPrefix] = @DistributorCashCreditCommissionAccountPrefix,
        [DistributorCashDeditFromChangerAccountPrefix] = @DistributorCashDeditFromChangerAccountPrefix,
        [BankPrivateSAPAccount] = @BankPrivateSAPAccount,
        [SAPICPAccountForLeumiCashWithdrawalFee] = @SAPICPAccountForLeumiCashWithdrawalFee,
        [DistributorOrderCardsFee] = @DistributorOrderCardsFee,
        [DistributorCCDebitAccountPrefix] = @DistributorCCDebitAccountPrefix,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [TableName_SAP] = @TableName_SAP;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteSap]
    @TableName_SAP bit
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [SAP]
    WHERE [TableName_SAP] = @TableName_SAP;
END

GO



-- =========================================
-- Stored Procedures for Table: sysdiagrams
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllSysdiagramss]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [name],
        [principal_id],
        [diagram_id],
        [version],
        [definition]
    FROM [sysdiagrams]
    ORDER BY [diagram_id]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredSysdiagramss]
    @principal_id INT = NULL,
    @name NVARCHAR(MAX) = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [name],
        [principal_id],
        [diagram_id],
        [version],
        [definition]
    FROM [sysdiagrams]
    WHERE 1=1
      AND (@principal_id IS NULL OR [principal_id] = @principal_id)
      AND (@name IS NULL OR [name] = @name)
    ORDER BY [diagram_id]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetSysdiagramsByID]
    @diagram_id int
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [name],
        [principal_id],
        [diagram_id],
        [version],
        [definition]
    FROM [sysdiagrams]
    WHERE [diagram_id] = @diagram_id;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddSysdiagrams]
    @name SYSNAME,
    @principal_id int,
    @version int = NULL,
    @definition varbinary(MAX) = NULL
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [sysdiagrams] (
        [name],
        [principal_id],
        [version],
        [definition]
    )
    VALUES (
        @name,
        @principal_id,
        @version,
        @definition
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateSysdiagrams]
    @diagram_id int,
    @name SYSNAME,
    @principal_id int,
    @version int = NULL,
    @definition varbinary(MAX) = NULL
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [sysdiagrams]
    SET
        [name] = @name,
        [principal_id] = @principal_id,
        [version] = @version,
        [definition] = @definition
    WHERE [diagram_id] = @diagram_id;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteSysdiagrams]
    @diagram_id int
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [sysdiagrams]
    WHERE [diagram_id] = @diagram_id;
END

GO

-- Procedure for Index: UK_principal_name
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetSysdiagramsByPRINCIPALIDAndNAME]
    @principal_id int,
    @name SYSNAME
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [name],
        [principal_id],
        [diagram_id],
        [version],
        [definition]
    FROM [sysdiagrams]
    WHERE [principal_id] = @principal_id AND [name] = @name
;
END

GO


-- =========================================
-- Stored Procedures for Table: Task
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllTasks]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_Task],
            t.[ID],
            t.[CustomerID],
            t.[enmTask],
            t.[spt_enmStatus],
            t.[Description],
            t.[spt_HandlerComments],
            t.[ReferenceTable],
            t.[ReferenceTableID],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            t.[HandledByUserID],
            t.[clc_WhenAdded],
            t.[WhenStatusChanged],
            t.[clc_enmInGame],
            p1.[Text] AS [CustomerID_Text],
            p2.[Text] AS [HandledByUserID_Text]
        FROM [Task] t
        LEFT JOIN [ccvwComboList_Customer] p1 ON t.[CustomerID] = p1.[ID]
        LEFT JOIN [ccvwComboList_c_User] p2 ON t.[HandledByUserID] = p2.[ID]
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_Task],
            [ID],
            [CustomerID],
            [enmTask],
            [spt_enmStatus],
            [Description],
            [spt_HandlerComments],
            [ReferenceTable],
            [ReferenceTableID],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID],
            [HandledByUserID],
            [clc_WhenAdded],
            [WhenStatusChanged],
            [clc_enmInGame]
        FROM [Task]
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredTasks]
    @ReferenceTable VARCHAR(50) = NULL,
    @ReferenceTableID INT = NULL,
    @enmTask VARCHAR(50) = NULL,
    @clc_enmInGame VARCHAR(9) = NULL,
    @CustomerID INT = NULL,
    @HandledByUserID INT = NULL,
    @spt_enmStatus VARCHAR(50) = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_Task],
            t.[ID],
            t.[CustomerID],
            t.[enmTask],
            t.[spt_enmStatus],
            t.[Description],
            t.[spt_HandlerComments],
            t.[ReferenceTable],
            t.[ReferenceTableID],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            t.[HandledByUserID],
            t.[clc_WhenAdded],
            t.[WhenStatusChanged],
            t.[clc_enmInGame],
            p1.[Text] AS [CustomerID_Text],
            p2.[Text] AS [HandledByUserID_Text]
        FROM [Task] t
        LEFT JOIN [ccvwComboList_Customer] p1 ON t.[CustomerID] = p1.[ID]
        LEFT JOIN [ccvwComboList_c_User] p2 ON t.[HandledByUserID] = p2.[ID]
        WHERE 1=1
          AND (@ReferenceTable IS NULL OR t.[ReferenceTable] LIKE '%' + @ReferenceTable + '%')
          AND (@ReferenceTableID IS NULL OR t.[ReferenceTableID] = @ReferenceTableID)
          AND (@enmTask IS NULL OR t.[enmTask] LIKE '%' + @enmTask + '%')
          AND (@clc_enmInGame IS NULL OR t.[clc_enmInGame] LIKE '%' + @clc_enmInGame + '%')
          AND (@CustomerID IS NULL OR t.[CustomerID] = @CustomerID)
          AND (@HandledByUserID IS NULL OR t.[HandledByUserID] = @HandledByUserID)
          AND (@ReferenceTable IS NULL OR t.[ReferenceTable] LIKE '%' + @ReferenceTable + '%')
          AND (@ReferenceTableID IS NULL OR t.[ReferenceTableID] = @ReferenceTableID)
          AND (@enmTask IS NULL OR t.[enmTask] LIKE '%' + @enmTask + '%')
          AND (@spt_enmStatus IS NULL OR t.[spt_enmStatus] LIKE '%' + @spt_enmStatus + '%')
          AND (@enmTask IS NULL OR t.[enmTask] LIKE '%' + @enmTask + '%')
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_Task],
            [ID],
            [CustomerID],
            [enmTask],
            [spt_enmStatus],
            [Description],
            [spt_HandlerComments],
            [ReferenceTable],
            [ReferenceTableID],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID],
            [HandledByUserID],
            [clc_WhenAdded],
            [WhenStatusChanged],
            [clc_enmInGame]
        FROM [Task]
        WHERE 1=1
          AND (@ReferenceTable IS NULL OR [ReferenceTable] LIKE '%' + @ReferenceTable + '%')
          AND (@ReferenceTableID IS NULL OR [ReferenceTableID] = @ReferenceTableID)
          AND (@enmTask IS NULL OR [enmTask] LIKE '%' + @enmTask + '%')
          AND (@clc_enmInGame IS NULL OR [clc_enmInGame] LIKE '%' + @clc_enmInGame + '%')
          AND (@CustomerID IS NULL OR [CustomerID] = @CustomerID)
          AND (@HandledByUserID IS NULL OR [HandledByUserID] = @HandledByUserID)
          AND (@ReferenceTable IS NULL OR [ReferenceTable] LIKE '%' + @ReferenceTable + '%')
          AND (@ReferenceTableID IS NULL OR [ReferenceTableID] = @ReferenceTableID)
          AND (@enmTask IS NULL OR [enmTask] LIKE '%' + @enmTask + '%')
          AND (@spt_enmStatus IS NULL OR [spt_enmStatus] LIKE '%' + @spt_enmStatus + '%')
          AND (@enmTask IS NULL OR [enmTask] LIKE '%' + @enmTask + '%')
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetTaskByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Task],
        [ID],
        [CustomerID],
        [enmTask],
        [spt_enmStatus],
        [Description],
        [spt_HandlerComments],
        [ReferenceTable],
        [ReferenceTableID],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [HandledByUserID],
        [clc_WhenAdded],
        [WhenStatusChanged],
        [clc_enmInGame]
    FROM [Task]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddTask]
    @TableName_Task bit = NULL,
    @CustomerID bigint = NULL,
    @enmTask varchar(50) = NULL,
    @spt_enmStatus varchar(50) = NULL,
    @Description nvarchar(500) = NULL,
    @spt_HandlerComments nvarchar(1000) = NULL,
    @ReferenceTable varchar(50) = NULL,
    @ReferenceTableID bigint = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @HandledByUserID bigint = NULL,
    @WhenStatusChanged datetime = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [Task] (
        [TableName_Task],
        [CustomerID],
        [enmTask],
        [spt_enmStatus],
        [Description],
        [spt_HandlerComments],
        [ReferenceTable],
        [ReferenceTableID],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [HandledByUserID],
        [WhenStatusChanged],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_Task,
        @CustomerID,
        @enmTask,
        @spt_enmStatus,
        @Description,
        @spt_HandlerComments,
        @ReferenceTable,
        @ReferenceTableID,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        @HandledByUserID,
        @WhenStatusChanged,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateTask]
    @ID bigint,
    @TableName_Task bit = NULL,
    @CustomerID bigint = NULL,
    @enmTask varchar(50) = NULL,
    @spt_enmStatus varchar(50) = NULL,
    @Description nvarchar(500) = NULL,
    @spt_HandlerComments nvarchar(1000) = NULL,
    @ReferenceTable varchar(50) = NULL,
    @ReferenceTableID bigint = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @HandledByUserID bigint = NULL,
    @WhenStatusChanged datetime = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [Task]
    SET
        [TableName_Task] = @TableName_Task,
        [CustomerID] = @CustomerID,
        [enmTask] = @enmTask,
        [spt_enmStatus] = @spt_enmStatus,
        [Description] = @Description,
        [spt_HandlerComments] = @spt_HandlerComments,
        [ReferenceTable] = @ReferenceTable,
        [ReferenceTableID] = @ReferenceTableID,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [HandledByUserID] = @HandledByUserID,
        [WhenStatusChanged] = @WhenStatusChanged,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteTask]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [Task]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_Task_ReferenceTable_ReferenceTable_Task_InGame
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetTaskByREFERENCETABLEAndREFERENCETABLEIDAndENMTASKAndCLCENMINGAME]
    @ReferenceTable varchar(50),
    @ReferenceTableID bigint,
    @enmTask varchar(50),
    @clc_enmInGame varchar(9)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Task],
        [ID],
        [CustomerID],
        [enmTask],
        [spt_enmStatus],
        [Description],
        [spt_HandlerComments],
        [ReferenceTable],
        [ReferenceTableID],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [HandledByUserID],
        [clc_WhenAdded],
        [WhenStatusChanged],
        [clc_enmInGame]
    FROM [Task]
    WHERE [ReferenceTable] = @ReferenceTable AND [ReferenceTableID] = @ReferenceTableID AND [enmTask] = @enmTask AND [clc_enmInGame] = @clc_enmInGame
;
END

GO

-- Procedure for Index: IX_Task_Customer
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillTaskByCUSTOMERID]
    @CustomerID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Task],
        [ID],
        [CustomerID],
        [enmTask],
        [spt_enmStatus],
        [Description],
        [spt_HandlerComments],
        [ReferenceTable],
        [ReferenceTableID],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [HandledByUserID],
        [clc_WhenAdded],
        [WhenStatusChanged],
        [clc_enmInGame]
    FROM [Task]
    WHERE [CustomerID] = @CustomerID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_Task_HandledByUser
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillTaskByHANDLEDBYUSERID]
    @HandledByUserID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Task],
        [ID],
        [CustomerID],
        [enmTask],
        [spt_enmStatus],
        [Description],
        [spt_HandlerComments],
        [ReferenceTable],
        [ReferenceTableID],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [HandledByUserID],
        [clc_WhenAdded],
        [WhenStatusChanged],
        [clc_enmInGame]
    FROM [Task]
    WHERE [HandledByUserID] = @HandledByUserID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_Task_ReferenceTable_ReferenceTable_Task
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillTaskByREFERENCETABLEAndREFERENCETABLEIDAndENMTASK]
    @ReferenceTable varchar(50),
    @ReferenceTableID bigint,
    @enmTask varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Task],
        [ID],
        [CustomerID],
        [enmTask],
        [spt_enmStatus],
        [Description],
        [spt_HandlerComments],
        [ReferenceTable],
        [ReferenceTableID],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [HandledByUserID],
        [clc_WhenAdded],
        [WhenStatusChanged],
        [clc_enmInGame]
    FROM [Task]
    WHERE [ReferenceTable] = @ReferenceTable AND [ReferenceTableID] = @ReferenceTableID AND [enmTask] = @enmTask
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_Task_Status
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillTaskBySPTENMSTATUS]
    @spt_enmStatus varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Task],
        [ID],
        [CustomerID],
        [enmTask],
        [spt_enmStatus],
        [Description],
        [spt_HandlerComments],
        [ReferenceTable],
        [ReferenceTableID],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [HandledByUserID],
        [clc_WhenAdded],
        [WhenStatusChanged],
        [clc_enmInGame]
    FROM [Task]
    WHERE [spt_enmStatus] = @spt_enmStatus
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_Task_Task
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillTaskByENMTASK]
    @enmTask varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Task],
        [ID],
        [CustomerID],
        [enmTask],
        [spt_enmStatus],
        [Description],
        [spt_HandlerComments],
        [ReferenceTable],
        [ReferenceTableID],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [HandledByUserID],
        [clc_WhenAdded],
        [WhenStatusChanged],
        [clc_enmInGame]
    FROM [Task]
    WHERE [enmTask] = @enmTask
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: TransactionBit
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllTransactionBits]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_TransactionBit],
            t.[ID],
            t.[UniqueIdentifier],
            t.[RequestedTransactionID],
            t.[CustomerID],
            t.[RequestAmount],
            t.[CurrencyTypeCode],
            t.[RequestSubjectDescription],
            t.[EventExpirationTimestamp],
            t.[PaymentInitiationReference],
            t.[ExternalSystemReference],
            t.[DebitMethodCode],
            t.[TransactionSerialCode],
            t.[ProviderNbr],
            t.[WhenInitialized],
            t.[WhenValidated],
            t.[WhenCaptured],
            t.[RequestStatusCode],
            t.[RequestStatusDescription],
            t.[IssuerAuthorizationNumber],
            t.[LoggedAlertID],
            t.[ErrorText],
            t.[spt_Comment],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            t.[ExecutionTimeSec],
            t.[Status],
            t.[TransactionSerial],
            t.[NumberOfTries],
            t.[IsSuccessful],
            t.[CustomerWalletID],
            t.[CardLast4Numbers],
            t.[ApprovalCode],
            t.[AllInfo],
            t.[NonCustomerID],
            p1.[Text] AS [RequestedTransactionID_Text],
            p2.[Text] AS [CustomerID_Text],
            p3.[Text] AS [CustomerWalletID_Text],
            p4.[Text] AS [NonCustomerID_Text]
        FROM [TransactionBit] t
        LEFT JOIN [ccvwComboList_RequestedTransaction] p1 ON t.[RequestedTransactionID] = p1.[ID]
        LEFT JOIN [ccvwComboList_Customer] p2 ON t.[CustomerID] = p2.[ID]
        LEFT JOIN [ccvwComboList_CustomerWallet] p3 ON t.[CustomerWalletID] = p3.[ID]
        LEFT JOIN [ccvwComboList_NonCustomer] p4 ON t.[NonCustomerID] = p4.[ID]
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_TransactionBit],
            [ID],
            [UniqueIdentifier],
            [RequestedTransactionID],
            [CustomerID],
            [RequestAmount],
            [CurrencyTypeCode],
            [RequestSubjectDescription],
            [EventExpirationTimestamp],
            [PaymentInitiationReference],
            [ExternalSystemReference],
            [DebitMethodCode],
            [TransactionSerialCode],
            [ProviderNbr],
            [WhenInitialized],
            [WhenValidated],
            [WhenCaptured],
            [RequestStatusCode],
            [RequestStatusDescription],
            [IssuerAuthorizationNumber],
            [LoggedAlertID],
            [ErrorText],
            [spt_Comment],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID],
            [ExecutionTimeSec],
            [Status],
            [TransactionSerial],
            [NumberOfTries],
            [IsSuccessful],
            [CustomerWalletID],
            [CardLast4Numbers],
            [ApprovalCode],
            [AllInfo],
            [NonCustomerID]
        FROM [TransactionBit]
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredTransactionBits]
    @RequestedTransactionID INT = NULL,
    @CardLast4Numbers VARCHAR(50) = NULL,
    @CustomerID INT = NULL,
    @WhenInitialized DATETIME = NULL,
    @Status VARCHAR(50) = NULL,
    @CustomerWalletID INT = NULL,
    @NonCustomerID INT = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_TransactionBit],
            t.[ID],
            t.[UniqueIdentifier],
            t.[RequestedTransactionID],
            t.[CustomerID],
            t.[RequestAmount],
            t.[CurrencyTypeCode],
            t.[RequestSubjectDescription],
            t.[EventExpirationTimestamp],
            t.[PaymentInitiationReference],
            t.[ExternalSystemReference],
            t.[DebitMethodCode],
            t.[TransactionSerialCode],
            t.[ProviderNbr],
            t.[WhenInitialized],
            t.[WhenValidated],
            t.[WhenCaptured],
            t.[RequestStatusCode],
            t.[RequestStatusDescription],
            t.[IssuerAuthorizationNumber],
            t.[LoggedAlertID],
            t.[ErrorText],
            t.[spt_Comment],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            t.[ExecutionTimeSec],
            t.[Status],
            t.[TransactionSerial],
            t.[NumberOfTries],
            t.[IsSuccessful],
            t.[CustomerWalletID],
            t.[CardLast4Numbers],
            t.[ApprovalCode],
            t.[AllInfo],
            t.[NonCustomerID],
            p1.[Text] AS [RequestedTransactionID_Text],
            p2.[Text] AS [CustomerID_Text],
            p3.[Text] AS [CustomerWalletID_Text],
            p4.[Text] AS [NonCustomerID_Text]
        FROM [TransactionBit] t
        LEFT JOIN [ccvwComboList_RequestedTransaction] p1 ON t.[RequestedTransactionID] = p1.[ID]
        LEFT JOIN [ccvwComboList_Customer] p2 ON t.[CustomerID] = p2.[ID]
        LEFT JOIN [ccvwComboList_CustomerWallet] p3 ON t.[CustomerWalletID] = p3.[ID]
        LEFT JOIN [ccvwComboList_NonCustomer] p4 ON t.[NonCustomerID] = p4.[ID]
        WHERE 1=1
          AND (@RequestedTransactionID IS NULL OR t.[RequestedTransactionID] = @RequestedTransactionID)
          AND (@CardLast4Numbers IS NULL OR t.[CardLast4Numbers] LIKE '%' + @CardLast4Numbers + '%')
          AND (@CustomerID IS NULL OR t.[CustomerID] = @CustomerID)
          AND (@CustomerID IS NULL OR t.[CustomerID] = @CustomerID)
          AND (@WhenInitialized IS NULL OR t.[WhenInitialized] = @WhenInitialized)
          AND (@Status IS NULL OR t.[Status] LIKE '%' + @Status + '%')
          AND (@CustomerWalletID IS NULL OR t.[CustomerWalletID] = @CustomerWalletID)
          AND (@NonCustomerID IS NULL OR t.[NonCustomerID] = @NonCustomerID)
          AND (@WhenInitialized IS NULL OR t.[WhenInitialized] = @WhenInitialized)
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_TransactionBit],
            [ID],
            [UniqueIdentifier],
            [RequestedTransactionID],
            [CustomerID],
            [RequestAmount],
            [CurrencyTypeCode],
            [RequestSubjectDescription],
            [EventExpirationTimestamp],
            [PaymentInitiationReference],
            [ExternalSystemReference],
            [DebitMethodCode],
            [TransactionSerialCode],
            [ProviderNbr],
            [WhenInitialized],
            [WhenValidated],
            [WhenCaptured],
            [RequestStatusCode],
            [RequestStatusDescription],
            [IssuerAuthorizationNumber],
            [LoggedAlertID],
            [ErrorText],
            [spt_Comment],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID],
            [ExecutionTimeSec],
            [Status],
            [TransactionSerial],
            [NumberOfTries],
            [IsSuccessful],
            [CustomerWalletID],
            [CardLast4Numbers],
            [ApprovalCode],
            [AllInfo],
            [NonCustomerID]
        FROM [TransactionBit]
        WHERE 1=1
          AND (@RequestedTransactionID IS NULL OR [RequestedTransactionID] = @RequestedTransactionID)
          AND (@CardLast4Numbers IS NULL OR [CardLast4Numbers] LIKE '%' + @CardLast4Numbers + '%')
          AND (@CustomerID IS NULL OR [CustomerID] = @CustomerID)
          AND (@CustomerID IS NULL OR [CustomerID] = @CustomerID)
          AND (@WhenInitialized IS NULL OR [WhenInitialized] = @WhenInitialized)
          AND (@Status IS NULL OR [Status] LIKE '%' + @Status + '%')
          AND (@CustomerWalletID IS NULL OR [CustomerWalletID] = @CustomerWalletID)
          AND (@NonCustomerID IS NULL OR [NonCustomerID] = @NonCustomerID)
          AND (@WhenInitialized IS NULL OR [WhenInitialized] = @WhenInitialized)
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetTransactionBitByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_TransactionBit],
        [ID],
        [UniqueIdentifier],
        [RequestedTransactionID],
        [CustomerID],
        [RequestAmount],
        [CurrencyTypeCode],
        [RequestSubjectDescription],
        [EventExpirationTimestamp],
        [PaymentInitiationReference],
        [ExternalSystemReference],
        [DebitMethodCode],
        [TransactionSerialCode],
        [ProviderNbr],
        [WhenInitialized],
        [WhenValidated],
        [WhenCaptured],
        [RequestStatusCode],
        [RequestStatusDescription],
        [IssuerAuthorizationNumber],
        [LoggedAlertID],
        [ErrorText],
        [spt_Comment],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [ExecutionTimeSec],
        [Status],
        [TransactionSerial],
        [NumberOfTries],
        [IsSuccessful],
        [CustomerWalletID],
        [CardLast4Numbers],
        [ApprovalCode],
        [AllInfo],
        [NonCustomerID]
    FROM [TransactionBit]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddTransactionBit]
    @TableName_TransactionBit bit = NULL,
    @UniqueIdentifier varchar(100) = NULL,
    @RequestedTransactionID bigint = NULL,
    @CustomerID bigint = NULL,
    @RequestAmount decimal(18,0) = NULL,
    @CurrencyTypeCode varchar(50) = NULL,
    @RequestSubjectDescription nvarchar(200) = NULL,
    @EventExpirationTimestamp nvarchar(200) = NULL,
    @PaymentInitiationReference nvarchar(200) = NULL,
    @ExternalSystemReference nvarchar(200) = NULL,
    @DebitMethodCode varchar(50) = NULL,
    @TransactionSerialCode int = NULL,
    @ProviderNbr varchar(50) = NULL,
    @WhenInitialized datetimeoffset = NULL,
    @WhenValidated datetimeoffset = NULL,
    @WhenCaptured datetimeoffset = NULL,
    @RequestStatusCode varchar(50) = NULL,
    @RequestStatusDescription nvarchar(100) = NULL,
    @IssuerAuthorizationNumber varchar(50) = NULL,
    @LoggedAlertID bigint = NULL,
    @ErrorText nvarchar(4000) = NULL,
    @spt_Comment nvarchar(MAX) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @ExecutionTimeSec int = NULL,
    @Status varchar(50) = NULL,
    @TransactionSerial varchar(50) = NULL,
    @NumberOfTries int = NULL,
    @IsSuccessful bit = NULL,
    @CustomerWalletID bigint = NULL,
    @CardLast4Numbers varchar(50) = NULL,
    @ApprovalCode varchar(50) = NULL,
    @AllInfo nvarchar(MAX) = NULL,
    @NonCustomerID bigint = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [TransactionBit] (
        [TableName_TransactionBit],
        [UniqueIdentifier],
        [RequestedTransactionID],
        [CustomerID],
        [RequestAmount],
        [CurrencyTypeCode],
        [RequestSubjectDescription],
        [EventExpirationTimestamp],
        [PaymentInitiationReference],
        [ExternalSystemReference],
        [DebitMethodCode],
        [TransactionSerialCode],
        [ProviderNbr],
        [WhenInitialized],
        [WhenValidated],
        [WhenCaptured],
        [RequestStatusCode],
        [RequestStatusDescription],
        [IssuerAuthorizationNumber],
        [LoggedAlertID],
        [ErrorText],
        [spt_Comment],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [ExecutionTimeSec],
        [Status],
        [TransactionSerial],
        [NumberOfTries],
        [IsSuccessful],
        [CustomerWalletID],
        [CardLast4Numbers],
        [ApprovalCode],
        [AllInfo],
        [NonCustomerID],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_TransactionBit,
        @UniqueIdentifier,
        @RequestedTransactionID,
        @CustomerID,
        @RequestAmount,
        @CurrencyTypeCode,
        @RequestSubjectDescription,
        @EventExpirationTimestamp,
        @PaymentInitiationReference,
        @ExternalSystemReference,
        @DebitMethodCode,
        @TransactionSerialCode,
        @ProviderNbr,
        @WhenInitialized,
        @WhenValidated,
        @WhenCaptured,
        @RequestStatusCode,
        @RequestStatusDescription,
        @IssuerAuthorizationNumber,
        @LoggedAlertID,
        @ErrorText,
        @spt_Comment,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        @ExecutionTimeSec,
        @Status,
        @TransactionSerial,
        @NumberOfTries,
        @IsSuccessful,
        @CustomerWalletID,
        @CardLast4Numbers,
        @ApprovalCode,
        @AllInfo,
        @NonCustomerID,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateTransactionBit]
    @ID bigint,
    @TableName_TransactionBit bit = NULL,
    @UniqueIdentifier varchar(100) = NULL,
    @RequestedTransactionID bigint = NULL,
    @CustomerID bigint = NULL,
    @RequestAmount decimal(18,0) = NULL,
    @CurrencyTypeCode varchar(50) = NULL,
    @RequestSubjectDescription nvarchar(200) = NULL,
    @EventExpirationTimestamp nvarchar(200) = NULL,
    @PaymentInitiationReference nvarchar(200) = NULL,
    @ExternalSystemReference nvarchar(200) = NULL,
    @DebitMethodCode varchar(50) = NULL,
    @TransactionSerialCode int = NULL,
    @ProviderNbr varchar(50) = NULL,
    @WhenInitialized datetimeoffset = NULL,
    @WhenValidated datetimeoffset = NULL,
    @WhenCaptured datetimeoffset = NULL,
    @RequestStatusCode varchar(50) = NULL,
    @RequestStatusDescription nvarchar(100) = NULL,
    @IssuerAuthorizationNumber varchar(50) = NULL,
    @LoggedAlertID bigint = NULL,
    @ErrorText nvarchar(4000) = NULL,
    @spt_Comment nvarchar(MAX) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @ExecutionTimeSec int = NULL,
    @Status varchar(50) = NULL,
    @TransactionSerial varchar(50) = NULL,
    @NumberOfTries int = NULL,
    @IsSuccessful bit = NULL,
    @CustomerWalletID bigint = NULL,
    @CardLast4Numbers varchar(50) = NULL,
    @ApprovalCode varchar(50) = NULL,
    @AllInfo nvarchar(MAX) = NULL,
    @NonCustomerID bigint = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [TransactionBit]
    SET
        [TableName_TransactionBit] = @TableName_TransactionBit,
        [UniqueIdentifier] = @UniqueIdentifier,
        [RequestedTransactionID] = @RequestedTransactionID,
        [CustomerID] = @CustomerID,
        [RequestAmount] = @RequestAmount,
        [CurrencyTypeCode] = @CurrencyTypeCode,
        [RequestSubjectDescription] = @RequestSubjectDescription,
        [EventExpirationTimestamp] = @EventExpirationTimestamp,
        [PaymentInitiationReference] = @PaymentInitiationReference,
        [ExternalSystemReference] = @ExternalSystemReference,
        [DebitMethodCode] = @DebitMethodCode,
        [TransactionSerialCode] = @TransactionSerialCode,
        [ProviderNbr] = @ProviderNbr,
        [WhenInitialized] = @WhenInitialized,
        [WhenValidated] = @WhenValidated,
        [WhenCaptured] = @WhenCaptured,
        [RequestStatusCode] = @RequestStatusCode,
        [RequestStatusDescription] = @RequestStatusDescription,
        [IssuerAuthorizationNumber] = @IssuerAuthorizationNumber,
        [LoggedAlertID] = @LoggedAlertID,
        [ErrorText] = @ErrorText,
        [spt_Comment] = @spt_Comment,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [ExecutionTimeSec] = @ExecutionTimeSec,
        [Status] = @Status,
        [TransactionSerial] = @TransactionSerial,
        [NumberOfTries] = @NumberOfTries,
        [IsSuccessful] = @IsSuccessful,
        [CustomerWalletID] = @CustomerWalletID,
        [CardLast4Numbers] = @CardLast4Numbers,
        [ApprovalCode] = @ApprovalCode,
        [AllInfo] = @AllInfo,
        [NonCustomerID] = @NonCustomerID,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteTransactionBit]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [TransactionBit]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_TransactionBit_RequestedTransaction
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetTransactionBitByREQUESTEDTRANSACTIONID]
    @RequestedTransactionID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_TransactionBit],
        [ID],
        [UniqueIdentifier],
        [RequestedTransactionID],
        [CustomerID],
        [RequestAmount],
        [CurrencyTypeCode],
        [RequestSubjectDescription],
        [EventExpirationTimestamp],
        [PaymentInitiationReference],
        [ExternalSystemReference],
        [DebitMethodCode],
        [TransactionSerialCode],
        [ProviderNbr],
        [WhenInitialized],
        [WhenValidated],
        [WhenCaptured],
        [RequestStatusCode],
        [RequestStatusDescription],
        [IssuerAuthorizationNumber],
        [LoggedAlertID],
        [ErrorText],
        [spt_Comment],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [ExecutionTimeSec],
        [Status],
        [TransactionSerial],
        [NumberOfTries],
        [IsSuccessful],
        [CustomerWalletID],
        [CardLast4Numbers],
        [ApprovalCode],
        [AllInfo],
        [NonCustomerID]
    FROM [TransactionBit]
    WHERE [RequestedTransactionID] = @RequestedTransactionID
;
END

GO

-- Procedure for Index: IX_TransactionBit_CardLast4Numbers
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillTransactionBitByCARDLAST4NUMBERS]
    @CardLast4Numbers varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_TransactionBit],
        [ID],
        [UniqueIdentifier],
        [RequestedTransactionID],
        [CustomerID],
        [RequestAmount],
        [CurrencyTypeCode],
        [RequestSubjectDescription],
        [EventExpirationTimestamp],
        [PaymentInitiationReference],
        [ExternalSystemReference],
        [DebitMethodCode],
        [TransactionSerialCode],
        [ProviderNbr],
        [WhenInitialized],
        [WhenValidated],
        [WhenCaptured],
        [RequestStatusCode],
        [RequestStatusDescription],
        [IssuerAuthorizationNumber],
        [LoggedAlertID],
        [ErrorText],
        [spt_Comment],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [ExecutionTimeSec],
        [Status],
        [TransactionSerial],
        [NumberOfTries],
        [IsSuccessful],
        [CustomerWalletID],
        [CardLast4Numbers],
        [ApprovalCode],
        [AllInfo],
        [NonCustomerID]
    FROM [TransactionBit]
    WHERE [CardLast4Numbers] = @CardLast4Numbers
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_TransactionBit_Customer
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillTransactionBitByCUSTOMERID]
    @CustomerID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_TransactionBit],
        [ID],
        [UniqueIdentifier],
        [RequestedTransactionID],
        [CustomerID],
        [RequestAmount],
        [CurrencyTypeCode],
        [RequestSubjectDescription],
        [EventExpirationTimestamp],
        [PaymentInitiationReference],
        [ExternalSystemReference],
        [DebitMethodCode],
        [TransactionSerialCode],
        [ProviderNbr],
        [WhenInitialized],
        [WhenValidated],
        [WhenCaptured],
        [RequestStatusCode],
        [RequestStatusDescription],
        [IssuerAuthorizationNumber],
        [LoggedAlertID],
        [ErrorText],
        [spt_Comment],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [ExecutionTimeSec],
        [Status],
        [TransactionSerial],
        [NumberOfTries],
        [IsSuccessful],
        [CustomerWalletID],
        [CardLast4Numbers],
        [ApprovalCode],
        [AllInfo],
        [NonCustomerID]
    FROM [TransactionBit]
    WHERE [CustomerID] = @CustomerID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_TransactionBit_Customer_WhenInitialized_Status
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillTransactionBitByCUSTOMERIDAndWHENINITIALIZEDAndSTATUS]
    @CustomerID bigint,
    @WhenInitialized datetimeoffset,
    @Status varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_TransactionBit],
        [ID],
        [UniqueIdentifier],
        [RequestedTransactionID],
        [CustomerID],
        [RequestAmount],
        [CurrencyTypeCode],
        [RequestSubjectDescription],
        [EventExpirationTimestamp],
        [PaymentInitiationReference],
        [ExternalSystemReference],
        [DebitMethodCode],
        [TransactionSerialCode],
        [ProviderNbr],
        [WhenInitialized],
        [WhenValidated],
        [WhenCaptured],
        [RequestStatusCode],
        [RequestStatusDescription],
        [IssuerAuthorizationNumber],
        [LoggedAlertID],
        [ErrorText],
        [spt_Comment],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [ExecutionTimeSec],
        [Status],
        [TransactionSerial],
        [NumberOfTries],
        [IsSuccessful],
        [CustomerWalletID],
        [CardLast4Numbers],
        [ApprovalCode],
        [AllInfo],
        [NonCustomerID]
    FROM [TransactionBit]
    WHERE [CustomerID] = @CustomerID AND [WhenInitialized] = @WhenInitialized AND [Status] = @Status
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_TransactionBit_CustomerWallet
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillTransactionBitByCUSTOMERWALLETID]
    @CustomerWalletID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_TransactionBit],
        [ID],
        [UniqueIdentifier],
        [RequestedTransactionID],
        [CustomerID],
        [RequestAmount],
        [CurrencyTypeCode],
        [RequestSubjectDescription],
        [EventExpirationTimestamp],
        [PaymentInitiationReference],
        [ExternalSystemReference],
        [DebitMethodCode],
        [TransactionSerialCode],
        [ProviderNbr],
        [WhenInitialized],
        [WhenValidated],
        [WhenCaptured],
        [RequestStatusCode],
        [RequestStatusDescription],
        [IssuerAuthorizationNumber],
        [LoggedAlertID],
        [ErrorText],
        [spt_Comment],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [ExecutionTimeSec],
        [Status],
        [TransactionSerial],
        [NumberOfTries],
        [IsSuccessful],
        [CustomerWalletID],
        [CardLast4Numbers],
        [ApprovalCode],
        [AllInfo],
        [NonCustomerID]
    FROM [TransactionBit]
    WHERE [CustomerWalletID] = @CustomerWalletID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_TransactionBit_NonCustomer
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillTransactionBitByNONCUSTOMERID]
    @NonCustomerID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_TransactionBit],
        [ID],
        [UniqueIdentifier],
        [RequestedTransactionID],
        [CustomerID],
        [RequestAmount],
        [CurrencyTypeCode],
        [RequestSubjectDescription],
        [EventExpirationTimestamp],
        [PaymentInitiationReference],
        [ExternalSystemReference],
        [DebitMethodCode],
        [TransactionSerialCode],
        [ProviderNbr],
        [WhenInitialized],
        [WhenValidated],
        [WhenCaptured],
        [RequestStatusCode],
        [RequestStatusDescription],
        [IssuerAuthorizationNumber],
        [LoggedAlertID],
        [ErrorText],
        [spt_Comment],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [ExecutionTimeSec],
        [Status],
        [TransactionSerial],
        [NumberOfTries],
        [IsSuccessful],
        [CustomerWalletID],
        [CardLast4Numbers],
        [ApprovalCode],
        [AllInfo],
        [NonCustomerID]
    FROM [TransactionBit]
    WHERE [NonCustomerID] = @NonCustomerID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_TransactionBit_WhenInitialized
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillTransactionBitByWHENINITIALIZED]
    @WhenInitialized datetimeoffset
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_TransactionBit],
        [ID],
        [UniqueIdentifier],
        [RequestedTransactionID],
        [CustomerID],
        [RequestAmount],
        [CurrencyTypeCode],
        [RequestSubjectDescription],
        [EventExpirationTimestamp],
        [PaymentInitiationReference],
        [ExternalSystemReference],
        [DebitMethodCode],
        [TransactionSerialCode],
        [ProviderNbr],
        [WhenInitialized],
        [WhenValidated],
        [WhenCaptured],
        [RequestStatusCode],
        [RequestStatusDescription],
        [IssuerAuthorizationNumber],
        [LoggedAlertID],
        [ErrorText],
        [spt_Comment],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [ExecutionTimeSec],
        [Status],
        [TransactionSerial],
        [NumberOfTries],
        [IsSuccessful],
        [CustomerWalletID],
        [CardLast4Numbers],
        [ApprovalCode],
        [AllInfo],
        [NonCustomerID]
    FROM [TransactionBit]
    WHERE [WhenInitialized] = @WhenInitialized
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: TransactionCreditCard
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllTransactionCreditCards]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_TransactionCreditCard],
            t.[ID],
            t.[UniqueIdentifier],
            t.[WhenInitialized],
            t.[WhenValidated],
            t.[CustomerCreditCardID],
            t.[CustomerID],
            t.[NumberOfPayments],
            t.[FirstPaymentAmount],
            t.[RemainingPaymentsAmount],
            t.[TotalPaymentAmount],
            t.[CreditCardFee],
            t.[Interest],
            t.[entCardHolderTZ],
            t.[CardHolderName],
            t.[CardLast4Numbers],
            t.[CardExpiry],
            t.[ExecutionTimeSec],
            t.[CGResult],
            t.[CGUserMessage],
            t.[CGAdditionalInfo],
            t.[TerminalNumber],
            t.[lkpClearingHouse],
            t.[lkpCardBrand],
            t.[lkpCardIssuingCompany],
            t.[IsCardForeign],
            t.[ClearingHouseApprovalNo],
            t.[VoucherNo],
            t.[GeneralData],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            t.[Status],
            t.[CGGuid],
            t.[CGTranID],
            t.[PaymentSchedule],
            t.[EffectiveInterestRate],
            t.[NumberOfTries],
            t.[enmService],
            t.[ApprovedForWalletTransfer],
            t.[CardHolderCellphoneOrEmail],
            t.[CGAllInfo],
            t.[spt_Comment],
            t.[InterpretationErrors],
            t.[RequestedTransactionID],
            t.[CGMessage],
            t.[PaymentsTextToUser],
            t.[CardBin],
            t.[IsSuccessful],
            t.[LoggedAlertID],
            t.[CustomerWalletID],
            t.[PaymentMethod],
            t.[ValidationSource],
            t.[NonCustomerID],
            p1.[Text] AS [CustomerCreditCardID_Text],
            p2.[Text] AS [CustomerID_Text],
            p3.[Text] AS [RequestedTransactionID_Text],
            p4.[Text] AS [CustomerWalletID_Text],
            p5.[Text] AS [NonCustomerID_Text]
        FROM [TransactionCreditCard] t
        LEFT JOIN [ccvwComboList_CustomerCreditCard] p1 ON t.[CustomerCreditCardID] = p1.[ID]
        LEFT JOIN [ccvwComboList_Customer] p2 ON t.[CustomerID] = p2.[ID]
        LEFT JOIN [ccvwComboList_RequestedTransaction] p3 ON t.[RequestedTransactionID] = p3.[ID]
        LEFT JOIN [ccvwComboList_CustomerWallet] p4 ON t.[CustomerWalletID] = p4.[ID]
        LEFT JOIN [ccvwComboList_NonCustomer] p5 ON t.[NonCustomerID] = p5.[ID]
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_TransactionCreditCard],
            [ID],
            [UniqueIdentifier],
            [WhenInitialized],
            [WhenValidated],
            [CustomerCreditCardID],
            [CustomerID],
            [NumberOfPayments],
            [FirstPaymentAmount],
            [RemainingPaymentsAmount],
            [TotalPaymentAmount],
            [CreditCardFee],
            [Interest],
            [entCardHolderTZ],
            [CardHolderName],
            [CardLast4Numbers],
            [CardExpiry],
            [ExecutionTimeSec],
            [CGResult],
            [CGUserMessage],
            [CGAdditionalInfo],
            [TerminalNumber],
            [lkpClearingHouse],
            [lkpCardBrand],
            [lkpCardIssuingCompany],
            [IsCardForeign],
            [ClearingHouseApprovalNo],
            [VoucherNo],
            [GeneralData],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID],
            [Status],
            [CGGuid],
            [CGTranID],
            [PaymentSchedule],
            [EffectiveInterestRate],
            [NumberOfTries],
            [enmService],
            [ApprovedForWalletTransfer],
            [CardHolderCellphoneOrEmail],
            [CGAllInfo],
            [spt_Comment],
            [InterpretationErrors],
            [RequestedTransactionID],
            [CGMessage],
            [PaymentsTextToUser],
            [CardBin],
            [IsSuccessful],
            [LoggedAlertID],
            [CustomerWalletID],
            [PaymentMethod],
            [ValidationSource],
            [NonCustomerID]
        FROM [TransactionCreditCard]
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredTransactionCreditCards]
    @RequestedTransactionID INT = NULL,
    @UniqueIdentifier VARCHAR(100) = NULL,
    @CardLast4Numbers VARCHAR(50) = NULL,
    @CGResult VARCHAR(50) = NULL,
    @ApprovedForWalletTransfer DATETIME = NULL,
    @lkpClearingHouse INT = NULL,
    @CustomerID INT = NULL,
    @WhenInitialized DATETIME = NULL,
    @Status VARCHAR(50) = NULL,
    @CustomerCreditCardID INT = NULL,
    @CustomerWalletID INT = NULL,
    @NonCustomerID INT = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_TransactionCreditCard],
            t.[ID],
            t.[UniqueIdentifier],
            t.[WhenInitialized],
            t.[WhenValidated],
            t.[CustomerCreditCardID],
            t.[CustomerID],
            t.[NumberOfPayments],
            t.[FirstPaymentAmount],
            t.[RemainingPaymentsAmount],
            t.[TotalPaymentAmount],
            t.[CreditCardFee],
            t.[Interest],
            t.[entCardHolderTZ],
            t.[CardHolderName],
            t.[CardLast4Numbers],
            t.[CardExpiry],
            t.[ExecutionTimeSec],
            t.[CGResult],
            t.[CGUserMessage],
            t.[CGAdditionalInfo],
            t.[TerminalNumber],
            t.[lkpClearingHouse],
            t.[lkpCardBrand],
            t.[lkpCardIssuingCompany],
            t.[IsCardForeign],
            t.[ClearingHouseApprovalNo],
            t.[VoucherNo],
            t.[GeneralData],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            t.[Status],
            t.[CGGuid],
            t.[CGTranID],
            t.[PaymentSchedule],
            t.[EffectiveInterestRate],
            t.[NumberOfTries],
            t.[enmService],
            t.[ApprovedForWalletTransfer],
            t.[CardHolderCellphoneOrEmail],
            t.[CGAllInfo],
            t.[spt_Comment],
            t.[InterpretationErrors],
            t.[RequestedTransactionID],
            t.[CGMessage],
            t.[PaymentsTextToUser],
            t.[CardBin],
            t.[IsSuccessful],
            t.[LoggedAlertID],
            t.[CustomerWalletID],
            t.[PaymentMethod],
            t.[ValidationSource],
            t.[NonCustomerID],
            p1.[Text] AS [CustomerCreditCardID_Text],
            p2.[Text] AS [CustomerID_Text],
            p3.[Text] AS [RequestedTransactionID_Text],
            p4.[Text] AS [CustomerWalletID_Text],
            p5.[Text] AS [NonCustomerID_Text]
        FROM [TransactionCreditCard] t
        LEFT JOIN [ccvwComboList_CustomerCreditCard] p1 ON t.[CustomerCreditCardID] = p1.[ID]
        LEFT JOIN [ccvwComboList_Customer] p2 ON t.[CustomerID] = p2.[ID]
        LEFT JOIN [ccvwComboList_RequestedTransaction] p3 ON t.[RequestedTransactionID] = p3.[ID]
        LEFT JOIN [ccvwComboList_CustomerWallet] p4 ON t.[CustomerWalletID] = p4.[ID]
        LEFT JOIN [ccvwComboList_NonCustomer] p5 ON t.[NonCustomerID] = p5.[ID]
        WHERE 1=1
          AND (@RequestedTransactionID IS NULL OR t.[RequestedTransactionID] = @RequestedTransactionID)
          AND (@UniqueIdentifier IS NULL OR t.[UniqueIdentifier] LIKE '%' + @UniqueIdentifier + '%')
          AND (@CardLast4Numbers IS NULL OR t.[CardLast4Numbers] LIKE '%' + @CardLast4Numbers + '%')
          AND (@CGResult IS NULL OR t.[CGResult] LIKE '%' + @CGResult + '%')
          AND (@CGResult IS NULL OR t.[CGResult] LIKE '%' + @CGResult + '%')
          AND (@ApprovedForWalletTransfer IS NULL OR t.[ApprovedForWalletTransfer] = @ApprovedForWalletTransfer)
          AND (@lkpClearingHouse IS NULL OR t.[lkpClearingHouse] = @lkpClearingHouse)
          AND (@CustomerID IS NULL OR t.[CustomerID] = @CustomerID)
          AND (@WhenInitialized IS NULL OR t.[WhenInitialized] = @WhenInitialized)
          AND (@Status IS NULL OR t.[Status] LIKE '%' + @Status + '%')
          AND (@CustomerCreditCardID IS NULL OR t.[CustomerCreditCardID] = @CustomerCreditCardID)
          AND (@CustomerID IS NULL OR t.[CustomerID] = @CustomerID)
          AND (@CustomerWalletID IS NULL OR t.[CustomerWalletID] = @CustomerWalletID)
          AND (@NonCustomerID IS NULL OR t.[NonCustomerID] = @NonCustomerID)
          AND (@WhenInitialized IS NULL OR t.[WhenInitialized] = @WhenInitialized)
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_TransactionCreditCard],
            [ID],
            [UniqueIdentifier],
            [WhenInitialized],
            [WhenValidated],
            [CustomerCreditCardID],
            [CustomerID],
            [NumberOfPayments],
            [FirstPaymentAmount],
            [RemainingPaymentsAmount],
            [TotalPaymentAmount],
            [CreditCardFee],
            [Interest],
            [entCardHolderTZ],
            [CardHolderName],
            [CardLast4Numbers],
            [CardExpiry],
            [ExecutionTimeSec],
            [CGResult],
            [CGUserMessage],
            [CGAdditionalInfo],
            [TerminalNumber],
            [lkpClearingHouse],
            [lkpCardBrand],
            [lkpCardIssuingCompany],
            [IsCardForeign],
            [ClearingHouseApprovalNo],
            [VoucherNo],
            [GeneralData],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID],
            [Status],
            [CGGuid],
            [CGTranID],
            [PaymentSchedule],
            [EffectiveInterestRate],
            [NumberOfTries],
            [enmService],
            [ApprovedForWalletTransfer],
            [CardHolderCellphoneOrEmail],
            [CGAllInfo],
            [spt_Comment],
            [InterpretationErrors],
            [RequestedTransactionID],
            [CGMessage],
            [PaymentsTextToUser],
            [CardBin],
            [IsSuccessful],
            [LoggedAlertID],
            [CustomerWalletID],
            [PaymentMethod],
            [ValidationSource],
            [NonCustomerID]
        FROM [TransactionCreditCard]
        WHERE 1=1
          AND (@RequestedTransactionID IS NULL OR [RequestedTransactionID] = @RequestedTransactionID)
          AND (@UniqueIdentifier IS NULL OR [UniqueIdentifier] LIKE '%' + @UniqueIdentifier + '%')
          AND (@CardLast4Numbers IS NULL OR [CardLast4Numbers] LIKE '%' + @CardLast4Numbers + '%')
          AND (@CGResult IS NULL OR [CGResult] LIKE '%' + @CGResult + '%')
          AND (@CGResult IS NULL OR [CGResult] LIKE '%' + @CGResult + '%')
          AND (@ApprovedForWalletTransfer IS NULL OR [ApprovedForWalletTransfer] = @ApprovedForWalletTransfer)
          AND (@lkpClearingHouse IS NULL OR [lkpClearingHouse] = @lkpClearingHouse)
          AND (@CustomerID IS NULL OR [CustomerID] = @CustomerID)
          AND (@WhenInitialized IS NULL OR [WhenInitialized] = @WhenInitialized)
          AND (@Status IS NULL OR [Status] LIKE '%' + @Status + '%')
          AND (@CustomerCreditCardID IS NULL OR [CustomerCreditCardID] = @CustomerCreditCardID)
          AND (@CustomerID IS NULL OR [CustomerID] = @CustomerID)
          AND (@CustomerWalletID IS NULL OR [CustomerWalletID] = @CustomerWalletID)
          AND (@NonCustomerID IS NULL OR [NonCustomerID] = @NonCustomerID)
          AND (@WhenInitialized IS NULL OR [WhenInitialized] = @WhenInitialized)
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetTransactionCreditCardByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_TransactionCreditCard],
        [ID],
        [UniqueIdentifier],
        [WhenInitialized],
        [WhenValidated],
        [CustomerCreditCardID],
        [CustomerID],
        [NumberOfPayments],
        [FirstPaymentAmount],
        [RemainingPaymentsAmount],
        [TotalPaymentAmount],
        [CreditCardFee],
        [Interest],
        [entCardHolderTZ],
        [CardHolderName],
        [CardLast4Numbers],
        [CardExpiry],
        [ExecutionTimeSec],
        [CGResult],
        [CGUserMessage],
        [CGAdditionalInfo],
        [TerminalNumber],
        [lkpClearingHouse],
        [lkpCardBrand],
        [lkpCardIssuingCompany],
        [IsCardForeign],
        [ClearingHouseApprovalNo],
        [VoucherNo],
        [GeneralData],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [Status],
        [CGGuid],
        [CGTranID],
        [PaymentSchedule],
        [EffectiveInterestRate],
        [NumberOfTries],
        [enmService],
        [ApprovedForWalletTransfer],
        [CardHolderCellphoneOrEmail],
        [CGAllInfo],
        [spt_Comment],
        [InterpretationErrors],
        [RequestedTransactionID],
        [CGMessage],
        [PaymentsTextToUser],
        [CardBin],
        [IsSuccessful],
        [LoggedAlertID],
        [CustomerWalletID],
        [PaymentMethod],
        [ValidationSource],
        [NonCustomerID]
    FROM [TransactionCreditCard]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddTransactionCreditCard]
    @TableName_TransactionCreditCard bit = NULL,
    @UniqueIdentifier varchar(100) = NULL,
    @WhenInitialized datetimeoffset = NULL,
    @WhenValidated datetimeoffset = NULL,
    @CustomerCreditCardID bigint = NULL,
    @CustomerID bigint = NULL,
    @NumberOfPayments int = NULL,
    @FirstPaymentAmount decimal(18,0) = NULL,
    @RemainingPaymentsAmount decimal(18,0) = NULL,
    @TotalPaymentAmount decimal(18,0) = NULL,
    @CreditCardFee decimal(18,0) = NULL,
    @Interest decimal(18,0) = NULL,
    @entCardHolderTZ varchar(MAX) = NULL,
    @CardHolderName nvarchar(100) = NULL,
    @CardLast4Numbers varchar(50) = NULL,
    @CardExpiry date = NULL,
    @ExecutionTimeSec int = NULL,
    @CGResult varchar(50) = NULL,
    @CGUserMessage nvarchar(200) = NULL,
    @CGAdditionalInfo nvarchar(MAX) = NULL,
    @TerminalNumber varchar(50) = NULL,
    @lkpClearingHouse int = NULL,
    @lkpCardBrand int = NULL,
    @lkpCardIssuingCompany int = NULL,
    @IsCardForeign bit = NULL,
    @ClearingHouseApprovalNo varchar(50) = NULL,
    @VoucherNo varchar(50) = NULL,
    @GeneralData nvarchar(MAX) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @Status varchar(50) = NULL,
    @CGGuid varchar(100) = NULL,
    @CGTranID varchar(100) = NULL,
    @PaymentSchedule varchar(1000) = NULL,
    @EffectiveInterestRate decimal(18,0) = NULL,
    @NumberOfTries int = NULL,
    @enmService varchar(50) = NULL,
    @ApprovedForWalletTransfer datetimeoffset = NULL,
    @CardHolderCellphoneOrEmail varchar(50) = NULL,
    @CGAllInfo nvarchar(MAX) = NULL,
    @spt_Comment nvarchar(MAX) = NULL,
    @InterpretationErrors nvarchar(MAX) = NULL,
    @RequestedTransactionID bigint = NULL,
    @CGMessage nvarchar(400) = NULL,
    @PaymentsTextToUser nvarchar(MAX) = NULL,
    @CardBin nvarchar(100) = NULL,
    @IsSuccessful bit = NULL,
    @LoggedAlertID bigint = NULL,
    @CustomerWalletID bigint = NULL,
    @PaymentMethod varchar(50) = NULL,
    @ValidationSource varchar(50) = NULL,
    @NonCustomerID bigint = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [TransactionCreditCard] (
        [TableName_TransactionCreditCard],
        [UniqueIdentifier],
        [WhenInitialized],
        [WhenValidated],
        [CustomerCreditCardID],
        [CustomerID],
        [NumberOfPayments],
        [FirstPaymentAmount],
        [RemainingPaymentsAmount],
        [TotalPaymentAmount],
        [CreditCardFee],
        [Interest],
        [entCardHolderTZ],
        [CardHolderName],
        [CardLast4Numbers],
        [CardExpiry],
        [ExecutionTimeSec],
        [CGResult],
        [CGUserMessage],
        [CGAdditionalInfo],
        [TerminalNumber],
        [lkpClearingHouse],
        [lkpCardBrand],
        [lkpCardIssuingCompany],
        [IsCardForeign],
        [ClearingHouseApprovalNo],
        [VoucherNo],
        [GeneralData],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [Status],
        [CGGuid],
        [CGTranID],
        [PaymentSchedule],
        [EffectiveInterestRate],
        [NumberOfTries],
        [enmService],
        [ApprovedForWalletTransfer],
        [CardHolderCellphoneOrEmail],
        [CGAllInfo],
        [spt_Comment],
        [InterpretationErrors],
        [RequestedTransactionID],
        [CGMessage],
        [PaymentsTextToUser],
        [CardBin],
        [IsSuccessful],
        [LoggedAlertID],
        [CustomerWalletID],
        [PaymentMethod],
        [ValidationSource],
        [NonCustomerID],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_TransactionCreditCard,
        @UniqueIdentifier,
        @WhenInitialized,
        @WhenValidated,
        @CustomerCreditCardID,
        @CustomerID,
        @NumberOfPayments,
        @FirstPaymentAmount,
        @RemainingPaymentsAmount,
        @TotalPaymentAmount,
        @CreditCardFee,
        @Interest,
        @entCardHolderTZ,
        @CardHolderName,
        @CardLast4Numbers,
        @CardExpiry,
        @ExecutionTimeSec,
        @CGResult,
        @CGUserMessage,
        @CGAdditionalInfo,
        @TerminalNumber,
        @lkpClearingHouse,
        @lkpCardBrand,
        @lkpCardIssuingCompany,
        @IsCardForeign,
        @ClearingHouseApprovalNo,
        @VoucherNo,
        @GeneralData,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        @Status,
        @CGGuid,
        @CGTranID,
        @PaymentSchedule,
        @EffectiveInterestRate,
        @NumberOfTries,
        @enmService,
        @ApprovedForWalletTransfer,
        @CardHolderCellphoneOrEmail,
        @CGAllInfo,
        @spt_Comment,
        @InterpretationErrors,
        @RequestedTransactionID,
        @CGMessage,
        @PaymentsTextToUser,
        @CardBin,
        @IsSuccessful,
        @LoggedAlertID,
        @CustomerWalletID,
        @PaymentMethod,
        @ValidationSource,
        @NonCustomerID,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateTransactionCreditCard]
    @ID bigint,
    @TableName_TransactionCreditCard bit = NULL,
    @UniqueIdentifier varchar(100) = NULL,
    @WhenInitialized datetimeoffset = NULL,
    @WhenValidated datetimeoffset = NULL,
    @CustomerCreditCardID bigint = NULL,
    @CustomerID bigint = NULL,
    @NumberOfPayments int = NULL,
    @FirstPaymentAmount decimal(18,0) = NULL,
    @RemainingPaymentsAmount decimal(18,0) = NULL,
    @TotalPaymentAmount decimal(18,0) = NULL,
    @CreditCardFee decimal(18,0) = NULL,
    @Interest decimal(18,0) = NULL,
    @entCardHolderTZ varchar(MAX) = NULL,
    @CardHolderName nvarchar(100) = NULL,
    @CardLast4Numbers varchar(50) = NULL,
    @CardExpiry date = NULL,
    @ExecutionTimeSec int = NULL,
    @CGResult varchar(50) = NULL,
    @CGUserMessage nvarchar(200) = NULL,
    @CGAdditionalInfo nvarchar(MAX) = NULL,
    @TerminalNumber varchar(50) = NULL,
    @lkpClearingHouse int = NULL,
    @lkpCardBrand int = NULL,
    @lkpCardIssuingCompany int = NULL,
    @IsCardForeign bit = NULL,
    @ClearingHouseApprovalNo varchar(50) = NULL,
    @VoucherNo varchar(50) = NULL,
    @GeneralData nvarchar(MAX) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @Status varchar(50) = NULL,
    @CGGuid varchar(100) = NULL,
    @CGTranID varchar(100) = NULL,
    @PaymentSchedule varchar(1000) = NULL,
    @EffectiveInterestRate decimal(18,0) = NULL,
    @NumberOfTries int = NULL,
    @enmService varchar(50) = NULL,
    @ApprovedForWalletTransfer datetimeoffset = NULL,
    @CardHolderCellphoneOrEmail varchar(50) = NULL,
    @CGAllInfo nvarchar(MAX) = NULL,
    @spt_Comment nvarchar(MAX) = NULL,
    @InterpretationErrors nvarchar(MAX) = NULL,
    @RequestedTransactionID bigint = NULL,
    @CGMessage nvarchar(400) = NULL,
    @PaymentsTextToUser nvarchar(MAX) = NULL,
    @CardBin nvarchar(100) = NULL,
    @IsSuccessful bit = NULL,
    @LoggedAlertID bigint = NULL,
    @CustomerWalletID bigint = NULL,
    @PaymentMethod varchar(50) = NULL,
    @ValidationSource varchar(50) = NULL,
    @NonCustomerID bigint = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [TransactionCreditCard]
    SET
        [TableName_TransactionCreditCard] = @TableName_TransactionCreditCard,
        [UniqueIdentifier] = @UniqueIdentifier,
        [WhenInitialized] = @WhenInitialized,
        [WhenValidated] = @WhenValidated,
        [CustomerCreditCardID] = @CustomerCreditCardID,
        [CustomerID] = @CustomerID,
        [NumberOfPayments] = @NumberOfPayments,
        [FirstPaymentAmount] = @FirstPaymentAmount,
        [RemainingPaymentsAmount] = @RemainingPaymentsAmount,
        [TotalPaymentAmount] = @TotalPaymentAmount,
        [CreditCardFee] = @CreditCardFee,
        [Interest] = @Interest,
        [entCardHolderTZ] = @entCardHolderTZ,
        [CardHolderName] = @CardHolderName,
        [CardLast4Numbers] = @CardLast4Numbers,
        [CardExpiry] = @CardExpiry,
        [ExecutionTimeSec] = @ExecutionTimeSec,
        [CGResult] = @CGResult,
        [CGUserMessage] = @CGUserMessage,
        [CGAdditionalInfo] = @CGAdditionalInfo,
        [TerminalNumber] = @TerminalNumber,
        [lkpClearingHouse] = @lkpClearingHouse,
        [lkpCardBrand] = @lkpCardBrand,
        [lkpCardIssuingCompany] = @lkpCardIssuingCompany,
        [IsCardForeign] = @IsCardForeign,
        [ClearingHouseApprovalNo] = @ClearingHouseApprovalNo,
        [VoucherNo] = @VoucherNo,
        [GeneralData] = @GeneralData,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [Status] = @Status,
        [CGGuid] = @CGGuid,
        [CGTranID] = @CGTranID,
        [PaymentSchedule] = @PaymentSchedule,
        [EffectiveInterestRate] = @EffectiveInterestRate,
        [NumberOfTries] = @NumberOfTries,
        [enmService] = @enmService,
        [ApprovedForWalletTransfer] = @ApprovedForWalletTransfer,
        [CardHolderCellphoneOrEmail] = @CardHolderCellphoneOrEmail,
        [CGAllInfo] = @CGAllInfo,
        [spt_Comment] = @spt_Comment,
        [InterpretationErrors] = @InterpretationErrors,
        [RequestedTransactionID] = @RequestedTransactionID,
        [CGMessage] = @CGMessage,
        [PaymentsTextToUser] = @PaymentsTextToUser,
        [CardBin] = @CardBin,
        [IsSuccessful] = @IsSuccessful,
        [LoggedAlertID] = @LoggedAlertID,
        [CustomerWalletID] = @CustomerWalletID,
        [PaymentMethod] = @PaymentMethod,
        [ValidationSource] = @ValidationSource,
        [NonCustomerID] = @NonCustomerID,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteTransactionCreditCard]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [TransactionCreditCard]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_TransactionCreditCard_RequestedTransaction
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetTransactionCreditCardByREQUESTEDTRANSACTIONID]
    @RequestedTransactionID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_TransactionCreditCard],
        [ID],
        [UniqueIdentifier],
        [WhenInitialized],
        [WhenValidated],
        [CustomerCreditCardID],
        [CustomerID],
        [NumberOfPayments],
        [FirstPaymentAmount],
        [RemainingPaymentsAmount],
        [TotalPaymentAmount],
        [CreditCardFee],
        [Interest],
        [entCardHolderTZ],
        [CardHolderName],
        [CardLast4Numbers],
        [CardExpiry],
        [ExecutionTimeSec],
        [CGResult],
        [CGUserMessage],
        [CGAdditionalInfo],
        [TerminalNumber],
        [lkpClearingHouse],
        [lkpCardBrand],
        [lkpCardIssuingCompany],
        [IsCardForeign],
        [ClearingHouseApprovalNo],
        [VoucherNo],
        [GeneralData],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [Status],
        [CGGuid],
        [CGTranID],
        [PaymentSchedule],
        [EffectiveInterestRate],
        [NumberOfTries],
        [enmService],
        [ApprovedForWalletTransfer],
        [CardHolderCellphoneOrEmail],
        [CGAllInfo],
        [spt_Comment],
        [InterpretationErrors],
        [RequestedTransactionID],
        [CGMessage],
        [PaymentsTextToUser],
        [CardBin],
        [IsSuccessful],
        [LoggedAlertID],
        [CustomerWalletID],
        [PaymentMethod],
        [ValidationSource],
        [NonCustomerID]
    FROM [TransactionCreditCard]
    WHERE [RequestedTransactionID] = @RequestedTransactionID
;
END

GO

-- Procedure for Index: IX_TransactionCreditCard_UniqueIdentifier
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetTransactionCreditCardByUNIQUEIDENTIFIER]
    @UniqueIdentifier varchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_TransactionCreditCard],
        [ID],
        [UniqueIdentifier],
        [WhenInitialized],
        [WhenValidated],
        [CustomerCreditCardID],
        [CustomerID],
        [NumberOfPayments],
        [FirstPaymentAmount],
        [RemainingPaymentsAmount],
        [TotalPaymentAmount],
        [CreditCardFee],
        [Interest],
        [entCardHolderTZ],
        [CardHolderName],
        [CardLast4Numbers],
        [CardExpiry],
        [ExecutionTimeSec],
        [CGResult],
        [CGUserMessage],
        [CGAdditionalInfo],
        [TerminalNumber],
        [lkpClearingHouse],
        [lkpCardBrand],
        [lkpCardIssuingCompany],
        [IsCardForeign],
        [ClearingHouseApprovalNo],
        [VoucherNo],
        [GeneralData],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [Status],
        [CGGuid],
        [CGTranID],
        [PaymentSchedule],
        [EffectiveInterestRate],
        [NumberOfTries],
        [enmService],
        [ApprovedForWalletTransfer],
        [CardHolderCellphoneOrEmail],
        [CGAllInfo],
        [spt_Comment],
        [InterpretationErrors],
        [RequestedTransactionID],
        [CGMessage],
        [PaymentsTextToUser],
        [CardBin],
        [IsSuccessful],
        [LoggedAlertID],
        [CustomerWalletID],
        [PaymentMethod],
        [ValidationSource],
        [NonCustomerID]
    FROM [TransactionCreditCard]
    WHERE [UniqueIdentifier] = @UniqueIdentifier
;
END

GO

-- Procedure for Index: IX_TransactionCreditCard_CardLast4Numbers
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillTransactionCreditCardByCARDLAST4NUMBERS]
    @CardLast4Numbers varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_TransactionCreditCard],
        [ID],
        [UniqueIdentifier],
        [WhenInitialized],
        [WhenValidated],
        [CustomerCreditCardID],
        [CustomerID],
        [NumberOfPayments],
        [FirstPaymentAmount],
        [RemainingPaymentsAmount],
        [TotalPaymentAmount],
        [CreditCardFee],
        [Interest],
        [entCardHolderTZ],
        [CardHolderName],
        [CardLast4Numbers],
        [CardExpiry],
        [ExecutionTimeSec],
        [CGResult],
        [CGUserMessage],
        [CGAdditionalInfo],
        [TerminalNumber],
        [lkpClearingHouse],
        [lkpCardBrand],
        [lkpCardIssuingCompany],
        [IsCardForeign],
        [ClearingHouseApprovalNo],
        [VoucherNo],
        [GeneralData],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [Status],
        [CGGuid],
        [CGTranID],
        [PaymentSchedule],
        [EffectiveInterestRate],
        [NumberOfTries],
        [enmService],
        [ApprovedForWalletTransfer],
        [CardHolderCellphoneOrEmail],
        [CGAllInfo],
        [spt_Comment],
        [InterpretationErrors],
        [RequestedTransactionID],
        [CGMessage],
        [PaymentsTextToUser],
        [CardBin],
        [IsSuccessful],
        [LoggedAlertID],
        [CustomerWalletID],
        [PaymentMethod],
        [ValidationSource],
        [NonCustomerID]
    FROM [TransactionCreditCard]
    WHERE [CardLast4Numbers] = @CardLast4Numbers
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_TransactionCreditCard_CGResult
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillTransactionCreditCardByCGRESULT]
    @CGResult varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_TransactionCreditCard],
        [ID],
        [UniqueIdentifier],
        [WhenInitialized],
        [WhenValidated],
        [CustomerCreditCardID],
        [CustomerID],
        [NumberOfPayments],
        [FirstPaymentAmount],
        [RemainingPaymentsAmount],
        [TotalPaymentAmount],
        [CreditCardFee],
        [Interest],
        [entCardHolderTZ],
        [CardHolderName],
        [CardLast4Numbers],
        [CardExpiry],
        [ExecutionTimeSec],
        [CGResult],
        [CGUserMessage],
        [CGAdditionalInfo],
        [TerminalNumber],
        [lkpClearingHouse],
        [lkpCardBrand],
        [lkpCardIssuingCompany],
        [IsCardForeign],
        [ClearingHouseApprovalNo],
        [VoucherNo],
        [GeneralData],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [Status],
        [CGGuid],
        [CGTranID],
        [PaymentSchedule],
        [EffectiveInterestRate],
        [NumberOfTries],
        [enmService],
        [ApprovedForWalletTransfer],
        [CardHolderCellphoneOrEmail],
        [CGAllInfo],
        [spt_Comment],
        [InterpretationErrors],
        [RequestedTransactionID],
        [CGMessage],
        [PaymentsTextToUser],
        [CardBin],
        [IsSuccessful],
        [LoggedAlertID],
        [CustomerWalletID],
        [PaymentMethod],
        [ValidationSource],
        [NonCustomerID]
    FROM [TransactionCreditCard]
    WHERE [CGResult] = @CGResult
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_TransactionCreditCard_CGResult_ApprovedForWalletTransfer
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillTransactionCreditCardByCGRESULTAndAPPROVEDFORWALLETTRANSFER]
    @CGResult varchar(50),
    @ApprovedForWalletTransfer datetimeoffset
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_TransactionCreditCard],
        [ID],
        [UniqueIdentifier],
        [WhenInitialized],
        [WhenValidated],
        [CustomerCreditCardID],
        [CustomerID],
        [NumberOfPayments],
        [FirstPaymentAmount],
        [RemainingPaymentsAmount],
        [TotalPaymentAmount],
        [CreditCardFee],
        [Interest],
        [entCardHolderTZ],
        [CardHolderName],
        [CardLast4Numbers],
        [CardExpiry],
        [ExecutionTimeSec],
        [CGResult],
        [CGUserMessage],
        [CGAdditionalInfo],
        [TerminalNumber],
        [lkpClearingHouse],
        [lkpCardBrand],
        [lkpCardIssuingCompany],
        [IsCardForeign],
        [ClearingHouseApprovalNo],
        [VoucherNo],
        [GeneralData],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [Status],
        [CGGuid],
        [CGTranID],
        [PaymentSchedule],
        [EffectiveInterestRate],
        [NumberOfTries],
        [enmService],
        [ApprovedForWalletTransfer],
        [CardHolderCellphoneOrEmail],
        [CGAllInfo],
        [spt_Comment],
        [InterpretationErrors],
        [RequestedTransactionID],
        [CGMessage],
        [PaymentsTextToUser],
        [CardBin],
        [IsSuccessful],
        [LoggedAlertID],
        [CustomerWalletID],
        [PaymentMethod],
        [ValidationSource],
        [NonCustomerID]
    FROM [TransactionCreditCard]
    WHERE [CGResult] = @CGResult AND [ApprovedForWalletTransfer] = @ApprovedForWalletTransfer
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_TransactionCreditCard_ClearingHouse
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillTransactionCreditCardByLKPCLEARINGHOUSE]
    @lkpClearingHouse int
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_TransactionCreditCard],
        [ID],
        [UniqueIdentifier],
        [WhenInitialized],
        [WhenValidated],
        [CustomerCreditCardID],
        [CustomerID],
        [NumberOfPayments],
        [FirstPaymentAmount],
        [RemainingPaymentsAmount],
        [TotalPaymentAmount],
        [CreditCardFee],
        [Interest],
        [entCardHolderTZ],
        [CardHolderName],
        [CardLast4Numbers],
        [CardExpiry],
        [ExecutionTimeSec],
        [CGResult],
        [CGUserMessage],
        [CGAdditionalInfo],
        [TerminalNumber],
        [lkpClearingHouse],
        [lkpCardBrand],
        [lkpCardIssuingCompany],
        [IsCardForeign],
        [ClearingHouseApprovalNo],
        [VoucherNo],
        [GeneralData],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [Status],
        [CGGuid],
        [CGTranID],
        [PaymentSchedule],
        [EffectiveInterestRate],
        [NumberOfTries],
        [enmService],
        [ApprovedForWalletTransfer],
        [CardHolderCellphoneOrEmail],
        [CGAllInfo],
        [spt_Comment],
        [InterpretationErrors],
        [RequestedTransactionID],
        [CGMessage],
        [PaymentsTextToUser],
        [CardBin],
        [IsSuccessful],
        [LoggedAlertID],
        [CustomerWalletID],
        [PaymentMethod],
        [ValidationSource],
        [NonCustomerID]
    FROM [TransactionCreditCard]
    WHERE [lkpClearingHouse] = @lkpClearingHouse
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_TransactionCreditCard_Customer_WhenInitialized_Status
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillTransactionCreditCardByCUSTOMERIDAndWHENINITIALIZEDAndSTATUS]
    @CustomerID bigint,
    @WhenInitialized datetimeoffset,
    @Status varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_TransactionCreditCard],
        [ID],
        [UniqueIdentifier],
        [WhenInitialized],
        [WhenValidated],
        [CustomerCreditCardID],
        [CustomerID],
        [NumberOfPayments],
        [FirstPaymentAmount],
        [RemainingPaymentsAmount],
        [TotalPaymentAmount],
        [CreditCardFee],
        [Interest],
        [entCardHolderTZ],
        [CardHolderName],
        [CardLast4Numbers],
        [CardExpiry],
        [ExecutionTimeSec],
        [CGResult],
        [CGUserMessage],
        [CGAdditionalInfo],
        [TerminalNumber],
        [lkpClearingHouse],
        [lkpCardBrand],
        [lkpCardIssuingCompany],
        [IsCardForeign],
        [ClearingHouseApprovalNo],
        [VoucherNo],
        [GeneralData],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [Status],
        [CGGuid],
        [CGTranID],
        [PaymentSchedule],
        [EffectiveInterestRate],
        [NumberOfTries],
        [enmService],
        [ApprovedForWalletTransfer],
        [CardHolderCellphoneOrEmail],
        [CGAllInfo],
        [spt_Comment],
        [InterpretationErrors],
        [RequestedTransactionID],
        [CGMessage],
        [PaymentsTextToUser],
        [CardBin],
        [IsSuccessful],
        [LoggedAlertID],
        [CustomerWalletID],
        [PaymentMethod],
        [ValidationSource],
        [NonCustomerID]
    FROM [TransactionCreditCard]
    WHERE [CustomerID] = @CustomerID AND [WhenInitialized] = @WhenInitialized AND [Status] = @Status
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_TransactionCreditCard_CustomerCreditCardID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillTransactionCreditCardByCUSTOMERCREDITCARDID]
    @CustomerCreditCardID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_TransactionCreditCard],
        [ID],
        [UniqueIdentifier],
        [WhenInitialized],
        [WhenValidated],
        [CustomerCreditCardID],
        [CustomerID],
        [NumberOfPayments],
        [FirstPaymentAmount],
        [RemainingPaymentsAmount],
        [TotalPaymentAmount],
        [CreditCardFee],
        [Interest],
        [entCardHolderTZ],
        [CardHolderName],
        [CardLast4Numbers],
        [CardExpiry],
        [ExecutionTimeSec],
        [CGResult],
        [CGUserMessage],
        [CGAdditionalInfo],
        [TerminalNumber],
        [lkpClearingHouse],
        [lkpCardBrand],
        [lkpCardIssuingCompany],
        [IsCardForeign],
        [ClearingHouseApprovalNo],
        [VoucherNo],
        [GeneralData],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [Status],
        [CGGuid],
        [CGTranID],
        [PaymentSchedule],
        [EffectiveInterestRate],
        [NumberOfTries],
        [enmService],
        [ApprovedForWalletTransfer],
        [CardHolderCellphoneOrEmail],
        [CGAllInfo],
        [spt_Comment],
        [InterpretationErrors],
        [RequestedTransactionID],
        [CGMessage],
        [PaymentsTextToUser],
        [CardBin],
        [IsSuccessful],
        [LoggedAlertID],
        [CustomerWalletID],
        [PaymentMethod],
        [ValidationSource],
        [NonCustomerID]
    FROM [TransactionCreditCard]
    WHERE [CustomerCreditCardID] = @CustomerCreditCardID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_TransactionCreditCard_CustomerID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillTransactionCreditCardByCUSTOMERID]
    @CustomerID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_TransactionCreditCard],
        [ID],
        [UniqueIdentifier],
        [WhenInitialized],
        [WhenValidated],
        [CustomerCreditCardID],
        [CustomerID],
        [NumberOfPayments],
        [FirstPaymentAmount],
        [RemainingPaymentsAmount],
        [TotalPaymentAmount],
        [CreditCardFee],
        [Interest],
        [entCardHolderTZ],
        [CardHolderName],
        [CardLast4Numbers],
        [CardExpiry],
        [ExecutionTimeSec],
        [CGResult],
        [CGUserMessage],
        [CGAdditionalInfo],
        [TerminalNumber],
        [lkpClearingHouse],
        [lkpCardBrand],
        [lkpCardIssuingCompany],
        [IsCardForeign],
        [ClearingHouseApprovalNo],
        [VoucherNo],
        [GeneralData],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [Status],
        [CGGuid],
        [CGTranID],
        [PaymentSchedule],
        [EffectiveInterestRate],
        [NumberOfTries],
        [enmService],
        [ApprovedForWalletTransfer],
        [CardHolderCellphoneOrEmail],
        [CGAllInfo],
        [spt_Comment],
        [InterpretationErrors],
        [RequestedTransactionID],
        [CGMessage],
        [PaymentsTextToUser],
        [CardBin],
        [IsSuccessful],
        [LoggedAlertID],
        [CustomerWalletID],
        [PaymentMethod],
        [ValidationSource],
        [NonCustomerID]
    FROM [TransactionCreditCard]
    WHERE [CustomerID] = @CustomerID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_TransactionCreditCard_CustomerWallet
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillTransactionCreditCardByCUSTOMERWALLETID]
    @CustomerWalletID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_TransactionCreditCard],
        [ID],
        [UniqueIdentifier],
        [WhenInitialized],
        [WhenValidated],
        [CustomerCreditCardID],
        [CustomerID],
        [NumberOfPayments],
        [FirstPaymentAmount],
        [RemainingPaymentsAmount],
        [TotalPaymentAmount],
        [CreditCardFee],
        [Interest],
        [entCardHolderTZ],
        [CardHolderName],
        [CardLast4Numbers],
        [CardExpiry],
        [ExecutionTimeSec],
        [CGResult],
        [CGUserMessage],
        [CGAdditionalInfo],
        [TerminalNumber],
        [lkpClearingHouse],
        [lkpCardBrand],
        [lkpCardIssuingCompany],
        [IsCardForeign],
        [ClearingHouseApprovalNo],
        [VoucherNo],
        [GeneralData],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [Status],
        [CGGuid],
        [CGTranID],
        [PaymentSchedule],
        [EffectiveInterestRate],
        [NumberOfTries],
        [enmService],
        [ApprovedForWalletTransfer],
        [CardHolderCellphoneOrEmail],
        [CGAllInfo],
        [spt_Comment],
        [InterpretationErrors],
        [RequestedTransactionID],
        [CGMessage],
        [PaymentsTextToUser],
        [CardBin],
        [IsSuccessful],
        [LoggedAlertID],
        [CustomerWalletID],
        [PaymentMethod],
        [ValidationSource],
        [NonCustomerID]
    FROM [TransactionCreditCard]
    WHERE [CustomerWalletID] = @CustomerWalletID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_TransactionCreditCard_NonCustomer
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillTransactionCreditCardByNONCUSTOMERID]
    @NonCustomerID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_TransactionCreditCard],
        [ID],
        [UniqueIdentifier],
        [WhenInitialized],
        [WhenValidated],
        [CustomerCreditCardID],
        [CustomerID],
        [NumberOfPayments],
        [FirstPaymentAmount],
        [RemainingPaymentsAmount],
        [TotalPaymentAmount],
        [CreditCardFee],
        [Interest],
        [entCardHolderTZ],
        [CardHolderName],
        [CardLast4Numbers],
        [CardExpiry],
        [ExecutionTimeSec],
        [CGResult],
        [CGUserMessage],
        [CGAdditionalInfo],
        [TerminalNumber],
        [lkpClearingHouse],
        [lkpCardBrand],
        [lkpCardIssuingCompany],
        [IsCardForeign],
        [ClearingHouseApprovalNo],
        [VoucherNo],
        [GeneralData],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [Status],
        [CGGuid],
        [CGTranID],
        [PaymentSchedule],
        [EffectiveInterestRate],
        [NumberOfTries],
        [enmService],
        [ApprovedForWalletTransfer],
        [CardHolderCellphoneOrEmail],
        [CGAllInfo],
        [spt_Comment],
        [InterpretationErrors],
        [RequestedTransactionID],
        [CGMessage],
        [PaymentsTextToUser],
        [CardBin],
        [IsSuccessful],
        [LoggedAlertID],
        [CustomerWalletID],
        [PaymentMethod],
        [ValidationSource],
        [NonCustomerID]
    FROM [TransactionCreditCard]
    WHERE [NonCustomerID] = @NonCustomerID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_TransactionCreditCard_WhenInitialized
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillTransactionCreditCardByWHENINITIALIZED]
    @WhenInitialized datetimeoffset
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_TransactionCreditCard],
        [ID],
        [UniqueIdentifier],
        [WhenInitialized],
        [WhenValidated],
        [CustomerCreditCardID],
        [CustomerID],
        [NumberOfPayments],
        [FirstPaymentAmount],
        [RemainingPaymentsAmount],
        [TotalPaymentAmount],
        [CreditCardFee],
        [Interest],
        [entCardHolderTZ],
        [CardHolderName],
        [CardLast4Numbers],
        [CardExpiry],
        [ExecutionTimeSec],
        [CGResult],
        [CGUserMessage],
        [CGAdditionalInfo],
        [TerminalNumber],
        [lkpClearingHouse],
        [lkpCardBrand],
        [lkpCardIssuingCompany],
        [IsCardForeign],
        [ClearingHouseApprovalNo],
        [VoucherNo],
        [GeneralData],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [Status],
        [CGGuid],
        [CGTranID],
        [PaymentSchedule],
        [EffectiveInterestRate],
        [NumberOfTries],
        [enmService],
        [ApprovedForWalletTransfer],
        [CardHolderCellphoneOrEmail],
        [CGAllInfo],
        [spt_Comment],
        [InterpretationErrors],
        [RequestedTransactionID],
        [CGMessage],
        [PaymentsTextToUser],
        [CardBin],
        [IsSuccessful],
        [LoggedAlertID],
        [CustomerWalletID],
        [PaymentMethod],
        [ValidationSource],
        [NonCustomerID]
    FROM [TransactionCreditCard]
    WHERE [WhenInitialized] = @WhenInitialized
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: TransactionLoad
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllTransactionLoads]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_TransactionLoad],
            t.[ID],
            t.[UserID],
            t.[DistributorID],
            t.[enmLoadType],
            t.[CustomerID],
            t.[CardID],
            t.[enmCurrency],
            t.[Amount],
            t.[WhenRequested],
            t.[ExchangeRateUsed],
            t.[AmountInILS],
            t.[PaymentDebitResult],
            t.[PaymentDebitAuthorizationCode],
            t.[PaymentDebitDetails],
            t.[DebitElapsedTimeSec],
            t.[enmLoadApproved_ApprovalType],
            t.[LoadResponseCode],
            t.[LoadResponse],
            t.[LoadElapsedTimeSec],
            t.[PaymentCreditResult],
            t.[PaymentCreditAuthorizationCode],
            t.[PaymentCreditDetails],
            t.[CreditElapsedTimeSec],
            t.[LoggedAlertID],
            t.[FaultNo],
            t.[enmLoadResult],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            t.[clc_Month],
            t.[enmCoveredBy],
            t.[Details],
            t.[CustomerReference],
            t.[RepresentativeExchangeRate],
            t.[clc_Day],
            t.[RequestedTransactionID],
            p1.[Text] AS [UserID_Text],
            p2.[Text] AS [DistributorID_Text],
            p3.[Text] AS [CustomerID_Text],
            p4.[Text] AS [CardID_Text],
            p5.[Text] AS [LoggedAlertID_Text],
            p6.[Text] AS [RequestedTransactionID_Text]
        FROM [TransactionLoad] t
        LEFT JOIN [ccvwComboList_c_User] p1 ON t.[UserID] = p1.[ID]
        LEFT JOIN [ccvwComboList_Distributor] p2 ON t.[DistributorID] = p2.[ID]
        LEFT JOIN [ccvwComboList_Customer] p3 ON t.[CustomerID] = p3.[ID]
        LEFT JOIN [ccvwComboList_Card] p4 ON t.[CardID] = p4.[ID]
        LEFT JOIN [ccvwComboList_c_LoggedAlert] p5 ON t.[LoggedAlertID] = p5.[ID]
        LEFT JOIN [ccvwComboList_RequestedTransaction] p6 ON t.[RequestedTransactionID] = p6.[ID]
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_TransactionLoad],
            [ID],
            [UserID],
            [DistributorID],
            [enmLoadType],
            [CustomerID],
            [CardID],
            [enmCurrency],
            [Amount],
            [WhenRequested],
            [ExchangeRateUsed],
            [AmountInILS],
            [PaymentDebitResult],
            [PaymentDebitAuthorizationCode],
            [PaymentDebitDetails],
            [DebitElapsedTimeSec],
            [enmLoadApproved_ApprovalType],
            [LoadResponseCode],
            [LoadResponse],
            [LoadElapsedTimeSec],
            [PaymentCreditResult],
            [PaymentCreditAuthorizationCode],
            [PaymentCreditDetails],
            [CreditElapsedTimeSec],
            [LoggedAlertID],
            [FaultNo],
            [enmLoadResult],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID],
            [clc_Month],
            [enmCoveredBy],
            [Details],
            [CustomerReference],
            [RepresentativeExchangeRate],
            [clc_Day],
            [RequestedTransactionID]
        FROM [TransactionLoad]
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredTransactionLoads]
    @RequestedTransactionID INT = NULL,
    @clc_Day DATETIME = NULL,
    @DistributorID INT = NULL,
    @CustomerReference NVARCHAR(100) = NULL,
    @Amount DECIMAL(18,2) = NULL,
    @CardID INT = NULL,
    @enmLoadType VARCHAR(50) = NULL,
    @enmLoadResult VARCHAR(50) = NULL,
    @enmCurrency VARCHAR(3) = NULL,
    @CustomerID INT = NULL,
    @FaultNo INT = NULL,
    @LoggedAlertID INT = NULL,
    @clc_Month DATETIME = NULL,
    @UserID INT = NULL,
    @WhenRequested DATETIME = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_TransactionLoad],
            t.[ID],
            t.[UserID],
            t.[DistributorID],
            t.[enmLoadType],
            t.[CustomerID],
            t.[CardID],
            t.[enmCurrency],
            t.[Amount],
            t.[WhenRequested],
            t.[ExchangeRateUsed],
            t.[AmountInILS],
            t.[PaymentDebitResult],
            t.[PaymentDebitAuthorizationCode],
            t.[PaymentDebitDetails],
            t.[DebitElapsedTimeSec],
            t.[enmLoadApproved_ApprovalType],
            t.[LoadResponseCode],
            t.[LoadResponse],
            t.[LoadElapsedTimeSec],
            t.[PaymentCreditResult],
            t.[PaymentCreditAuthorizationCode],
            t.[PaymentCreditDetails],
            t.[CreditElapsedTimeSec],
            t.[LoggedAlertID],
            t.[FaultNo],
            t.[enmLoadResult],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            t.[clc_Month],
            t.[enmCoveredBy],
            t.[Details],
            t.[CustomerReference],
            t.[RepresentativeExchangeRate],
            t.[clc_Day],
            t.[RequestedTransactionID],
            p1.[Text] AS [UserID_Text],
            p2.[Text] AS [DistributorID_Text],
            p3.[Text] AS [CustomerID_Text],
            p4.[Text] AS [CardID_Text],
            p5.[Text] AS [LoggedAlertID_Text],
            p6.[Text] AS [RequestedTransactionID_Text]
        FROM [TransactionLoad] t
        LEFT JOIN [ccvwComboList_c_User] p1 ON t.[UserID] = p1.[ID]
        LEFT JOIN [ccvwComboList_Distributor] p2 ON t.[DistributorID] = p2.[ID]
        LEFT JOIN [ccvwComboList_Customer] p3 ON t.[CustomerID] = p3.[ID]
        LEFT JOIN [ccvwComboList_Card] p4 ON t.[CardID] = p4.[ID]
        LEFT JOIN [ccvwComboList_c_LoggedAlert] p5 ON t.[LoggedAlertID] = p5.[ID]
        LEFT JOIN [ccvwComboList_RequestedTransaction] p6 ON t.[RequestedTransactionID] = p6.[ID]
        WHERE 1=1
          AND (@RequestedTransactionID IS NULL OR t.[RequestedTransactionID] = @RequestedTransactionID)
          AND (@clc_Day IS NULL OR t.[clc_Day] = @clc_Day)
          AND (@DistributorID IS NULL OR t.[DistributorID] = @DistributorID)
          AND (@CustomerReference IS NULL OR t.[CustomerReference] LIKE '%' + @CustomerReference + '%')
          AND (@Amount IS NULL OR t.[Amount] = @Amount)
          AND (@CardID IS NULL OR t.[CardID] = @CardID)
          AND (@CardID IS NULL OR t.[CardID] = @CardID)
          AND (@enmLoadType IS NULL OR t.[enmLoadType] LIKE '%' + @enmLoadType + '%')
          AND (@enmLoadResult IS NULL OR t.[enmLoadResult] LIKE '%' + @enmLoadResult + '%')
          AND (@enmCurrency IS NULL OR t.[enmCurrency] LIKE '%' + @enmCurrency + '%')
          AND (@CustomerID IS NULL OR t.[CustomerID] = @CustomerID)
          AND (@DistributorID IS NULL OR t.[DistributorID] = @DistributorID)
          AND (@FaultNo IS NULL OR t.[FaultNo] = @FaultNo)
          AND (@enmLoadResult IS NULL OR t.[enmLoadResult] LIKE '%' + @enmLoadResult + '%')
          AND (@enmLoadType IS NULL OR t.[enmLoadType] LIKE '%' + @enmLoadType + '%')
          AND (@LoggedAlertID IS NULL OR t.[LoggedAlertID] = @LoggedAlertID)
          AND (@clc_Month IS NULL OR t.[clc_Month] = @clc_Month)
          AND (@UserID IS NULL OR t.[UserID] = @UserID)
          AND (@WhenRequested IS NULL OR t.[WhenRequested] = @WhenRequested)
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_TransactionLoad],
            [ID],
            [UserID],
            [DistributorID],
            [enmLoadType],
            [CustomerID],
            [CardID],
            [enmCurrency],
            [Amount],
            [WhenRequested],
            [ExchangeRateUsed],
            [AmountInILS],
            [PaymentDebitResult],
            [PaymentDebitAuthorizationCode],
            [PaymentDebitDetails],
            [DebitElapsedTimeSec],
            [enmLoadApproved_ApprovalType],
            [LoadResponseCode],
            [LoadResponse],
            [LoadElapsedTimeSec],
            [PaymentCreditResult],
            [PaymentCreditAuthorizationCode],
            [PaymentCreditDetails],
            [CreditElapsedTimeSec],
            [LoggedAlertID],
            [FaultNo],
            [enmLoadResult],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID],
            [clc_Month],
            [enmCoveredBy],
            [Details],
            [CustomerReference],
            [RepresentativeExchangeRate],
            [clc_Day],
            [RequestedTransactionID]
        FROM [TransactionLoad]
        WHERE 1=1
          AND (@RequestedTransactionID IS NULL OR [RequestedTransactionID] = @RequestedTransactionID)
          AND (@clc_Day IS NULL OR [clc_Day] = @clc_Day)
          AND (@DistributorID IS NULL OR [DistributorID] = @DistributorID)
          AND (@CustomerReference IS NULL OR [CustomerReference] LIKE '%' + @CustomerReference + '%')
          AND (@Amount IS NULL OR [Amount] = @Amount)
          AND (@CardID IS NULL OR [CardID] = @CardID)
          AND (@CardID IS NULL OR [CardID] = @CardID)
          AND (@enmLoadType IS NULL OR [enmLoadType] LIKE '%' + @enmLoadType + '%')
          AND (@enmLoadResult IS NULL OR [enmLoadResult] LIKE '%' + @enmLoadResult + '%')
          AND (@enmCurrency IS NULL OR [enmCurrency] LIKE '%' + @enmCurrency + '%')
          AND (@CustomerID IS NULL OR [CustomerID] = @CustomerID)
          AND (@DistributorID IS NULL OR [DistributorID] = @DistributorID)
          AND (@FaultNo IS NULL OR [FaultNo] = @FaultNo)
          AND (@enmLoadResult IS NULL OR [enmLoadResult] LIKE '%' + @enmLoadResult + '%')
          AND (@enmLoadType IS NULL OR [enmLoadType] LIKE '%' + @enmLoadType + '%')
          AND (@LoggedAlertID IS NULL OR [LoggedAlertID] = @LoggedAlertID)
          AND (@clc_Month IS NULL OR [clc_Month] = @clc_Month)
          AND (@UserID IS NULL OR [UserID] = @UserID)
          AND (@WhenRequested IS NULL OR [WhenRequested] = @WhenRequested)
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetTransactionLoadByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_TransactionLoad],
        [ID],
        [UserID],
        [DistributorID],
        [enmLoadType],
        [CustomerID],
        [CardID],
        [enmCurrency],
        [Amount],
        [WhenRequested],
        [ExchangeRateUsed],
        [AmountInILS],
        [PaymentDebitResult],
        [PaymentDebitAuthorizationCode],
        [PaymentDebitDetails],
        [DebitElapsedTimeSec],
        [enmLoadApproved_ApprovalType],
        [LoadResponseCode],
        [LoadResponse],
        [LoadElapsedTimeSec],
        [PaymentCreditResult],
        [PaymentCreditAuthorizationCode],
        [PaymentCreditDetails],
        [CreditElapsedTimeSec],
        [LoggedAlertID],
        [FaultNo],
        [enmLoadResult],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [clc_Month],
        [enmCoveredBy],
        [Details],
        [CustomerReference],
        [RepresentativeExchangeRate],
        [clc_Day],
        [RequestedTransactionID]
    FROM [TransactionLoad]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddTransactionLoad]
    @TableName_TransactionLoad bit = NULL,
    @UserID bigint,
    @DistributorID bigint = NULL,
    @enmLoadType varchar(50) = NULL,
    @CustomerID bigint,
    @CardID bigint,
    @enmCurrency varchar(3),
    @Amount decimal(18,0),
    @WhenRequested datetimeoffset = NULL,
    @ExchangeRateUsed decimal(18,0),
    @AmountInILS decimal(18,0),
    @PaymentDebitResult nvarchar(100) = NULL,
    @PaymentDebitAuthorizationCode nvarchar(100) = NULL,
    @PaymentDebitDetails nvarchar(2000) = NULL,
    @DebitElapsedTimeSec float = NULL,
    @enmLoadApproved_ApprovalType nvarchar(100) = NULL,
    @LoadResponseCode nvarchar(200) = NULL,
    @LoadResponse nvarchar(1000) = NULL,
    @LoadElapsedTimeSec float = NULL,
    @PaymentCreditResult nvarchar(100) = NULL,
    @PaymentCreditAuthorizationCode nvarchar(100) = NULL,
    @PaymentCreditDetails nvarchar(2000) = NULL,
    @CreditElapsedTimeSec float = NULL,
    @LoggedAlertID bigint = NULL,
    @FaultNo int = NULL,
    @enmLoadResult varchar(50) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @enmCoveredBy varchar(50) = NULL,
    @Details nvarchar(200) = NULL,
    @CustomerReference nvarchar(100) = NULL,
    @RepresentativeExchangeRate decimal(18,0) = NULL,
    @RequestedTransactionID bigint = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [TransactionLoad] (
        [TableName_TransactionLoad],
        [UserID],
        [DistributorID],
        [enmLoadType],
        [CustomerID],
        [CardID],
        [enmCurrency],
        [Amount],
        [WhenRequested],
        [ExchangeRateUsed],
        [AmountInILS],
        [PaymentDebitResult],
        [PaymentDebitAuthorizationCode],
        [PaymentDebitDetails],
        [DebitElapsedTimeSec],
        [enmLoadApproved_ApprovalType],
        [LoadResponseCode],
        [LoadResponse],
        [LoadElapsedTimeSec],
        [PaymentCreditResult],
        [PaymentCreditAuthorizationCode],
        [PaymentCreditDetails],
        [CreditElapsedTimeSec],
        [LoggedAlertID],
        [FaultNo],
        [enmLoadResult],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [enmCoveredBy],
        [Details],
        [CustomerReference],
        [RepresentativeExchangeRate],
        [RequestedTransactionID],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_TransactionLoad,
        @UserID,
        @DistributorID,
        @enmLoadType,
        @CustomerID,
        @CardID,
        @enmCurrency,
        @Amount,
        @WhenRequested,
        @ExchangeRateUsed,
        @AmountInILS,
        @PaymentDebitResult,
        @PaymentDebitAuthorizationCode,
        @PaymentDebitDetails,
        @DebitElapsedTimeSec,
        @enmLoadApproved_ApprovalType,
        @LoadResponseCode,
        @LoadResponse,
        @LoadElapsedTimeSec,
        @PaymentCreditResult,
        @PaymentCreditAuthorizationCode,
        @PaymentCreditDetails,
        @CreditElapsedTimeSec,
        @LoggedAlertID,
        @FaultNo,
        @enmLoadResult,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        @enmCoveredBy,
        @Details,
        @CustomerReference,
        @RepresentativeExchangeRate,
        @RequestedTransactionID,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateTransactionLoad]
    @ID bigint,
    @TableName_TransactionLoad bit = NULL,
    @UserID bigint,
    @DistributorID bigint = NULL,
    @enmLoadType varchar(50) = NULL,
    @CustomerID bigint,
    @CardID bigint,
    @enmCurrency varchar(3),
    @Amount decimal(18,0),
    @WhenRequested datetimeoffset = NULL,
    @ExchangeRateUsed decimal(18,0),
    @AmountInILS decimal(18,0),
    @PaymentDebitResult nvarchar(100) = NULL,
    @PaymentDebitAuthorizationCode nvarchar(100) = NULL,
    @PaymentDebitDetails nvarchar(2000) = NULL,
    @DebitElapsedTimeSec float = NULL,
    @enmLoadApproved_ApprovalType nvarchar(100) = NULL,
    @LoadResponseCode nvarchar(200) = NULL,
    @LoadResponse nvarchar(1000) = NULL,
    @LoadElapsedTimeSec float = NULL,
    @PaymentCreditResult nvarchar(100) = NULL,
    @PaymentCreditAuthorizationCode nvarchar(100) = NULL,
    @PaymentCreditDetails nvarchar(2000) = NULL,
    @CreditElapsedTimeSec float = NULL,
    @LoggedAlertID bigint = NULL,
    @FaultNo int = NULL,
    @enmLoadResult varchar(50) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @enmCoveredBy varchar(50) = NULL,
    @Details nvarchar(200) = NULL,
    @CustomerReference nvarchar(100) = NULL,
    @RepresentativeExchangeRate decimal(18,0) = NULL,
    @RequestedTransactionID bigint = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [TransactionLoad]
    SET
        [TableName_TransactionLoad] = @TableName_TransactionLoad,
        [UserID] = @UserID,
        [DistributorID] = @DistributorID,
        [enmLoadType] = @enmLoadType,
        [CustomerID] = @CustomerID,
        [CardID] = @CardID,
        [enmCurrency] = @enmCurrency,
        [Amount] = @Amount,
        [WhenRequested] = @WhenRequested,
        [ExchangeRateUsed] = @ExchangeRateUsed,
        [AmountInILS] = @AmountInILS,
        [PaymentDebitResult] = @PaymentDebitResult,
        [PaymentDebitAuthorizationCode] = @PaymentDebitAuthorizationCode,
        [PaymentDebitDetails] = @PaymentDebitDetails,
        [DebitElapsedTimeSec] = @DebitElapsedTimeSec,
        [enmLoadApproved_ApprovalType] = @enmLoadApproved_ApprovalType,
        [LoadResponseCode] = @LoadResponseCode,
        [LoadResponse] = @LoadResponse,
        [LoadElapsedTimeSec] = @LoadElapsedTimeSec,
        [PaymentCreditResult] = @PaymentCreditResult,
        [PaymentCreditAuthorizationCode] = @PaymentCreditAuthorizationCode,
        [PaymentCreditDetails] = @PaymentCreditDetails,
        [CreditElapsedTimeSec] = @CreditElapsedTimeSec,
        [LoggedAlertID] = @LoggedAlertID,
        [FaultNo] = @FaultNo,
        [enmLoadResult] = @enmLoadResult,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [enmCoveredBy] = @enmCoveredBy,
        [Details] = @Details,
        [CustomerReference] = @CustomerReference,
        [RepresentativeExchangeRate] = @RepresentativeExchangeRate,
        [RequestedTransactionID] = @RequestedTransactionID,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteTransactionLoad]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [TransactionLoad]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_TransactionLoad_RequestedTransaction
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetTransactionLoadByREQUESTEDTRANSACTIONID]
    @RequestedTransactionID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_TransactionLoad],
        [ID],
        [UserID],
        [DistributorID],
        [enmLoadType],
        [CustomerID],
        [CardID],
        [enmCurrency],
        [Amount],
        [WhenRequested],
        [ExchangeRateUsed],
        [AmountInILS],
        [PaymentDebitResult],
        [PaymentDebitAuthorizationCode],
        [PaymentDebitDetails],
        [DebitElapsedTimeSec],
        [enmLoadApproved_ApprovalType],
        [LoadResponseCode],
        [LoadResponse],
        [LoadElapsedTimeSec],
        [PaymentCreditResult],
        [PaymentCreditAuthorizationCode],
        [PaymentCreditDetails],
        [CreditElapsedTimeSec],
        [LoggedAlertID],
        [FaultNo],
        [enmLoadResult],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [clc_Month],
        [enmCoveredBy],
        [Details],
        [CustomerReference],
        [RepresentativeExchangeRate],
        [clc_Day],
        [RequestedTransactionID]
    FROM [TransactionLoad]
    WHERE [RequestedTransactionID] = @RequestedTransactionID
;
END

GO

-- Procedure for Index: IX_TransactionLoad_Day
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillTransactionLoadByCLCDAY]
    @clc_Day date
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_TransactionLoad],
        [ID],
        [UserID],
        [DistributorID],
        [enmLoadType],
        [CustomerID],
        [CardID],
        [enmCurrency],
        [Amount],
        [WhenRequested],
        [ExchangeRateUsed],
        [AmountInILS],
        [PaymentDebitResult],
        [PaymentDebitAuthorizationCode],
        [PaymentDebitDetails],
        [DebitElapsedTimeSec],
        [enmLoadApproved_ApprovalType],
        [LoadResponseCode],
        [LoadResponse],
        [LoadElapsedTimeSec],
        [PaymentCreditResult],
        [PaymentCreditAuthorizationCode],
        [PaymentCreditDetails],
        [CreditElapsedTimeSec],
        [LoggedAlertID],
        [FaultNo],
        [enmLoadResult],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [clc_Month],
        [enmCoveredBy],
        [Details],
        [CustomerReference],
        [RepresentativeExchangeRate],
        [clc_Day],
        [RequestedTransactionID]
    FROM [TransactionLoad]
    WHERE [clc_Day] = @clc_Day
    ORDER BY [ID];
END

GO

-- Procedure for Index: IX_TransactionLoad_DistributorID_CustomerReference
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillTransactionLoadByDISTRIBUTORIDAndCUSTOMERREFERENCE]
    @DistributorID bigint,
    @CustomerReference nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_TransactionLoad],
        [ID],
        [UserID],
        [DistributorID],
        [enmLoadType],
        [CustomerID],
        [CardID],
        [enmCurrency],
        [Amount],
        [WhenRequested],
        [ExchangeRateUsed],
        [AmountInILS],
        [PaymentDebitResult],
        [PaymentDebitAuthorizationCode],
        [PaymentDebitDetails],
        [DebitElapsedTimeSec],
        [enmLoadApproved_ApprovalType],
        [LoadResponseCode],
        [LoadResponse],
        [LoadElapsedTimeSec],
        [PaymentCreditResult],
        [PaymentCreditAuthorizationCode],
        [PaymentCreditDetails],
        [CreditElapsedTimeSec],
        [LoggedAlertID],
        [FaultNo],
        [enmLoadResult],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [clc_Month],
        [enmCoveredBy],
        [Details],
        [CustomerReference],
        [RepresentativeExchangeRate],
        [clc_Day],
        [RequestedTransactionID]
    FROM [TransactionLoad]
    WHERE [DistributorID] = @DistributorID AND [CustomerReference] = @CustomerReference
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXTransactionLoad_Amount
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillTransactionLoadByAMOUNT]
    @Amount decimal(18,0)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_TransactionLoad],
        [ID],
        [UserID],
        [DistributorID],
        [enmLoadType],
        [CustomerID],
        [CardID],
        [enmCurrency],
        [Amount],
        [WhenRequested],
        [ExchangeRateUsed],
        [AmountInILS],
        [PaymentDebitResult],
        [PaymentDebitAuthorizationCode],
        [PaymentDebitDetails],
        [DebitElapsedTimeSec],
        [enmLoadApproved_ApprovalType],
        [LoadResponseCode],
        [LoadResponse],
        [LoadElapsedTimeSec],
        [PaymentCreditResult],
        [PaymentCreditAuthorizationCode],
        [PaymentCreditDetails],
        [CreditElapsedTimeSec],
        [LoggedAlertID],
        [FaultNo],
        [enmLoadResult],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [clc_Month],
        [enmCoveredBy],
        [Details],
        [CustomerReference],
        [RepresentativeExchangeRate],
        [clc_Day],
        [RequestedTransactionID]
    FROM [TransactionLoad]
    WHERE [Amount] = @Amount
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXTransactionLoad_CardID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillTransactionLoadByCARDID]
    @CardID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_TransactionLoad],
        [ID],
        [UserID],
        [DistributorID],
        [enmLoadType],
        [CustomerID],
        [CardID],
        [enmCurrency],
        [Amount],
        [WhenRequested],
        [ExchangeRateUsed],
        [AmountInILS],
        [PaymentDebitResult],
        [PaymentDebitAuthorizationCode],
        [PaymentDebitDetails],
        [DebitElapsedTimeSec],
        [enmLoadApproved_ApprovalType],
        [LoadResponseCode],
        [LoadResponse],
        [LoadElapsedTimeSec],
        [PaymentCreditResult],
        [PaymentCreditAuthorizationCode],
        [PaymentCreditDetails],
        [CreditElapsedTimeSec],
        [LoggedAlertID],
        [FaultNo],
        [enmLoadResult],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [clc_Month],
        [enmCoveredBy],
        [Details],
        [CustomerReference],
        [RepresentativeExchangeRate],
        [clc_Day],
        [RequestedTransactionID]
    FROM [TransactionLoad]
    WHERE [CardID] = @CardID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXTransactionLoad_CardID_enmLoadType_LoadResult
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillTransactionLoadByCARDIDAndENMLOADTYPEAndENMLOADRESULT]
    @CardID bigint,
    @enmLoadType varchar(50),
    @enmLoadResult varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_TransactionLoad],
        [ID],
        [UserID],
        [DistributorID],
        [enmLoadType],
        [CustomerID],
        [CardID],
        [enmCurrency],
        [Amount],
        [WhenRequested],
        [ExchangeRateUsed],
        [AmountInILS],
        [PaymentDebitResult],
        [PaymentDebitAuthorizationCode],
        [PaymentDebitDetails],
        [DebitElapsedTimeSec],
        [enmLoadApproved_ApprovalType],
        [LoadResponseCode],
        [LoadResponse],
        [LoadElapsedTimeSec],
        [PaymentCreditResult],
        [PaymentCreditAuthorizationCode],
        [PaymentCreditDetails],
        [CreditElapsedTimeSec],
        [LoggedAlertID],
        [FaultNo],
        [enmLoadResult],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [clc_Month],
        [enmCoveredBy],
        [Details],
        [CustomerReference],
        [RepresentativeExchangeRate],
        [clc_Day],
        [RequestedTransactionID]
    FROM [TransactionLoad]
    WHERE [CardID] = @CardID AND [enmLoadType] = @enmLoadType AND [enmLoadResult] = @enmLoadResult
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXTransactionLoad_Currency
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillTransactionLoadByENMCURRENCY]
    @enmCurrency varchar(3)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_TransactionLoad],
        [ID],
        [UserID],
        [DistributorID],
        [enmLoadType],
        [CustomerID],
        [CardID],
        [enmCurrency],
        [Amount],
        [WhenRequested],
        [ExchangeRateUsed],
        [AmountInILS],
        [PaymentDebitResult],
        [PaymentDebitAuthorizationCode],
        [PaymentDebitDetails],
        [DebitElapsedTimeSec],
        [enmLoadApproved_ApprovalType],
        [LoadResponseCode],
        [LoadResponse],
        [LoadElapsedTimeSec],
        [PaymentCreditResult],
        [PaymentCreditAuthorizationCode],
        [PaymentCreditDetails],
        [CreditElapsedTimeSec],
        [LoggedAlertID],
        [FaultNo],
        [enmLoadResult],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [clc_Month],
        [enmCoveredBy],
        [Details],
        [CustomerReference],
        [RepresentativeExchangeRate],
        [clc_Day],
        [RequestedTransactionID]
    FROM [TransactionLoad]
    WHERE [enmCurrency] = @enmCurrency
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXTransactionLoad_CustomerID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillTransactionLoadByCUSTOMERID]
    @CustomerID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_TransactionLoad],
        [ID],
        [UserID],
        [DistributorID],
        [enmLoadType],
        [CustomerID],
        [CardID],
        [enmCurrency],
        [Amount],
        [WhenRequested],
        [ExchangeRateUsed],
        [AmountInILS],
        [PaymentDebitResult],
        [PaymentDebitAuthorizationCode],
        [PaymentDebitDetails],
        [DebitElapsedTimeSec],
        [enmLoadApproved_ApprovalType],
        [LoadResponseCode],
        [LoadResponse],
        [LoadElapsedTimeSec],
        [PaymentCreditResult],
        [PaymentCreditAuthorizationCode],
        [PaymentCreditDetails],
        [CreditElapsedTimeSec],
        [LoggedAlertID],
        [FaultNo],
        [enmLoadResult],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [clc_Month],
        [enmCoveredBy],
        [Details],
        [CustomerReference],
        [RepresentativeExchangeRate],
        [clc_Day],
        [RequestedTransactionID]
    FROM [TransactionLoad]
    WHERE [CustomerID] = @CustomerID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXTransactionLoad_DistributorID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillTransactionLoadByDISTRIBUTORID]
    @DistributorID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_TransactionLoad],
        [ID],
        [UserID],
        [DistributorID],
        [enmLoadType],
        [CustomerID],
        [CardID],
        [enmCurrency],
        [Amount],
        [WhenRequested],
        [ExchangeRateUsed],
        [AmountInILS],
        [PaymentDebitResult],
        [PaymentDebitAuthorizationCode],
        [PaymentDebitDetails],
        [DebitElapsedTimeSec],
        [enmLoadApproved_ApprovalType],
        [LoadResponseCode],
        [LoadResponse],
        [LoadElapsedTimeSec],
        [PaymentCreditResult],
        [PaymentCreditAuthorizationCode],
        [PaymentCreditDetails],
        [CreditElapsedTimeSec],
        [LoggedAlertID],
        [FaultNo],
        [enmLoadResult],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [clc_Month],
        [enmCoveredBy],
        [Details],
        [CustomerReference],
        [RepresentativeExchangeRate],
        [clc_Day],
        [RequestedTransactionID]
    FROM [TransactionLoad]
    WHERE [DistributorID] = @DistributorID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXTransactionLoad_FaultNo
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillTransactionLoadByFAULTNO]
    @FaultNo int
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_TransactionLoad],
        [ID],
        [UserID],
        [DistributorID],
        [enmLoadType],
        [CustomerID],
        [CardID],
        [enmCurrency],
        [Amount],
        [WhenRequested],
        [ExchangeRateUsed],
        [AmountInILS],
        [PaymentDebitResult],
        [PaymentDebitAuthorizationCode],
        [PaymentDebitDetails],
        [DebitElapsedTimeSec],
        [enmLoadApproved_ApprovalType],
        [LoadResponseCode],
        [LoadResponse],
        [LoadElapsedTimeSec],
        [PaymentCreditResult],
        [PaymentCreditAuthorizationCode],
        [PaymentCreditDetails],
        [CreditElapsedTimeSec],
        [LoggedAlertID],
        [FaultNo],
        [enmLoadResult],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [clc_Month],
        [enmCoveredBy],
        [Details],
        [CustomerReference],
        [RepresentativeExchangeRate],
        [clc_Day],
        [RequestedTransactionID]
    FROM [TransactionLoad]
    WHERE [FaultNo] = @FaultNo
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXTransactionLoad_LoadResult
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillTransactionLoadByENMLOADRESULT]
    @enmLoadResult varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_TransactionLoad],
        [ID],
        [UserID],
        [DistributorID],
        [enmLoadType],
        [CustomerID],
        [CardID],
        [enmCurrency],
        [Amount],
        [WhenRequested],
        [ExchangeRateUsed],
        [AmountInILS],
        [PaymentDebitResult],
        [PaymentDebitAuthorizationCode],
        [PaymentDebitDetails],
        [DebitElapsedTimeSec],
        [enmLoadApproved_ApprovalType],
        [LoadResponseCode],
        [LoadResponse],
        [LoadElapsedTimeSec],
        [PaymentCreditResult],
        [PaymentCreditAuthorizationCode],
        [PaymentCreditDetails],
        [CreditElapsedTimeSec],
        [LoggedAlertID],
        [FaultNo],
        [enmLoadResult],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [clc_Month],
        [enmCoveredBy],
        [Details],
        [CustomerReference],
        [RepresentativeExchangeRate],
        [clc_Day],
        [RequestedTransactionID]
    FROM [TransactionLoad]
    WHERE [enmLoadResult] = @enmLoadResult
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXTransactionLoad_LoadType
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillTransactionLoadByENMLOADTYPE]
    @enmLoadType varchar(50)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_TransactionLoad],
        [ID],
        [UserID],
        [DistributorID],
        [enmLoadType],
        [CustomerID],
        [CardID],
        [enmCurrency],
        [Amount],
        [WhenRequested],
        [ExchangeRateUsed],
        [AmountInILS],
        [PaymentDebitResult],
        [PaymentDebitAuthorizationCode],
        [PaymentDebitDetails],
        [DebitElapsedTimeSec],
        [enmLoadApproved_ApprovalType],
        [LoadResponseCode],
        [LoadResponse],
        [LoadElapsedTimeSec],
        [PaymentCreditResult],
        [PaymentCreditAuthorizationCode],
        [PaymentCreditDetails],
        [CreditElapsedTimeSec],
        [LoggedAlertID],
        [FaultNo],
        [enmLoadResult],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [clc_Month],
        [enmCoveredBy],
        [Details],
        [CustomerReference],
        [RepresentativeExchangeRate],
        [clc_Day],
        [RequestedTransactionID]
    FROM [TransactionLoad]
    WHERE [enmLoadType] = @enmLoadType
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXTransactionLoad_LoggedAlertID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillTransactionLoadByLOGGEDALERTID]
    @LoggedAlertID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_TransactionLoad],
        [ID],
        [UserID],
        [DistributorID],
        [enmLoadType],
        [CustomerID],
        [CardID],
        [enmCurrency],
        [Amount],
        [WhenRequested],
        [ExchangeRateUsed],
        [AmountInILS],
        [PaymentDebitResult],
        [PaymentDebitAuthorizationCode],
        [PaymentDebitDetails],
        [DebitElapsedTimeSec],
        [enmLoadApproved_ApprovalType],
        [LoadResponseCode],
        [LoadResponse],
        [LoadElapsedTimeSec],
        [PaymentCreditResult],
        [PaymentCreditAuthorizationCode],
        [PaymentCreditDetails],
        [CreditElapsedTimeSec],
        [LoggedAlertID],
        [FaultNo],
        [enmLoadResult],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [clc_Month],
        [enmCoveredBy],
        [Details],
        [CustomerReference],
        [RepresentativeExchangeRate],
        [clc_Day],
        [RequestedTransactionID]
    FROM [TransactionLoad]
    WHERE [LoggedAlertID] = @LoggedAlertID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXTransactionLoad_Month
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillTransactionLoadByCLCMONTH]
    @clc_Month date
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_TransactionLoad],
        [ID],
        [UserID],
        [DistributorID],
        [enmLoadType],
        [CustomerID],
        [CardID],
        [enmCurrency],
        [Amount],
        [WhenRequested],
        [ExchangeRateUsed],
        [AmountInILS],
        [PaymentDebitResult],
        [PaymentDebitAuthorizationCode],
        [PaymentDebitDetails],
        [DebitElapsedTimeSec],
        [enmLoadApproved_ApprovalType],
        [LoadResponseCode],
        [LoadResponse],
        [LoadElapsedTimeSec],
        [PaymentCreditResult],
        [PaymentCreditAuthorizationCode],
        [PaymentCreditDetails],
        [CreditElapsedTimeSec],
        [LoggedAlertID],
        [FaultNo],
        [enmLoadResult],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [clc_Month],
        [enmCoveredBy],
        [Details],
        [CustomerReference],
        [RepresentativeExchangeRate],
        [clc_Day],
        [RequestedTransactionID]
    FROM [TransactionLoad]
    WHERE [clc_Month] = @clc_Month
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXTransactionLoad_UserID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillTransactionLoadByUSERID]
    @UserID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_TransactionLoad],
        [ID],
        [UserID],
        [DistributorID],
        [enmLoadType],
        [CustomerID],
        [CardID],
        [enmCurrency],
        [Amount],
        [WhenRequested],
        [ExchangeRateUsed],
        [AmountInILS],
        [PaymentDebitResult],
        [PaymentDebitAuthorizationCode],
        [PaymentDebitDetails],
        [DebitElapsedTimeSec],
        [enmLoadApproved_ApprovalType],
        [LoadResponseCode],
        [LoadResponse],
        [LoadElapsedTimeSec],
        [PaymentCreditResult],
        [PaymentCreditAuthorizationCode],
        [PaymentCreditDetails],
        [CreditElapsedTimeSec],
        [LoggedAlertID],
        [FaultNo],
        [enmLoadResult],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [clc_Month],
        [enmCoveredBy],
        [Details],
        [CustomerReference],
        [RepresentativeExchangeRate],
        [clc_Day],
        [RequestedTransactionID]
    FROM [TransactionLoad]
    WHERE [UserID] = @UserID
    ORDER BY [ID];
END

GO

-- Procedure for Index: IXTransactionLoad_WhenRequested
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillTransactionLoadByWHENREQUESTED]
    @WhenRequested datetimeoffset
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_TransactionLoad],
        [ID],
        [UserID],
        [DistributorID],
        [enmLoadType],
        [CustomerID],
        [CardID],
        [enmCurrency],
        [Amount],
        [WhenRequested],
        [ExchangeRateUsed],
        [AmountInILS],
        [PaymentDebitResult],
        [PaymentDebitAuthorizationCode],
        [PaymentDebitDetails],
        [DebitElapsedTimeSec],
        [enmLoadApproved_ApprovalType],
        [LoadResponseCode],
        [LoadResponse],
        [LoadElapsedTimeSec],
        [PaymentCreditResult],
        [PaymentCreditAuthorizationCode],
        [PaymentCreditDetails],
        [CreditElapsedTimeSec],
        [LoggedAlertID],
        [FaultNo],
        [enmLoadResult],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [clc_Month],
        [enmCoveredBy],
        [Details],
        [CustomerReference],
        [RepresentativeExchangeRate],
        [clc_Day],
        [RequestedTransactionID]
    FROM [TransactionLoad]
    WHERE [WhenRequested] = @WhenRequested
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: TransactionLoadAccount
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllTransactionLoadAccounts]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_TransactionLoadAccount],
        [ID],
        [Account],
        [enmCurrency],
        [Amount],
        [BankReference],
        [CardIssuerRequestNumber],
        [ResponseCode],
        [ResponseText],
        [LoggedAlertID],
        [WhenRequested],
        [WhenResponded],
        [WhenConfirmed],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [enmCardBrand]
    FROM [TransactionLoadAccount]
    ORDER BY [ID]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetTransactionLoadAccountByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_TransactionLoadAccount],
        [ID],
        [Account],
        [enmCurrency],
        [Amount],
        [BankReference],
        [CardIssuerRequestNumber],
        [ResponseCode],
        [ResponseText],
        [LoggedAlertID],
        [WhenRequested],
        [WhenResponded],
        [WhenConfirmed],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [enmCardBrand]
    FROM [TransactionLoadAccount]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddTransactionLoadAccount]
    @TableName_TransactionLoadAccount bit = NULL,
    @Account varchar(50),
    @enmCurrency varchar(4),
    @Amount decimal(18,0),
    @BankReference nvarchar(200),
    @CardIssuerRequestNumber varchar(50) = NULL,
    @ResponseCode nvarchar(100),
    @ResponseText nvarchar(MAX),
    @LoggedAlertID bigint,
    @WhenRequested datetimeoffset = NULL,
    @WhenResponded datetimeoffset = NULL,
    @WhenConfirmed datetimeoffset = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @enmCardBrand varchar(50) = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [TransactionLoadAccount] (
        [TableName_TransactionLoadAccount],
        [Account],
        [enmCurrency],
        [Amount],
        [BankReference],
        [CardIssuerRequestNumber],
        [ResponseCode],
        [ResponseText],
        [LoggedAlertID],
        [WhenRequested],
        [WhenResponded],
        [WhenConfirmed],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [enmCardBrand],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_TransactionLoadAccount,
        @Account,
        @enmCurrency,
        @Amount,
        @BankReference,
        @CardIssuerRequestNumber,
        @ResponseCode,
        @ResponseText,
        @LoggedAlertID,
        @WhenRequested,
        @WhenResponded,
        @WhenConfirmed,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        @enmCardBrand,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateTransactionLoadAccount]
    @ID bigint,
    @TableName_TransactionLoadAccount bit = NULL,
    @Account varchar(50),
    @enmCurrency varchar(4),
    @Amount decimal(18,0),
    @BankReference nvarchar(200),
    @CardIssuerRequestNumber varchar(50) = NULL,
    @ResponseCode nvarchar(100),
    @ResponseText nvarchar(MAX),
    @LoggedAlertID bigint,
    @WhenRequested datetimeoffset = NULL,
    @WhenResponded datetimeoffset = NULL,
    @WhenConfirmed datetimeoffset = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @enmCardBrand varchar(50) = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [TransactionLoadAccount]
    SET
        [TableName_TransactionLoadAccount] = @TableName_TransactionLoadAccount,
        [Account] = @Account,
        [enmCurrency] = @enmCurrency,
        [Amount] = @Amount,
        [BankReference] = @BankReference,
        [CardIssuerRequestNumber] = @CardIssuerRequestNumber,
        [ResponseCode] = @ResponseCode,
        [ResponseText] = @ResponseText,
        [LoggedAlertID] = @LoggedAlertID,
        [WhenRequested] = @WhenRequested,
        [WhenResponded] = @WhenResponded,
        [WhenConfirmed] = @WhenConfirmed,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [enmCardBrand] = @enmCardBrand,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteTransactionLoadAccount]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [TransactionLoadAccount]
    WHERE [ID] = @ID;
END

GO



-- =========================================
-- Stored Procedures for Table: UIText
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllUITexts]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_UIText],
        [ID],
        [Page],
        [Name],
        [locText],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [UIText]
    ORDER BY [ID]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredUITexts]
    @Page VARCHAR(100) = NULL,
    @Name VARCHAR(150) = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_UIText],
        [ID],
        [Page],
        [Name],
        [locText],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [UIText]
    WHERE 1=1
      AND (@Page IS NULL OR [Page] LIKE '%' + @Page + '%')
      AND (@Name IS NULL OR [Name] LIKE '%' + @Name + '%')
      AND (@Page IS NULL OR [Page] LIKE '%' + @Page + '%')
    ORDER BY [ID]
    OFFSET ISNULL(@Skip, 0) ROWS
    FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetUITextByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_UIText],
        [ID],
        [Page],
        [Name],
        [locText],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [UIText]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddUIText]
    @TableName_UIText bit = NULL,
    @Page varchar(100),
    @Name varchar(150),
    @locText nvarchar(MAX) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [UIText] (
        [TableName_UIText],
        [Page],
        [Name],
        [locText],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_UIText,
        @Page,
        @Name,
        @locText,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateUIText]
    @ID bigint,
    @TableName_UIText bit = NULL,
    @Page varchar(100),
    @Name varchar(150),
    @locText nvarchar(MAX) = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [UIText]
    SET
        [TableName_UIText] = @TableName_UIText,
        [Page] = @Page,
        [Name] = @Name,
        [locText] = @locText,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteUIText]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [UIText]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IXUIText_Page_Name
-- Index Type: Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_GetUITextByPAGEAndNAME]
    @Page varchar(100),
    @Name varchar(150)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_UIText],
        [ID],
        [Page],
        [Name],
        [locText],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [UIText]
    WHERE [Page] = @Page AND [Name] = @Name
;
END

GO

-- Procedure for Index: IXUIText_Page
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillUITextByPAGE]
    @Page varchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_UIText],
        [ID],
        [Page],
        [Name],
        [locText],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [UIText]
    WHERE [Page] = @Page
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: UserApproval
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllUserApprovals]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_UserApproval],
            t.[ID],
            t.[UserID],
            t.[FunctionName],
            t.[enoInteriorCode],
            t.[enoAuthorizationCode],
            t.[entDetails],
            t.[ValidUntil],
            t.[spt_WasUsed],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            p1.[Text] AS [UserID_Text]
        FROM [UserApproval] t
        LEFT JOIN [ccvwComboList_c_User] p1 ON t.[UserID] = p1.[ID]
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_UserApproval],
            [ID],
            [UserID],
            [FunctionName],
            [enoInteriorCode],
            [enoAuthorizationCode],
            [entDetails],
            [ValidUntil],
            [spt_WasUsed],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID]
        FROM [UserApproval]
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetFilteredUserApprovals]
    @UserID INT = NULL,
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    IF @WithParentText = 1
    BEGIN
        SELECT
            t.[TableName_UserApproval],
            t.[ID],
            t.[UserID],
            t.[FunctionName],
            t.[enoInteriorCode],
            t.[enoAuthorizationCode],
            t.[entDetails],
            t.[ValidUntil],
            t.[spt_WasUsed],
            t.[AddedBy],
            t.[AddedOn],
            t.[ChangedBy],
            t.[ChangedOn],
            t.[DeletedBy],
            t.[DeletedOn],
            t.[UpdatingLoginID],
            p1.[Text] AS [UserID_Text]
        FROM [UserApproval] t
        LEFT JOIN [ccvwComboList_c_User] p1 ON t.[UserID] = p1.[ID]
        WHERE 1=1
          AND (@UserID IS NULL OR t.[UserID] = @UserID)
        ORDER BY t.[ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
    ELSE
    BEGIN
        SELECT
            [TableName_UserApproval],
            [ID],
            [UserID],
            [FunctionName],
            [enoInteriorCode],
            [enoAuthorizationCode],
            [entDetails],
            [ValidUntil],
            [spt_WasUsed],
            [AddedBy],
            [AddedOn],
            [ChangedBy],
            [ChangedOn],
            [DeletedBy],
            [DeletedOn],
            [UpdatingLoginID]
        FROM [UserApproval]
        WHERE 1=1
          AND (@UserID IS NULL OR [UserID] = @UserID)
        ORDER BY [ID]
        OFFSET ISNULL(@Skip, 0) ROWS
        FETCH NEXT ISNULL(@Take, 2147483647) ROWS ONLY;
    END
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_GetUserApprovalByID]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_UserApproval],
        [ID],
        [UserID],
        [FunctionName],
        [enoInteriorCode],
        [enoAuthorizationCode],
        [entDetails],
        [ValidUntil],
        [spt_WasUsed],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [UserApproval]
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_AddUserApproval]
    @TableName_UserApproval bit = NULL,
    @UserID bigint,
    @FunctionName varchar(50),
    @enoInteriorCode varchar(64),
    @enoAuthorizationCode varchar(64),
    @entDetails varchar(MAX) = NULL,
    @ValidUntil datetimeoffset,
    @spt_WasUsed bit = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @AddedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [UserApproval] (
        [TableName_UserApproval],
        [UserID],
        [FunctionName],
        [enoInteriorCode],
        [enoAuthorizationCode],
        [entDetails],
        [ValidUntil],
        [spt_WasUsed],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [AddedOn],
        [AddedBy]
    )
    VALUES (
        @TableName_UserApproval,
        @UserID,
        @FunctionName,
        @enoInteriorCode,
        @enoAuthorizationCode,
        @entDetails,
        @ValidUntil,
        @spt_WasUsed,
        @DeletedBy,
        @DeletedOn,
        @UpdatingLoginID,
        GETDATE(),
        @AddedBy
    );

    SELECT SCOPE_IDENTITY() AS NewID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_UpdateUserApproval]
    @ID bigint,
    @TableName_UserApproval bit = NULL,
    @UserID bigint,
    @FunctionName varchar(50),
    @enoInteriorCode varchar(64),
    @enoAuthorizationCode varchar(64),
    @entDetails varchar(MAX) = NULL,
    @ValidUntil datetimeoffset,
    @spt_WasUsed bit = NULL,
    @DeletedBy nvarchar(100) = NULL,
    @DeletedOn datetime = NULL,
    @UpdatingLoginID bigint = NULL,
    @ChangedBy nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [UserApproval]
    SET
        [TableName_UserApproval] = @TableName_UserApproval,
        [UserID] = @UserID,
        [FunctionName] = @FunctionName,
        [enoInteriorCode] = @enoInteriorCode,
        [enoAuthorizationCode] = @enoAuthorizationCode,
        [entDetails] = @entDetails,
        [ValidUntil] = @ValidUntil,
        [spt_WasUsed] = @spt_WasUsed,
        [DeletedBy] = @DeletedBy,
        [DeletedOn] = @DeletedOn,
        [UpdatingLoginID] = @UpdatingLoginID,
        [ChangedOn] = GETDATE(),
        [ChangedBy] = @ChangedBy
    WHERE [ID] = @ID;
END

GO

CREATE OR ALTER PROCEDURE [dbo].[SP_DeleteUserApproval]
    @ID bigint
AS
BEGIN
    SET NOCOUNT ON;

    DELETE FROM [UserApproval]
    WHERE [ID] = @ID;
END

GO

-- Procedure for Index: IX_UserApproval_UserID
-- Index Type: Non-Unique

CREATE OR ALTER PROCEDURE [dbo].[SP_FillUserApprovalByUSERID]
    @UserID bigint
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_UserApproval],
        [ID],
        [UserID],
        [FunctionName],
        [enoInteriorCode],
        [enoAuthorizationCode],
        [entDetails],
        [ValidUntil],
        [spt_WasUsed],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [UserApproval]
    WHERE [UserID] = @UserID
    ORDER BY [ID];
END

GO


-- =========================================
-- Stored Procedures for Table: vwCustomerCardStatus
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllVwCustomerCardStatuss]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [CustomerID],
        [HasCard],
        [IsraelIDNumber],
        [Email],
        [CellphoneNumber],
        [CardClubID],
        [Cid],
        [CardLast4Numbers]
    FROM [vwCustomerCardStatus]
;
END

GO



-- =========================================
-- Stored Procedures for Table: vwCustomerCardStatusData
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllVwCustomerCardStatusDatas]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [CustomerID],
        [HasCard],
        [IsraelIDNumber],
        [Email],
        [CellphoneNumber],
        [CardClubID],
        [Cid],
        [CardLast4Numbers]
    FROM [vwCustomerCardStatusData]
;
END

GO



-- =========================================
-- Stored Procedures for Table: vwCustomerSecurityStatusCheck
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllVwCustomerSecurityStatusChecks]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [CustomerID],
        [CustomerName],
        [CustomerIdentifier],
        [CustomerPhone],
        [CustomerEmail],
        [enmCustomerType],
        [enmSecurityTier],
        [IsBusiness],
        [WalletBalanceWorking],
        [TotalTransferredToWallet],
        [TotalTransferredToWallet6Months],
        [TotalTransferredToWallet1Month],
        [HasSignedServiceRequest]
    FROM [vwCustomerSecurityStatusCheck]
;
END

GO



-- =========================================
-- Stored Procedures for Table: vwCustomerSecurityStatusCheckData
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllVwCustomerSecurityStatusCheckDatas]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [CustomerID],
        [CustomerName],
        [CustomerIdentifier],
        [CustomerPhone],
        [CustomerEmail],
        [enmCustomerType],
        [enmSecurityTier],
        [IsBusiness],
        [WalletBalanceWorking],
        [TotalTransferredToWallet],
        [TotalTransferredToWallet6Months],
        [TotalTransferredToWallet1Month],
        [HasSignedServiceRequest]
    FROM [vwCustomerSecurityStatusCheckData]
;
END

GO



-- =========================================
-- Stored Procedures for Table: vwOnlineCardTransaction
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllVwOnlineCardTransactions]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [Cid],
        [CardID],
        [Customer],
        [Currency],
        [AuthorizationCode],
        [TransactionStatus],
        [DateBuy],
        [ApproveDateTime],
        [DepositDate],
        [TranTypeDescription],
        [TranModeCode],
        [IsEMV],
        [OrigCurrency],
        [OrigAmount],
        [TotalAmount],
        [ExchangeRate],
        [MerchantNumber],
        [MerchantName],
        [lkpMerchantCategory],
        [MerchantAddress],
        [City],
        [CountryName],
        [ChargeAmountNoVAT],
        [VatAmount],
        [CommissionAmount]
    FROM [vwOnlineCardTransaction]
;
END

GO



-- =========================================
-- Stored Procedures for Table: vwReportCardActivity
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllVwReportCardActivitys]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [CardID],
        [CustomerID],
        [OwningDistributorID],
        [enmCurrency],
        [PresentBalance],
        [enmStatusAtCardIssuer],
        [enmStatusAtICP],
        [WhenStatusAtICPChanged],
        [DateMonthlyFeeDatePaidForPresentMonth],
        [Transactions],
        [TotalTransactionAmount],
        [Loads],
        [TotalLoadAmount],
        [ActivityLevel],
        [ReportStartDate],
        [ReportEndDate]
    FROM [vwReportCardActivity]
;
END

GO



-- =========================================
-- Stored Procedures for Table: vwReportCardActivityData
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllVwReportCardActivityDatas]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [CardID],
        [CustomerID],
        [OwningDistributorID],
        [enmCurrency],
        [PresentBalance],
        [enmStatusAtCardIssuer],
        [enmStatusAtICP],
        [WhenStatusAtICPChanged],
        [DateMonthlyFeeDatePaidForPresentMonth],
        [Transactions],
        [TotalTransactionAmount],
        [Loads],
        [TotalLoadAmount],
        [ActivityLevel],
        [ReportStartDate],
        [ReportEndDate],
        [CardText],
        [CustomerText],
        [OwningDistributorText]
    FROM [vwReportCardActivityData]
;
END

GO



-- =========================================
-- Stored Procedures for Table: vwReportCustomerBankTransfer
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllVwReportCustomerBankTransfers]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [CustomerWalletID],
        [CustomerNo],
        [CustomerID],
        [lkpBank],
        [lkpBranch],
        [BankAccount],
        [Amount],
        [WhenApproved],
        [WhoInitiatedID],
        [Reference],
        [Comments],
        [DateApproved],
        [MonthApproved]
    FROM [vwReportCustomerBankTransfer]
;
END

GO



-- =========================================
-- Stored Procedures for Table: vwReportCustomerBankTransferData
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllVwReportCustomerBankTransferDatas]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [CustomerWalletID],
        [CustomerNo],
        [CustomerID],
        [lkpBank],
        [lkpBranch],
        [BankAccount],
        [Amount],
        [WhenApproved],
        [WhoInitiatedID],
        [Reference],
        [Comments],
        [DateApproved],
        [MonthApproved]
    FROM [vwReportCustomerBankTransferData]
;
END

GO



-- =========================================
-- Stored Procedures for Table: vwReportCustomerCreditCardTransactions
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllVwReportCustomerCreditCardTransactionss]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [TransactionCreditCardID],
        [CustomerWalletID],
        [WhenDone],
        [CustomerNo],
        [CustomerID],
        [NumberOfPayments],
        [TotalPaymentAmount],
        [CardLast4Numbers],
        [lkpClearingHouse],
        [lkpCardBrand],
        [CreditCardFee],
        [Interest],
        [DateDone],
        [MonthDone]
    FROM [vwReportCustomerCreditCardTransactions]
;
END

GO



-- =========================================
-- Stored Procedures for Table: vwReportCustomerCreditCardTransactionsData
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllVwReportCustomerCreditCardTransactionsDatas]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [TransactionCreditCardID],
        [CustomerWalletID],
        [WhenDone],
        [CustomerNo],
        [CustomerID],
        [NumberOfPayments],
        [TotalPaymentAmount],
        [CardLast4Numbers],
        [lkpClearingHouse],
        [lkpCardBrand],
        [CreditCardFee],
        [Interest],
        [DateDone],
        [MonthDone]
    FROM [vwReportCustomerCreditCardTransactionsData]
;
END

GO



-- =========================================
-- Stored Procedures for Table: vwReportCustomerWalletBalance
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllVwReportCustomerWalletBalances]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [CustomerID],
        [EffectiveDate],
        [BalanceOnEffectiveDate],
        [PresentRawBalance],
        [PresentCommittedBalance]
    FROM [vwReportCustomerWalletBalance]
;
END

GO



-- =========================================
-- Stored Procedures for Table: vwReportCustomerWalletBalanceData
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllVwReportCustomerWalletBalanceDatas]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [CustomerID],
        [EffectiveDate],
        [BalanceOnEffectiveDate],
        [PresentRawBalance],
        [PresentCommittedBalance],
        [CustomerText]
    FROM [vwReportCustomerWalletBalanceData]
;
END

GO



-- =========================================
-- Stored Procedures for Table: vwReportCustomerWalletBalanceForLawyer
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllVwReportCustomerWalletBalanceForLawyers]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [CustomerID],
        [EffectiveDate],
        [PresentRawBalance],
        [enmCustomerType]
    FROM [vwReportCustomerWalletBalanceForLawyer]
;
END

GO



-- =========================================
-- Stored Procedures for Table: vwReportCustomerWalletBalanceForLawyerData
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllVwReportCustomerWalletBalanceForLawyerDatas]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [CustomerID],
        [EffectiveDate],
        [PresentRawBalance],
        [enmCustomerType]
    FROM [vwReportCustomerWalletBalanceForLawyerData]
;
END

GO



-- =========================================
-- Stored Procedures for Table: vwReportDistributorObligoBalance
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllVwReportDistributorObligoBalances]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [DistributorID],
        [EffectiveDate],
        [BalanceOnEffectiveDate],
        [PresentBalance]
    FROM [vwReportDistributorObligoBalance]
;
END

GO



-- =========================================
-- Stored Procedures for Table: vwReportDistributorObligoBalanceData
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllVwReportDistributorObligoBalanceDatas]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [DistributorID],
        [EffectiveDate],
        [BalanceOnEffectiveDate],
        [PresentBalance],
        [TEXT]
    FROM [vwReportDistributorObligoBalanceData]
;
END

GO



-- =========================================
-- Stored Procedures for Table: vwReportFromChanger
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllVwReportFromChangers]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [CustomerID],
        [CustomerWalletID],
        [enmBackofficeTransactionType],
        [enmType_WalletTransactionType],
        [AmountToAccountOwner],
        [Description],
        [Reference],
        [WhenRequested],
        [RequestingUser],
        [CodeForInvoice],
        [Comments],
        [DistributorID],
        [BusinessName]
    FROM [vwReportFromChanger]
;
END

GO



-- =========================================
-- Stored Procedures for Table: vwReportFromChangerData
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllVwReportFromChangerDatas]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [CustomerID],
        [CustomerWalletID],
        [enmBackofficeTransactionType],
        [enmType_WalletTransactionType],
        [AmountToAccountOwner],
        [Description],
        [Reference],
        [WhenRequested],
        [RequestingUser],
        [CodeForInvoice],
        [Comments],
        [DistributorID],
        [BusinessName]
    FROM [vwReportFromChangerData]
;
END

GO



-- =========================================
-- Stored Procedures for Table: vwReportLoadTransferToDistributor
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllVwReportLoadTransferToDistributors]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [TransactionLoadID],
        [LoadType],
        [BackofficeTransactionType],
        [DistributorID],
        [CustomerID],
        [CardID],
        [AmountToTransfertToICP],
        [TransactionCurrency],
        [TransactionAmount],
        [TransactionExchangeRateUsed],
        [TransactionAmountInILS],
        [WhenRequested],
        [WhenToExecute],
        [spt_WhenSentToSAP],
        [InvoiceText]
    FROM [vwReportLoadTransferToDistributor]
;
END

GO



-- =========================================
-- Stored Procedures for Table: vwReportLoadTransferToDistributorData
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllVwReportLoadTransferToDistributorDatas]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [TransactionLoadID],
        [LoadType],
        [BackofficeTransactionType],
        [DistributorID],
        [CustomerID],
        [CardID],
        [AmountToTransfertToICP],
        [TransactionCurrency],
        [TransactionAmount],
        [TransactionExchangeRateUsed],
        [TransactionAmountInILS],
        [WhenRequested],
        [WhenToExecute],
        [spt_WhenSentToSAP],
        [InvoiceText]
    FROM [vwReportLoadTransferToDistributorData]
;
END

GO



-- =========================================
-- Stored Procedures for Table: vwReportMonthlyCardFee
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllVwReportMonthlyCardFees]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [Month],
        [CustomerIdentifier],
        [CustomerName],
        [CardCid],
        [CardLast4Numbers],
        [CardCurrency],
        [CardClubName],
        [CardIssuerOrgCode],
        [FeeAmount],
        [WhenRequested],
        [RequestingUser],
        [CustomerEmail],
        [CustomerCellphoneNumber]
    FROM [vwReportMonthlyCardFee]
;
END

GO



-- =========================================
-- Stored Procedures for Table: vwReportMonthlyCardFeeData
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllVwReportMonthlyCardFeeDatas]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [Month],
        [CustomerIdentifier],
        [CustomerName],
        [CardCid],
        [CardLast4Numbers],
        [CardCurrency],
        [CardClubName],
        [CardIssuerOrgCode],
        [FeeAmount],
        [WhenRequested],
        [RequestingUser],
        [CustomerEmail],
        [CustomerCellphoneNumber]
    FROM [vwReportMonthlyCardFeeData]
;
END

GO



-- =========================================
-- Stored Procedures for Table: vwReportToChanger
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllVwReportToChangers]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [CustomerID],
        [CustomerWalletID],
        [enmBackofficeTransactionType],
        [enmType_WalletTransactionType],
        [AmountToAccountOwner],
        [Description],
        [Reference],
        [WhenRequested],
        [RequestingUser],
        [CodeForInvoice],
        [Comments],
        [DistributorID],
        [BusinessName]
    FROM [vwReportToChanger]
;
END

GO



-- =========================================
-- Stored Procedures for Table: vwReportToChangerData
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllVwReportToChangerDatas]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [CustomerID],
        [CustomerWalletID],
        [enmBackofficeTransactionType],
        [enmType_WalletTransactionType],
        [AmountToAccountOwner],
        [Description],
        [Reference],
        [WhenRequested],
        [RequestingUser],
        [CodeForInvoice],
        [Comments],
        [DistributorID],
        [BusinessName]
    FROM [vwReportToChangerData]
;
END

GO



-- =========================================
-- Stored Procedures for Table: vwReportWalletTransfer
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllVwReportWalletTransfers]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [CustomerID],
        [CustomerWalletID],
        [enmBackofficeTransactionType],
        [enmType_WalletTransactionType],
        [AmountToAccountOwner],
        [BalanceAfterTransaction],
        [enmAccountOwner],
        [Description],
        [Reference],
        [WhenRequested],
        [RequestingUser],
        [CodeForInvoice],
        [Comments],
        [CreditCardFee],
        [Interest],
        [NumberOfPayments],
        [CardLast4Numbers]
    FROM [vwReportWalletTransfer]
;
END

GO



-- =========================================
-- Stored Procedures for Table: vwReportWalletTransferData
-- Generated: 2025-12-27 19:28:31 UTC
-- =========================================

CREATE OR ALTER PROCEDURE [dbo].[SP_GetAllVwReportWalletTransferDatas]
    @Skip INT = NULL,
    @Take INT = NULL,
    @WithParentText BIT = 1
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [CustomerID],
        [CustomerWalletID],
        [enmBackofficeTransactionType],
        [enmType_WalletTransactionType],
        [AmountToAccountOwner],
        [BalanceAfterTransaction],
        [enmAccountOwner],
        [Description],
        [Reference],
        [WhenRequested],
        [RequestingUser],
        [CodeForInvoice],
        [Comments],
        [CreditCardFee],
        [Interest],
        [NumberOfPayments],
        [CardLast4Numbers]
    FROM [vwReportWalletTransferData]
;
END

GO



-- =========================================
-- Foreign Key Relationship Procedures
-- (Master-Detail Views)
-- =========================================

-- =========================================
-- SP_GetJobJobAlertRecipients
-- Fetches all jobalertrecipients for a given c_job
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetJobJobAlertRecipients]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_JobAlertRecipient],
        [ID],
        [c_JobID],
        [c_UserID],
        [enmJobAlertType],
        [OverrideName],
        [OverrideEmailOrPhone],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [c_JobAlertRecipient]
    WHERE [c_JobID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetJobLoggedJobs
-- Fetches all loggedjobs for a given c_job
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetJobLoggedJobs]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [c_JobID],
        [WhenStarted],
        [ActivatingUser],
        [LastRunBy],
        [ExecutionTimeSec],
        [enmRunStatus_JobStatus],
        [Remarks],
        [c_LoggedAlertID],
        [SuccessCount],
        [FailureCount],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [c_LoggedJob]
    WHERE [c_JobID] = @ID
    ORDER BY [ExecutionTimeSec] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO


-- =========================================
-- SP_GetLoggedAlertLoggedJobs
-- Fetches all loggedjobs for a given c_loggedalert
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetLoggedAlertLoggedJobs]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [c_JobID],
        [WhenStarted],
        [ActivatingUser],
        [LastRunBy],
        [ExecutionTimeSec],
        [enmRunStatus_JobStatus],
        [Remarks],
        [c_LoggedAlertID],
        [SuccessCount],
        [FailureCount],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [c_LoggedJob]
    WHERE [c_LoggedAlertID] = @ID
    ORDER BY [ExecutionTimeSec] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetLoggedAlertCardOrderFromIssuers
-- Fetches all cardorderfromissuers for a given c_loggedalert
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetLoggedAlertCardOrderFromIssuers]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CardOrderFromIssuer],
        [ID],
        [NumberOfCards],
        [enmCurrency],
        [CardClubID],
        [EmbossedText],
        [PackageType],
        [ICPOrderCardsFee],
        [CardIssuerOrderNumber],
        [ResponseCodeFromCardIssuer],
        [ResponseDescriptionFromCardIssuer],
        [LoggedAlertID],
        [spt_Comment],
        [OrderedByUserID],
        [WhenOrdered],
        [spt_enmStatus_CardOrderStatus],
        [spt_WhenReceived],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [ResponseCodeOnImport],
        [ResponseDescriptionOnImport]
    FROM [CardOrderFromIssuer]
    WHERE [LoggedAlertID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetLoggedAlertImportTransactionLoadRows
-- Fetches all importtransactionloadrows for a given c_loggedalert
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetLoggedAlertImportTransactionLoadRows]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_ImportTransactionLoadRow],
        [ID],
        [ImportTransactionLoadID],
        [CustomerPhoneNumber],
        [enmCurrency],
        [Amount],
        [CardCid],
        [CardLast4Numbers],
        [LoadReference],
        [CustomerFirstName],
        [CustomerLastName],
        [CustomerIdentifier],
        [lgCustomerID],
        [lgCardID],
        [WhenInitialized],
        [TransactionLoadID],
        [spt_WhenCompleted],
        [IsSuccessful],
        [lgLoggedAlertID],
        [spt_Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [ImportTransactionLoadRow]
    WHERE [lgLoggedAlertID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetLoggedAlertNewCardRequests
-- Fetches all newcardrequests for a given c_loggedalert
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetLoggedAlertNewCardRequests]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_NewCardRequest],
        [ID],
        [enmCurrency],
        [enmReceiptMethod],
        [InitialLoad],
        [enmInitialLoadMethod_LoadMethod],
        [CustomerID],
        [FirstName],
        [LastName],
        [BirthDate],
        [IsraelIDNumber],
        [lkpPassportCountry_Country],
        [PassportNumber],
        [enmGender],
        [ActualAddressNumber],
        [ActualAddressStreet],
        [ActualAddressCity],
        [ActualZipCode],
        [CellphoneNumber],
        [email],
        [spt_Comment],
        [WhenOpened],
        [spt_enmCardRequestStatus],
        [clc_WhenStatusChanged],
        [IsCustomerDefined],
        [IsKYCDefined],
        [DeliveryFeeAdjustment],
        [DistributorSentToID],
        [spt_InterviewedByUser],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [enmLastStatusBeforeCancel_CardRequestStatus],
        [NameOnCard],
        [clc_HasNameOnCard],
        [enmPendingLoadMethod_LoadMethod],
        [PendingLoadAmount],
        [PendingLoadReference],
        [PendingLoadUserResponsible],
        [CardActivationID],
        [InitialLoadComplete],
        [CustomerWalletID],
        [InitialLoadNumberOfPayments],
        [IntendedClubID],
        [CommittedLoadAmount],
        [CommittedPurchaseExchangeRateToILS],
        [CommittedLoadFee],
        [CommittedDeliveryFee],
        [CommittedNewCardFee],
        [enmCustomerType],
        [blg_NewCardRequestAPIID],
        [clc_NewCardRequestAPILoggedAlertID]
    FROM [NewCardRequest]
    WHERE [clc_NewCardRequestAPILoggedAlertID] = @ID
    ORDER BY [BirthDate] DESC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetLoggedAlertNewCardRequestAPIs
-- Fetches all newcardrequestapis for a given c_loggedalert
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetLoggedAlertNewCardRequestAPIs]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_NewCardRequestAPI],
        [ID],
        [enmRequestedCurrency_Currency],
        [FirstName],
        [LastName],
        [FirstNameLatin],
        [LastNameLatin],
        [email],
        [BirthDate],
        [IsraelIDNumber],
        [lkpPassportCountry_Country],
        [PassportNumber],
        [DateIssued],
        [ExpiryDate],
        [CellphoneNumber],
        [HomePhoneNumber],
        [ActualAddressNumber],
        [ActualAddressStreet],
        [ActualAddressCity],
        [ActualZipCode],
        [MailAddressNumber],
        [MailAddressStreet],
        [MailAddressCity],
        [MailZipCode],
        [enmGender],
        [enmLanguage],
        [enmMessagingMode],
        [Profession],
        [lkpEmploymentStatus],
        [Employer],
        [lkpCardUse],
        [PublicPosition],
        [ConnectionWithPublicPerson],
        [lkpAdditionalCitizenship_Country],
        [lkpConnectionWithIsrael],
        [ConnectionWithIsraelDetails],
        [lkpMainUseOfCard_CardUsage],
        [IsExpectedToReceiveDeposits],
        [IsExpectedToReceiveDepositsDetails],
        [WasPreviouslyDeniedBankService],
        [WitnessFirstName],
        [WitnessLastName],
        [WitnessIsraelID],
        [enmIdentificationMethod],
        [InitialLoad],
        [enmInitialLoadMethod_LoadMethod],
        [CustomerReference],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [UpdatingLoginID],
        [AmountIncludesLoadFee],
        [CardAllocationFee],
        [MessageIdentifier],
        [IDFrontURL],
        [IDBackURL],
        [IDAppendixURL],
        [PassportURL],
        [blg_DistributorID],
        [clc_NewCardRequestID],
        [clc_LoggedAlertID],
        [clc_enmStatus_NewCardRequestAPIStatus],
        [spt_Comments],
        [blg_UserName],
        [upl_TZFront],
        [upl_TZBack],
        [upl_Passport],
        [clc_WhenAdded]
    FROM [NewCardRequestAPI]
    WHERE [clc_LoggedAlertID] = @ID
    ORDER BY [BirthDate] DESC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetLoggedAlertRequestedTransactions
-- Fetches all requestedtransactions for a given c_loggedalert
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetLoggedAlertRequestedTransactions]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_RequestedTransaction],
        [ID],
        [InitiatingCustomerID],
        [TargetCustomerID],
        [TargetCustomerEmailOrPhone],
        [TargetCustomerName],
        [CustomerTransactionDescription],
        [enmDirection_TransactionDirection],
        [enmType_RequestedTransactionType],
        [enmFeePayer_Payer],
        [DefiningAmount],
        [CreditCardID],
        [AmountPaidByCreditCard],
        [NumberOfPaymentsByCreditCard],
        [FirstPaymentAmountByCreditCard],
        [OtherPaymentsAmountByCreditCard],
        [AmountPaidByBit],
        [AmountPaidByWallet],
        [TotalAmountPaidByPayer],
        [AmountReceivedByReceiver],
        [lkpDefiningAmountCurrency_Currency],
        [PrepaidCardID],
        [DistributorID],
        [enmDepositLocation],
        [CodeToGiveChanger],
        [spt_enmStatus_RequestedTransactionStatus],
        [LoggedAlertID],
        [ErrorText],
        [spt_Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [SecurityCodeApproved],
        [clc_WhenStatusChanged],
        [InitiatingCustomerEmailOrPhone],
        [InitiatingCustomerName],
        [ExchangeRateToILSUsed],
        [TargetNonCustomerID],
        [clc_DateRequested],
        [clc_MonthRequested],
        [GroupRequestedTransactionID],
        [ReceivingCustomerID],
        [PayingCustomerID],
        [RepExchangeRateToILS],
        [DefiningAmountILS]
    FROM [RequestedTransaction]
    WHERE [LoggedAlertID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetLoggedAlertTransactionLoads
-- Fetches all transactionloads for a given c_loggedalert
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetLoggedAlertTransactionLoads]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_TransactionLoad],
        [ID],
        [UserID],
        [DistributorID],
        [enmLoadType],
        [CustomerID],
        [CardID],
        [enmCurrency],
        [Amount],
        [WhenRequested],
        [ExchangeRateUsed],
        [AmountInILS],
        [PaymentDebitResult],
        [PaymentDebitAuthorizationCode],
        [PaymentDebitDetails],
        [DebitElapsedTimeSec],
        [enmLoadApproved_ApprovalType],
        [LoadResponseCode],
        [LoadResponse],
        [LoadElapsedTimeSec],
        [PaymentCreditResult],
        [PaymentCreditAuthorizationCode],
        [PaymentCreditDetails],
        [CreditElapsedTimeSec],
        [LoggedAlertID],
        [FaultNo],
        [enmLoadResult],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [clc_Month],
        [enmCoveredBy],
        [Details],
        [CustomerReference],
        [RepresentativeExchangeRate],
        [clc_Day],
        [RequestedTransactionID]
    FROM [TransactionLoad]
    WHERE [LoggedAlertID] = @ID
    ORDER BY [DebitElapsedTimeSec] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO


-- =========================================
-- SP_GetLoggedLoginLoggedAlerts
-- Fetches all loggedalerts for a given c_loggedlogin
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetLoggedLoginLoggedAlerts]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [TimeOccurred],
        [FaultNumber],
        [SystemName],
        [CallingApplication],
        [AffectedUserID],
        [CallingApplicationVersion],
        [CallingFunctionWithinApplication],
        [FreeText],
        [FaultingAssembly],
        [AssemblyEntryPoint],
        [FaultingClass],
        [FaultingFunction],
        [FaultingFunctionParameters],
        [FaultIdent],
        [FaultDescription],
        [MessageSentToUser],
        [ActionSentToUser],
        [enmFaultType_FaultType],
        [enmFaultSeverity_FaultSeverity],
        [c_LoggedLoginID],
        [Thread],
        [lkpUserIdentityType],
        [lkpUserIdentityTypeName],
        [clc_DateOccurred],
        [clc_MonthOccurred]
    FROM [c_LoggedAlert]
    WHERE [c_LoggedLoginID] = @ID
    ORDER BY [TimeOccurred] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetLoggedLoginLoggedRequests
-- Fetches all loggedrequests for a given c_loggedlogin
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetLoggedLoginLoggedRequests]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [c_LoggedLoginID],
        [TimeAccessed],
        [c_UserID],
        [CallingFunctionWithinApplication],
        [EntryPoint],
        [Process],
        [Thread]
    FROM [c_LoggedRequest]
    WHERE [c_LoggedLoginID] = @ID
    ORDER BY [TimeAccessed] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO


-- =========================================
-- SP_GetObjectToTranslateObjectTranslations
-- Fetches all objecttranslations for a given c_objecttotranslate
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetObjectToTranslateObjectTranslations]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_ObjectTranslation],
        [ID],
        [c_ObjectToTranslateID],
        [Instance],
        [DefaultText],
        [enmLanguage],
        [Text],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [InstanceUniqueText]
    FROM [c_ObjectTranslation]
    WHERE [c_ObjectToTranslateID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO


-- =========================================
-- SP_GetProcessPermissions
-- Fetches all permissions for a given c_process
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetProcessPermissions]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_Permission],
        [ID],
        [c_RoleID],
        [c_ProcessID],
        [CanDo],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [c_Permission]
    WHERE [c_ProcessID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO


-- =========================================
-- SP_GetRolePermissions
-- Fetches all permissions for a given c_role
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetRolePermissions]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_Permission],
        [ID],
        [c_RoleID],
        [c_ProcessID],
        [CanDo],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [c_Permission]
    WHERE [c_RoleID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetRoleRoles
-- Fetches all roles for a given c_role
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetRoleRoles]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_Role],
        [ID],
        [Name],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [BaseRoleID]
    FROM [c_Role]
    WHERE [BaseRoleID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetRoleUsers
-- Fetches all users for a given c_role
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetRoleUsers]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_User],
        [ID],
        [UserName],
        [LastName],
        [FirstName],
        [clc_FullName],
        [NationalIDNo],
        [Address],
        [City],
        [ProvinceState],
        [PostalCode],
        [Country],
        [PhoneNumber],
        [Email],
        [enoPassword],
        [DatePasswordChanged],
        [enmType_UserIdentityType],
        [IDinType],
        [RequiresComputerIdentification],
        [EnableSimultaneousLogins],
        [clc_DateActivated],
        [IsDisabled],
        [ExpiryDate],
        [Comments],
        [LastPasswords],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spl_Applications],
        [enmLanguage],
        [IsLockedOut],
        [RoleID],
        [enmAuthenticationMethod],
        [enmMessagingMode],
        [spt_LoggedInIP],
        [RequiresFixedIP],
        [enoApprovalCode],
        [ApprovalFunctionName],
        [ApprovalTime],
        [spt_LastSuccessfulLogin],
        [PasswordNeverExpires],
        [lkpSecurityQuestion1_SecurityQuestion],
        [entSecurityQuestion1Response],
        [lkpSecurityQuestion2_SecurityQuestion],
        [entSecurityQuestion2Response],
        [lkpSecurityQuestion3_SecurityQuestion],
        [entSecurityQuestion3Response],
        [entPIN]
    FROM [c_User]
    WHERE [RoleID] = @ID
    ORDER BY [DatePasswordChanged] DESC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO


-- =========================================
-- SP_GetUserJobAlertRecipients
-- Fetches all jobalertrecipients for a given c_user
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetUserJobAlertRecipients]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_JobAlertRecipient],
        [ID],
        [c_JobID],
        [c_UserID],
        [enmJobAlertType],
        [OverrideName],
        [OverrideEmailOrPhone],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [c_JobAlertRecipient]
    WHERE [c_UserID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetUserLoggedAlerts
-- Fetches all loggedalerts for a given c_user
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetUserLoggedAlerts]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [TimeOccurred],
        [FaultNumber],
        [SystemName],
        [CallingApplication],
        [AffectedUserID],
        [CallingApplicationVersion],
        [CallingFunctionWithinApplication],
        [FreeText],
        [FaultingAssembly],
        [AssemblyEntryPoint],
        [FaultingClass],
        [FaultingFunction],
        [FaultingFunctionParameters],
        [FaultIdent],
        [FaultDescription],
        [MessageSentToUser],
        [ActionSentToUser],
        [enmFaultType_FaultType],
        [enmFaultSeverity_FaultSeverity],
        [c_LoggedLoginID],
        [Thread],
        [lkpUserIdentityType],
        [lkpUserIdentityTypeName],
        [clc_DateOccurred],
        [clc_MonthOccurred]
    FROM [c_LoggedAlert]
    WHERE [AffectedUserID] = @ID
    ORDER BY [TimeOccurred] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetUserLoggedRequests
-- Fetches all loggedrequests for a given c_user
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetUserLoggedRequests]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [c_LoggedLoginID],
        [TimeAccessed],
        [c_UserID],
        [CallingFunctionWithinApplication],
        [EntryPoint],
        [Process],
        [Thread]
    FROM [c_LoggedRequest]
    WHERE [c_UserID] = @ID
    ORDER BY [TimeAccessed] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetUserUserLoginKeys
-- Fetches all userloginkeys for a given c_user
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetUserUserLoginKeys]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_UserLoginKey],
        [ID],
        [c_UserID],
        [ApplicationName],
        [ApplicationIdentifier],
        [enoKey],
        [ExternalIPAtCreation],
        [CountryAtCreation],
        [LastAccessTime],
        [LoggedLoginID],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [c_UserLoginKey]
    WHERE [c_UserID] = @ID
    ORDER BY [LastAccessTime] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetUserUserPermissions
-- Fetches all userpermissions for a given c_user
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetUserUserPermissions]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_UserPermission],
        [ID],
        [c_UserID],
        [ComputerIdentifier],
        [ApplicationName],
        [ComputerName],
        [ExternalIP],
        [HasPermission],
        [Comments],
        [LastAccessTime],
        [LoggedLoginID],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [c_UserPermission]
    WHERE [c_UserID] = @ID
    ORDER BY [LastAccessTime] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetUserUserStatuses
-- Fetches all userstatuses for a given c_user
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetUserUserStatuses]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_c_UserStatus],
        [ID],
        [c_UserID],
        [ApplicationName],
        [LastLoggedLoginID],
        [LoginTime],
        [LogoutTime],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [c_UserStatus]
    WHERE [c_UserID] = @ID
    ORDER BY [LoginTime] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetUserCardOrderByDistributors
-- Fetches all cardorderbydistributors for a given c_user
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetUserCardOrderByDistributors]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CardOrderByDistributor],
        [ID],
        [NumberOfCards],
        [enmCurrency],
        [CardClubID],
        [OrderedByUserID],
        [DistributorID],
        [DistributorOrderCardsFee],
        [WhenOrdered],
        [spt_enmStatus_CardOrderStatus],
        [spt_WhenReceived],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spt_enmCustomerCardActivationStatus_Status],
        [scb_enmCustomerCardActivationStatus_Status]
    FROM [CardOrderByDistributor]
    WHERE [OrderedByUserID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetUserCardOrderFromIssuers
-- Fetches all cardorderfromissuers for a given c_user
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetUserCardOrderFromIssuers]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CardOrderFromIssuer],
        [ID],
        [NumberOfCards],
        [enmCurrency],
        [CardClubID],
        [EmbossedText],
        [PackageType],
        [ICPOrderCardsFee],
        [CardIssuerOrderNumber],
        [ResponseCodeFromCardIssuer],
        [ResponseDescriptionFromCardIssuer],
        [LoggedAlertID],
        [spt_Comment],
        [OrderedByUserID],
        [WhenOrdered],
        [spt_enmStatus_CardOrderStatus],
        [spt_WhenReceived],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [ResponseCodeOnImport],
        [ResponseDescriptionOnImport]
    FROM [CardOrderFromIssuer]
    WHERE [OrderedByUserID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetUserCustomerWallets
-- Fetches all customerwallets for a given c_user
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetUserCustomerWallets]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CustomerWallet],
        [ID],
        [CustomerID],
        [WhenExecuted],
        [enmType_WalletTransactionType],
        [Description],
        [DescriptionInCustLang],
        [Reference],
        [ReferenceTable],
        [ReferenceID],
        [Amount],
        [clc_Balance],
        [WhenApproved],
        [WhoInitiatedID],
        [spt_Comments],
        [AddedToBackOffice],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [UpdatingLoginID],
        [InvoiceURL],
        [RequestedTransactionID],
        [CounterpartCustomerID],
        [TransferText]
    FROM [CustomerWallet]
    WHERE [WhoInitiatedID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetUserImportTransactionLoads
-- Fetches all importtransactionloads for a given c_user
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetUserImportTransactionLoads]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_ImportTransactionLoad],
        [ID],
        [DistributorID],
        [WhenInitialized],
        [InitiatedByUserID],
        [spt_WhenCompleted],
        [LoadsRequested],
        [LoadsApproved],
        [spt_Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [ImportTransactionLoad]
    WHERE [InitiatedByUserID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetUserTasks
-- Fetches all tasks for a given c_user
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetUserTasks]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Task],
        [ID],
        [CustomerID],
        [enmTask],
        [spt_enmStatus],
        [Description],
        [spt_HandlerComments],
        [ReferenceTable],
        [ReferenceTableID],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [HandledByUserID],
        [clc_WhenAdded],
        [WhenStatusChanged],
        [clc_enmInGame]
    FROM [Task]
    WHERE [HandledByUserID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetUserTransactionLoads
-- Fetches all transactionloads for a given c_user
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetUserTransactionLoads]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_TransactionLoad],
        [ID],
        [UserID],
        [DistributorID],
        [enmLoadType],
        [CustomerID],
        [CardID],
        [enmCurrency],
        [Amount],
        [WhenRequested],
        [ExchangeRateUsed],
        [AmountInILS],
        [PaymentDebitResult],
        [PaymentDebitAuthorizationCode],
        [PaymentDebitDetails],
        [DebitElapsedTimeSec],
        [enmLoadApproved_ApprovalType],
        [LoadResponseCode],
        [LoadResponse],
        [LoadElapsedTimeSec],
        [PaymentCreditResult],
        [PaymentCreditAuthorizationCode],
        [PaymentCreditDetails],
        [CreditElapsedTimeSec],
        [LoggedAlertID],
        [FaultNo],
        [enmLoadResult],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [clc_Month],
        [enmCoveredBy],
        [Details],
        [CustomerReference],
        [RepresentativeExchangeRate],
        [clc_Day],
        [RequestedTransactionID]
    FROM [TransactionLoad]
    WHERE [UserID] = @ID
    ORDER BY [DebitElapsedTimeSec] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetUserUserApprovals
-- Fetches all userapprovals for a given c_user
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetUserUserApprovals]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_UserApproval],
        [ID],
        [UserID],
        [FunctionName],
        [enoInteriorCode],
        [enoAuthorizationCode],
        [entDetails],
        [ValidUntil],
        [spt_WasUsed],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [UserApproval]
    WHERE [UserID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO


-- =========================================
-- SP_GetCardBackofficeTransactions
-- Fetches all backofficetransactions for a given card
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetCardBackofficeTransactions]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_BackofficeTransaction],
        [ID],
        [DistributorID],
        [CustomerID],
        [TransactionLoadID],
        [CardOrderFromIssuerID],
        [CardOrderByDistributorID],
        [CustomerWalletID],
        [enmBackofficeTransactionType],
        [AmountToAccountOwner],
        [enmAccountOwner],
        [WhenRequested],
        [WhenToExecute],
        [RequestingUser],
        [CodeForInvoice],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spt_WhenSentToSAP],
        [CardID],
        [clc_MonthRequested],
        [clc_DayRequested],
        [TransactionCreditCardID],
        [TransactionBitID],
        [RequestedTransactionID]
    FROM [BackofficeTransaction]
    WHERE [CardID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetCardCardActivations
-- Fetches all cardactivations for a given card
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetCardCardActivations]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CardActivation],
        [ID],
        [DistributorID],
        [CustomerID],
        [CardID],
        [clc_WhenInitiated],
        [Profession],
        [lkpEmploymentStatus],
        [Employer],
        [lkpCardUse],
        [PublicPosition],
        [ConnectionWithPublicPerson],
        [lkpAdditionalCitizenship_Country],
        [lkpConnectionWithIsrael],
        [ConnectionWithIsraelDetails],
        [lkpMainUseOfCard_CardUsage],
        [IsExpectedToReceiveDeposits],
        [IsExpectedToReceiveDepositsDetails],
        [WasPreviouslyDeniedBankService],
        [WitnessFirstName],
        [WitnessLastName],
        [WitnessIsraelID],
        [enmIDTypeForWitness_IdentificationMethod],
        [enmApproved_ApprovalType],
        [ResponseCode],
        [ResponseText],
        [LoggedAlertID],
        [WhenRequested],
        [WhenResponded],
        [InitialLoadID],
        [DocumentionLoadDate],
        [spt_IsDocumentationOK],
        [lgInterviewedByUser],
        [enmRequestedCurrency_Currency],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [lgAddedBy],
        [enmCardActivationNextTask],
        [spt_Comment],
        [logCellPhone],
        [spt_OnHold],
        [WantsNameOnCard],
        [CardClubID],
        [CreatingApp],
        [spt_DeliveryFee],
        [spt_NewCardFee],
        [RequestedInitialLoad],
        [spt_EmbossFee]
    FROM [CardActivation]
    WHERE [CardID] = @ID
    ORDER BY [DocumentionLoadDate] DESC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetCardCustomerCardTransactions
-- Fetches all customercardtransactions for a given card
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetCardCustomerCardTransactions]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [FileName],
        [RowNumberInFile],
        [CustomerID],
        [CardID],
        [Date],
        [WhenApproved],
        [ApprovalCode],
        [TransactionType],
        [CardUseMethod],
        [EstablishmentName],
        [EstablishmentEnglishName],
        [lkpMerchantCategory],
        [Currency],
        [ExchangeRateUsed],
        [AmountInLocalCurrency],
        [AmountInCardCurrency],
        [VAT],
        [Commission],
        [EstablishmentAddress],
        [EstablishmentCity],
        [EstablishmentCountry],
        [EstablishmentLocation],
        [IsEMV],
        [spt_IsContested],
        [ClientPayment],
        [ICPPayment],
        [DistributorPayment],
        [ICPProfit],
        [enmUpayCardTransactionType_CustomerTransactionType],
        [spt_CHBRefused],
        [ClientCHBFee],
        [spt_Comment],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [lgOwningDistributorID],
        [CardCid],
        [OrgCode],
        [upl_Receipt],
        [lgCardClubID]
    FROM [CustomerCardTransaction]
    WHERE [CardID] = @ID
    ORDER BY [Date] DESC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetCardImportTransactionLoadRows
-- Fetches all importtransactionloadrows for a given card
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetCardImportTransactionLoadRows]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_ImportTransactionLoadRow],
        [ID],
        [ImportTransactionLoadID],
        [CustomerPhoneNumber],
        [enmCurrency],
        [Amount],
        [CardCid],
        [CardLast4Numbers],
        [LoadReference],
        [CustomerFirstName],
        [CustomerLastName],
        [CustomerIdentifier],
        [lgCustomerID],
        [lgCardID],
        [WhenInitialized],
        [TransactionLoadID],
        [spt_WhenCompleted],
        [IsSuccessful],
        [lgLoggedAlertID],
        [spt_Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [ImportTransactionLoadRow]
    WHERE [lgCardID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetCardOnlineApprovals
-- Fetches all onlineapprovals for a given card
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetCardOnlineApprovals]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [Cid],
        [OrgCode],
        [CardID],
        [CustomerID],
        [CurrencyType],
        [AuthCode],
        [ApproveDatetime],
        [ApproveDatetimeGmt],
        [DepositDate],
        [IndSmartTran],
        [OrigCurrencyCode],
        [OrigAmount],
        [ChargeAmount],
        [ExchangeRate],
        [MerchantNumber],
        [MerchantName],
        [MCC4],
        [MerchantCity],
        [AuthScore],
        [AuthRule],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [OnlineApproval]
    WHERE [CardID] = @ID
    ORDER BY [ApproveDatetime] DESC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetCardRequestedTransactions
-- Fetches all requestedtransactions for a given card
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetCardRequestedTransactions]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_RequestedTransaction],
        [ID],
        [InitiatingCustomerID],
        [TargetCustomerID],
        [TargetCustomerEmailOrPhone],
        [TargetCustomerName],
        [CustomerTransactionDescription],
        [enmDirection_TransactionDirection],
        [enmType_RequestedTransactionType],
        [enmFeePayer_Payer],
        [DefiningAmount],
        [CreditCardID],
        [AmountPaidByCreditCard],
        [NumberOfPaymentsByCreditCard],
        [FirstPaymentAmountByCreditCard],
        [OtherPaymentsAmountByCreditCard],
        [AmountPaidByBit],
        [AmountPaidByWallet],
        [TotalAmountPaidByPayer],
        [AmountReceivedByReceiver],
        [lkpDefiningAmountCurrency_Currency],
        [PrepaidCardID],
        [DistributorID],
        [enmDepositLocation],
        [CodeToGiveChanger],
        [spt_enmStatus_RequestedTransactionStatus],
        [LoggedAlertID],
        [ErrorText],
        [spt_Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [SecurityCodeApproved],
        [clc_WhenStatusChanged],
        [InitiatingCustomerEmailOrPhone],
        [InitiatingCustomerName],
        [ExchangeRateToILSUsed],
        [TargetNonCustomerID],
        [clc_DateRequested],
        [clc_MonthRequested],
        [GroupRequestedTransactionID],
        [ReceivingCustomerID],
        [PayingCustomerID],
        [RepExchangeRateToILS],
        [DefiningAmountILS]
    FROM [RequestedTransaction]
    WHERE [PrepaidCardID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetCardTransactionLoads
-- Fetches all transactionloads for a given card
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetCardTransactionLoads]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_TransactionLoad],
        [ID],
        [UserID],
        [DistributorID],
        [enmLoadType],
        [CustomerID],
        [CardID],
        [enmCurrency],
        [Amount],
        [WhenRequested],
        [ExchangeRateUsed],
        [AmountInILS],
        [PaymentDebitResult],
        [PaymentDebitAuthorizationCode],
        [PaymentDebitDetails],
        [DebitElapsedTimeSec],
        [enmLoadApproved_ApprovalType],
        [LoadResponseCode],
        [LoadResponse],
        [LoadElapsedTimeSec],
        [PaymentCreditResult],
        [PaymentCreditAuthorizationCode],
        [PaymentCreditDetails],
        [CreditElapsedTimeSec],
        [LoggedAlertID],
        [FaultNo],
        [enmLoadResult],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [clc_Month],
        [enmCoveredBy],
        [Details],
        [CustomerReference],
        [RepresentativeExchangeRate],
        [clc_Day],
        [RequestedTransactionID]
    FROM [TransactionLoad]
    WHERE [CardID] = @ID
    ORDER BY [DebitElapsedTimeSec] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO


-- =========================================
-- SP_GetCardClubCards
-- Fetches all cards for a given cardclub
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetCardClubCards]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Card],
        [ID],
        [CardClubID],
        [Cid],
        [CardLast4Numbers],
        [Expiry],
        [CustomerID],
        [enmCurrency],
        [OwningDistributorID],
        [CardOrderFromIssuerID],
        [CardOrderByDistributorID],
        [ActivationDate],
        [IsLost],
        [ReportedLostWhen],
        [LastBalance],
        [LastBalanceTime],
        [enmStatusAtCardIssuer],
        [agg_LoadsToday],
        [agg_LoadsThisMonth],
        [agg_AmountLoadedToday],
        [agg_AmountLoadedThisMonth],
        [enmStatusAtICP],
        [WhenStatusAtICPChanged],
        [StatusAtICPChangedBy],
        [spt_Comment],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [PreviousDistributorID],
        [EmbossedText],
        [logCellPhone],
        [agg_AmountLoadedTotal],
        [agg_LoadsTotal],
        [spt_IsCashWithdrawalAllowed],
        [spt_LastMonthlyFeeDatePaid],
        [CardHolderName],
        [CardHolderPhoneNumberOrEmail],
        [CardHolderIdentifier],
        [spt_enmIsOnTerrorList],
        [scb_enmIsOnTerrorList],
        [spt_TerrorListUpdatedOn]
    FROM [Card]
    WHERE [CardClubID] = @ID
    ORDER BY [ActivationDate] DESC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetCardClubCardActivations
-- Fetches all cardactivations for a given cardclub
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetCardClubCardActivations]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CardActivation],
        [ID],
        [DistributorID],
        [CustomerID],
        [CardID],
        [clc_WhenInitiated],
        [Profession],
        [lkpEmploymentStatus],
        [Employer],
        [lkpCardUse],
        [PublicPosition],
        [ConnectionWithPublicPerson],
        [lkpAdditionalCitizenship_Country],
        [lkpConnectionWithIsrael],
        [ConnectionWithIsraelDetails],
        [lkpMainUseOfCard_CardUsage],
        [IsExpectedToReceiveDeposits],
        [IsExpectedToReceiveDepositsDetails],
        [WasPreviouslyDeniedBankService],
        [WitnessFirstName],
        [WitnessLastName],
        [WitnessIsraelID],
        [enmIDTypeForWitness_IdentificationMethod],
        [enmApproved_ApprovalType],
        [ResponseCode],
        [ResponseText],
        [LoggedAlertID],
        [WhenRequested],
        [WhenResponded],
        [InitialLoadID],
        [DocumentionLoadDate],
        [spt_IsDocumentationOK],
        [lgInterviewedByUser],
        [enmRequestedCurrency_Currency],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [lgAddedBy],
        [enmCardActivationNextTask],
        [spt_Comment],
        [logCellPhone],
        [spt_OnHold],
        [WantsNameOnCard],
        [CardClubID],
        [CreatingApp],
        [spt_DeliveryFee],
        [spt_NewCardFee],
        [RequestedInitialLoad],
        [spt_EmbossFee]
    FROM [CardActivation]
    WHERE [CardClubID] = @ID
    ORDER BY [DocumentionLoadDate] DESC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetCardClubCardOrderByDistributors
-- Fetches all cardorderbydistributors for a given cardclub
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetCardClubCardOrderByDistributors]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CardOrderByDistributor],
        [ID],
        [NumberOfCards],
        [enmCurrency],
        [CardClubID],
        [OrderedByUserID],
        [DistributorID],
        [DistributorOrderCardsFee],
        [WhenOrdered],
        [spt_enmStatus_CardOrderStatus],
        [spt_WhenReceived],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spt_enmCustomerCardActivationStatus_Status],
        [scb_enmCustomerCardActivationStatus_Status]
    FROM [CardOrderByDistributor]
    WHERE [CardClubID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetCardClubCardOrderFromIssuers
-- Fetches all cardorderfromissuers for a given cardclub
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetCardClubCardOrderFromIssuers]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CardOrderFromIssuer],
        [ID],
        [NumberOfCards],
        [enmCurrency],
        [CardClubID],
        [EmbossedText],
        [PackageType],
        [ICPOrderCardsFee],
        [CardIssuerOrderNumber],
        [ResponseCodeFromCardIssuer],
        [ResponseDescriptionFromCardIssuer],
        [LoggedAlertID],
        [spt_Comment],
        [OrderedByUserID],
        [WhenOrdered],
        [spt_enmStatus_CardOrderStatus],
        [spt_WhenReceived],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [ResponseCodeOnImport],
        [ResponseDescriptionOnImport]
    FROM [CardOrderFromIssuer]
    WHERE [CardClubID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetCardClubCustomerCardTransactions
-- Fetches all customercardtransactions for a given cardclub
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetCardClubCustomerCardTransactions]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [FileName],
        [RowNumberInFile],
        [CustomerID],
        [CardID],
        [Date],
        [WhenApproved],
        [ApprovalCode],
        [TransactionType],
        [CardUseMethod],
        [EstablishmentName],
        [EstablishmentEnglishName],
        [lkpMerchantCategory],
        [Currency],
        [ExchangeRateUsed],
        [AmountInLocalCurrency],
        [AmountInCardCurrency],
        [VAT],
        [Commission],
        [EstablishmentAddress],
        [EstablishmentCity],
        [EstablishmentCountry],
        [EstablishmentLocation],
        [IsEMV],
        [spt_IsContested],
        [ClientPayment],
        [ICPPayment],
        [DistributorPayment],
        [ICPProfit],
        [enmUpayCardTransactionType_CustomerTransactionType],
        [spt_CHBRefused],
        [ClientCHBFee],
        [spt_Comment],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [lgOwningDistributorID],
        [CardCid],
        [OrgCode],
        [upl_Receipt],
        [lgCardClubID]
    FROM [CustomerCardTransaction]
    WHERE [lgCardClubID] = @ID
    ORDER BY [Date] DESC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetCardClubFeeOverrides
-- Fetches all feeoverrides for a given cardclub
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetCardClubFeeOverrides]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_FeeOverride],
        [ID],
        [FeeID],
        [CardClubID],
        [DistributorID],
        [OverrideAmt],
        [OverridePctOfTrigger],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [OverrideMax],
        [CustomerClubID],
        [OverrideMin]
    FROM [FeeOverride]
    WHERE [CardClubID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetCardClubLimitationOverrides
-- Fetches all limitationoverrides for a given cardclub
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetCardClubLimitationOverrides]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_LimitationOverride],
        [ID],
        [LimitationID],
        [CardClubID],
        [DistributorID],
        [OverrideAmount],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [CustomerClubID]
    FROM [LimitationOverride]
    WHERE [CardClubID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetCardClubNewCardRequests
-- Fetches all newcardrequests for a given cardclub
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetCardClubNewCardRequests]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_NewCardRequest],
        [ID],
        [enmCurrency],
        [enmReceiptMethod],
        [InitialLoad],
        [enmInitialLoadMethod_LoadMethod],
        [CustomerID],
        [FirstName],
        [LastName],
        [BirthDate],
        [IsraelIDNumber],
        [lkpPassportCountry_Country],
        [PassportNumber],
        [enmGender],
        [ActualAddressNumber],
        [ActualAddressStreet],
        [ActualAddressCity],
        [ActualZipCode],
        [CellphoneNumber],
        [email],
        [spt_Comment],
        [WhenOpened],
        [spt_enmCardRequestStatus],
        [clc_WhenStatusChanged],
        [IsCustomerDefined],
        [IsKYCDefined],
        [DeliveryFeeAdjustment],
        [DistributorSentToID],
        [spt_InterviewedByUser],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [enmLastStatusBeforeCancel_CardRequestStatus],
        [NameOnCard],
        [clc_HasNameOnCard],
        [enmPendingLoadMethod_LoadMethod],
        [PendingLoadAmount],
        [PendingLoadReference],
        [PendingLoadUserResponsible],
        [CardActivationID],
        [InitialLoadComplete],
        [CustomerWalletID],
        [InitialLoadNumberOfPayments],
        [IntendedClubID],
        [CommittedLoadAmount],
        [CommittedPurchaseExchangeRateToILS],
        [CommittedLoadFee],
        [CommittedDeliveryFee],
        [CommittedNewCardFee],
        [enmCustomerType],
        [blg_NewCardRequestAPIID],
        [clc_NewCardRequestAPILoggedAlertID]
    FROM [NewCardRequest]
    WHERE [IntendedClubID] = @ID
    ORDER BY [BirthDate] DESC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO


-- =========================================
-- SP_GetCardOrderByDistributorBackofficeTransactions
-- Fetches all backofficetransactions for a given cardorderbydistributor
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetCardOrderByDistributorBackofficeTransactions]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_BackofficeTransaction],
        [ID],
        [DistributorID],
        [CustomerID],
        [TransactionLoadID],
        [CardOrderFromIssuerID],
        [CardOrderByDistributorID],
        [CustomerWalletID],
        [enmBackofficeTransactionType],
        [AmountToAccountOwner],
        [enmAccountOwner],
        [WhenRequested],
        [WhenToExecute],
        [RequestingUser],
        [CodeForInvoice],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spt_WhenSentToSAP],
        [CardID],
        [clc_MonthRequested],
        [clc_DayRequested],
        [TransactionCreditCardID],
        [TransactionBitID],
        [RequestedTransactionID]
    FROM [BackofficeTransaction]
    WHERE [CardOrderByDistributorID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetCardOrderByDistributorCards
-- Fetches all cards for a given cardorderbydistributor
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetCardOrderByDistributorCards]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Card],
        [ID],
        [CardClubID],
        [Cid],
        [CardLast4Numbers],
        [Expiry],
        [CustomerID],
        [enmCurrency],
        [OwningDistributorID],
        [CardOrderFromIssuerID],
        [CardOrderByDistributorID],
        [ActivationDate],
        [IsLost],
        [ReportedLostWhen],
        [LastBalance],
        [LastBalanceTime],
        [enmStatusAtCardIssuer],
        [agg_LoadsToday],
        [agg_LoadsThisMonth],
        [agg_AmountLoadedToday],
        [agg_AmountLoadedThisMonth],
        [enmStatusAtICP],
        [WhenStatusAtICPChanged],
        [StatusAtICPChangedBy],
        [spt_Comment],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [PreviousDistributorID],
        [EmbossedText],
        [logCellPhone],
        [agg_AmountLoadedTotal],
        [agg_LoadsTotal],
        [spt_IsCashWithdrawalAllowed],
        [spt_LastMonthlyFeeDatePaid],
        [CardHolderName],
        [CardHolderPhoneNumberOrEmail],
        [CardHolderIdentifier],
        [spt_enmIsOnTerrorList],
        [scb_enmIsOnTerrorList],
        [spt_TerrorListUpdatedOn]
    FROM [Card]
    WHERE [CardOrderByDistributorID] = @ID
    ORDER BY [ActivationDate] DESC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO


-- =========================================
-- SP_GetCardOrderFromIssuerBackofficeTransactions
-- Fetches all backofficetransactions for a given cardorderfromissuer
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetCardOrderFromIssuerBackofficeTransactions]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_BackofficeTransaction],
        [ID],
        [DistributorID],
        [CustomerID],
        [TransactionLoadID],
        [CardOrderFromIssuerID],
        [CardOrderByDistributorID],
        [CustomerWalletID],
        [enmBackofficeTransactionType],
        [AmountToAccountOwner],
        [enmAccountOwner],
        [WhenRequested],
        [WhenToExecute],
        [RequestingUser],
        [CodeForInvoice],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spt_WhenSentToSAP],
        [CardID],
        [clc_MonthRequested],
        [clc_DayRequested],
        [TransactionCreditCardID],
        [TransactionBitID],
        [RequestedTransactionID]
    FROM [BackofficeTransaction]
    WHERE [CardOrderFromIssuerID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetCardOrderFromIssuerCards
-- Fetches all cards for a given cardorderfromissuer
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetCardOrderFromIssuerCards]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Card],
        [ID],
        [CardClubID],
        [Cid],
        [CardLast4Numbers],
        [Expiry],
        [CustomerID],
        [enmCurrency],
        [OwningDistributorID],
        [CardOrderFromIssuerID],
        [CardOrderByDistributorID],
        [ActivationDate],
        [IsLost],
        [ReportedLostWhen],
        [LastBalance],
        [LastBalanceTime],
        [enmStatusAtCardIssuer],
        [agg_LoadsToday],
        [agg_LoadsThisMonth],
        [agg_AmountLoadedToday],
        [agg_AmountLoadedThisMonth],
        [enmStatusAtICP],
        [WhenStatusAtICPChanged],
        [StatusAtICPChangedBy],
        [spt_Comment],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [PreviousDistributorID],
        [EmbossedText],
        [logCellPhone],
        [agg_AmountLoadedTotal],
        [agg_LoadsTotal],
        [spt_IsCashWithdrawalAllowed],
        [spt_LastMonthlyFeeDatePaid],
        [CardHolderName],
        [CardHolderPhoneNumberOrEmail],
        [CardHolderIdentifier],
        [spt_enmIsOnTerrorList],
        [scb_enmIsOnTerrorList],
        [spt_TerrorListUpdatedOn]
    FROM [Card]
    WHERE [CardOrderFromIssuerID] = @ID
    ORDER BY [ActivationDate] DESC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO


-- =========================================
-- SP_GetCountryMCCBParticipants
-- Fetches all mccbparticipants for a given country
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetCountryMCCBParticipants]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_MCCBParticipant],
        [ID],
        [enmCorridor],
        [CountryISO3166Alpha2],
        [PayoutCurrency],
        [enmPaymentMode],
        [enmSettlementCurrency_Currency],
        [Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [IsParticipant],
        [SortOrder],
        [FlatFee],
        [FeeBaseAmount],
        [FeePctOfTrigger],
        [FeeMax],
        [FeeMin]
    FROM [MCCBParticipant]
    WHERE [CountryISO3166Alpha2] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetCountryMCCBReceivers
-- Fetches all mccbreceivers for a given country
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetCountryMCCBReceivers]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_MCCBReceiver],
        [ID],
        [CustomerID],
        [FirstName],
        [LastName],
        [PhoneNumber],
        [BirthDate],
        [BirthCountryISO3166Alpha2],
        [CitizenshipCountryISO3166Alpha2],
        [ResidenceCountryISO3166Alpha2],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [enmGender],
        [IsBusiness],
        [enmIdentificationMethod],
        [IdentificationNumber],
        [Expiration]
    FROM [MCCBReceiver]
    WHERE [BirthCountryISO3166Alpha2] = @ID
    ORDER BY [BirthDate] DESC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetCountryMCCBReceivers
-- Fetches all mccbreceivers for a given country
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetCountryMCCBReceivers]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_MCCBReceiver],
        [ID],
        [CustomerID],
        [FirstName],
        [LastName],
        [PhoneNumber],
        [BirthDate],
        [BirthCountryISO3166Alpha2],
        [CitizenshipCountryISO3166Alpha2],
        [ResidenceCountryISO3166Alpha2],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [enmGender],
        [IsBusiness],
        [enmIdentificationMethod],
        [IdentificationNumber],
        [Expiration]
    FROM [MCCBReceiver]
    WHERE [CitizenshipCountryISO3166Alpha2] = @ID
    ORDER BY [BirthDate] DESC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetCountryMCCBReceivers
-- Fetches all mccbreceivers for a given country
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetCountryMCCBReceivers]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_MCCBReceiver],
        [ID],
        [CustomerID],
        [FirstName],
        [LastName],
        [PhoneNumber],
        [BirthDate],
        [BirthCountryISO3166Alpha2],
        [CitizenshipCountryISO3166Alpha2],
        [ResidenceCountryISO3166Alpha2],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [enmGender],
        [IsBusiness],
        [enmIdentificationMethod],
        [IdentificationNumber],
        [Expiration]
    FROM [MCCBReceiver]
    WHERE [ResidenceCountryISO3166Alpha2] = @ID
    ORDER BY [BirthDate] DESC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetCountryMCCBSecurityChecks
-- Fetches all mccbsecuritychecks for a given country
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetCountryMCCBSecurityChecks]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_MCCBSecurityCheck],
        [ID],
        [CustomerID],
        [MCCBReceiverID],
        [DestinationCountryISO3166Alpha2],
        [enmReceiverSecurityCleared_SecurityCleared],
        [ReceiverSecurityAllData],
        [enmPayerSecurityCleared_SecurityCleared],
        [PayerSecurityAllData],
        [WhenSecurityDataUpdated],
        [RequestedTransactionID],
        [MCCBTransactionID],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [MCCBSecurityCheck]
    WHERE [DestinationCountryISO3166Alpha2] = @ID
    ORDER BY [WhenSecurityDataUpdated] DESC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO


-- =========================================
-- SP_GetCustomerBackofficeTransactions
-- Fetches all backofficetransactions for a given customer
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetCustomerBackofficeTransactions]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_BackofficeTransaction],
        [ID],
        [DistributorID],
        [CustomerID],
        [TransactionLoadID],
        [CardOrderFromIssuerID],
        [CardOrderByDistributorID],
        [CustomerWalletID],
        [enmBackofficeTransactionType],
        [AmountToAccountOwner],
        [enmAccountOwner],
        [WhenRequested],
        [WhenToExecute],
        [RequestingUser],
        [CodeForInvoice],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spt_WhenSentToSAP],
        [CardID],
        [clc_MonthRequested],
        [clc_DayRequested],
        [TransactionCreditCardID],
        [TransactionBitID],
        [RequestedTransactionID]
    FROM [BackofficeTransaction]
    WHERE [CustomerID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetCustomerCards
-- Fetches all cards for a given customer
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetCustomerCards]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Card],
        [ID],
        [CardClubID],
        [Cid],
        [CardLast4Numbers],
        [Expiry],
        [CustomerID],
        [enmCurrency],
        [OwningDistributorID],
        [CardOrderFromIssuerID],
        [CardOrderByDistributorID],
        [ActivationDate],
        [IsLost],
        [ReportedLostWhen],
        [LastBalance],
        [LastBalanceTime],
        [enmStatusAtCardIssuer],
        [agg_LoadsToday],
        [agg_LoadsThisMonth],
        [agg_AmountLoadedToday],
        [agg_AmountLoadedThisMonth],
        [enmStatusAtICP],
        [WhenStatusAtICPChanged],
        [StatusAtICPChangedBy],
        [spt_Comment],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [PreviousDistributorID],
        [EmbossedText],
        [logCellPhone],
        [agg_AmountLoadedTotal],
        [agg_LoadsTotal],
        [spt_IsCashWithdrawalAllowed],
        [spt_LastMonthlyFeeDatePaid],
        [CardHolderName],
        [CardHolderPhoneNumberOrEmail],
        [CardHolderIdentifier],
        [spt_enmIsOnTerrorList],
        [scb_enmIsOnTerrorList],
        [spt_TerrorListUpdatedOn]
    FROM [Card]
    WHERE [CustomerID] = @ID
    ORDER BY [ActivationDate] DESC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetCustomerCardActivations
-- Fetches all cardactivations for a given customer
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetCustomerCardActivations]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CardActivation],
        [ID],
        [DistributorID],
        [CustomerID],
        [CardID],
        [clc_WhenInitiated],
        [Profession],
        [lkpEmploymentStatus],
        [Employer],
        [lkpCardUse],
        [PublicPosition],
        [ConnectionWithPublicPerson],
        [lkpAdditionalCitizenship_Country],
        [lkpConnectionWithIsrael],
        [ConnectionWithIsraelDetails],
        [lkpMainUseOfCard_CardUsage],
        [IsExpectedToReceiveDeposits],
        [IsExpectedToReceiveDepositsDetails],
        [WasPreviouslyDeniedBankService],
        [WitnessFirstName],
        [WitnessLastName],
        [WitnessIsraelID],
        [enmIDTypeForWitness_IdentificationMethod],
        [enmApproved_ApprovalType],
        [ResponseCode],
        [ResponseText],
        [LoggedAlertID],
        [WhenRequested],
        [WhenResponded],
        [InitialLoadID],
        [DocumentionLoadDate],
        [spt_IsDocumentationOK],
        [lgInterviewedByUser],
        [enmRequestedCurrency_Currency],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [lgAddedBy],
        [enmCardActivationNextTask],
        [spt_Comment],
        [logCellPhone],
        [spt_OnHold],
        [WantsNameOnCard],
        [CardClubID],
        [CreatingApp],
        [spt_DeliveryFee],
        [spt_NewCardFee],
        [RequestedInitialLoad],
        [spt_EmbossFee]
    FROM [CardActivation]
    WHERE [CustomerID] = @ID
    ORDER BY [DocumentionLoadDate] DESC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetCustomerCardClubs
-- Fetches all cardclubs for a given customer
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetCustomerCardClubs]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CardClub],
        [ID],
        [ClubName],
        [ClubColour],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [Club1Type],
        [Club1Number],
        [Club2Type],
        [Club2Number],
        [Club3Type],
        [Club3Number],
        [IsRoot],
        [CardIssuerOrgCode],
        [UseForCompanyCustomer],
        [AssignedCompanyCustomerID],
        [UseForUnassignedCustomer],
        [enmCardBrand]
    FROM [CardClub]
    WHERE [AssignedCompanyCustomerID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetCustomerCustomerCardTransactions
-- Fetches all customercardtransactions for a given customer
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetCustomerCustomerCardTransactions]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [FileName],
        [RowNumberInFile],
        [CustomerID],
        [CardID],
        [Date],
        [WhenApproved],
        [ApprovalCode],
        [TransactionType],
        [CardUseMethod],
        [EstablishmentName],
        [EstablishmentEnglishName],
        [lkpMerchantCategory],
        [Currency],
        [ExchangeRateUsed],
        [AmountInLocalCurrency],
        [AmountInCardCurrency],
        [VAT],
        [Commission],
        [EstablishmentAddress],
        [EstablishmentCity],
        [EstablishmentCountry],
        [EstablishmentLocation],
        [IsEMV],
        [spt_IsContested],
        [ClientPayment],
        [ICPPayment],
        [DistributorPayment],
        [ICPProfit],
        [enmUpayCardTransactionType_CustomerTransactionType],
        [spt_CHBRefused],
        [ClientCHBFee],
        [spt_Comment],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [lgOwningDistributorID],
        [CardCid],
        [OrgCode],
        [upl_Receipt],
        [lgCardClubID]
    FROM [CustomerCardTransaction]
    WHERE [CustomerID] = @ID
    ORDER BY [Date] DESC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetCustomerCustomerCreditCards
-- Fetches all customercreditcards for a given customer
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetCustomerCustomerCreditCards]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CustomerCreditCard],
        [ID],
        [CustomerID],
        [CardToken],
        [Expiry],
        [Last4Numbers],
        [spt_LastSuccessfulDate],
        [clc_WhenAdded],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [lkpCardBrand],
        [CardIsForeign],
        [IsDefault],
        [IsForShow],
        [Bin],
        [PaymentType]
    FROM [CustomerCreditCard]
    WHERE [CustomerID] = @ID
    ORDER BY [spt_LastSuccessfulDate] DESC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetCustomerCustomerKYCs
-- Fetches all customerkycs for a given customer
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetCustomerCustomerKYCs]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CustomerKYC],
        [ID],
        [CustomerID],
        [lkpEmploymentStatus],
        [Employer],
        [EmploymentPosition],
        [PublicPosition],
        [ConnectionWithPublicPerson],
        [lkpAdditionalCitizenship_Country],
        [WasPreviouslyDeniedBankService],
        [IsSingleBeneficiary],
        [AdditionalBeneficiaries],
        [lkpSourceOfFunds],
        [SourceOfFundsOther],
        [upl_ManiPremiumBeneficiaryDocument],
        [spt_enmManiPremiumBeneficiaryDocumentStatus_DocumentationStatus],
        [scb_enmManiPremiumBeneficiaryDocumentStatus_DocumentationStatus],
        [ManiPremiumTextExpected],
        [ManiPremiumTextReceived],
        [ManiPremiumTextLanguage],
        [ManiPremiumTextScore],
        [ManiPremiumTextThreshold],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [upl_ManiPremiumTextVideo]
    FROM [CustomerKYC]
    WHERE [CustomerID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetCustomerCustomerPartnerships
-- Fetches all customerpartnerships for a given customer
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetCustomerCustomerPartnerships]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CustomerPartnership],
        [ID],
        [CustomerID],
        [enmCustomerPartnership],
        [PartnershipCode],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [CustomerPartnership]
    WHERE [CustomerID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetCustomerCustomerPerformances
-- Fetches all customerperformances for a given customer
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetCustomerCustomerPerformances]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CustomerPerformance],
        [ID],
        [CustomerID],
        [spt_NumberOfActivePrepaidCards],
        [spt_PrepaidCardBalanceSum],
        [agg_PrepaidCardAmountLoadedToday],
        [agg_PrepaidCardAmountLoadedThisMonth],
        [agg_PrepaidCardLoadCountToday],
        [agg_PrepaidCardLoadCountThisMonth],
        [agg_PrepaidCardAmountLoadedLast6Months],
        [agg_PrepaidCardTotalAmountLoaded],
        [agg_PrepaidCardTotalLoadCount],
        [spt_WalletBalanceRaw],
        [spt_WalletBalanceCommitted],
        [clc_WalletBalanceWorking],
        [agg_WalletWithdrawalAmtViaCreditCardToday],
        [agg_WalletWithdrawalAmtViaCreditCardThisMonth],
        [agg_WalletWithdrawalAmtViaBankToday],
        [agg_WalletWithdrawalAmtViaBankThisMonth],
        [agg_WalletWithdrawalAmtViaChangerToday],
        [agg_WalletWithdrawalAmtViaChangerThisMonth],
        [agg_WalletWithdrawalCountViaCreditCardToday],
        [agg_WalletWithdrawalCountViaCreditCardThisMonth],
        [agg_WalletWithdrawalCountViaBankToday],
        [agg_WalletWithdrawalCountViaBankThisMonth],
        [agg_WalletWithdrawalCountViaChangerToday],
        [agg_WalletWithdrawalCountViaChangerThisMonth],
        [agg_WalletTransferPaidAmtToday],
        [agg_WalletTransferPaidAmtThisMonth],
        [agg_WalletTransferPaidCountToday],
        [agg_WalletTransferPaidCountThisMonth],
        [agg_WalletTotalTransferPaidAmount],
        [agg_WalletTotalTransferPaidCount],
        [spt_LastTimeEnteredCustomerApplication],
        [spt_LastTimeLoadedCard],
        [spt_LastTimeDidWalletTransfer],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [agg_WalletTransferPaidCountLast7Days],
        [agg_WalletDepositAmtViaCreditCardThisMonth],
        [agg_WalletDepositAmtViaCreditCardToday],
        [agg_WalletDepositAmtViaBankToday],
        [agg_WalletDepositAmtViaBankThisMonth],
        [agg_WalletDepositAmtViaChangerToday],
        [agg_WalletDepositAmtViaChangerThisMonth],
        [agg_WalletDepositCountViaCreditCardToday],
        [agg_WalletDepositCountViaCreditCardThisMonth],
        [agg_WalletDepositCountViaBankToday],
        [agg_WalletDepositCountViaBankThisMonth],
        [agg_WalletDepositCountViaChangerToday],
        [agg_WalletDepositCountViaChangerThisMonth],
        [agg_WalletTransferReceivedAmtToday],
        [agg_WalletTransferReceivedAmtThisMonth],
        [agg_WalletTransferReceivedCountToday],
        [agg_WalletTransferReceivedCountThisMonth],
        [agg_WalletTotalTransferReceivedAmount],
        [agg_WalletTotalTransferReceivedCount],
        [agg_WalletTransferPaidAmtLast7Days],
        [agg_TotalTransferredToWallet1Month],
        [agg_TotalTransferredToWallet6Months],
        [agg_TotalTransferredToWallet]
    FROM [CustomerPerformance]
    WHERE [CustomerID] = @ID
    ORDER BY [spt_LastTimeEnteredCustomerApplication] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetCustomerCustomerWallets
-- Fetches all customerwallets for a given customer
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetCustomerCustomerWallets]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CustomerWallet],
        [ID],
        [CustomerID],
        [WhenExecuted],
        [enmType_WalletTransactionType],
        [Description],
        [DescriptionInCustLang],
        [Reference],
        [ReferenceTable],
        [ReferenceID],
        [Amount],
        [clc_Balance],
        [WhenApproved],
        [WhoInitiatedID],
        [spt_Comments],
        [AddedToBackOffice],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [UpdatingLoginID],
        [InvoiceURL],
        [RequestedTransactionID],
        [CounterpartCustomerID],
        [TransferText]
    FROM [CustomerWallet]
    WHERE [CustomerID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetCustomerDrivebotPayments
-- Fetches all drivebotpayments for a given customer
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetCustomerDrivebotPayments]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_DrivebotPayment],
        [ID],
        [CustomerID],
        [PartnershipCode],
        [DriverName],
        [StationId],
        [StationName],
        [Amount],
        [WalletPhoneNumber],
        [RequestedTransactionID],
        [ManiSuccess],
        [ManiErrorDescription],
        [DrivebotSuccess],
        [DrivebotDescription],
        [DrivebotUpdateTime],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [DrivebotPayment]
    WHERE [CustomerID] = @ID
    ORDER BY [DrivebotUpdateTime] DESC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetCustomerExternalCustomers
-- Fetches all externalcustomers for a given customer
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetCustomerExternalCustomers]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_ExternalCustomer],
        [ID],
        [CustomerID],
        [enmExternalService],
        [ExternalCustomerIdentifier],
        [clc_DateCreated],
        [WhenCustomerDetailsUpdatedAtExternalService],
        [WhenDocumentationRecdFromExternalService],
        [enmExternalCustomerStatus],
        [StatusDescription],
        [LastLoggedAlertID],
        [spt_Comments],
        [WhenLastUsed],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [ExternalCustomer]
    WHERE [CustomerID] = @ID
    ORDER BY [clc_DateCreated] DESC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetCustomerExternalTransactions
-- Fetches all externaltransactions for a given customer
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetCustomerExternalTransactions]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_ExternalTransaction],
        [ID],
        [enmExternalService],
        [clc_WhenInitialized],
        [CustomerID],
        [ExternalTransactionIdentifier],
        [TransactionCreditCardID],
        [CustomerWalletID],
        [MarginUsed],
        [ExecutingCurrency],
        [ExecutingCurrencyExchangeRate],
        [AmountILS],
        [Description],
        [StatusFromExternalService],
        [enmTransactionStatus_ExternalTransactionStatus],
        [PaymentApprovalCode],
        [WhenPaymentCompleted],
        [WhenTransactionCancelled],
        [WhenTransactionCompleted],
        [spt_Comments],
        [AmountRefunded],
        [WhenRefunded],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [ExternalReferenceNo]
    FROM [ExternalTransaction]
    WHERE [CustomerID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetCustomerImportTransactionLoadRows
-- Fetches all importtransactionloadrows for a given customer
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetCustomerImportTransactionLoadRows]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_ImportTransactionLoadRow],
        [ID],
        [ImportTransactionLoadID],
        [CustomerPhoneNumber],
        [enmCurrency],
        [Amount],
        [CardCid],
        [CardLast4Numbers],
        [LoadReference],
        [CustomerFirstName],
        [CustomerLastName],
        [CustomerIdentifier],
        [lgCustomerID],
        [lgCardID],
        [WhenInitialized],
        [TransactionLoadID],
        [spt_WhenCompleted],
        [IsSuccessful],
        [lgLoggedAlertID],
        [spt_Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [ImportTransactionLoadRow]
    WHERE [lgCustomerID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetCustomerInvoices
-- Fetches all invoices for a given customer
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetCustomerInvoices]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [Month],
        [CustomerID],
        [DistributorID],
        [InvoiceCode],
        [URL],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [UpdatingLoginID],
        [TableName_Invoice]
    FROM [Invoice]
    WHERE [CustomerID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetCustomerMCCBReceivers
-- Fetches all mccbreceivers for a given customer
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetCustomerMCCBReceivers]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_MCCBReceiver],
        [ID],
        [CustomerID],
        [FirstName],
        [LastName],
        [PhoneNumber],
        [BirthDate],
        [BirthCountryISO3166Alpha2],
        [CitizenshipCountryISO3166Alpha2],
        [ResidenceCountryISO3166Alpha2],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [enmGender],
        [IsBusiness],
        [enmIdentificationMethod],
        [IdentificationNumber],
        [Expiration]
    FROM [MCCBReceiver]
    WHERE [CustomerID] = @ID
    ORDER BY [BirthDate] DESC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetCustomerMCCBSecurityChecks
-- Fetches all mccbsecuritychecks for a given customer
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetCustomerMCCBSecurityChecks]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_MCCBSecurityCheck],
        [ID],
        [CustomerID],
        [MCCBReceiverID],
        [DestinationCountryISO3166Alpha2],
        [enmReceiverSecurityCleared_SecurityCleared],
        [ReceiverSecurityAllData],
        [enmPayerSecurityCleared_SecurityCleared],
        [PayerSecurityAllData],
        [WhenSecurityDataUpdated],
        [RequestedTransactionID],
        [MCCBTransactionID],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [MCCBSecurityCheck]
    WHERE [CustomerID] = @ID
    ORDER BY [WhenSecurityDataUpdated] DESC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetCustomerMCCBTransactions
-- Fetches all mccbtransactions for a given customer
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetCustomerMCCBTransactions]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_MCCBTransaction],
        [ID],
        [CustomerID],
        [enmPaymentMode],
        [AmountILSDisplayed],
        [AmountILSCalculated],
        [AmountILSAddedToFee],
        [PayoutAmount],
        [PayoutCurrency],
        [DisplayedFee],
        [DisplayedExchangeRate],
        [TransactionReference],
        [ICPTransactionFee],
        [enmSettlementCurrency_Currency],
        [ICPILSToSettlementER],
        [MCFeeInSettlementCurrency],
        [MCPayoutToSettlementER],
        [MCChargedAmount],
        [MCPrincipleAmount],
        [ProposalExpiry],
        [PaymentId],
        [PaymentPurpose],
        [PaymentStatus],
        [PaymentStatusTimestamp],
        [PaymentPendingStage],
        [PaymentPendingMaxCompletionDate],
        [RawDataPayment],
        [RawDataQuote],
        [Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [MCCBReceiverID],
        [RequestedTransactionID],
        [ProposalId],
        [MCCBReceiverAccountID],
        [RawDataStatus],
        [FundsTakenByICP],
        [FundsRefundedByICP]
    FROM [MCCBTransaction]
    WHERE [CustomerID] = @ID
    ORDER BY [PaymentStatusTimestamp] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetCustomerNewCardRequests
-- Fetches all newcardrequests for a given customer
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetCustomerNewCardRequests]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_NewCardRequest],
        [ID],
        [enmCurrency],
        [enmReceiptMethod],
        [InitialLoad],
        [enmInitialLoadMethod_LoadMethod],
        [CustomerID],
        [FirstName],
        [LastName],
        [BirthDate],
        [IsraelIDNumber],
        [lkpPassportCountry_Country],
        [PassportNumber],
        [enmGender],
        [ActualAddressNumber],
        [ActualAddressStreet],
        [ActualAddressCity],
        [ActualZipCode],
        [CellphoneNumber],
        [email],
        [spt_Comment],
        [WhenOpened],
        [spt_enmCardRequestStatus],
        [clc_WhenStatusChanged],
        [IsCustomerDefined],
        [IsKYCDefined],
        [DeliveryFeeAdjustment],
        [DistributorSentToID],
        [spt_InterviewedByUser],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [enmLastStatusBeforeCancel_CardRequestStatus],
        [NameOnCard],
        [clc_HasNameOnCard],
        [enmPendingLoadMethod_LoadMethod],
        [PendingLoadAmount],
        [PendingLoadReference],
        [PendingLoadUserResponsible],
        [CardActivationID],
        [InitialLoadComplete],
        [CustomerWalletID],
        [InitialLoadNumberOfPayments],
        [IntendedClubID],
        [CommittedLoadAmount],
        [CommittedPurchaseExchangeRateToILS],
        [CommittedLoadFee],
        [CommittedDeliveryFee],
        [CommittedNewCardFee],
        [enmCustomerType],
        [blg_NewCardRequestAPIID],
        [clc_NewCardRequestAPILoggedAlertID]
    FROM [NewCardRequest]
    WHERE [CustomerID] = @ID
    ORDER BY [BirthDate] DESC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetCustomerOnlineApprovals
-- Fetches all onlineapprovals for a given customer
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetCustomerOnlineApprovals]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [Cid],
        [OrgCode],
        [CardID],
        [CustomerID],
        [CurrencyType],
        [AuthCode],
        [ApproveDatetime],
        [ApproveDatetimeGmt],
        [DepositDate],
        [IndSmartTran],
        [OrigCurrencyCode],
        [OrigAmount],
        [ChargeAmount],
        [ExchangeRate],
        [MerchantNumber],
        [MerchantName],
        [MCC4],
        [MerchantCity],
        [AuthScore],
        [AuthRule],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [OnlineApproval]
    WHERE [CustomerID] = @ID
    ORDER BY [ApproveDatetime] DESC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetCustomerRequestedTransactions
-- Fetches all requestedtransactions for a given customer
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetCustomerRequestedTransactions]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_RequestedTransaction],
        [ID],
        [InitiatingCustomerID],
        [TargetCustomerID],
        [TargetCustomerEmailOrPhone],
        [TargetCustomerName],
        [CustomerTransactionDescription],
        [enmDirection_TransactionDirection],
        [enmType_RequestedTransactionType],
        [enmFeePayer_Payer],
        [DefiningAmount],
        [CreditCardID],
        [AmountPaidByCreditCard],
        [NumberOfPaymentsByCreditCard],
        [FirstPaymentAmountByCreditCard],
        [OtherPaymentsAmountByCreditCard],
        [AmountPaidByBit],
        [AmountPaidByWallet],
        [TotalAmountPaidByPayer],
        [AmountReceivedByReceiver],
        [lkpDefiningAmountCurrency_Currency],
        [PrepaidCardID],
        [DistributorID],
        [enmDepositLocation],
        [CodeToGiveChanger],
        [spt_enmStatus_RequestedTransactionStatus],
        [LoggedAlertID],
        [ErrorText],
        [spt_Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [SecurityCodeApproved],
        [clc_WhenStatusChanged],
        [InitiatingCustomerEmailOrPhone],
        [InitiatingCustomerName],
        [ExchangeRateToILSUsed],
        [TargetNonCustomerID],
        [clc_DateRequested],
        [clc_MonthRequested],
        [GroupRequestedTransactionID],
        [ReceivingCustomerID],
        [PayingCustomerID],
        [RepExchangeRateToILS],
        [DefiningAmountILS]
    FROM [RequestedTransaction]
    WHERE [InitiatingCustomerID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetCustomerRequestedTransactions
-- Fetches all requestedtransactions for a given customer
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetCustomerRequestedTransactions]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_RequestedTransaction],
        [ID],
        [InitiatingCustomerID],
        [TargetCustomerID],
        [TargetCustomerEmailOrPhone],
        [TargetCustomerName],
        [CustomerTransactionDescription],
        [enmDirection_TransactionDirection],
        [enmType_RequestedTransactionType],
        [enmFeePayer_Payer],
        [DefiningAmount],
        [CreditCardID],
        [AmountPaidByCreditCard],
        [NumberOfPaymentsByCreditCard],
        [FirstPaymentAmountByCreditCard],
        [OtherPaymentsAmountByCreditCard],
        [AmountPaidByBit],
        [AmountPaidByWallet],
        [TotalAmountPaidByPayer],
        [AmountReceivedByReceiver],
        [lkpDefiningAmountCurrency_Currency],
        [PrepaidCardID],
        [DistributorID],
        [enmDepositLocation],
        [CodeToGiveChanger],
        [spt_enmStatus_RequestedTransactionStatus],
        [LoggedAlertID],
        [ErrorText],
        [spt_Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [SecurityCodeApproved],
        [clc_WhenStatusChanged],
        [InitiatingCustomerEmailOrPhone],
        [InitiatingCustomerName],
        [ExchangeRateToILSUsed],
        [TargetNonCustomerID],
        [clc_DateRequested],
        [clc_MonthRequested],
        [GroupRequestedTransactionID],
        [ReceivingCustomerID],
        [PayingCustomerID],
        [RepExchangeRateToILS],
        [DefiningAmountILS]
    FROM [RequestedTransaction]
    WHERE [PayingCustomerID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetCustomerRequestedTransactions
-- Fetches all requestedtransactions for a given customer
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetCustomerRequestedTransactions]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_RequestedTransaction],
        [ID],
        [InitiatingCustomerID],
        [TargetCustomerID],
        [TargetCustomerEmailOrPhone],
        [TargetCustomerName],
        [CustomerTransactionDescription],
        [enmDirection_TransactionDirection],
        [enmType_RequestedTransactionType],
        [enmFeePayer_Payer],
        [DefiningAmount],
        [CreditCardID],
        [AmountPaidByCreditCard],
        [NumberOfPaymentsByCreditCard],
        [FirstPaymentAmountByCreditCard],
        [OtherPaymentsAmountByCreditCard],
        [AmountPaidByBit],
        [AmountPaidByWallet],
        [TotalAmountPaidByPayer],
        [AmountReceivedByReceiver],
        [lkpDefiningAmountCurrency_Currency],
        [PrepaidCardID],
        [DistributorID],
        [enmDepositLocation],
        [CodeToGiveChanger],
        [spt_enmStatus_RequestedTransactionStatus],
        [LoggedAlertID],
        [ErrorText],
        [spt_Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [SecurityCodeApproved],
        [clc_WhenStatusChanged],
        [InitiatingCustomerEmailOrPhone],
        [InitiatingCustomerName],
        [ExchangeRateToILSUsed],
        [TargetNonCustomerID],
        [clc_DateRequested],
        [clc_MonthRequested],
        [GroupRequestedTransactionID],
        [ReceivingCustomerID],
        [PayingCustomerID],
        [RepExchangeRateToILS],
        [DefiningAmountILS]
    FROM [RequestedTransaction]
    WHERE [ReceivingCustomerID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetCustomerRequestedTransactions
-- Fetches all requestedtransactions for a given customer
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetCustomerRequestedTransactions]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_RequestedTransaction],
        [ID],
        [InitiatingCustomerID],
        [TargetCustomerID],
        [TargetCustomerEmailOrPhone],
        [TargetCustomerName],
        [CustomerTransactionDescription],
        [enmDirection_TransactionDirection],
        [enmType_RequestedTransactionType],
        [enmFeePayer_Payer],
        [DefiningAmount],
        [CreditCardID],
        [AmountPaidByCreditCard],
        [NumberOfPaymentsByCreditCard],
        [FirstPaymentAmountByCreditCard],
        [OtherPaymentsAmountByCreditCard],
        [AmountPaidByBit],
        [AmountPaidByWallet],
        [TotalAmountPaidByPayer],
        [AmountReceivedByReceiver],
        [lkpDefiningAmountCurrency_Currency],
        [PrepaidCardID],
        [DistributorID],
        [enmDepositLocation],
        [CodeToGiveChanger],
        [spt_enmStatus_RequestedTransactionStatus],
        [LoggedAlertID],
        [ErrorText],
        [spt_Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [SecurityCodeApproved],
        [clc_WhenStatusChanged],
        [InitiatingCustomerEmailOrPhone],
        [InitiatingCustomerName],
        [ExchangeRateToILSUsed],
        [TargetNonCustomerID],
        [clc_DateRequested],
        [clc_MonthRequested],
        [GroupRequestedTransactionID],
        [ReceivingCustomerID],
        [PayingCustomerID],
        [RepExchangeRateToILS],
        [DefiningAmountILS]
    FROM [RequestedTransaction]
    WHERE [TargetCustomerID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetCustomerTasks
-- Fetches all tasks for a given customer
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetCustomerTasks]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Task],
        [ID],
        [CustomerID],
        [enmTask],
        [spt_enmStatus],
        [Description],
        [spt_HandlerComments],
        [ReferenceTable],
        [ReferenceTableID],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [HandledByUserID],
        [clc_WhenAdded],
        [WhenStatusChanged],
        [clc_enmInGame]
    FROM [Task]
    WHERE [CustomerID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetCustomerTransactionBits
-- Fetches all transactionbits for a given customer
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetCustomerTransactionBits]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_TransactionBit],
        [ID],
        [UniqueIdentifier],
        [RequestedTransactionID],
        [CustomerID],
        [RequestAmount],
        [CurrencyTypeCode],
        [RequestSubjectDescription],
        [EventExpirationTimestamp],
        [PaymentInitiationReference],
        [ExternalSystemReference],
        [DebitMethodCode],
        [TransactionSerialCode],
        [ProviderNbr],
        [WhenInitialized],
        [WhenValidated],
        [WhenCaptured],
        [RequestStatusCode],
        [RequestStatusDescription],
        [IssuerAuthorizationNumber],
        [LoggedAlertID],
        [ErrorText],
        [spt_Comment],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [ExecutionTimeSec],
        [Status],
        [TransactionSerial],
        [NumberOfTries],
        [IsSuccessful],
        [CustomerWalletID],
        [CardLast4Numbers],
        [ApprovalCode],
        [AllInfo],
        [NonCustomerID]
    FROM [TransactionBit]
    WHERE [CustomerID] = @ID
    ORDER BY [EventExpirationTimestamp] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetCustomerTransactionCreditCards
-- Fetches all transactioncreditcards for a given customer
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetCustomerTransactionCreditCards]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_TransactionCreditCard],
        [ID],
        [UniqueIdentifier],
        [WhenInitialized],
        [WhenValidated],
        [CustomerCreditCardID],
        [CustomerID],
        [NumberOfPayments],
        [FirstPaymentAmount],
        [RemainingPaymentsAmount],
        [TotalPaymentAmount],
        [CreditCardFee],
        [Interest],
        [entCardHolderTZ],
        [CardHolderName],
        [CardLast4Numbers],
        [CardExpiry],
        [ExecutionTimeSec],
        [CGResult],
        [CGUserMessage],
        [CGAdditionalInfo],
        [TerminalNumber],
        [lkpClearingHouse],
        [lkpCardBrand],
        [lkpCardIssuingCompany],
        [IsCardForeign],
        [ClearingHouseApprovalNo],
        [VoucherNo],
        [GeneralData],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [Status],
        [CGGuid],
        [CGTranID],
        [PaymentSchedule],
        [EffectiveInterestRate],
        [NumberOfTries],
        [enmService],
        [ApprovedForWalletTransfer],
        [CardHolderCellphoneOrEmail],
        [CGAllInfo],
        [spt_Comment],
        [InterpretationErrors],
        [RequestedTransactionID],
        [CGMessage],
        [PaymentsTextToUser],
        [CardBin],
        [IsSuccessful],
        [LoggedAlertID],
        [CustomerWalletID],
        [PaymentMethod],
        [ValidationSource],
        [NonCustomerID]
    FROM [TransactionCreditCard]
    WHERE [CustomerID] = @ID
    ORDER BY [WhenValidated] DESC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetCustomerTransactionLoads
-- Fetches all transactionloads for a given customer
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetCustomerTransactionLoads]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_TransactionLoad],
        [ID],
        [UserID],
        [DistributorID],
        [enmLoadType],
        [CustomerID],
        [CardID],
        [enmCurrency],
        [Amount],
        [WhenRequested],
        [ExchangeRateUsed],
        [AmountInILS],
        [PaymentDebitResult],
        [PaymentDebitAuthorizationCode],
        [PaymentDebitDetails],
        [DebitElapsedTimeSec],
        [enmLoadApproved_ApprovalType],
        [LoadResponseCode],
        [LoadResponse],
        [LoadElapsedTimeSec],
        [PaymentCreditResult],
        [PaymentCreditAuthorizationCode],
        [PaymentCreditDetails],
        [CreditElapsedTimeSec],
        [LoggedAlertID],
        [FaultNo],
        [enmLoadResult],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [clc_Month],
        [enmCoveredBy],
        [Details],
        [CustomerReference],
        [RepresentativeExchangeRate],
        [clc_Day],
        [RequestedTransactionID]
    FROM [TransactionLoad]
    WHERE [CustomerID] = @ID
    ORDER BY [DebitElapsedTimeSec] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO


-- =========================================
-- SP_GetCustomerClubCustomers
-- Fetches all customers for a given customerclub
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetCustomerClubCustomers]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Customer],
        [ID],
        [FirstName],
        [LastName],
        [FirstNameLatin],
        [LastNameLatin],
        [email],
        [BirthDate],
        [IsraelIDNumber],
        [lkpPassportCountry_Country],
        [PassportNumber],
        [DateIssued],
        [ExpiryDateObs],
        [clc_CustomerIdentifier],
        [CellphoneNumber],
        [HomePhoneNumber],
        [ActualAddressNumber],
        [ActualAddressStreet],
        [ActualAddressCity],
        [ActualZipCode],
        [MailAddressNumber],
        [MailAddressStreet],
        [MailAddressCity],
        [MailZipCode],
        [enmGender],
        [clc_WhenRegistered],
        [enmLanguage],
        [spt_Comment],
        [spt_IsEnabled],
        [IsEnabledChangedBy],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spt_HasSignedServiceRequest],
        [lkpBank],
        [lkpBranch],
        [BankAccount],
        [lkpSecretQuestion],
        [entResponseToSecretQuestion],
        [SAPAccountNumber],
        [enmMessagingMode],
        [enmCustomerType],
        [spt_enmIsOnTerrorList],
        [scb_enmIsOnTerrorList],
        [spt_TerrorListUpdatedOn],
        [UserPhoto],
        [CustomerClubID],
        [AssignedDistributorID],
        [upl_TZFront],
        [upl_TZBack],
        [upl_Passport],
        [upl_Mugshot],
        [upl_ManiDocumentation],
        [ActualAddressApt],
        [MailAddressApt],
        [entSecurityCode],
        [upl_BankDocumentation],
        [spt_enmBankDocumentationStatus_DocumentationStatus],
        [scb_enmBankDocumentationStatus_DocumentationStatus],
        [Scratch],
        [IsBusiness],
        [BusinessName],
        [spt_enmBusinessDocumentationStatus_DocumentationStatus],
        [scb_enmBusinessDocumentationStatus_DocumentationStatus],
        [upl_LivenessVideo],
        [upl_LivenessPicture],
        [VerificationResults],
        [OCRSuccess],
        [LivenessSuccess],
        [BiometricMatchSuccess],
        [BiometricMatchScore],
        [IsRejected],
        [RejectedReason],
        [upl_PaymentsDocumentation],
        [IPRegisteredFrom],
        [upl_DLFront],
        [upl_DLBack],
        [upl_FailedDocFront],
        [enmLastIDTypeRecd_IdentificationMethod],
        [upl_BusinessLogo],
        [spt_enmSecurityTier],
        [spt_BusinessLogoNeedsApproval],
        [spt_enmSecurityTierChangeStatus_DocumentationStatus],
        [scb_enmSecurityTierChangeStatus_DocumentationStatus],
        [upl_FailedDocBack],
        [CaseNumber],
        [FailedDocDetails],
        [upl_FailedDocLivenessPicture],
        [upl_FailedDocLivenessVideo],
        [upl_FailedDocMugshot],
        [ExpiryTZ],
        [ExpiryPassport],
        [ExpiryDL],
        [upl_BusinessDocumentation],
        [ActualAddressStreetLatin],
        [ActualAddressCityLatin]
    FROM [Customer]
    WHERE [CustomerClubID] = @ID
    ORDER BY [BirthDate] DESC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetCustomerClubFeeOverrides
-- Fetches all feeoverrides for a given customerclub
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetCustomerClubFeeOverrides]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_FeeOverride],
        [ID],
        [FeeID],
        [CardClubID],
        [DistributorID],
        [OverrideAmt],
        [OverridePctOfTrigger],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [OverrideMax],
        [CustomerClubID],
        [OverrideMin]
    FROM [FeeOverride]
    WHERE [CustomerClubID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetCustomerClubLimitationOverrides
-- Fetches all limitationoverrides for a given customerclub
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetCustomerClubLimitationOverrides]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_LimitationOverride],
        [ID],
        [LimitationID],
        [CardClubID],
        [DistributorID],
        [OverrideAmount],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [CustomerClubID]
    FROM [LimitationOverride]
    WHERE [CustomerClubID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO


-- =========================================
-- SP_GetCustomerCreditCardRequestedTransactions
-- Fetches all requestedtransactions for a given customercreditcard
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetCustomerCreditCardRequestedTransactions]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_RequestedTransaction],
        [ID],
        [InitiatingCustomerID],
        [TargetCustomerID],
        [TargetCustomerEmailOrPhone],
        [TargetCustomerName],
        [CustomerTransactionDescription],
        [enmDirection_TransactionDirection],
        [enmType_RequestedTransactionType],
        [enmFeePayer_Payer],
        [DefiningAmount],
        [CreditCardID],
        [AmountPaidByCreditCard],
        [NumberOfPaymentsByCreditCard],
        [FirstPaymentAmountByCreditCard],
        [OtherPaymentsAmountByCreditCard],
        [AmountPaidByBit],
        [AmountPaidByWallet],
        [TotalAmountPaidByPayer],
        [AmountReceivedByReceiver],
        [lkpDefiningAmountCurrency_Currency],
        [PrepaidCardID],
        [DistributorID],
        [enmDepositLocation],
        [CodeToGiveChanger],
        [spt_enmStatus_RequestedTransactionStatus],
        [LoggedAlertID],
        [ErrorText],
        [spt_Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [SecurityCodeApproved],
        [clc_WhenStatusChanged],
        [InitiatingCustomerEmailOrPhone],
        [InitiatingCustomerName],
        [ExchangeRateToILSUsed],
        [TargetNonCustomerID],
        [clc_DateRequested],
        [clc_MonthRequested],
        [GroupRequestedTransactionID],
        [ReceivingCustomerID],
        [PayingCustomerID],
        [RepExchangeRateToILS],
        [DefiningAmountILS]
    FROM [RequestedTransaction]
    WHERE [CreditCardID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetCustomerCreditCardTransactionCreditCards
-- Fetches all transactioncreditcards for a given customercreditcard
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetCustomerCreditCardTransactionCreditCards]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_TransactionCreditCard],
        [ID],
        [UniqueIdentifier],
        [WhenInitialized],
        [WhenValidated],
        [CustomerCreditCardID],
        [CustomerID],
        [NumberOfPayments],
        [FirstPaymentAmount],
        [RemainingPaymentsAmount],
        [TotalPaymentAmount],
        [CreditCardFee],
        [Interest],
        [entCardHolderTZ],
        [CardHolderName],
        [CardLast4Numbers],
        [CardExpiry],
        [ExecutionTimeSec],
        [CGResult],
        [CGUserMessage],
        [CGAdditionalInfo],
        [TerminalNumber],
        [lkpClearingHouse],
        [lkpCardBrand],
        [lkpCardIssuingCompany],
        [IsCardForeign],
        [ClearingHouseApprovalNo],
        [VoucherNo],
        [GeneralData],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [Status],
        [CGGuid],
        [CGTranID],
        [PaymentSchedule],
        [EffectiveInterestRate],
        [NumberOfTries],
        [enmService],
        [ApprovedForWalletTransfer],
        [CardHolderCellphoneOrEmail],
        [CGAllInfo],
        [spt_Comment],
        [InterpretationErrors],
        [RequestedTransactionID],
        [CGMessage],
        [PaymentsTextToUser],
        [CardBin],
        [IsSuccessful],
        [LoggedAlertID],
        [CustomerWalletID],
        [PaymentMethod],
        [ValidationSource],
        [NonCustomerID]
    FROM [TransactionCreditCard]
    WHERE [CustomerCreditCardID] = @ID
    ORDER BY [WhenValidated] DESC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO


-- =========================================
-- SP_GetCustomerWalletBackofficeTransactions
-- Fetches all backofficetransactions for a given customerwallet
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetCustomerWalletBackofficeTransactions]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_BackofficeTransaction],
        [ID],
        [DistributorID],
        [CustomerID],
        [TransactionLoadID],
        [CardOrderFromIssuerID],
        [CardOrderByDistributorID],
        [CustomerWalletID],
        [enmBackofficeTransactionType],
        [AmountToAccountOwner],
        [enmAccountOwner],
        [WhenRequested],
        [WhenToExecute],
        [RequestingUser],
        [CodeForInvoice],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spt_WhenSentToSAP],
        [CardID],
        [clc_MonthRequested],
        [clc_DayRequested],
        [TransactionCreditCardID],
        [TransactionBitID],
        [RequestedTransactionID]
    FROM [BackofficeTransaction]
    WHERE [CustomerWalletID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetCustomerWalletExternalTransactions
-- Fetches all externaltransactions for a given customerwallet
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetCustomerWalletExternalTransactions]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_ExternalTransaction],
        [ID],
        [enmExternalService],
        [clc_WhenInitialized],
        [CustomerID],
        [ExternalTransactionIdentifier],
        [TransactionCreditCardID],
        [CustomerWalletID],
        [MarginUsed],
        [ExecutingCurrency],
        [ExecutingCurrencyExchangeRate],
        [AmountILS],
        [Description],
        [StatusFromExternalService],
        [enmTransactionStatus_ExternalTransactionStatus],
        [PaymentApprovalCode],
        [WhenPaymentCompleted],
        [WhenTransactionCancelled],
        [WhenTransactionCompleted],
        [spt_Comments],
        [AmountRefunded],
        [WhenRefunded],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [ExternalReferenceNo]
    FROM [ExternalTransaction]
    WHERE [CustomerWalletID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetCustomerWalletRequestedTransactionFees
-- Fetches all requestedtransactionfees for a given customerwallet
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetCustomerWalletRequestedTransactionFees]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_RequestedTransactionFee],
        [ID],
        [RequestedTransactionID],
        [enmType_FeeType],
        [enmPayer],
        [AmountToBaseFeeOn],
        [FeeDefinitionAmt],
        [FeeDefinitionPct],
        [FeeDefinitionMax],
        [TotalFee],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [CustomerWalletID],
        [FeeDefinitionMin]
    FROM [RequestedTransactionFee]
    WHERE [CustomerWalletID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetCustomerWalletTransactionBits
-- Fetches all transactionbits for a given customerwallet
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetCustomerWalletTransactionBits]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_TransactionBit],
        [ID],
        [UniqueIdentifier],
        [RequestedTransactionID],
        [CustomerID],
        [RequestAmount],
        [CurrencyTypeCode],
        [RequestSubjectDescription],
        [EventExpirationTimestamp],
        [PaymentInitiationReference],
        [ExternalSystemReference],
        [DebitMethodCode],
        [TransactionSerialCode],
        [ProviderNbr],
        [WhenInitialized],
        [WhenValidated],
        [WhenCaptured],
        [RequestStatusCode],
        [RequestStatusDescription],
        [IssuerAuthorizationNumber],
        [LoggedAlertID],
        [ErrorText],
        [spt_Comment],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [ExecutionTimeSec],
        [Status],
        [TransactionSerial],
        [NumberOfTries],
        [IsSuccessful],
        [CustomerWalletID],
        [CardLast4Numbers],
        [ApprovalCode],
        [AllInfo],
        [NonCustomerID]
    FROM [TransactionBit]
    WHERE [CustomerWalletID] = @ID
    ORDER BY [EventExpirationTimestamp] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetCustomerWalletTransactionCreditCards
-- Fetches all transactioncreditcards for a given customerwallet
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetCustomerWalletTransactionCreditCards]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_TransactionCreditCard],
        [ID],
        [UniqueIdentifier],
        [WhenInitialized],
        [WhenValidated],
        [CustomerCreditCardID],
        [CustomerID],
        [NumberOfPayments],
        [FirstPaymentAmount],
        [RemainingPaymentsAmount],
        [TotalPaymentAmount],
        [CreditCardFee],
        [Interest],
        [entCardHolderTZ],
        [CardHolderName],
        [CardLast4Numbers],
        [CardExpiry],
        [ExecutionTimeSec],
        [CGResult],
        [CGUserMessage],
        [CGAdditionalInfo],
        [TerminalNumber],
        [lkpClearingHouse],
        [lkpCardBrand],
        [lkpCardIssuingCompany],
        [IsCardForeign],
        [ClearingHouseApprovalNo],
        [VoucherNo],
        [GeneralData],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [Status],
        [CGGuid],
        [CGTranID],
        [PaymentSchedule],
        [EffectiveInterestRate],
        [NumberOfTries],
        [enmService],
        [ApprovedForWalletTransfer],
        [CardHolderCellphoneOrEmail],
        [CGAllInfo],
        [spt_Comment],
        [InterpretationErrors],
        [RequestedTransactionID],
        [CGMessage],
        [PaymentsTextToUser],
        [CardBin],
        [IsSuccessful],
        [LoggedAlertID],
        [CustomerWalletID],
        [PaymentMethod],
        [ValidationSource],
        [NonCustomerID]
    FROM [TransactionCreditCard]
    WHERE [CustomerWalletID] = @ID
    ORDER BY [WhenValidated] DESC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO


-- =========================================
-- SP_GetDistributorBackofficeTransactions
-- Fetches all backofficetransactions for a given distributor
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetDistributorBackofficeTransactions]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_BackofficeTransaction],
        [ID],
        [DistributorID],
        [CustomerID],
        [TransactionLoadID],
        [CardOrderFromIssuerID],
        [CardOrderByDistributorID],
        [CustomerWalletID],
        [enmBackofficeTransactionType],
        [AmountToAccountOwner],
        [enmAccountOwner],
        [WhenRequested],
        [WhenToExecute],
        [RequestingUser],
        [CodeForInvoice],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spt_WhenSentToSAP],
        [CardID],
        [clc_MonthRequested],
        [clc_DayRequested],
        [TransactionCreditCardID],
        [TransactionBitID],
        [RequestedTransactionID]
    FROM [BackofficeTransaction]
    WHERE [DistributorID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetDistributorCards
-- Fetches all cards for a given distributor
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetDistributorCards]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Card],
        [ID],
        [CardClubID],
        [Cid],
        [CardLast4Numbers],
        [Expiry],
        [CustomerID],
        [enmCurrency],
        [OwningDistributorID],
        [CardOrderFromIssuerID],
        [CardOrderByDistributorID],
        [ActivationDate],
        [IsLost],
        [ReportedLostWhen],
        [LastBalance],
        [LastBalanceTime],
        [enmStatusAtCardIssuer],
        [agg_LoadsToday],
        [agg_LoadsThisMonth],
        [agg_AmountLoadedToday],
        [agg_AmountLoadedThisMonth],
        [enmStatusAtICP],
        [WhenStatusAtICPChanged],
        [StatusAtICPChangedBy],
        [spt_Comment],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [PreviousDistributorID],
        [EmbossedText],
        [logCellPhone],
        [agg_AmountLoadedTotal],
        [agg_LoadsTotal],
        [spt_IsCashWithdrawalAllowed],
        [spt_LastMonthlyFeeDatePaid],
        [CardHolderName],
        [CardHolderPhoneNumberOrEmail],
        [CardHolderIdentifier],
        [spt_enmIsOnTerrorList],
        [scb_enmIsOnTerrorList],
        [spt_TerrorListUpdatedOn]
    FROM [Card]
    WHERE [OwningDistributorID] = @ID
    ORDER BY [ActivationDate] DESC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetDistributorCards
-- Fetches all cards for a given distributor
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetDistributorCards]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Card],
        [ID],
        [CardClubID],
        [Cid],
        [CardLast4Numbers],
        [Expiry],
        [CustomerID],
        [enmCurrency],
        [OwningDistributorID],
        [CardOrderFromIssuerID],
        [CardOrderByDistributorID],
        [ActivationDate],
        [IsLost],
        [ReportedLostWhen],
        [LastBalance],
        [LastBalanceTime],
        [enmStatusAtCardIssuer],
        [agg_LoadsToday],
        [agg_LoadsThisMonth],
        [agg_AmountLoadedToday],
        [agg_AmountLoadedThisMonth],
        [enmStatusAtICP],
        [WhenStatusAtICPChanged],
        [StatusAtICPChangedBy],
        [spt_Comment],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [PreviousDistributorID],
        [EmbossedText],
        [logCellPhone],
        [agg_AmountLoadedTotal],
        [agg_LoadsTotal],
        [spt_IsCashWithdrawalAllowed],
        [spt_LastMonthlyFeeDatePaid],
        [CardHolderName],
        [CardHolderPhoneNumberOrEmail],
        [CardHolderIdentifier],
        [spt_enmIsOnTerrorList],
        [scb_enmIsOnTerrorList],
        [spt_TerrorListUpdatedOn]
    FROM [Card]
    WHERE [PreviousDistributorID] = @ID
    ORDER BY [ActivationDate] DESC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetDistributorCardActivations
-- Fetches all cardactivations for a given distributor
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetDistributorCardActivations]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CardActivation],
        [ID],
        [DistributorID],
        [CustomerID],
        [CardID],
        [clc_WhenInitiated],
        [Profession],
        [lkpEmploymentStatus],
        [Employer],
        [lkpCardUse],
        [PublicPosition],
        [ConnectionWithPublicPerson],
        [lkpAdditionalCitizenship_Country],
        [lkpConnectionWithIsrael],
        [ConnectionWithIsraelDetails],
        [lkpMainUseOfCard_CardUsage],
        [IsExpectedToReceiveDeposits],
        [IsExpectedToReceiveDepositsDetails],
        [WasPreviouslyDeniedBankService],
        [WitnessFirstName],
        [WitnessLastName],
        [WitnessIsraelID],
        [enmIDTypeForWitness_IdentificationMethod],
        [enmApproved_ApprovalType],
        [ResponseCode],
        [ResponseText],
        [LoggedAlertID],
        [WhenRequested],
        [WhenResponded],
        [InitialLoadID],
        [DocumentionLoadDate],
        [spt_IsDocumentationOK],
        [lgInterviewedByUser],
        [enmRequestedCurrency_Currency],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [lgAddedBy],
        [enmCardActivationNextTask],
        [spt_Comment],
        [logCellPhone],
        [spt_OnHold],
        [WantsNameOnCard],
        [CardClubID],
        [CreatingApp],
        [spt_DeliveryFee],
        [spt_NewCardFee],
        [RequestedInitialLoad],
        [spt_EmbossFee]
    FROM [CardActivation]
    WHERE [DistributorID] = @ID
    ORDER BY [DocumentionLoadDate] DESC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetDistributorCardOrderByDistributors
-- Fetches all cardorderbydistributors for a given distributor
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetDistributorCardOrderByDistributors]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CardOrderByDistributor],
        [ID],
        [NumberOfCards],
        [enmCurrency],
        [CardClubID],
        [OrderedByUserID],
        [DistributorID],
        [DistributorOrderCardsFee],
        [WhenOrdered],
        [spt_enmStatus_CardOrderStatus],
        [spt_WhenReceived],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spt_enmCustomerCardActivationStatus_Status],
        [scb_enmCustomerCardActivationStatus_Status]
    FROM [CardOrderByDistributor]
    WHERE [DistributorID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetDistributorCustomers
-- Fetches all customers for a given distributor
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetDistributorCustomers]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_Customer],
        [ID],
        [FirstName],
        [LastName],
        [FirstNameLatin],
        [LastNameLatin],
        [email],
        [BirthDate],
        [IsraelIDNumber],
        [lkpPassportCountry_Country],
        [PassportNumber],
        [DateIssued],
        [ExpiryDateObs],
        [clc_CustomerIdentifier],
        [CellphoneNumber],
        [HomePhoneNumber],
        [ActualAddressNumber],
        [ActualAddressStreet],
        [ActualAddressCity],
        [ActualZipCode],
        [MailAddressNumber],
        [MailAddressStreet],
        [MailAddressCity],
        [MailZipCode],
        [enmGender],
        [clc_WhenRegistered],
        [enmLanguage],
        [spt_Comment],
        [spt_IsEnabled],
        [IsEnabledChangedBy],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spt_HasSignedServiceRequest],
        [lkpBank],
        [lkpBranch],
        [BankAccount],
        [lkpSecretQuestion],
        [entResponseToSecretQuestion],
        [SAPAccountNumber],
        [enmMessagingMode],
        [enmCustomerType],
        [spt_enmIsOnTerrorList],
        [scb_enmIsOnTerrorList],
        [spt_TerrorListUpdatedOn],
        [UserPhoto],
        [CustomerClubID],
        [AssignedDistributorID],
        [upl_TZFront],
        [upl_TZBack],
        [upl_Passport],
        [upl_Mugshot],
        [upl_ManiDocumentation],
        [ActualAddressApt],
        [MailAddressApt],
        [entSecurityCode],
        [upl_BankDocumentation],
        [spt_enmBankDocumentationStatus_DocumentationStatus],
        [scb_enmBankDocumentationStatus_DocumentationStatus],
        [Scratch],
        [IsBusiness],
        [BusinessName],
        [spt_enmBusinessDocumentationStatus_DocumentationStatus],
        [scb_enmBusinessDocumentationStatus_DocumentationStatus],
        [upl_LivenessVideo],
        [upl_LivenessPicture],
        [VerificationResults],
        [OCRSuccess],
        [LivenessSuccess],
        [BiometricMatchSuccess],
        [BiometricMatchScore],
        [IsRejected],
        [RejectedReason],
        [upl_PaymentsDocumentation],
        [IPRegisteredFrom],
        [upl_DLFront],
        [upl_DLBack],
        [upl_FailedDocFront],
        [enmLastIDTypeRecd_IdentificationMethod],
        [upl_BusinessLogo],
        [spt_enmSecurityTier],
        [spt_BusinessLogoNeedsApproval],
        [spt_enmSecurityTierChangeStatus_DocumentationStatus],
        [scb_enmSecurityTierChangeStatus_DocumentationStatus],
        [upl_FailedDocBack],
        [CaseNumber],
        [FailedDocDetails],
        [upl_FailedDocLivenessPicture],
        [upl_FailedDocLivenessVideo],
        [upl_FailedDocMugshot],
        [ExpiryTZ],
        [ExpiryPassport],
        [ExpiryDL],
        [upl_BusinessDocumentation],
        [ActualAddressStreetLatin],
        [ActualAddressCityLatin]
    FROM [Customer]
    WHERE [AssignedDistributorID] = @ID
    ORDER BY [BirthDate] DESC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetDistributorCustomerCardTransactions
-- Fetches all customercardtransactions for a given distributor
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetDistributorCustomerCardTransactions]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [FileName],
        [RowNumberInFile],
        [CustomerID],
        [CardID],
        [Date],
        [WhenApproved],
        [ApprovalCode],
        [TransactionType],
        [CardUseMethod],
        [EstablishmentName],
        [EstablishmentEnglishName],
        [lkpMerchantCategory],
        [Currency],
        [ExchangeRateUsed],
        [AmountInLocalCurrency],
        [AmountInCardCurrency],
        [VAT],
        [Commission],
        [EstablishmentAddress],
        [EstablishmentCity],
        [EstablishmentCountry],
        [EstablishmentLocation],
        [IsEMV],
        [spt_IsContested],
        [ClientPayment],
        [ICPPayment],
        [DistributorPayment],
        [ICPProfit],
        [enmUpayCardTransactionType_CustomerTransactionType],
        [spt_CHBRefused],
        [ClientCHBFee],
        [spt_Comment],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [lgOwningDistributorID],
        [CardCid],
        [OrgCode],
        [upl_Receipt],
        [lgCardClubID]
    FROM [CustomerCardTransaction]
    WHERE [lgOwningDistributorID] = @ID
    ORDER BY [Date] DESC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetDistributorDistributorBranches
-- Fetches all distributorbranches for a given distributor
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetDistributorDistributorBranches]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_DistributorBranch],
        [ID],
        [DistributorID],
        [locName],
        [locStreetAndNumber],
        [locCity],
        [lkpRegion],
        [PhoneNumber],
        [email],
        [Location],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [DistributorBranch]
    WHERE [DistributorID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetDistributorDistributorObligos
-- Fetches all distributorobligos for a given distributor
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetDistributorDistributorObligos]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_DistributorObligo],
        [ID],
        [DistributorID],
        [WhenExecuted],
        [enmObligoTransactionType],
        [Amount],
        [Reference],
        [Authoriser],
        [Balance],
        [spt_Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [DistributorObligo]
    WHERE [DistributorID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetDistributorFeeOverrides
-- Fetches all feeoverrides for a given distributor
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetDistributorFeeOverrides]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_FeeOverride],
        [ID],
        [FeeID],
        [CardClubID],
        [DistributorID],
        [OverrideAmt],
        [OverridePctOfTrigger],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [OverrideMax],
        [CustomerClubID],
        [OverrideMin]
    FROM [FeeOverride]
    WHERE [DistributorID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetDistributorGovtReportDistributors
-- Fetches all govtreportdistributors for a given distributor
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetDistributorGovtReportDistributors]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_GovtReportDistributor],
        [ID],
        [DistributorID],
        [ReportFullName],
        [ReportIdentityNo],
        [ReportBirthOrIncorporationDate],
        [lkpReportGender],
        [ReportTelephoneAreaCode],
        [ReportTelephonePhoneNumber],
        [ReportFaxOrEmail],
        [ReportAddress01Street],
        [ReportAddress01House],
        [ReportAddress01City],
        [ReportAddress01Zip],
        [ReportFirstName],
        [ReportSurnameOrCompanyname],
        [ReportCellPhoneAreaCode],
        [ReportCellPhoneNumber],
        [ReportStreetCode],
        [ReportCityCode],
        [ReportS01FullName],
        [ReportS01IdentityNo],
        [ReportS01BirthOrIncorporationDate],
        [lkpReportS01Gender_ReportGender],
        [ReportS01TelephoneAreaCode],
        [ReportS01TelephonePhoneNumber],
        [ReportS01FaxOrEmail],
        [ReportS01Address01Street],
        [ReportS01Address01House],
        [ReportS01Address01City],
        [ReportS01Address01Zip],
        [ReportS01FirstName],
        [ReportS01SurnameOrCompanyname],
        [ReportS01CellPhoneAreaCode],
        [ReportS01CellPhoneNumber],
        [ReportS01StreetCode],
        [ReportS01CityCode],
        [ReportS02FullName],
        [ReportS02IdentityNo],
        [ReportS02BirthOrIncorporationDate],
        [lkpReportS02Gender_ReportGender],
        [ReportS02TelephoneAreaCode],
        [ReportS02TelephonePhoneNumber],
        [ReportS02FaxOrEmail],
        [ReportS02Address01Street],
        [ReportS02Address01House],
        [ReportS02Address01City],
        [ReportS02Address01Zip],
        [ReportS02FirstName],
        [ReportS02SurnameOrCompanyname],
        [ReportS02CellPhoneAreaCode],
        [ReportS02CellPhoneNumber],
        [ReportS02StreetCode],
        [ReportS02CityCode],
        [enmReportS01EntityType_GovtReportEntityType],
        [enmReportS02EntityType_GovtReportEntityType],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [lkpIdentityNoType],
        [IsPublicBenefitCompany]
    FROM [GovtReportDistributor]
    WHERE [DistributorID] = @ID
    ORDER BY [ReportBirthOrIncorporationDate] DESC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetDistributorImportTransactionLoads
-- Fetches all importtransactionloads for a given distributor
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetDistributorImportTransactionLoads]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_ImportTransactionLoad],
        [ID],
        [DistributorID],
        [WhenInitialized],
        [InitiatedByUserID],
        [spt_WhenCompleted],
        [LoadsRequested],
        [LoadsApproved],
        [spt_Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [ImportTransactionLoad]
    WHERE [DistributorID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetDistributorInvoices
-- Fetches all invoices for a given distributor
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetDistributorInvoices]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [Month],
        [CustomerID],
        [DistributorID],
        [InvoiceCode],
        [URL],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [UpdatingLoginID],
        [TableName_Invoice]
    FROM [Invoice]
    WHERE [DistributorID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetDistributorLimitationOverrides
-- Fetches all limitationoverrides for a given distributor
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetDistributorLimitationOverrides]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_LimitationOverride],
        [ID],
        [LimitationID],
        [CardClubID],
        [DistributorID],
        [OverrideAmount],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [CustomerClubID]
    FROM [LimitationOverride]
    WHERE [DistributorID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetDistributorNewCardRequests
-- Fetches all newcardrequests for a given distributor
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetDistributorNewCardRequests]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_NewCardRequest],
        [ID],
        [enmCurrency],
        [enmReceiptMethod],
        [InitialLoad],
        [enmInitialLoadMethod_LoadMethod],
        [CustomerID],
        [FirstName],
        [LastName],
        [BirthDate],
        [IsraelIDNumber],
        [lkpPassportCountry_Country],
        [PassportNumber],
        [enmGender],
        [ActualAddressNumber],
        [ActualAddressStreet],
        [ActualAddressCity],
        [ActualZipCode],
        [CellphoneNumber],
        [email],
        [spt_Comment],
        [WhenOpened],
        [spt_enmCardRequestStatus],
        [clc_WhenStatusChanged],
        [IsCustomerDefined],
        [IsKYCDefined],
        [DeliveryFeeAdjustment],
        [DistributorSentToID],
        [spt_InterviewedByUser],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [enmLastStatusBeforeCancel_CardRequestStatus],
        [NameOnCard],
        [clc_HasNameOnCard],
        [enmPendingLoadMethod_LoadMethod],
        [PendingLoadAmount],
        [PendingLoadReference],
        [PendingLoadUserResponsible],
        [CardActivationID],
        [InitialLoadComplete],
        [CustomerWalletID],
        [InitialLoadNumberOfPayments],
        [IntendedClubID],
        [CommittedLoadAmount],
        [CommittedPurchaseExchangeRateToILS],
        [CommittedLoadFee],
        [CommittedDeliveryFee],
        [CommittedNewCardFee],
        [enmCustomerType],
        [blg_NewCardRequestAPIID],
        [clc_NewCardRequestAPILoggedAlertID]
    FROM [NewCardRequest]
    WHERE [DistributorSentToID] = @ID
    ORDER BY [BirthDate] DESC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetDistributorNewCardRequestAPIs
-- Fetches all newcardrequestapis for a given distributor
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetDistributorNewCardRequestAPIs]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_NewCardRequestAPI],
        [ID],
        [enmRequestedCurrency_Currency],
        [FirstName],
        [LastName],
        [FirstNameLatin],
        [LastNameLatin],
        [email],
        [BirthDate],
        [IsraelIDNumber],
        [lkpPassportCountry_Country],
        [PassportNumber],
        [DateIssued],
        [ExpiryDate],
        [CellphoneNumber],
        [HomePhoneNumber],
        [ActualAddressNumber],
        [ActualAddressStreet],
        [ActualAddressCity],
        [ActualZipCode],
        [MailAddressNumber],
        [MailAddressStreet],
        [MailAddressCity],
        [MailZipCode],
        [enmGender],
        [enmLanguage],
        [enmMessagingMode],
        [Profession],
        [lkpEmploymentStatus],
        [Employer],
        [lkpCardUse],
        [PublicPosition],
        [ConnectionWithPublicPerson],
        [lkpAdditionalCitizenship_Country],
        [lkpConnectionWithIsrael],
        [ConnectionWithIsraelDetails],
        [lkpMainUseOfCard_CardUsage],
        [IsExpectedToReceiveDeposits],
        [IsExpectedToReceiveDepositsDetails],
        [WasPreviouslyDeniedBankService],
        [WitnessFirstName],
        [WitnessLastName],
        [WitnessIsraelID],
        [enmIdentificationMethod],
        [InitialLoad],
        [enmInitialLoadMethod_LoadMethod],
        [CustomerReference],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [UpdatingLoginID],
        [AmountIncludesLoadFee],
        [CardAllocationFee],
        [MessageIdentifier],
        [IDFrontURL],
        [IDBackURL],
        [IDAppendixURL],
        [PassportURL],
        [blg_DistributorID],
        [clc_NewCardRequestID],
        [clc_LoggedAlertID],
        [clc_enmStatus_NewCardRequestAPIStatus],
        [spt_Comments],
        [blg_UserName],
        [upl_TZFront],
        [upl_TZBack],
        [upl_Passport],
        [clc_WhenAdded]
    FROM [NewCardRequestAPI]
    WHERE [blg_DistributorID] = @ID
    ORDER BY [BirthDate] DESC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetDistributorRequestedTransactions
-- Fetches all requestedtransactions for a given distributor
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetDistributorRequestedTransactions]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_RequestedTransaction],
        [ID],
        [InitiatingCustomerID],
        [TargetCustomerID],
        [TargetCustomerEmailOrPhone],
        [TargetCustomerName],
        [CustomerTransactionDescription],
        [enmDirection_TransactionDirection],
        [enmType_RequestedTransactionType],
        [enmFeePayer_Payer],
        [DefiningAmount],
        [CreditCardID],
        [AmountPaidByCreditCard],
        [NumberOfPaymentsByCreditCard],
        [FirstPaymentAmountByCreditCard],
        [OtherPaymentsAmountByCreditCard],
        [AmountPaidByBit],
        [AmountPaidByWallet],
        [TotalAmountPaidByPayer],
        [AmountReceivedByReceiver],
        [lkpDefiningAmountCurrency_Currency],
        [PrepaidCardID],
        [DistributorID],
        [enmDepositLocation],
        [CodeToGiveChanger],
        [spt_enmStatus_RequestedTransactionStatus],
        [LoggedAlertID],
        [ErrorText],
        [spt_Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [SecurityCodeApproved],
        [clc_WhenStatusChanged],
        [InitiatingCustomerEmailOrPhone],
        [InitiatingCustomerName],
        [ExchangeRateToILSUsed],
        [TargetNonCustomerID],
        [clc_DateRequested],
        [clc_MonthRequested],
        [GroupRequestedTransactionID],
        [ReceivingCustomerID],
        [PayingCustomerID],
        [RepExchangeRateToILS],
        [DefiningAmountILS]
    FROM [RequestedTransaction]
    WHERE [DistributorID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetDistributorTransactionLoads
-- Fetches all transactionloads for a given distributor
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetDistributorTransactionLoads]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_TransactionLoad],
        [ID],
        [UserID],
        [DistributorID],
        [enmLoadType],
        [CustomerID],
        [CardID],
        [enmCurrency],
        [Amount],
        [WhenRequested],
        [ExchangeRateUsed],
        [AmountInILS],
        [PaymentDebitResult],
        [PaymentDebitAuthorizationCode],
        [PaymentDebitDetails],
        [DebitElapsedTimeSec],
        [enmLoadApproved_ApprovalType],
        [LoadResponseCode],
        [LoadResponse],
        [LoadElapsedTimeSec],
        [PaymentCreditResult],
        [PaymentCreditAuthorizationCode],
        [PaymentCreditDetails],
        [CreditElapsedTimeSec],
        [LoggedAlertID],
        [FaultNo],
        [enmLoadResult],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [clc_Month],
        [enmCoveredBy],
        [Details],
        [CustomerReference],
        [RepresentativeExchangeRate],
        [clc_Day],
        [RequestedTransactionID]
    FROM [TransactionLoad]
    WHERE [DistributorID] = @ID
    ORDER BY [DebitElapsedTimeSec] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO


-- =========================================
-- SP_GetFeeFeeOverrides
-- Fetches all feeoverrides for a given fee
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetFeeFeeOverrides]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_FeeOverride],
        [ID],
        [FeeID],
        [CardClubID],
        [DistributorID],
        [OverrideAmt],
        [OverridePctOfTrigger],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [OverrideMax],
        [CustomerClubID],
        [OverrideMin]
    FROM [FeeOverride]
    WHERE [FeeID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO


-- =========================================
-- SP_GetGovtReport00GovtReport10s
-- Fetches all govtreport10s for a given govtreport00
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetGovtReport00GovtReport10s]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_GovtReport10],
        [ID],
        [GovtReport00ID],
        [ReporterNumber],
        [ReporterIDNumber],
        [ReportYear],
        [ReportNumber],
        [RecordType],
        [BranchNumber],
        [PrimaryActionIdentifier],
        [ActionType],
        [DateExecutedAtReporter],
        [FinancialInstitutionCode],
        [OtherFinancialCode],
        [FinancialInstitutionCountry],
        [CurrencyCode],
        [TransactionAmountILS],
        [SecondaryActionIdentifier],
        [TransactionAmountOriginalCurrency],
        [DateExecutedAtSupplier],
        [TransactionTypeAtSupplier],
        [Comments],
        [TimeExecutedAtSupplier],
        [ExchangeRate],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [IP]
    FROM [GovtReport10]
    WHERE [GovtReport00ID] = @ID
    ORDER BY [DateExecutedAtReporter] DESC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetGovtReport00GovtReport30s
-- Fetches all govtreport30s for a given govtreport00
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetGovtReport00GovtReport30s]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_GovtReport30],
        [ID],
        [GovtReport00ID],
        [ReporterNumber],
        [ReporterIDNumber],
        [ReportYear],
        [ReportNumber],
        [RecordType],
        [PrimaryActionIdentifier],
        [ReportApproverName],
        [ReportApproverGovtID],
        [ExecutorType],
        [ExecutorTypeOther],
        [ExecutorName],
        [ExecutorGovtID],
        [ExecutorCountry],
        [ExecutorMainAddress],
        [ExecutorAddlAddress],
        [ExecutorDateOfBirthIncorporation],
        [ExecutorPosition],
        [ExecutorPositionOther],
        [ExecutorGender],
        [ExecutorGenderOther],
        [ExecutorCountryCodePhone1],
        [ExecutorAreaCodePhone1],
        [ExecutorPhoneNumberPhone1],
        [ExecutorCountryCodePhone2],
        [ExecutorAreaCodePhone2],
        [ExecutorPhoneNumberPhone2],
        [ExecutorCountryCodeFax],
        [ExecutorAreaCodeFax],
        [ExecutorPhoneNumberFax],
        [ExecutorCountryCodeMobile],
        [ExecutorAreaCodeMobile],
        [ExecutorPhoneNumberMobile],
        [GovernmentIDType],
        [GovernmentIDTypeOther],
        [Address01Street],
        [Address01House],
        [Address01City],
        [Address01Zip],
        [Address01Country],
        [Address02Street],
        [Address02House],
        [Address02City],
        [Address02Zip],
        [Address02Country],
        [Comments],
        [ExecutorFirstName],
        [ExecutorLastNameOrCompanyName],
        [ExecutorActuallyDidIt],
        [StreetCode],
        [CityCode],
        [ExecutorEmail],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [GovtReport30]
    WHERE [GovtReport00ID] = @ID
    ORDER BY [ExecutorDateOfBirthIncorporation] DESC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetGovtReport00GovtReport40s
-- Fetches all govtreport40s for a given govtreport00
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetGovtReport00GovtReport40s]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_GovtReport40],
        [ID],
        [GovtReport00ID],
        [ReporterNumber],
        [ReporterIDNumber],
        [ReportYear],
        [ReportNumber],
        [RecordType],
        [PrimaryActionIdentifier],
        [FinancialInstitutionStatus],
        [BankNumber],
        [BankBranchNumber],
        [BankCountryCode],
        [BankName],
        [BankAddress],
        [BankAccountNumber],
        [ReferenceNumber],
        [FinancialInstitutionType],
        [FinancialInstitutionTypeOther],
        [BankAccountOwnerName],
        [BankAccountOwnerAddress],
        [RecipientName],
        [BankAccountOwnerGovernmentID],
        [Telephone1],
        [SecondaryActionIdentifier],
        [BankAccountOwnerCountry],
        [BankAccountOwnerGender],
        [BankAccountBirthdate],
        [RecipientGovernmentID],
        [RecipientAddress],
        [RecipientAccointOpeningDate],
        [MailingAddress],
        [CreditCardType],
        [CreditCardNumber],
        [CreditCardCountry],
        [CreditCardOwnerName],
        [CreditCardOwnerGovernmentID],
        [CreditCardOwnerCountry],
        [CreditCardClearingHouse],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [GovtReport40]
    WHERE [GovtReport00ID] = @ID
    ORDER BY [BankAccountBirthdate] DESC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetGovtReport00GovtReport99s
-- Fetches all govtreport99s for a given govtreport00
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetGovtReport00GovtReport99s]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_GovtReport99],
        [ID],
        [GovtReport00ID],
        [ReporterNumber],
        [ReporterIDNumber],
        [ReportYear],
        [ReportNumber],
        [RecordType],
        [ReportMonth],
        [NumberOfRowsIn10],
        [NumberOfRowsIn30],
        [NumberOfRowsIn40],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [GovtReport99]
    WHERE [GovtReport00ID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetGovtReport00GovtReportPayments
-- Fetches all govtreportpayments for a given govtreport00
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetGovtReport00GovtReportPayments]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_GovtReportPayment],
        [ID],
        [GovtReport00ID],
        [PaymentDay],
        [EntityID],
        [enmEntityType_AccountOwner],
        [TotalAmount],
        [NumberOfTransactions],
        [clc_PaymentMonth],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [GovtReportPayment]
    WHERE [GovtReport00ID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO


-- =========================================
-- SP_GetImportTransactionLoadImportTransactionLoadRows
-- Fetches all importtransactionloadrows for a given importtransactionload
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetImportTransactionLoadImportTransactionLoadRows]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_ImportTransactionLoadRow],
        [ID],
        [ImportTransactionLoadID],
        [CustomerPhoneNumber],
        [enmCurrency],
        [Amount],
        [CardCid],
        [CardLast4Numbers],
        [LoadReference],
        [CustomerFirstName],
        [CustomerLastName],
        [CustomerIdentifier],
        [lgCustomerID],
        [lgCardID],
        [WhenInitialized],
        [TransactionLoadID],
        [spt_WhenCompleted],
        [IsSuccessful],
        [lgLoggedAlertID],
        [spt_Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [ImportTransactionLoadRow]
    WHERE [ImportTransactionLoadID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO


-- =========================================
-- SP_GetLimitationLimitationOverrides
-- Fetches all limitationoverrides for a given limitation
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetLimitationLimitationOverrides]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_LimitationOverride],
        [ID],
        [LimitationID],
        [CardClubID],
        [DistributorID],
        [OverrideAmount],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [CustomerClubID]
    FROM [LimitationOverride]
    WHERE [LimitationID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO


-- =========================================
-- SP_GetMCCBReceiverMCCBReceiverAccounts
-- Fetches all mccbreceiveraccounts for a given mccbreceiver
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetMCCBReceiverMCCBReceiverAccounts]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_MCCBReceiverAccount],
        [ID],
        [ReceiverID],
        [enmPaymentMode],
        [AccountCountryISO3166Alpha2],
        [Swift],
        [Account],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [Provider],
        [AccountType]
    FROM [MCCBReceiverAccount]
    WHERE [ReceiverID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetMCCBReceiverMCCBSecurityChecks
-- Fetches all mccbsecuritychecks for a given mccbreceiver
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetMCCBReceiverMCCBSecurityChecks]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_MCCBSecurityCheck],
        [ID],
        [CustomerID],
        [MCCBReceiverID],
        [DestinationCountryISO3166Alpha2],
        [enmReceiverSecurityCleared_SecurityCleared],
        [ReceiverSecurityAllData],
        [enmPayerSecurityCleared_SecurityCleared],
        [PayerSecurityAllData],
        [WhenSecurityDataUpdated],
        [RequestedTransactionID],
        [MCCBTransactionID],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [MCCBSecurityCheck]
    WHERE [MCCBReceiverID] = @ID
    ORDER BY [WhenSecurityDataUpdated] DESC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetMCCBReceiverMCCBTransactions
-- Fetches all mccbtransactions for a given mccbreceiver
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetMCCBReceiverMCCBTransactions]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_MCCBTransaction],
        [ID],
        [CustomerID],
        [enmPaymentMode],
        [AmountILSDisplayed],
        [AmountILSCalculated],
        [AmountILSAddedToFee],
        [PayoutAmount],
        [PayoutCurrency],
        [DisplayedFee],
        [DisplayedExchangeRate],
        [TransactionReference],
        [ICPTransactionFee],
        [enmSettlementCurrency_Currency],
        [ICPILSToSettlementER],
        [MCFeeInSettlementCurrency],
        [MCPayoutToSettlementER],
        [MCChargedAmount],
        [MCPrincipleAmount],
        [ProposalExpiry],
        [PaymentId],
        [PaymentPurpose],
        [PaymentStatus],
        [PaymentStatusTimestamp],
        [PaymentPendingStage],
        [PaymentPendingMaxCompletionDate],
        [RawDataPayment],
        [RawDataQuote],
        [Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [MCCBReceiverID],
        [RequestedTransactionID],
        [ProposalId],
        [MCCBReceiverAccountID],
        [RawDataStatus],
        [FundsTakenByICP],
        [FundsRefundedByICP]
    FROM [MCCBTransaction]
    WHERE [MCCBReceiverID] = @ID
    ORDER BY [PaymentStatusTimestamp] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO


-- =========================================
-- SP_GetMCCBReceiverAccountMCCBTransactions
-- Fetches all mccbtransactions for a given mccbreceiveraccount
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetMCCBReceiverAccountMCCBTransactions]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_MCCBTransaction],
        [ID],
        [CustomerID],
        [enmPaymentMode],
        [AmountILSDisplayed],
        [AmountILSCalculated],
        [AmountILSAddedToFee],
        [PayoutAmount],
        [PayoutCurrency],
        [DisplayedFee],
        [DisplayedExchangeRate],
        [TransactionReference],
        [ICPTransactionFee],
        [enmSettlementCurrency_Currency],
        [ICPILSToSettlementER],
        [MCFeeInSettlementCurrency],
        [MCPayoutToSettlementER],
        [MCChargedAmount],
        [MCPrincipleAmount],
        [ProposalExpiry],
        [PaymentId],
        [PaymentPurpose],
        [PaymentStatus],
        [PaymentStatusTimestamp],
        [PaymentPendingStage],
        [PaymentPendingMaxCompletionDate],
        [RawDataPayment],
        [RawDataQuote],
        [Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [MCCBReceiverID],
        [RequestedTransactionID],
        [ProposalId],
        [MCCBReceiverAccountID],
        [RawDataStatus],
        [FundsTakenByICP],
        [FundsRefundedByICP]
    FROM [MCCBTransaction]
    WHERE [MCCBReceiverAccountID] = @ID
    ORDER BY [PaymentStatusTimestamp] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO


-- =========================================
-- SP_GetMCCBTransactionMCCBSecurityChecks
-- Fetches all mccbsecuritychecks for a given mccbtransaction
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetMCCBTransactionMCCBSecurityChecks]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_MCCBSecurityCheck],
        [ID],
        [CustomerID],
        [MCCBReceiverID],
        [DestinationCountryISO3166Alpha2],
        [enmReceiverSecurityCleared_SecurityCleared],
        [ReceiverSecurityAllData],
        [enmPayerSecurityCleared_SecurityCleared],
        [PayerSecurityAllData],
        [WhenSecurityDataUpdated],
        [RequestedTransactionID],
        [MCCBTransactionID],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [MCCBSecurityCheck]
    WHERE [MCCBTransactionID] = @ID
    ORDER BY [WhenSecurityDataUpdated] DESC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO


-- =========================================
-- SP_GetNewCardRequestAPINewCardRequests
-- Fetches all newcardrequests for a given newcardrequestapi
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetNewCardRequestAPINewCardRequests]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_NewCardRequest],
        [ID],
        [enmCurrency],
        [enmReceiptMethod],
        [InitialLoad],
        [enmInitialLoadMethod_LoadMethod],
        [CustomerID],
        [FirstName],
        [LastName],
        [BirthDate],
        [IsraelIDNumber],
        [lkpPassportCountry_Country],
        [PassportNumber],
        [enmGender],
        [ActualAddressNumber],
        [ActualAddressStreet],
        [ActualAddressCity],
        [ActualZipCode],
        [CellphoneNumber],
        [email],
        [spt_Comment],
        [WhenOpened],
        [spt_enmCardRequestStatus],
        [clc_WhenStatusChanged],
        [IsCustomerDefined],
        [IsKYCDefined],
        [DeliveryFeeAdjustment],
        [DistributorSentToID],
        [spt_InterviewedByUser],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [enmLastStatusBeforeCancel_CardRequestStatus],
        [NameOnCard],
        [clc_HasNameOnCard],
        [enmPendingLoadMethod_LoadMethod],
        [PendingLoadAmount],
        [PendingLoadReference],
        [PendingLoadUserResponsible],
        [CardActivationID],
        [InitialLoadComplete],
        [CustomerWalletID],
        [InitialLoadNumberOfPayments],
        [IntendedClubID],
        [CommittedLoadAmount],
        [CommittedPurchaseExchangeRateToILS],
        [CommittedLoadFee],
        [CommittedDeliveryFee],
        [CommittedNewCardFee],
        [enmCustomerType],
        [blg_NewCardRequestAPIID],
        [clc_NewCardRequestAPILoggedAlertID]
    FROM [NewCardRequest]
    WHERE [blg_NewCardRequestAPIID] = @ID
    ORDER BY [BirthDate] DESC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO


-- =========================================
-- SP_GetNonCustomerRequestedTransactions
-- Fetches all requestedtransactions for a given noncustomer
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetNonCustomerRequestedTransactions]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_RequestedTransaction],
        [ID],
        [InitiatingCustomerID],
        [TargetCustomerID],
        [TargetCustomerEmailOrPhone],
        [TargetCustomerName],
        [CustomerTransactionDescription],
        [enmDirection_TransactionDirection],
        [enmType_RequestedTransactionType],
        [enmFeePayer_Payer],
        [DefiningAmount],
        [CreditCardID],
        [AmountPaidByCreditCard],
        [NumberOfPaymentsByCreditCard],
        [FirstPaymentAmountByCreditCard],
        [OtherPaymentsAmountByCreditCard],
        [AmountPaidByBit],
        [AmountPaidByWallet],
        [TotalAmountPaidByPayer],
        [AmountReceivedByReceiver],
        [lkpDefiningAmountCurrency_Currency],
        [PrepaidCardID],
        [DistributorID],
        [enmDepositLocation],
        [CodeToGiveChanger],
        [spt_enmStatus_RequestedTransactionStatus],
        [LoggedAlertID],
        [ErrorText],
        [spt_Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [SecurityCodeApproved],
        [clc_WhenStatusChanged],
        [InitiatingCustomerEmailOrPhone],
        [InitiatingCustomerName],
        [ExchangeRateToILSUsed],
        [TargetNonCustomerID],
        [clc_DateRequested],
        [clc_MonthRequested],
        [GroupRequestedTransactionID],
        [ReceivingCustomerID],
        [PayingCustomerID],
        [RepExchangeRateToILS],
        [DefiningAmountILS]
    FROM [RequestedTransaction]
    WHERE [TargetNonCustomerID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetNonCustomerTransactionBits
-- Fetches all transactionbits for a given noncustomer
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetNonCustomerTransactionBits]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_TransactionBit],
        [ID],
        [UniqueIdentifier],
        [RequestedTransactionID],
        [CustomerID],
        [RequestAmount],
        [CurrencyTypeCode],
        [RequestSubjectDescription],
        [EventExpirationTimestamp],
        [PaymentInitiationReference],
        [ExternalSystemReference],
        [DebitMethodCode],
        [TransactionSerialCode],
        [ProviderNbr],
        [WhenInitialized],
        [WhenValidated],
        [WhenCaptured],
        [RequestStatusCode],
        [RequestStatusDescription],
        [IssuerAuthorizationNumber],
        [LoggedAlertID],
        [ErrorText],
        [spt_Comment],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [ExecutionTimeSec],
        [Status],
        [TransactionSerial],
        [NumberOfTries],
        [IsSuccessful],
        [CustomerWalletID],
        [CardLast4Numbers],
        [ApprovalCode],
        [AllInfo],
        [NonCustomerID]
    FROM [TransactionBit]
    WHERE [NonCustomerID] = @ID
    ORDER BY [EventExpirationTimestamp] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetNonCustomerTransactionCreditCards
-- Fetches all transactioncreditcards for a given noncustomer
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetNonCustomerTransactionCreditCards]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_TransactionCreditCard],
        [ID],
        [UniqueIdentifier],
        [WhenInitialized],
        [WhenValidated],
        [CustomerCreditCardID],
        [CustomerID],
        [NumberOfPayments],
        [FirstPaymentAmount],
        [RemainingPaymentsAmount],
        [TotalPaymentAmount],
        [CreditCardFee],
        [Interest],
        [entCardHolderTZ],
        [CardHolderName],
        [CardLast4Numbers],
        [CardExpiry],
        [ExecutionTimeSec],
        [CGResult],
        [CGUserMessage],
        [CGAdditionalInfo],
        [TerminalNumber],
        [lkpClearingHouse],
        [lkpCardBrand],
        [lkpCardIssuingCompany],
        [IsCardForeign],
        [ClearingHouseApprovalNo],
        [VoucherNo],
        [GeneralData],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [Status],
        [CGGuid],
        [CGTranID],
        [PaymentSchedule],
        [EffectiveInterestRate],
        [NumberOfTries],
        [enmService],
        [ApprovedForWalletTransfer],
        [CardHolderCellphoneOrEmail],
        [CGAllInfo],
        [spt_Comment],
        [InterpretationErrors],
        [RequestedTransactionID],
        [CGMessage],
        [PaymentsTextToUser],
        [CardBin],
        [IsSuccessful],
        [LoggedAlertID],
        [CustomerWalletID],
        [PaymentMethod],
        [ValidationSource],
        [NonCustomerID]
    FROM [TransactionCreditCard]
    WHERE [NonCustomerID] = @ID
    ORDER BY [WhenValidated] DESC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO


-- =========================================
-- SP_GetRequestedTransactionBackofficeTransactions
-- Fetches all backofficetransactions for a given requestedtransaction
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetRequestedTransactionBackofficeTransactions]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_BackofficeTransaction],
        [ID],
        [DistributorID],
        [CustomerID],
        [TransactionLoadID],
        [CardOrderFromIssuerID],
        [CardOrderByDistributorID],
        [CustomerWalletID],
        [enmBackofficeTransactionType],
        [AmountToAccountOwner],
        [enmAccountOwner],
        [WhenRequested],
        [WhenToExecute],
        [RequestingUser],
        [CodeForInvoice],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spt_WhenSentToSAP],
        [CardID],
        [clc_MonthRequested],
        [clc_DayRequested],
        [TransactionCreditCardID],
        [TransactionBitID],
        [RequestedTransactionID]
    FROM [BackofficeTransaction]
    WHERE [RequestedTransactionID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetRequestedTransactionCustomerWallets
-- Fetches all customerwallets for a given requestedtransaction
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetRequestedTransactionCustomerWallets]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CustomerWallet],
        [ID],
        [CustomerID],
        [WhenExecuted],
        [enmType_WalletTransactionType],
        [Description],
        [DescriptionInCustLang],
        [Reference],
        [ReferenceTable],
        [ReferenceID],
        [Amount],
        [clc_Balance],
        [WhenApproved],
        [WhoInitiatedID],
        [spt_Comments],
        [AddedToBackOffice],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [UpdatingLoginID],
        [InvoiceURL],
        [RequestedTransactionID],
        [CounterpartCustomerID],
        [TransferText]
    FROM [CustomerWallet]
    WHERE [RequestedTransactionID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetRequestedTransactionDrivebotPayments
-- Fetches all drivebotpayments for a given requestedtransaction
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetRequestedTransactionDrivebotPayments]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_DrivebotPayment],
        [ID],
        [CustomerID],
        [PartnershipCode],
        [DriverName],
        [StationId],
        [StationName],
        [Amount],
        [WalletPhoneNumber],
        [RequestedTransactionID],
        [ManiSuccess],
        [ManiErrorDescription],
        [DrivebotSuccess],
        [DrivebotDescription],
        [DrivebotUpdateTime],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [DrivebotPayment]
    WHERE [RequestedTransactionID] = @ID
    ORDER BY [DrivebotUpdateTime] DESC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetRequestedTransactionMCCBSecurityChecks
-- Fetches all mccbsecuritychecks for a given requestedtransaction
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetRequestedTransactionMCCBSecurityChecks]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_MCCBSecurityCheck],
        [ID],
        [CustomerID],
        [MCCBReceiverID],
        [DestinationCountryISO3166Alpha2],
        [enmReceiverSecurityCleared_SecurityCleared],
        [ReceiverSecurityAllData],
        [enmPayerSecurityCleared_SecurityCleared],
        [PayerSecurityAllData],
        [WhenSecurityDataUpdated],
        [RequestedTransactionID],
        [MCCBTransactionID],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [MCCBSecurityCheck]
    WHERE [RequestedTransactionID] = @ID
    ORDER BY [WhenSecurityDataUpdated] DESC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetRequestedTransactionMCCBTransactions
-- Fetches all mccbtransactions for a given requestedtransaction
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetRequestedTransactionMCCBTransactions]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_MCCBTransaction],
        [ID],
        [CustomerID],
        [enmPaymentMode],
        [AmountILSDisplayed],
        [AmountILSCalculated],
        [AmountILSAddedToFee],
        [PayoutAmount],
        [PayoutCurrency],
        [DisplayedFee],
        [DisplayedExchangeRate],
        [TransactionReference],
        [ICPTransactionFee],
        [enmSettlementCurrency_Currency],
        [ICPILSToSettlementER],
        [MCFeeInSettlementCurrency],
        [MCPayoutToSettlementER],
        [MCChargedAmount],
        [MCPrincipleAmount],
        [ProposalExpiry],
        [PaymentId],
        [PaymentPurpose],
        [PaymentStatus],
        [PaymentStatusTimestamp],
        [PaymentPendingStage],
        [PaymentPendingMaxCompletionDate],
        [RawDataPayment],
        [RawDataQuote],
        [Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [MCCBReceiverID],
        [RequestedTransactionID],
        [ProposalId],
        [MCCBReceiverAccountID],
        [RawDataStatus],
        [FundsTakenByICP],
        [FundsRefundedByICP]
    FROM [MCCBTransaction]
    WHERE [RequestedTransactionID] = @ID
    ORDER BY [PaymentStatusTimestamp] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetRequestedTransactionRequestedTransactionFees
-- Fetches all requestedtransactionfees for a given requestedtransaction
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetRequestedTransactionRequestedTransactionFees]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_RequestedTransactionFee],
        [ID],
        [RequestedTransactionID],
        [enmType_FeeType],
        [enmPayer],
        [AmountToBaseFeeOn],
        [FeeDefinitionAmt],
        [FeeDefinitionPct],
        [FeeDefinitionMax],
        [TotalFee],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [CustomerWalletID],
        [FeeDefinitionMin]
    FROM [RequestedTransactionFee]
    WHERE [RequestedTransactionID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetRequestedTransactionTransactionBits
-- Fetches all transactionbits for a given requestedtransaction
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetRequestedTransactionTransactionBits]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_TransactionBit],
        [ID],
        [UniqueIdentifier],
        [RequestedTransactionID],
        [CustomerID],
        [RequestAmount],
        [CurrencyTypeCode],
        [RequestSubjectDescription],
        [EventExpirationTimestamp],
        [PaymentInitiationReference],
        [ExternalSystemReference],
        [DebitMethodCode],
        [TransactionSerialCode],
        [ProviderNbr],
        [WhenInitialized],
        [WhenValidated],
        [WhenCaptured],
        [RequestStatusCode],
        [RequestStatusDescription],
        [IssuerAuthorizationNumber],
        [LoggedAlertID],
        [ErrorText],
        [spt_Comment],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [ExecutionTimeSec],
        [Status],
        [TransactionSerial],
        [NumberOfTries],
        [IsSuccessful],
        [CustomerWalletID],
        [CardLast4Numbers],
        [ApprovalCode],
        [AllInfo],
        [NonCustomerID]
    FROM [TransactionBit]
    WHERE [RequestedTransactionID] = @ID
    ORDER BY [EventExpirationTimestamp] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetRequestedTransactionTransactionCreditCards
-- Fetches all transactioncreditcards for a given requestedtransaction
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetRequestedTransactionTransactionCreditCards]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_TransactionCreditCard],
        [ID],
        [UniqueIdentifier],
        [WhenInitialized],
        [WhenValidated],
        [CustomerCreditCardID],
        [CustomerID],
        [NumberOfPayments],
        [FirstPaymentAmount],
        [RemainingPaymentsAmount],
        [TotalPaymentAmount],
        [CreditCardFee],
        [Interest],
        [entCardHolderTZ],
        [CardHolderName],
        [CardLast4Numbers],
        [CardExpiry],
        [ExecutionTimeSec],
        [CGResult],
        [CGUserMessage],
        [CGAdditionalInfo],
        [TerminalNumber],
        [lkpClearingHouse],
        [lkpCardBrand],
        [lkpCardIssuingCompany],
        [IsCardForeign],
        [ClearingHouseApprovalNo],
        [VoucherNo],
        [GeneralData],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [Status],
        [CGGuid],
        [CGTranID],
        [PaymentSchedule],
        [EffectiveInterestRate],
        [NumberOfTries],
        [enmService],
        [ApprovedForWalletTransfer],
        [CardHolderCellphoneOrEmail],
        [CGAllInfo],
        [spt_Comment],
        [InterpretationErrors],
        [RequestedTransactionID],
        [CGMessage],
        [PaymentsTextToUser],
        [CardBin],
        [IsSuccessful],
        [LoggedAlertID],
        [CustomerWalletID],
        [PaymentMethod],
        [ValidationSource],
        [NonCustomerID]
    FROM [TransactionCreditCard]
    WHERE [RequestedTransactionID] = @ID
    ORDER BY [WhenValidated] DESC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetRequestedTransactionTransactionLoads
-- Fetches all transactionloads for a given requestedtransaction
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetRequestedTransactionTransactionLoads]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_TransactionLoad],
        [ID],
        [UserID],
        [DistributorID],
        [enmLoadType],
        [CustomerID],
        [CardID],
        [enmCurrency],
        [Amount],
        [WhenRequested],
        [ExchangeRateUsed],
        [AmountInILS],
        [PaymentDebitResult],
        [PaymentDebitAuthorizationCode],
        [PaymentDebitDetails],
        [DebitElapsedTimeSec],
        [enmLoadApproved_ApprovalType],
        [LoadResponseCode],
        [LoadResponse],
        [LoadElapsedTimeSec],
        [PaymentCreditResult],
        [PaymentCreditAuthorizationCode],
        [PaymentCreditDetails],
        [CreditElapsedTimeSec],
        [LoggedAlertID],
        [FaultNo],
        [enmLoadResult],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [clc_Month],
        [enmCoveredBy],
        [Details],
        [CustomerReference],
        [RepresentativeExchangeRate],
        [clc_Day],
        [RequestedTransactionID]
    FROM [TransactionLoad]
    WHERE [RequestedTransactionID] = @ID
    ORDER BY [DebitElapsedTimeSec] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO


-- =========================================
-- SP_GetRiskEventActiveRestrictionses
-- Fetches all activerestrictionses for a given riskevent
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetRiskEventActiveRestrictionses]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [TableName_ActiveRestrictions],
        [enmEntityType],
        [EntityID],
        [enmBlockedActionType],
        [MaxAllowedAmount],
        [ValidFrom],
        [ValidUntil],
        [BlockReason],
        [TriggerRuleID],
        [TriggerEventID],
        [AddedOn],
        [AddedBy],
        [ChangedOn],
        [ChangedBy],
        [DeletedOn],
        [DeletedBy],
        [UpdatingLoginID]
    FROM [ActiveRestrictions]
    WHERE [TriggerEventID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO


-- =========================================
-- SP_GetRiskRuleActiveRestrictionses
-- Fetches all activerestrictionses for a given riskrule
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetRiskRuleActiveRestrictionses]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [TableName_ActiveRestrictions],
        [enmEntityType],
        [EntityID],
        [enmBlockedActionType],
        [MaxAllowedAmount],
        [ValidFrom],
        [ValidUntil],
        [BlockReason],
        [TriggerRuleID],
        [TriggerEventID],
        [AddedOn],
        [AddedBy],
        [ChangedOn],
        [ChangedBy],
        [DeletedOn],
        [DeletedBy],
        [UpdatingLoginID]
    FROM [ActiveRestrictions]
    WHERE [TriggerRuleID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetRiskRuleEntityRiskColors
-- Fetches all entityriskcolors for a given riskrule
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetRiskRuleEntityRiskColors]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [TableName_EntityRiskColor],
        [enmEntityType],
        [EntityID],
        [enmCurrentColor],
        [PreviousColorID],
        [LastUpdated],
        [UpdatedByRuleID],
        [UpdatedByUserID],
        [AddedOn],
        [AddedBy],
        [ChangedOn],
        [ChangedBy],
        [UpdatingLoginID]
    FROM [EntityRiskColor]
    WHERE [UpdatedByRuleID] = @ID
    ORDER BY [LastUpdated] DESC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetRiskRuleRiskEvents
-- Fetches all riskevents for a given riskrule
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetRiskRuleRiskEvents]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [TableName_RiskEvent],
        [RiskRuleID],
        [enmEntityType],
        [EntityID],
        [DetectedOn],
        [ActivatedOn],
        [ValidUntil],
        [enmActionTaken],
        [enmStatus],
        [c_LoggedAlertID],
        [TaskID],
        [TriggerData],
        [SystemNotes],
        [ManuallyOverriddenOn],
        [ManuallyOverriddenByUserID],
        [ManualNotes],
        [AddedOn],
        [AddedBy],
        [ChangedOn],
        [ChangedBy],
        [UpdatingLoginID]
    FROM [RiskEvent]
    WHERE [RiskRuleID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetRiskRuleRiskRuleLogs
-- Fetches all riskrulelogs for a given riskrule
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetRiskRuleRiskRuleLogs]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [TableName_RiskRuleLog],
        [RiskRuleID],
        [ChangeType],
        [FieldName],
        [OldValue],
        [NewValue],
        [ChangeReason],
        [AddedOn],
        [AddedBy],
        [ChangedOn],
        [ChangedBy],
        [UpdatingLoginID]
    FROM [RiskRuleLog]
    WHERE [RiskRuleID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetRiskRuleRiskRuleOverrides
-- Fetches all riskruleoverrides for a given riskrule
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetRiskRuleRiskRuleOverrides]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [ID],
        [TableName_RiskRuleOverride],
        [RiskRuleID],
        [enmEntityType],
        [EntityID],
        [OverrideThresholdValue],
        [OverrideMinAmount],
        [OverrideMaxAmount],
        [OverrideDurationDays],
        [ValidFrom],
        [ValidUntil],
        [IsActive],
        [Reason],
        [AddedOn],
        [AddedBy],
        [ChangedOn],
        [ChangedBy],
        [DeletedOn],
        [DeletedBy],
        [UpdatingLoginID]
    FROM [RiskRuleOverride]
    WHERE [RiskRuleID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO


-- =========================================
-- SP_GetTransactionBitBackofficeTransactions
-- Fetches all backofficetransactions for a given transactionbit
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetTransactionBitBackofficeTransactions]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_BackofficeTransaction],
        [ID],
        [DistributorID],
        [CustomerID],
        [TransactionLoadID],
        [CardOrderFromIssuerID],
        [CardOrderByDistributorID],
        [CustomerWalletID],
        [enmBackofficeTransactionType],
        [AmountToAccountOwner],
        [enmAccountOwner],
        [WhenRequested],
        [WhenToExecute],
        [RequestingUser],
        [CodeForInvoice],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spt_WhenSentToSAP],
        [CardID],
        [clc_MonthRequested],
        [clc_DayRequested],
        [TransactionCreditCardID],
        [TransactionBitID],
        [RequestedTransactionID]
    FROM [BackofficeTransaction]
    WHERE [TransactionBitID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO


-- =========================================
-- SP_GetTransactionCreditCardBackofficeTransactions
-- Fetches all backofficetransactions for a given transactioncreditcard
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetTransactionCreditCardBackofficeTransactions]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_BackofficeTransaction],
        [ID],
        [DistributorID],
        [CustomerID],
        [TransactionLoadID],
        [CardOrderFromIssuerID],
        [CardOrderByDistributorID],
        [CustomerWalletID],
        [enmBackofficeTransactionType],
        [AmountToAccountOwner],
        [enmAccountOwner],
        [WhenRequested],
        [WhenToExecute],
        [RequestingUser],
        [CodeForInvoice],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spt_WhenSentToSAP],
        [CardID],
        [clc_MonthRequested],
        [clc_DayRequested],
        [TransactionCreditCardID],
        [TransactionBitID],
        [RequestedTransactionID]
    FROM [BackofficeTransaction]
    WHERE [TransactionCreditCardID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO


-- =========================================
-- SP_GetTransactionLoadBackofficeTransactions
-- Fetches all backofficetransactions for a given transactionload
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetTransactionLoadBackofficeTransactions]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_BackofficeTransaction],
        [ID],
        [DistributorID],
        [CustomerID],
        [TransactionLoadID],
        [CardOrderFromIssuerID],
        [CardOrderByDistributorID],
        [CustomerWalletID],
        [enmBackofficeTransactionType],
        [AmountToAccountOwner],
        [enmAccountOwner],
        [WhenRequested],
        [WhenToExecute],
        [RequestingUser],
        [CodeForInvoice],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [spt_WhenSentToSAP],
        [CardID],
        [clc_MonthRequested],
        [clc_DayRequested],
        [TransactionCreditCardID],
        [TransactionBitID],
        [RequestedTransactionID]
    FROM [BackofficeTransaction]
    WHERE [TransactionLoadID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetTransactionLoadCardActivations
-- Fetches all cardactivations for a given transactionload
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetTransactionLoadCardActivations]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_CardActivation],
        [ID],
        [DistributorID],
        [CustomerID],
        [CardID],
        [clc_WhenInitiated],
        [Profession],
        [lkpEmploymentStatus],
        [Employer],
        [lkpCardUse],
        [PublicPosition],
        [ConnectionWithPublicPerson],
        [lkpAdditionalCitizenship_Country],
        [lkpConnectionWithIsrael],
        [ConnectionWithIsraelDetails],
        [lkpMainUseOfCard_CardUsage],
        [IsExpectedToReceiveDeposits],
        [IsExpectedToReceiveDepositsDetails],
        [WasPreviouslyDeniedBankService],
        [WitnessFirstName],
        [WitnessLastName],
        [WitnessIsraelID],
        [enmIDTypeForWitness_IdentificationMethod],
        [enmApproved_ApprovalType],
        [ResponseCode],
        [ResponseText],
        [LoggedAlertID],
        [WhenRequested],
        [WhenResponded],
        [InitialLoadID],
        [DocumentionLoadDate],
        [spt_IsDocumentationOK],
        [lgInterviewedByUser],
        [enmRequestedCurrency_Currency],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID],
        [lgAddedBy],
        [enmCardActivationNextTask],
        [spt_Comment],
        [logCellPhone],
        [spt_OnHold],
        [WantsNameOnCard],
        [CardClubID],
        [CreatingApp],
        [spt_DeliveryFee],
        [spt_NewCardFee],
        [RequestedInitialLoad],
        [spt_EmbossFee]
    FROM [CardActivation]
    WHERE [InitialLoadID] = @ID
    ORDER BY [DocumentionLoadDate] DESC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO

-- =========================================
-- SP_GetTransactionLoadImportTransactionLoadRows
-- Fetches all importtransactionloadrows for a given transactionload
-- =========================================
CREATE OR ALTER PROCEDURE [dbo].[SP_GetTransactionLoadImportTransactionLoadRows]
    @ID bigint,
    @Skip INT = NULL,
    @Take INT = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT
        [TableName_ImportTransactionLoadRow],
        [ID],
        [ImportTransactionLoadID],
        [CustomerPhoneNumber],
        [enmCurrency],
        [Amount],
        [CardCid],
        [CardLast4Numbers],
        [LoadReference],
        [CustomerFirstName],
        [CustomerLastName],
        [CustomerIdentifier],
        [lgCustomerID],
        [lgCardID],
        [WhenInitialized],
        [TransactionLoadID],
        [spt_WhenCompleted],
        [IsSuccessful],
        [lgLoggedAlertID],
        [spt_Comments],
        [AddedBy],
        [AddedOn],
        [ChangedBy],
        [ChangedOn],
        [DeletedBy],
        [DeletedOn],
        [UpdatingLoginID]
    FROM [ImportTransactionLoadRow]
    WHERE [TransactionLoadID] = @ID
    ORDER BY [AddedOn] ASC
    OFFSET COALESCE(@Skip, 0) ROWS
    FETCH NEXT COALESCE(@Take, 1000) ROWS ONLY;
END

GO



